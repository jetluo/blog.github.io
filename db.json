{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/book/source/favicon.png","path":"favicon.png","modified":0,"renderable":1},{"_id":"themes/book/source/css/book.scss","path":"css/book.scss","modified":0,"renderable":1},{"_id":"themes/book/source/js/book-menu.js","path":"js/book-menu.js","modified":0,"renderable":1},{"_id":"themes/book/source/js/book-post.js","path":"js/book-post.js","modified":0,"renderable":1},{"_id":"themes/book/source/js/book-toc.js","path":"js/book-toc.js","modified":0,"renderable":1},{"_id":"themes/book/source/js/book.js","path":"js/book.js","modified":0,"renderable":1},{"_id":"source/cloudink8s/build.sh","path":"cloudink8s/build.sh","modified":0,"renderable":0},{"_id":"source/cloudink8s/init.sh","path":"cloudink8s/init.sh","modified":0,"renderable":0},{"_id":"source/cok-book/build.bat","path":"cok-book/build.bat","modified":0,"renderable":0},{"_id":"source/cok-book/init.bat","path":"cok-book/init.bat","modified":0,"renderable":0},{"_id":"source/img/home.jpg","path":"img/home.jpg","modified":0,"renderable":0},{"_id":"source/docker/assets/1.ccs-in-k8s-230b019e.png","path":"docker/assets/1.ccs-in-k8s-230b019e.png","modified":0,"renderable":0},{"_id":"source/docker/assets/1.ccs-in-k8s-5764c11c.png","path":"docker/assets/1.ccs-in-k8s-5764c11c.png","modified":0,"renderable":0},{"_id":"source/docker/assets/1.ccs-in-k8s-7aa18d7d.png","path":"docker/assets/1.ccs-in-k8s-7aa18d7d.png","modified":0,"renderable":0},{"_id":"source/docker/assets/1.ccs-in-k8s-a727e2c5.png","path":"docker/assets/1.ccs-in-k8s-a727e2c5.png","modified":0,"renderable":0},{"_id":"source/docker/assets/1.ccs-in-k8s-dbe82e59.png","path":"docker/assets/1.ccs-in-k8s-dbe82e59.png","modified":0,"renderable":0},{"_id":"source/docker/assets/1.ccs-in-k8s-e5f22393.png","path":"docker/assets/1.ccs-in-k8s-e5f22393.png","modified":0,"renderable":0},{"_id":"source/docker/assets/1.docker-infrustructure-75c043e9.png","path":"docker/assets/1.docker-infrustructure-75c043e9.png","modified":0,"renderable":0},{"_id":"source/docker/assets/1.docker-infrustructure-8f80df54.png","path":"docker/assets/1.docker-infrustructure-8f80df54.png","modified":0,"renderable":0},{"_id":"source/docker/assets/2.what-docker-todo-372ee802.png","path":"docker/assets/2.what-docker-todo-372ee802.png","modified":0,"renderable":0},{"_id":"source/docker/assets/2.what-docker-todo-860e7fc0.png","path":"docker/assets/2.what-docker-todo-860e7fc0.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.1.2docker-build-dockerfile-0159e81f.png","path":"docker/assets/3.1.2docker-build-dockerfile-0159e81f.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.1.docker-build-client-0a13bf6d.png","path":"docker/assets/3.1.docker-build-client-0a13bf6d.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.1.docker-build-client-22c49142.png","path":"docker/assets/3.1.docker-build-client-22c49142.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.1.docker-build-client-2832e624.png","path":"docker/assets/3.1.docker-build-client-2832e624.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.1.docker-build-client-2fb8c48f.png","path":"docker/assets/3.1.docker-build-client-2fb8c48f.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.1.docker-build-client-55282df1.png","path":"docker/assets/3.1.docker-build-client-55282df1.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.1.docker-build-client-5c442ad0.png","path":"docker/assets/3.1.docker-build-client-5c442ad0.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.1.docker-build-client-70a13111.png","path":"docker/assets/3.1.docker-build-client-70a13111.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.1.docker-build-client-af040c46.png","path":"docker/assets/3.1.docker-build-client-af040c46.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.1.docker-build-client-af64f5a8.png","path":"docker/assets/3.1.docker-build-client-af64f5a8.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.1.docker-build-client-fcd4285e.png","path":"docker/assets/3.1.docker-build-client-fcd4285e.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.1.docker-build-dockerfile-51113ade.png","path":"docker/assets/3.1.docker-build-dockerfile-51113ade.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.1.docker-build-dockerfile-5738e6c7.png","path":"docker/assets/3.1.docker-build-dockerfile-5738e6c7.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.1.docker-build-dockerfile-95b57c00.png","path":"docker/assets/3.1.docker-build-dockerfile-95b57c00.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.1.docker-build-dockerfile-d866744b.png","path":"docker/assets/3.1.docker-build-dockerfile-d866744b.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.2.docker-build-cloud-6357415e.png","path":"docker/assets/3.2.docker-build-cloud-6357415e.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.2.docker-build-cloud-74350e49.png","path":"docker/assets/3.2.docker-build-cloud-74350e49.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.2.docker-build-cloud-81f63f76.png","path":"docker/assets/3.2.docker-build-cloud-81f63f76.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.2.docker-build-cloud-d6ef43c8.png","path":"docker/assets/3.2.docker-build-cloud-d6ef43c8.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.3.docker-build-war-1c2f92f2.png","path":"docker/assets/3.3.docker-build-war-1c2f92f2.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.4.docker-build-npm-288a73a3.png","path":"docker/assets/3.4.docker-build-npm-288a73a3.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.5.docker-build-go-cab4c619.png","path":"docker/assets/3.5.docker-build-go-cab4c619.png","modified":0,"renderable":0},{"_id":"source/docker/assets/3.storage-in-k8s-2397258e.png","path":"docker/assets/3.storage-in-k8s-2397258e.png","modified":0,"renderable":0},{"_id":"source/docker/assets/5.1.docker-monitor-5ea2e6e9.png","path":"docker/assets/5.1.docker-monitor-5ea2e6e9.png","modified":0,"renderable":0},{"_id":"source/docker/assets/5.1.docker-monitor-78f4468e.png","path":"docker/assets/5.1.docker-monitor-78f4468e.png","modified":0,"renderable":0},{"_id":"source/docker/assets/5.1.docker-monitor-963b5ef4.png","path":"docker/assets/5.1.docker-monitor-963b5ef4.png","modified":0,"renderable":0},{"_id":"source/docker/assets/5.1.docker-monitor-980df022.png","path":"docker/assets/5.1.docker-monitor-980df022.png","modified":0,"renderable":0},{"_id":"source/docker/assets/5.2.docker-resource-036307e8.png","path":"docker/assets/5.2.docker-resource-036307e8.png","modified":0,"renderable":0},{"_id":"source/docker/assets/5.2.docker-resource-6c92d7e0.png","path":"docker/assets/5.2.docker-resource-6c92d7e0.png","modified":0,"renderable":0},{"_id":"source/docker/assets/README-52116020.png","path":"docker/assets/README-52116020.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/1.infrustructure-011dd82a.png","path":"cloudink8s/assets/1.infrustructure-011dd82a.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/1.infrustructure-1f6b245b.png","path":"cloudink8s/assets/1.infrustructure-1f6b245b.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/1.infrustructure-b8089c8d.png","path":"cloudink8s/assets/1.infrustructure-b8089c8d.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.1.export-images-0cd2a817.png","path":"cloudink8s/assets/10.1.export-images-0cd2a817.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.1.export-images-1344bea8.png","path":"cloudink8s/assets/10.1.export-images-1344bea8.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.1.export-images-562e7d6a.png","path":"cloudink8s/assets/10.1.export-images-562e7d6a.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.1.export-images-9244a427.png","path":"cloudink8s/assets/10.1.export-images-9244a427.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.2.import-images-1f4923cb.png","path":"cloudink8s/assets/10.2.import-images-1f4923cb.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.2.import-images-b894b65d.png","path":"cloudink8s/assets/10.2.import-images-b894b65d.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.2.import-images-d6e503a8.png","path":"cloudink8s/assets/10.2.import-images-d6e503a8.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.2.import-images-fe4432b5.png","path":"cloudink8s/assets/10.2.import-images-fe4432b5.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.3.app-create-04b7ca8f.png","path":"cloudink8s/assets/10.3.app-create-04b7ca8f.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.3.app-create-0695a4b8.png","path":"cloudink8s/assets/10.3.app-create-0695a4b8.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.3.app-create-084e3050.png","path":"cloudink8s/assets/10.3.app-create-084e3050.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.3.app-create-110a647f.png","path":"cloudink8s/assets/10.3.app-create-110a647f.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.3.app-create-12673d72.png","path":"cloudink8s/assets/10.3.app-create-12673d72.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.3.app-create-1820238e.png","path":"cloudink8s/assets/10.3.app-create-1820238e.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.3.app-create-1dc22aa8.png","path":"cloudink8s/assets/10.3.app-create-1dc22aa8.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.3.app-create-21407512.png","path":"cloudink8s/assets/10.3.app-create-21407512.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.3.app-create-27dcc76d.png","path":"cloudink8s/assets/10.3.app-create-27dcc76d.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.3.app-create-3988b087.png","path":"cloudink8s/assets/10.3.app-create-3988b087.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.3.app-create-8020ddd5.png","path":"cloudink8s/assets/10.3.app-create-8020ddd5.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.3.app-create-bd4eb83e.png","path":"cloudink8s/assets/10.3.app-create-bd4eb83e.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/10.3.app-create-dc5be485.png","path":"cloudink8s/assets/10.3.app-create-dc5be485.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.1.app-vpc-1ff93cf8.png","path":"cloudink8s/assets/2.1.app-vpc-1ff93cf8.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.1.app-vpc-4bcc35c8.png","path":"cloudink8s/assets/2.1.app-vpc-4bcc35c8.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.1.app-vpc-65398c36.png","path":"cloudink8s/assets/2.1.app-vpc-65398c36.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.1.app-vpc-a7643b78.png","path":"cloudink8s/assets/2.1.app-vpc-a7643b78.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.2.app-ip-3b3377c1.png","path":"cloudink8s/assets/2.2.app-ip-3b3377c1.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.2.app-ip-4b323317.png","path":"cloudink8s/assets/2.2.app-ip-4b323317.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.2.app-ip-5ea09f6d.png","path":"cloudink8s/assets/2.2.app-ip-5ea09f6d.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.2.app-ip-873498d9.png","path":"cloudink8s/assets/2.2.app-ip-873498d9.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.3.app-k8s-0f2a3a39.png","path":"cloudink8s/assets/2.3.app-k8s-0f2a3a39.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.3.app-k8s-1a543010.png","path":"cloudink8s/assets/2.3.app-k8s-1a543010.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.3.app-k8s-3e1e6129.png","path":"cloudink8s/assets/2.3.app-k8s-3e1e6129.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.3.app-k8s-7ab84881.png","path":"cloudink8s/assets/2.3.app-k8s-7ab84881.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.3.app-k8s-8784bd4a.png","path":"cloudink8s/assets/2.3.app-k8s-8784bd4a.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.3.app-k8s-b51148d0.png","path":"cloudink8s/assets/2.3.app-k8s-b51148d0.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.3.app-k8s-c9d7bd49.png","path":"cloudink8s/assets/2.3.app-k8s-c9d7bd49.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/2.3.app-k8s-f55c87b6.png","path":"cloudink8s/assets/2.3.app-k8s-f55c87b6.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.1.app-swr-48d4cf2b.png","path":"cloudink8s/assets/3.1.app-swr-48d4cf2b.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.1.app-swr-65c66a1d.png","path":"cloudink8s/assets/3.1.app-swr-65c66a1d.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.1.app-swr-b894b65d.png","path":"cloudink8s/assets/3.1.app-swr-b894b65d.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.1.app-swr-ce798493.png","path":"cloudink8s/assets/3.1.app-swr-ce798493.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.1.app-swr-d6e503a8.png","path":"cloudink8s/assets/3.1.app-swr-d6e503a8.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.1.app-swr-dec510e6.png","path":"cloudink8s/assets/3.1.app-swr-dec510e6.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.1.app-swr-e81418fc.png","path":"cloudink8s/assets/3.1.app-swr-e81418fc.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-05eb7a77.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-05eb7a77.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-0b16a4f8.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-0b16a4f8.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-0bf625fd.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-0bf625fd.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-2ed44802.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-2ed44802.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-316ca3d9.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-316ca3d9.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-3608c03b.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-3608c03b.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-415742ef.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-415742ef.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-431ef67b.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-431ef67b.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-47bcb21a.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-47bcb21a.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-53cafd27.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-53cafd27.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-55f6ff78.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-55f6ff78.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-56250529.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-56250529.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-56b35de6.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-56b35de6.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-8aac61ef.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-8aac61ef.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-a976bc41.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-a976bc41.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-b06aa32f.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-b06aa32f.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-bd824de7.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-bd824de7.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-bde3cc4b.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-bde3cc4b.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-c314373a.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-c314373a.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-c4909581.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-c4909581.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-d0b58328.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-d0b58328.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-dcd72da9.png","path":"cloudink8s/assets/3.2.app-deploy-k8s-dcd72da9.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.3.app-deploy-svc-111f9d4e.png","path":"cloudink8s/assets/3.3.app-deploy-svc-111f9d4e.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.3.app-deploy-svc-53c49e9e.png","path":"cloudink8s/assets/3.3.app-deploy-svc-53c49e9e.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.3.app-deploy-svc-be1b3956.png","path":"cloudink8s/assets/3.3.app-deploy-svc-be1b3956.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.3.app-deploy-svc-c0d39aad.png","path":"cloudink8s/assets/3.3.app-deploy-svc-c0d39aad.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/3.3.app-deploy-svc-f7749987.png","path":"cloudink8s/assets/3.3.app-deploy-svc-f7749987.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/4.app-monitor-525f26eb.png","path":"cloudink8s/assets/4.app-monitor-525f26eb.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/4.app-monitor-805de976.png","path":"cloudink8s/assets/4.app-monitor-805de976.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/4.app-monitor-c4b57eb0.png","path":"cloudink8s/assets/4.app-monitor-c4b57eb0.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/4.app-monitor-f07cb531.png","path":"cloudink8s/assets/4.app-monitor-f07cb531.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/5.infrustructure-86ce3b57.png","path":"cloudink8s/assets/5.infrustructure-86ce3b57.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/5.infrustructure-9d0486a4.png","path":"cloudink8s/assets/5.infrustructure-9d0486a4.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/6.1.app-vpc-07ddb9c5.png","path":"cloudink8s/assets/6.1.app-vpc-07ddb9c5.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/6.1.app-vpc-20cd37e1.png","path":"cloudink8s/assets/6.1.app-vpc-20cd37e1.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/6.1.app-vpc-5b85d130.png","path":"cloudink8s/assets/6.1.app-vpc-5b85d130.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/6.1.app-vpc-7f5a405f.png","path":"cloudink8s/assets/6.1.app-vpc-7f5a405f.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/6.1.app-vpc-919e2f5b.png","path":"cloudink8s/assets/6.1.app-vpc-919e2f5b.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/6.1.app-vpc-cc414a1b.png","path":"cloudink8s/assets/6.1.app-vpc-cc414a1b.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/6.2.app-ip-2d2824d9.png","path":"cloudink8s/assets/6.2.app-ip-2d2824d9.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/6.2.app-ip-5fa7dea8.png","path":"cloudink8s/assets/6.2.app-ip-5fa7dea8.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/6.2.app-ip-cf199e8d.png","path":"cloudink8s/assets/6.2.app-ip-cf199e8d.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/6.3.app-k8s-0352f379.png","path":"cloudink8s/assets/6.3.app-k8s-0352f379.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/6.3.app-k8s-dd9a738a.png","path":"cloudink8s/assets/6.3.app-k8s-dd9a738a.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.1.app-swr-1f4923cb.png","path":"cloudink8s/assets/7.1.app-swr-1f4923cb.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.1.app-swr-59307a6d.png","path":"cloudink8s/assets/7.1.app-swr-59307a6d.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.1.app-swr-bfb74b2a.png","path":"cloudink8s/assets/7.1.app-swr-bfb74b2a.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.1.app-swr-d40d2594.png","path":"cloudink8s/assets/7.1.app-swr-d40d2594.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.1.app-swr-f63aad82.png","path":"cloudink8s/assets/7.1.app-swr-f63aad82.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.1.app-swr-fe4432b5.png","path":"cloudink8s/assets/7.1.app-swr-fe4432b5.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-1a696690.png","path":"cloudink8s/assets/7.2.app-deploy-k8s-1a696690.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-210480f8.png","path":"cloudink8s/assets/7.2.app-deploy-k8s-210480f8.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-5cbcc485.png","path":"cloudink8s/assets/7.2.app-deploy-k8s-5cbcc485.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-6159afee.png","path":"cloudink8s/assets/7.2.app-deploy-k8s-6159afee.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-65116075.png","path":"cloudink8s/assets/7.2.app-deploy-k8s-65116075.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-9f15e7ef.png","path":"cloudink8s/assets/7.2.app-deploy-k8s-9f15e7ef.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-b2a8a281.png","path":"cloudink8s/assets/7.2.app-deploy-k8s-b2a8a281.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-c068a25d.png","path":"cloudink8s/assets/7.2.app-deploy-k8s-c068a25d.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-d872a607.png","path":"cloudink8s/assets/7.2.app-deploy-k8s-d872a607.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-f0eca9fe.png","path":"cloudink8s/assets/7.2.app-deploy-k8s-f0eca9fe.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.3.app-deploy-svc-1678f0be.png","path":"cloudink8s/assets/7.3.app-deploy-svc-1678f0be.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.3.app-deploy-svc-3e2203a8.png","path":"cloudink8s/assets/7.3.app-deploy-svc-3e2203a8.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/7.3.app-deploy-svc-ddbcbd49.png","path":"cloudink8s/assets/7.3.app-deploy-svc-ddbcbd49.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/8.app-monitor-17cec9b4.png","path":"cloudink8s/assets/8.app-monitor-17cec9b4.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/8.app-monitor-1a375ed3.png","path":"cloudink8s/assets/8.app-monitor-1a375ed3.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/8.app-monitor-3d6cc27f.png","path":"cloudink8s/assets/8.app-monitor-3d6cc27f.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/8.app-monitor-63c782c3.png","path":"cloudink8s/assets/8.app-monitor-63c782c3.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/8.app-monitor-a546062a.png","path":"cloudink8s/assets/8.app-monitor-a546062a.png","modified":0,"renderable":0},{"_id":"source/cloudink8s/assets/9.infrustructure-3740cdb3.png","path":"cloudink8s/assets/9.infrustructure-3740cdb3.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200512_180022_95.png","path":"cok-book/image/20200512_180022_95.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200512_180238_75.png","path":"cok-book/image/20200512_180238_75.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200512_180521_54.png","path":"cok-book/image/20200512_180521_54.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200512_180651_67.png","path":"cok-book/image/20200512_180651_67.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200512_180656_16.png","path":"cok-book/image/20200512_180656_16.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200512_180812_45.png","path":"cok-book/image/20200512_180812_45.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200521_114252_61.png","path":"cok-book/image/20200521_114252_61.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200521_132148_85.png","path":"cok-book/image/20200521_132148_85.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200521_132204_66.png","path":"cok-book/image/20200521_132204_66.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200521_133917_56.png","path":"cok-book/image/20200521_133917_56.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200521_161821_87.png","path":"cok-book/image/20200521_161821_87.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200521_161841_31.png","path":"cok-book/image/20200521_161841_31.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200521_165323_29.png","path":"cok-book/image/20200521_165323_29.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_194518_31.png","path":"cok-book/image/20200522_194518_31.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_200754_75.png","path":"cok-book/image/20200522_200754_75.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_200957_63.png","path":"cok-book/image/20200522_200957_63.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_201158_49.png","path":"cok-book/image/20200522_201158_49.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_201315_93.png","path":"cok-book/image/20200522_201315_93.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_202529_68.png","path":"cok-book/image/20200522_202529_68.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_202609_17.png","path":"cok-book/image/20200522_202609_17.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_213709_70.png","path":"cok-book/image/20200522_213709_70.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_213753_38.png","path":"cok-book/image/20200522_213753_38.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_214007_77.png","path":"cok-book/image/20200522_214007_77.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_214124_66.png","path":"cok-book/image/20200522_214124_66.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_214326_50.png","path":"cok-book/image/20200522_214326_50.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_214730_14.png","path":"cok-book/image/20200522_214730_14.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_214806_18.png","path":"cok-book/image/20200522_214806_18.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_215035_42.png","path":"cok-book/image/20200522_215035_42.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_215152_89.png","path":"cok-book/image/20200522_215152_89.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_215305_60.png","path":"cok-book/image/20200522_215305_60.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_215459_51.png","path":"cok-book/image/20200522_215459_51.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200522_215520_16.png","path":"cok-book/image/20200522_215520_16.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200526_113209_24.png","path":"cok-book/image/20200526_113209_24.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200526_115027_41.png","path":"cok-book/image/20200526_115027_41.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200526_130312_98.png","path":"cok-book/image/20200526_130312_98.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200526_134645_66.png","path":"cok-book/image/20200526_134645_66.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200526_144419_47.png","path":"cok-book/image/20200526_144419_47.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200526_144508_58.png","path":"cok-book/image/20200526_144508_58.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200526_144527_96.png","path":"cok-book/image/20200526_144527_96.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200526_145716_92.png","path":"cok-book/image/20200526_145716_92.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200526_223208_56.png","path":"cok-book/image/20200526_223208_56.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200526_225215_47.png","path":"cok-book/image/20200526_225215_47.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200526_232432_99.png","path":"cok-book/image/20200526_232432_99.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200527_132639_59.png","path":"cok-book/image/20200527_132639_59.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200527_133110_62.png","path":"cok-book/image/20200527_133110_62.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200527_133139_35.png","path":"cok-book/image/20200527_133139_35.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200527_134123_97.png","path":"cok-book/image/20200527_134123_97.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200527_134404_99.png","path":"cok-book/image/20200527_134404_99.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200527_134431_39.png","path":"cok-book/image/20200527_134431_39.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200527_134453_28.png","path":"cok-book/image/20200527_134453_28.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200527_134628_14.png","path":"cok-book/image/20200527_134628_14.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200527_142056_12.png","path":"cok-book/image/20200527_142056_12.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200527_180137_85.png","path":"cok-book/image/20200527_180137_85.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200527_180319_84.png","path":"cok-book/image/20200527_180319_84.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200527_181024_76.png","path":"cok-book/image/20200527_181024_76.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200527_182815_35.png","path":"cok-book/image/20200527_182815_35.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200528_113757_63.png","path":"cok-book/image/20200528_113757_63.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200528_113907_78.png","path":"cok-book/image/20200528_113907_78.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200528_113947_25.png","path":"cok-book/image/20200528_113947_25.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200528_114045_70.png","path":"cok-book/image/20200528_114045_70.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200528_114125_42.png","path":"cok-book/image/20200528_114125_42.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200528_114217_64.png","path":"cok-book/image/20200528_114217_64.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200528_122116_76.png","path":"cok-book/image/20200528_122116_76.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200528_123410_85.png","path":"cok-book/image/20200528_123410_85.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200528_123518_16.png","path":"cok-book/image/20200528_123518_16.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200529_100114_48.png","path":"cok-book/image/20200529_100114_48.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/20200529_100221_46.png","path":"cok-book/image/20200529_100221_46.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/ccs-infrustructure.png","path":"cok-book/image/ccs-infrustructure.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/ccs-login.png","path":"cok-book/image/ccs-login.png","modified":0,"renderable":0},{"_id":"source/cok-book/image/ccs-main.png","path":"cok-book/image/ccs-main.png","modified":0,"renderable":0}],"Cache":[{"_id":"source/home.md","hash":"9b9c597129769e47975516606bceb463e1bc5e36","modified":1626681104461},{"_id":"source/.DS_Store","hash":"1b1178695c2bc3a55aa1a9eb35fec593dbd1a9d2","modified":1626678502723},{"_id":"source/_posts/20210719blog.md","hash":"e42cfe94f726c80bfe4d1919c9f9f6ef7618fc0e","modified":1626680025725},{"_id":"source/menu.md","hash":"7309a389caeb6197fcd870c7bfa967d85a310e36","modified":1626679778893},{"_id":"source/docker/.DS_Store","hash":"b9d6775430fc995e3e4faf42864594334a679af9","modified":1626578666051},{"_id":"source/docker/1.ccs-in-k8s.md","hash":"5e6d895cc66c21c2ec39831f4b09c0937de381f1","modified":1610587165938},{"_id":"source/docker/1.docker-infrustructure.md","hash":"29e23f1f47365285a5e2621799d25cdc8fa8e131","modified":1610587165828},{"_id":"source/docker/2.database-in-k8s.md","hash":"91a42263c267593a7ff87f05cd25c663f6c84eef","modified":1610587165940},{"_id":"source/docker/3.1.1docker-build-client.md","hash":"4de832403aac89cad054ad9cc59c2fa6b67a2c82","modified":1610587165942},{"_id":"source/docker/2.what-docker-todo.md","hash":"5899b2d51382286d09bfb10acba1197fcb1e6e22","modified":1610587166017},{"_id":"source/docker/3.1.docker-build.md","hash":"7a39baa698c913d2d37e71fbe38dd07f70067fad","modified":1626617747746},{"_id":"source/docker/3.3.docker-build-war.md","hash":"9bf41602a4a7166f5ae0ec6c70ed01b814a7354a","modified":1610587166024},{"_id":"source/docker/3.1.2docker-build-dockerfile.md","hash":"d0c6313a0099aef702e7e0ccebbb2038a988b1a5","modified":1610587165830},{"_id":"source/docker/3.2.docker-build-cloud.md","hash":"c880aae9e91c9d0406845e9dad8ea3b5b38c9787","modified":1610587165831},{"_id":"source/docker/3.5.docker-build-go.md","hash":"8ebcc37d30558be86314baeec4ab9e680d946fe1","modified":1610587166029},{"_id":"source/docker/3.4.docker-build-npm.md","hash":"982c95ec8e16bc2d2deef8228c596e7801ae206c","modified":1610587166026},{"_id":"source/docker/3.docker-practice.md","hash":"e3e4bcc88db26dd1e6d6ba66d24291f17a63e2e0","modified":1610587166034},{"_id":"source/docker/3.6.docker-build-skill.md","hash":"b16516a10dae06861d97ad6cc8a5469fab1c2aa9","modified":1610587166031},{"_id":"source/docker/3.storage-in-k8s.md","hash":"9daa785a27a2625ffa2bc3a4d1f6cc5c19a9622f","modified":1610587165999},{"_id":"source/docker/4.2.docker-resource.md","hash":"42c975fed007ed770b0ff6f172c7ed15933a514d","modified":1610587166005},{"_id":"source/docker/4.1.docker-monitor.md","hash":"cd836cb7cf88ca4864980dfe7d9578e6eec47e9d","modified":1610587166001},{"_id":"source/docker/4.docker-diagnose.md","hash":"976be9a336b2a7c1b0930016c5f9766e0eb40611","modified":1610587166008},{"_id":"source/docker/README.md","hash":"9ecb18134d48b4f95174cb0c71401c47fc71fda3","modified":1626658598690},{"_id":"source/cloudink8s/.DS_Store","hash":"bc583c2714568df07b41453adb00208486c5315b","modified":1610587163940},{"_id":"source/cloudink8s/1.infrustructure.md","hash":"258181c0917a0a7da4b4e5190d51bfa0246b9bdb","modified":1610587164058},{"_id":"source/cloudink8s/10.1.export-images.md","hash":"9d563a4c200edc3f75f8d67a4bbcd674347edd53","modified":1610587163400},{"_id":"source/cloudink8s/10.2.import-images.md","hash":"99dd2243aedb045bc58fd5ccdc5bf78bfafdf11e","modified":1610587163403},{"_id":"source/cloudink8s/10.3.app-create.md","hash":"cf3737a79cc629b24fc9eec54c14ef632e88d6a8","modified":1610587163406},{"_id":"source/cloudink8s/2.1.app-vpc.md","hash":"f569633ee874f380879a8884bc428b276a9b3942","modified":1610587164060},{"_id":"source/cloudink8s/2.2.app-ip.md","hash":"b49a73e74efd00419493094420c67c0027cbbaad","modified":1610587164062},{"_id":"source/cloudink8s/10.app-deploy.md","hash":"9f6cb31bd1db3a341ae65ea0b1b3db053d1b9602","modified":1626623536646},{"_id":"source/cloudink8s/2.3.app-k8s.md","hash":"bf9d60b1ad9f85d904792b787a8a0f7361df033f","modified":1610587164064},{"_id":"source/cloudink8s/2.app-deploy.md","hash":"940b7dd7c820411501f54ba0275cd2c900e6790b","modified":1626623571050},{"_id":"source/cloudink8s/3.1.app-swr.md","hash":"97570a21188fea73651dbf634b584f0175cefa15","modified":1610587164069},{"_id":"source/cloudink8s/3.2.app-deploy-k8s.md","hash":"ce396cf9f888c75836ef4723d93b66097894e6fe","modified":1610587164071},{"_id":"source/cloudink8s/3.app-deploy.md","hash":"46bd91a7e092b13f7d32a7cc96ea06cd45c58f36","modified":1626623562190},{"_id":"source/cloudink8s/3.3.app-deploy-svc.md","hash":"77e1de6a80e983fb7bdb0ab2287e5ead9bc4cab8","modified":1610587164074},{"_id":"source/cloudink8s/6.1.app-k8s-create.md","hash":"ba51b0428b87f8049adee12b81219bde5db19488","modified":1610587163410},{"_id":"source/cloudink8s/4.app-monitor.md","hash":"afcf25ac8177d42ee47554c3f89edec04fc73ea3","modified":1610587164078},{"_id":"source/cloudink8s/5.infrustructure.md","hash":"d068c849b5ebdff9ed19d249b0946ebe71540961","modified":1610587164079},{"_id":"source/cloudink8s/6.1.app-vpc.md","hash":"fa71fa34cefa6eb01ac1016ff164012d44b1324a","modified":1610587164081},{"_id":"source/cloudink8s/6.2.app-ip.md","hash":"4bf6a81657cf37a08ceaf3afbf9ea636f36463f8","modified":1610587163412},{"_id":"source/cloudink8s/6.app-deploy.md","hash":"c8047096596bfc2edb4f50855ebb3d1ba59f2793","modified":1626623553959},{"_id":"source/cloudink8s/6.3.app-k8s.md","hash":"08fb0f1b144a04a4366eef3adcaec7c7261d35b8","modified":1610587163413},{"_id":"source/cloudink8s/7.1.app-swr.md","hash":"571f29cbe0dd971be9444fe5fa626b2226978102","modified":1610587163418},{"_id":"source/cloudink8s/7.2.app-deploy-k8s.md","hash":"b2cc1051e492910fdb0b313bbdbe1821c9378809","modified":1610587163420},{"_id":"source/cloudink8s/7.3.app-deploy-svc.md","hash":"94d5f748285712c9bfa8bfce295ffd79c98f1687","modified":1610587163422},{"_id":"source/cloudink8s/7.app-deploy.md","hash":"8f51fbdb12d791e74f291a03dee6ecde96c2adb3","modified":1626623545880},{"_id":"source/cloudink8s/8.app-monitor.md","hash":"283da777d2b077b8a0690fdfc7b13cc4e35f95f9","modified":1610587163424},{"_id":"source/cloudink8s/9.infrustructure.md","hash":"9fa1c12c69edbade547baa629a68c78847cecfcf","modified":1610587163426},{"_id":"source/cloudink8s/build.sh","hash":"529ba3da6c0a076fa05b74bbb3c4a11e80fd4b81","modified":1610587164085},{"_id":"source/cloudink8s/init.sh","hash":"ecda4b8226a0da306b5332d8b122c7880012eb75","modified":1610587164087},{"_id":"source/cloudink8s/README.md","hash":"71f954cf2783ae7452470cb3e7aafc00a0c91c84","modified":1626623399236},{"_id":"source/cok-book/3.2.project-to-k8s.md","hash":"48d0bcda3bcd641d4fc3fb07e04f4572baea0056","modified":1610587167715},{"_id":"source/cok-book/2.what-ccs-todo.md","hash":"987c5d6481c73b26ac1032cf3c98e6374a99ace6","modified":1610587167711},{"_id":"source/cok-book/1.ccs-infrustructure.md","hash":"6d4693338630cb0ecbbb91fc926bb567848e2149","modified":1610587167967},{"_id":"source/cok-book/3.1.project-to-docker.md","hash":"16b3ce8f26917f8a86faa04ef020f8ae4d788430","modified":1610587167713},{"_id":"source/cok-book/3.3.project-to-ccs.md","hash":"152ac331d61c7c2737326763365ae25440b1db30","modified":1610587167970},{"_id":"source/cok-book/3.project-practice.md","hash":"e48c04499224a2519d0d3867516677ba1ad181b8","modified":1610587167717},{"_id":"source/cok-book/4.1.ccs-main-deploy-scene-example-snv-maven.md","hash":"a43b746bc2f4e5dde87a939c836c110711cc4f38","modified":1610587167977},{"_id":"source/cok-book/4.2.ccs-main-deploy-scene-example-upload-jar.md","hash":"c689d1608154f27438b18cbe58e33db6be55f92c","modified":1610587167980},{"_id":"source/cok-book/4.4.ccs-main-deploy-scene-example-npm.md","hash":"52befe4bd8a993a142bdec2cb489a7db172b5d63","modified":1610587167985},{"_id":"source/cok-book/4.5.ccs-main-deploy-scene-example-soft-market.md","hash":"9296df7ad6cfc9ddac7a9be02da172d85e778163","modified":1610587167965},{"_id":"source/cok-book/4.3.ccs-main-deploy-scene-example-docker-image.md","hash":"9e239dd93e89ad9be521dc340b1da26e46ad9ce8","modified":1610587167982},{"_id":"source/cok-book/4.ccs-main-deploy-scene-example.md","hash":"0be8a6c54a51a040217d8ebdf760a2589f68453c","modified":1626677211615},{"_id":"source/cok-book/5.1.ccs-other-functions-monitor.md","hash":"2b30c681e1bac1d094eded210a46d245038903a4","modified":1610587167988},{"_id":"source/cok-book/5.ccs-other-functions.md","hash":"c7cc2d9c5c95f041b0e23f5c1054ba31dbd932a8","modified":1626677219285},{"_id":"source/cok-book/5.2.ccs-other-functions-logs.md","hash":"cf1948cfed2da0f10a27b3db655d8b1dac26a761","modified":1610587167991},{"_id":"source/cok-book/5.3.ccs-other-functions-version-ctl.md","hash":"b49d6e6774880d6e246089df37fcc10b7f5d44e8","modified":1610587167993},{"_id":"source/cok-book/6.deploy-main-points.md","hash":"0bc73535c795ffe2e344feafd9ed12afce03f65c","modified":1610587167723},{"_id":"source/cok-book/README.md","hash":"09dfdef62be454dafc3e69f467a6380e944d52c1","modified":1626677288606},{"_id":"source/cok-book/SUMMARY.md","hash":"e5fabc83e920704ba469607d2f2003a0d7915d39","modified":1610587167996},{"_id":"source/cok-book/init.bat","hash":"c9732cea850e97fc60aadaa300b34a4c3520c05b","modified":1610587167998},{"_id":"source/cok-book/build.bat","hash":"3b9e54eb16ea14368a2fc58c6eead425010860b6","modified":1610587167875},{"_id":"source/docker/assets/2.what-docker-todo-372ee802.png","hash":"ec120b7a422e6ce17e5f44a7852215dbb7a3ddc0","modified":1610587165867},{"_id":"source/docker/assets/3.1.docker-build-client-55282df1.png","hash":"146900cc5c6d82d681f5689af4aab59a99dde3fd","modified":1610587165882},{"_id":"source/docker/assets/3.1.docker-build-client-5c442ad0.png","hash":"6ba05287976934bb5a2e9039a51370b73f370927","modified":1610587165885},{"_id":"source/docker/assets/3.1.docker-build-client-70a13111.png","hash":"e1922e6e8d3ea8a3c2e95a4402eb5ac83c15256e","modified":1610587165888},{"_id":"source/docker/assets/3.1.docker-build-client-fcd4285e.png","hash":"3e6d72c6eb92bd92d31a877e9aa974ce8a80c93b","modified":1610587165896},{"_id":"source/docker/assets/3.1.docker-build-dockerfile-51113ade.png","hash":"67dd3c24e7fe2a1ede0e2a0b90db66367392954b","modified":1610587165898},{"_id":"source/docker/assets/3.1.docker-build-dockerfile-d866744b.png","hash":"f21640383ea281dfe15c2f3f666c4fd3eec28307","modified":1610587165903},{"_id":"source/docker/assets/3.3.docker-build-war-1c2f92f2.png","hash":"49d99f1ffbd9a8088bed9d8b31f5f54c062a79d4","modified":1610587165915},{"_id":"source/docker/assets/3.2.docker-build-cloud-d6ef43c8.png","hash":"f92e29f7aa3c3419afc8c99e6bd2a1f49c8c2f3c","modified":1610587165913},{"_id":"source/docker/assets/3.4.docker-build-npm-288a73a3.png","hash":"0e23191e751ae47ea3bcfebe980c6d14f9e0912d","modified":1610587165916},{"_id":"source/docker/assets/3.5.docker-build-go-cab4c619.png","hash":"17fb001103cef75a151f3abe21b23218256697f9","modified":1610587165919},{"_id":"source/docker/assets/5.1.docker-monitor-5ea2e6e9.png","hash":"6310ede04f13eaef97d9bbb8cee9c34170f81932","modified":1610587165921},{"_id":"source/docker/assets/5.1.docker-monitor-963b5ef4.png","hash":"98490b860b9cc072a6dc5b6ff3bf27e4e52b7641","modified":1610587165926},{"_id":"source/docker/assets/README-52116020.png","hash":"0d2082a2f9d0a527eb93a5424e77c9b6e0ff856b","modified":1610587165937},{"_id":"source/docker/assets/5.2.docker-resource-6c92d7e0.png","hash":"1167c46e4e15d05e1d0b4c5ad69aba5acb43d667","modified":1610587165933},{"_id":"source/cloudink8s/assets/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1610587163584},{"_id":"source/cloudink8s/assets/10.1.export-images-0cd2a817.png","hash":"4c2c7d8378f36eb5ec2e3e312b9bdbba2209a1f6","modified":1610587163431},{"_id":"source/cloudink8s/assets/2.1.app-vpc-1ff93cf8.png","hash":"f899aaf9457195865598900b1206aed38ee9a0ca","modified":1610587163597},{"_id":"source/cloudink8s/assets/2.2.app-ip-4b323317.png","hash":"1c344d9a9d1243786f337581ef0d85cc67d239f0","modified":1610587163610},{"_id":"source/cloudink8s/assets/2.3.app-k8s-f55c87b6.png","hash":"3de860956e7819b7246e6dbbac3ff41f1f871bbe","modified":1610587163642},{"_id":"source/cloudink8s/assets/3.1.app-swr-48d4cf2b.png","hash":"11f312a0da18525f112fe4e5b09e68e240fb4ce2","modified":1610587163644},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-3608c03b.png","hash":"583842c5ed2e6b54e65f426e4190ba01d887a4f7","modified":1610587163858},{"_id":"source/cloudink8s/assets/4.app-monitor-525f26eb.png","hash":"d7c8e0c2f99beadad46321bb27755ca8d25a3d67","modified":1610587163916},{"_id":"source/cloudink8s/assets/6.1.app-vpc-cc414a1b.png","hash":"8ee8c95dc9651fcd2e286d4052989201c097e47a","modified":1610587163507},{"_id":"source/cloudink8s/assets/6.2.app-ip-5fa7dea8.png","hash":"d97ab183a9cf07dcd4fcd8ae75d23d332c908c65","modified":1610587163935},{"_id":"source/cloudink8s/assets/9.infrustructure-3740cdb3.png","hash":"ff695d679fcf598056c89692da2a1374adc4d0fb","modified":1610587163582},{"_id":"source/cok-book/image/20200512_180022_95.png","hash":"04c3a654b0fe59231a939580bb8271bef137ade0","modified":1610587167746},{"_id":"source/cok-book/image/20200512_180521_54.png","hash":"72bae5ec9249bf1b346ebdd1d605a9ac932a1a46","modified":1610587167750},{"_id":"source/cok-book/image/20200512_180238_75.png","hash":"c14503340a10ebd81dbab11b70bc0374c902873c","modified":1610587167748},{"_id":"source/cok-book/image/20200512_180651_67.png","hash":"9c87bcb793ae3c5d73a85965b846ad2e45758bda","modified":1610587167751},{"_id":"source/cok-book/image/20200512_180812_45.png","hash":"2361ad5dabe8093035b35ea3ba3e3350609fcb01","modified":1610587167756},{"_id":"source/cok-book/image/20200512_180656_16.png","hash":"9c87bcb793ae3c5d73a85965b846ad2e45758bda","modified":1610587167754},{"_id":"source/cok-book/image/20200521_114252_61.png","hash":"ad3a18d3fb97f58c11fa44887d8bdf09da887459","modified":1610587167758},{"_id":"source/cok-book/image/20200521_132204_66.png","hash":"4134cf2ea2c02f61f4ebf427fada5e1339030ee6","modified":1610587167762},{"_id":"source/cok-book/image/20200521_133917_56.png","hash":"44f963e7b9be84f11f9001535c1c68edb2af5f95","modified":1610587167764},{"_id":"source/cok-book/image/20200521_161821_87.png","hash":"921e9827c2f9d2d1cc3df6aa319f4ff3ec22553c","modified":1610587167765},{"_id":"source/cok-book/image/20200521_161841_31.png","hash":"63ffaa1f3831da13abe8ff0094a8ed90606b7f90","modified":1610587167767},{"_id":"source/cok-book/image/20200521_165323_29.png","hash":"a2d37a3cf046f604c61af8321d3f84d170ee9d9d","modified":1610587167769},{"_id":"source/cok-book/image/20200522_194518_31.png","hash":"4e0b35cf87c51b37b21531b2f3ffa4227241350d","modified":1610587167771},{"_id":"source/cok-book/image/20200522_200754_75.png","hash":"477ec9bdf26f3889aba2a1c26f8c339599d9f20a","modified":1610587167773},{"_id":"source/cok-book/image/20200522_200957_63.png","hash":"18a6cb7288803ecb461abe11c67cd0b66323c89a","modified":1610587167774},{"_id":"source/cok-book/image/20200522_201158_49.png","hash":"25d28860aa4de2f6532aebe32bcabbc4afaac29e","modified":1610587167776},{"_id":"source/cok-book/image/20200522_201315_93.png","hash":"6c653511c066ebd48390ec4db216b7155d0364ce","modified":1610587167778},{"_id":"source/cok-book/image/20200522_202529_68.png","hash":"b505dbf1b46da278674291d6c05f6368503c00fd","modified":1610587167780},{"_id":"source/cok-book/image/20200522_213709_70.png","hash":"dda2dcff7669bd553d9aeeef4ad45a12843311fc","modified":1610587167786},{"_id":"source/cok-book/image/20200522_213753_38.png","hash":"8b76a94108eea5490602d4143fdfc05d128ecadd","modified":1610587167788},{"_id":"source/cok-book/image/20200522_214007_77.png","hash":"54020b9f2758dab6d6230059c7942693ec5eafd7","modified":1610587167789},{"_id":"source/cok-book/image/20200522_214124_66.png","hash":"d23b5b6d30dd859b5a5802301a2ccacbd03adcbb","modified":1610587167791},{"_id":"source/cok-book/image/20200522_214326_50.png","hash":"ecbfe6c67f8e2293c88886c3e3e31f876c4cdbdc","modified":1610587167793},{"_id":"source/cok-book/image/20200522_214730_14.png","hash":"b8f359c2feeadc587f11f0568ba8a83391b7b5a8","modified":1610587167796},{"_id":"source/cok-book/image/20200522_214806_18.png","hash":"0e1245a8d86856e7c9aab22bcae14c1c9f2f8887","modified":1610587167799},{"_id":"source/cok-book/image/20200522_215152_89.png","hash":"0d0263a4b659dae5cf1b46a8369b34b6b8206f93","modified":1610587167804},{"_id":"source/cok-book/image/20200522_215035_42.png","hash":"2a5493d21933e3616a22f98c2da8f7ab097a88e6","modified":1610587167802},{"_id":"source/cok-book/image/20200522_215459_51.png","hash":"614508cee0e82b53b21ef08afcc8895874d4ac9a","modified":1610587167810},{"_id":"source/cok-book/image/20200522_215520_16.png","hash":"3729e3c5af8cd7e409a2d3ef5c2e8702750bf370","modified":1610587167813},{"_id":"source/cok-book/image/20200526_130312_98.png","hash":"42270a40e816d9a6ab7f9b676a71bfe4c69acaf2","modified":1610587167824},{"_id":"source/cok-book/image/20200526_115027_41.png","hash":"3aac094ad0d4f67e7687e597229e51f239694088","modified":1610587167821},{"_id":"source/cok-book/image/20200526_144508_58.png","hash":"007871d1cdd7743ca96e4a1e9b7ec9506309b977","modified":1610587167831},{"_id":"source/cok-book/image/20200526_144527_96.png","hash":"2b0506b0f065f73b017e302975f647cb13392b8b","modified":1610587167833},{"_id":"source/cok-book/image/20200526_223208_56.png","hash":"837c7729a93b7e90ca6522584804b323624de044","modified":1610587167837},{"_id":"source/cok-book/image/20200526_232432_99.png","hash":"9c981476d800fcb50cf623be62fc162a89e80f82","modified":1610587167840},{"_id":"source/cok-book/image/20200526_225215_47.png","hash":"f291949d50cf6281e1d58ae3e5fc6a7381ea6342","modified":1610587167839},{"_id":"source/cok-book/image/20200527_132639_59.png","hash":"09f1f29ae23cef5d3758cb0b4daefb88c99c0502","modified":1610587167842},{"_id":"source/cok-book/image/20200527_134123_97.png","hash":"caf32b502c632d452dbc3fbf4934562b2d20c7ee","modified":1610587167848},{"_id":"source/cok-book/image/20200527_134404_99.png","hash":"ae3f38946fc456c94a55d4bf62740077830f8368","modified":1610587167850},{"_id":"source/cok-book/image/20200527_134431_39.png","hash":"f4b5672f8d91dd10f5614fa3698488020bcd2853","modified":1610587167853},{"_id":"source/cok-book/image/20200527_134453_28.png","hash":"0a33eb63fd4dc636893c353706cca92c657772e9","modified":1610587167854},{"_id":"source/cok-book/image/20200527_134628_14.png","hash":"3cbf28a28b0a52746a7c6ef249329afb221f5ca8","modified":1610587167856},{"_id":"source/cok-book/image/20200527_142056_12.png","hash":"c06aee40ce9c437b10310e33e1b6a2a4c385e900","modified":1610587167858},{"_id":"source/cok-book/image/20200527_180137_85.png","hash":"a1abba7114e267e030a8e03893ff1f3a0e60637a","modified":1610587167860},{"_id":"source/cok-book/image/20200528_113757_63.png","hash":"2d2cec81d4231777c465ed5ed772c4fd30d643f9","modified":1610587167735},{"_id":"source/cok-book/image/20200528_113907_78.png","hash":"72e61384e8f9109b9be23052cf09b60c4097eb3c","modified":1610587167737},{"_id":"source/cok-book/image/20200528_113947_25.png","hash":"903677b24e544e90b47a769029902a354600156c","modified":1610587167738},{"_id":"source/cok-book/image/20200528_114045_70.png","hash":"60749a9f987b4ecc211c33d5f3da4fd79a63ebff","modified":1610587167740},{"_id":"source/cok-book/image/20200528_114125_42.png","hash":"9200b5ff16395e2f578ed5294c1f26e2587dd0c0","modified":1610587167742},{"_id":"source/cok-book/image/20200528_122116_76.png","hash":"469b17d1a8e4619aeca034bdf083c2685ef2af38","modified":1610587167726},{"_id":"source/cok-book/image/20200528_123410_85.png","hash":"d85c9421cb633c7cb1590515414edee137757310","modified":1610587167728},{"_id":"source/cok-book/image/20200528_123518_16.png","hash":"2502cb71921d4a36f0f61ec091da36bb5815ac53","modified":1610587167730},{"_id":"source/cok-book/image/ccs-infrustructure.png","hash":"ff695d679fcf598056c89692da2a1374adc4d0fb","modified":1610587167868},{"_id":"source/cok-book/image/20200529_100221_46.png","hash":"957c2b9586e3b516308ab9fbe3db75facdcf3e7c","modified":1610587167733},{"_id":"source/cok-book/image/20200529_100114_48.png","hash":"d57b5d271fec49373906c7a4c1c42db3c5ce2e41","modified":1610587167731},{"_id":"source/docker/assets/1.ccs-in-k8s-230b019e.png","hash":"0d4c8862c5d18d0ea00b408279d708efcc6d1ba9","modified":1610587165854},{"_id":"source/docker/assets/1.docker-infrustructure-8f80df54.png","hash":"a9f13780b16692b3f5bdcba123e3fd34fc2c75d7","modified":1610587165864},{"_id":"source/docker/assets/1.docker-infrustructure-75c043e9.png","hash":"0391d9b41fa9e4d0b5b3f4382d4b8c571827e0cc","modified":1610587165861},{"_id":"source/docker/assets/3.1.2docker-build-dockerfile-0159e81f.png","hash":"d9e989d2df4a5cf48d043f1b97986cf5afab87b7","modified":1610587165837},{"_id":"source/docker/assets/3.1.docker-build-client-2fb8c48f.png","hash":"e20153adf98b03e1b0e470cf06e8a1c8de382842","modified":1610587165881},{"_id":"source/docker/assets/3.1.docker-build-client-2832e624.png","hash":"c18557e773c72011a78c92465a967beaecaef591","modified":1610587165879},{"_id":"source/docker/assets/3.1.docker-build-dockerfile-5738e6c7.png","hash":"3975ca9ee44213fb7b399874a3e3f664fac26fbb","modified":1610587165900},{"_id":"source/docker/assets/3.2.docker-build-cloud-6357415e.png","hash":"7bfe8f4d8d0c403231b88e179938591aa2d4c3db","modified":1610587165906},{"_id":"source/docker/assets/3.1.docker-build-dockerfile-95b57c00.png","hash":"a36087caee45f8d63515fef0c02e93df96d90762","modified":1610587165902},{"_id":"source/docker/assets/3.2.docker-build-cloud-81f63f76.png","hash":"d68e64e19bf89baea72b4b43964f3ee35ff6c394","modified":1610587165911},{"_id":"source/docker/assets/5.2.docker-resource-036307e8.png","hash":"ce01ef434af2a4a5a25cfcc1ec3df6c271cbecf0","modified":1610587165931},{"_id":"source/cloudink8s/assets/10.1.export-images-9244a427.png","hash":"a6d9543c81b8feed339de7503280046fc6b25033","modified":1610587163441},{"_id":"source/cloudink8s/assets/10.3.app-create-12673d72.png","hash":"bc8df010c74d9367dac9f9a9dedd826a19a6645a","modified":1610587163469},{"_id":"source/cloudink8s/assets/10.3.app-create-27dcc76d.png","hash":"e14ab1f827e00e9f4b0280309dc8c7691a949929","modified":1610587163480},{"_id":"source/cloudink8s/assets/10.3.app-create-dc5be485.png","hash":"01e06040168736300d8432f86d7aefc5c7c2daae","modified":1610587163490},{"_id":"source/cloudink8s/assets/2.2.app-ip-873498d9.png","hash":"f6e75c117343eac41126d003006c1e62b1313b33","modified":1610587163614},{"_id":"source/cloudink8s/assets/3.1.app-swr-dec510e6.png","hash":"68670551aaafd4f4b70ea93a022a19c9f52fe397","modified":1610587163657},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-0b16a4f8.png","hash":"d74882655b54a5fafece0e2036be8e660b18c04c","modified":1610587163846},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-415742ef.png","hash":"583ec8d437776fb5fb3fa2a51b954b0f181a380b","modified":1610587163860},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-47bcb21a.png","hash":"48e321ece070f0a097f2c6275b4b16cf37870608","modified":1610587163865},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-431ef67b.png","hash":"76a35d48c9bb1db6f793c27bef9fab5da73d05a2","modified":1610587163863},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-bde3cc4b.png","hash":"9b8eadfffe387bf071665534a00891091209d2a2","modified":1610587163886},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-dcd72da9.png","hash":"ae378024b88243f1067e286fdadc52494fdf1ef7","modified":1610587163899},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-c4909581.png","hash":"3f43c0f909d39383725b469b2dc3add261565472","modified":1610587163892},{"_id":"source/cloudink8s/assets/3.3.app-deploy-svc-f7749987.png","hash":"c23bd478f4523e6f59a91d531cd50dc5fe025647","modified":1610587163914},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-b2a8a281.png","hash":"811632ecf49718a2bdda298dd2515b16b74f2b58","modified":1610587163548},{"_id":"source/cok-book/image/20200521_132148_85.png","hash":"58150f3ef91f1428d4fc2732c126d82cb4db9fab","modified":1610587167760},{"_id":"source/cok-book/image/20200522_202609_17.png","hash":"d1c3533907e2d86c26bf136c80ffc67b1a64c30c","modified":1610587167783},{"_id":"source/cok-book/image/20200522_215305_60.png","hash":"26d13622ecffec802c14bd4cdcbb5f41d0d9b016","modified":1610587167807},{"_id":"source/cok-book/image/20200526_113209_24.png","hash":"735c5e57ddf0c0165372b610561a6c7ff68982c1","modified":1610587167817},{"_id":"source/cok-book/image/20200526_144419_47.png","hash":"a16c4d7cf2f87a0a020ad9d4afa85f2e712b0f99","modified":1610587167829},{"_id":"source/cok-book/image/20200526_134645_66.png","hash":"e739953334bbc4f42ef7f59301f1f6ad7902363f","modified":1610587167826},{"_id":"source/cok-book/image/20200527_133110_62.png","hash":"648b7dc5f94a7011603e6a769a8ca4315ccc9304","modified":1610587167844},{"_id":"source/cok-book/image/20200526_145716_92.png","hash":"252608737d5e390cbe35fbdfef86211d62a84192","modified":1610587167835},{"_id":"source/cok-book/image/20200527_133139_35.png","hash":"60b2617fdc34e090b8869574dbaad46cb2da1934","modified":1610587167847},{"_id":"source/cok-book/image/20200527_182815_35.png","hash":"f6890fb20dc21a93db3370058c12e260483fd801","modified":1610587167866},{"_id":"source/cok-book/image/20200527_181024_76.png","hash":"ee3a38f9b027e3b3cc4965908164974a4ff2897d","modified":1610587167864},{"_id":"source/cok-book/image/20200527_180319_84.png","hash":"2c70dadba147e69053d6799330939cd846820552","modified":1610587167862},{"_id":"source/cok-book/image/20200528_114217_64.png","hash":"0896455735ed942811df8c6d07434ace43201808","modified":1610587167744},{"_id":"source/docker/assets/1.ccs-in-k8s-7aa18d7d.png","hash":"fd44d81094fcffb284907497c223b661616ebff8","modified":1610587165840},{"_id":"source/docker/assets/1.ccs-in-k8s-5764c11c.png","hash":"a62418eafe0bffeebfddc484ceba572b1daf8f92","modified":1610587165857},{"_id":"source/docker/assets/3.1.docker-build-client-0a13bf6d.png","hash":"367f173db9ffcf55a5ccdc7376210fba23c059ed","modified":1610587165874},{"_id":"source/docker/assets/3.storage-in-k8s-2397258e.png","hash":"b20be5c44e33585e2a45ae6626e6885cde9583d0","modified":1610587165852},{"_id":"source/cloudink8s/assets/10.2.import-images-b894b65d.png","hash":"8823bf5038c853a534bb975417a4cc1265eb9e5f","modified":1610587163446},{"_id":"source/cloudink8s/assets/2.1.app-vpc-a7643b78.png","hash":"28ca9cae1153ce4ee695a0fecd609bc1b9070149","modified":1610587163605},{"_id":"source/cloudink8s/assets/2.2.app-ip-3b3377c1.png","hash":"a02b282cfdc0dedabdbb7a800204691e3d06c68a","modified":1610587163608},{"_id":"source/cloudink8s/assets/2.2.app-ip-5ea09f6d.png","hash":"66837f173c9eeb011396e4d0bd63c27b619714de","modified":1610587163612},{"_id":"source/cloudink8s/assets/2.3.app-k8s-0f2a3a39.png","hash":"36e80db67426104428512b7133d2ddbcfea65edd","modified":1610587163616},{"_id":"source/cloudink8s/assets/2.3.app-k8s-1a543010.png","hash":"2a7f0570a8ddc260c223aa35cc58ed86bb1878cb","modified":1610587163619},{"_id":"source/cloudink8s/assets/2.3.app-k8s-7ab84881.png","hash":"acf7c2d55153908ae5b6d8c29496ab3545406d7b","modified":1610587163627},{"_id":"source/cloudink8s/assets/2.3.app-k8s-8784bd4a.png","hash":"4b2bf35c721980638c3421a4eec384fdc1477ad2","modified":1610587163631},{"_id":"source/cloudink8s/assets/2.3.app-k8s-b51148d0.png","hash":"caed2ed6ea4d2b679b6652e5e84ba0516082ddea","modified":1610587163635},{"_id":"source/cloudink8s/assets/3.1.app-swr-ce798493.png","hash":"657809275855da2136c32cf898c0b4c92dc1b9a8","modified":1610587163652},{"_id":"source/cloudink8s/assets/3.1.app-swr-65c66a1d.png","hash":"5f410018061a07643cbe54c63e13e2d072730de5","modified":1610587163647},{"_id":"source/cloudink8s/assets/3.1.app-swr-b894b65d.png","hash":"8823bf5038c853a534bb975417a4cc1265eb9e5f","modified":1610587163649},{"_id":"source/cloudink8s/assets/3.1.app-swr-e81418fc.png","hash":"4c1d4ed3f9d4634bcd111a6258a028130c67b282","modified":1610587163664},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-0bf625fd.png","hash":"0d7558c4a478e628f940d99832e21470e969ab8e","modified":1610587163850},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-316ca3d9.png","hash":"85ed20b45726058950cb0d11188fe285b59f5f71","modified":1610587163856},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-55f6ff78.png","hash":"ae2aaee7371d47ad1d5d9c63b0bc5b960a3446a4","modified":1610587163869},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-53cafd27.png","hash":"ddcdd835481473409c1afdc8786bf39d4504fc72","modified":1610587163867},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-56250529.png","hash":"e2cfcac6a91a07a3b8f0e581628f1b892346c33d","modified":1610587163872},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-56b35de6.png","hash":"7272947e1a77d19d5bb1fb944451c855919dad34","modified":1610587163874},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-bd824de7.png","hash":"d3f3456cbec4127de3734d0411f21804f0f22301","modified":1610587163884},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-b06aa32f.png","hash":"0bae18c62bc11c8b85ca81b9bb72b4dd8a38c850","modified":1610587163881},{"_id":"source/cloudink8s/assets/3.3.app-deploy-svc-53c49e9e.png","hash":"2cc23ecec94f0e91b16fec031657e19783b1c1a9","modified":1610587163906},{"_id":"source/cloudink8s/assets/5.infrustructure-86ce3b57.png","hash":"22360ac02f6c2bf4602c9f6fb026d3abd0eee73a","modified":1610587163927},{"_id":"source/cloudink8s/assets/6.1.app-vpc-07ddb9c5.png","hash":"38a90069a0b9a9050b58d51fd976b714b7473b8a","modified":1610587163493},{"_id":"source/cloudink8s/assets/6.1.app-vpc-7f5a405f.png","hash":"7833844748d1aefcfa1834147bc416a7cac15e4e","modified":1610587163502},{"_id":"source/cloudink8s/assets/7.1.app-swr-bfb74b2a.png","hash":"cdf53b16b0ae3ecf69ea00d8abe9cb956b7e556a","modified":1610587163521},{"_id":"source/cloudink8s/assets/7.1.app-swr-f63aad82.png","hash":"f22407d4002cbaf8f3971007ed04e21fdc3351dc","modified":1610587163526},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-f0eca9fe.png","hash":"e7c6be75511471a4d3ca8512f8981796126ccfaa","modified":1610587163556},{"_id":"source/docker/assets/1.ccs-in-k8s-e5f22393.png","hash":"7a2d78569ad7f8fd491a4bce8747a57bc59035e3","modified":1610587165849},{"_id":"source/docker/assets/3.1.docker-build-client-22c49142.png","hash":"03a390e566cc2ff41b289457e3d84d7cc3c00fe7","modified":1610587165876},{"_id":"source/docker/assets/3.1.docker-build-client-af64f5a8.png","hash":"321616ea31cc75ae8955415148ec48e1814fd3f0","modified":1610587165894},{"_id":"source/docker/assets/3.2.docker-build-cloud-74350e49.png","hash":"26988fbee1143bd7269d2318455bd8b7f8c363ac","modified":1610587165909},{"_id":"source/docker/assets/5.1.docker-monitor-78f4468e.png","hash":"8b99d9c8d7d88e5444cf39b20431eeffedca9fa8","modified":1610587165924},{"_id":"source/cloudink8s/assets/10.3.app-create-0695a4b8.png","hash":"f4d3bb205e4a0b5fa9cd7baee13380a00c0fa373","modified":1610587163457},{"_id":"source/cloudink8s/assets/10.3.app-create-1dc22aa8.png","hash":"afb9d32ed7906d80f862324509ab3fb39404808d","modified":1610587163475},{"_id":"source/cloudink8s/assets/10.3.app-create-3988b087.png","hash":"5e1cb0806fec8edcdf7377318be84c1bd09280a8","modified":1610587163482},{"_id":"source/cloudink8s/assets/2.1.app-vpc-65398c36.png","hash":"e2ebd8640fc9ae734320bbd8666423104e8d7ce0","modified":1610587163603},{"_id":"source/cloudink8s/assets/2.3.app-k8s-3e1e6129.png","hash":"0f0709ec7ee8f998041cd0099a21807bc6f56183","modified":1610587163623},{"_id":"source/cloudink8s/assets/3.1.app-swr-d6e503a8.png","hash":"2c37208247c1d2193caeb22d7a221cc48bf97fb9","modified":1610587163655},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-05eb7a77.png","hash":"78926a6e97073647c3e31ec79a58b662edc00654","modified":1610587163841},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-2ed44802.png","hash":"2026461891417f2662cd4d6a954a81f22b5f5b18","modified":1610587163854},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-d0b58328.png","hash":"f3e6118d57e85e8cc785131914d5a90c667201e4","modified":1610587163896},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-c314373a.png","hash":"027c601432b206c1339bd34721f3032acbfff8d0","modified":1610587163889},{"_id":"source/cloudink8s/assets/3.3.app-deploy-svc-c0d39aad.png","hash":"7dd7c572b11b6638de91e7d2a5448de9302a303b","modified":1610587163912},{"_id":"source/cloudink8s/assets/4.app-monitor-f07cb531.png","hash":"077a88e08c500688180622fa01791f719c92532c","modified":1610587163924},{"_id":"source/cloudink8s/assets/6.2.app-ip-2d2824d9.png","hash":"8064e9b0e70ef755045115f19857599d87b8732c","modified":1610587163933},{"_id":"source/cloudink8s/assets/6.3.app-k8s-dd9a738a.png","hash":"611a5ad053920d663ec66d7d11036dba7bf78213","modified":1610587163512},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-6159afee.png","hash":"9f3d09daba797d46fa8c2e5c60d270b5ddc8a24e","modified":1610587163541},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-c068a25d.png","hash":"2e71e08a43e0e13e2b63ee7bd57c7577ac4ddf4d","modified":1610587163552},{"_id":"source/cloudink8s/assets/8.app-monitor-a546062a.png","hash":"bffb75e06c0452564bc63a99027a292e889e2542","modified":1610587163580},{"_id":"source/cloudink8s/assets/10.3.app-create-04b7ca8f.png","hash":"f6a25da2342148d5796ee99621f906c8143d2efd","modified":1610587163454},{"_id":"source/cloudink8s/assets/10.3.app-create-21407512.png","hash":"84ae41f01367ea300785c39345c2e34956074936","modified":1610587163478},{"_id":"source/cloudink8s/assets/10.3.app-create-bd4eb83e.png","hash":"700fa1f125cdde3e6784f312c949945015b04b35","modified":1610587163488},{"_id":"source/cloudink8s/assets/10.3.app-create-8020ddd5.png","hash":"97566aacee9294e479656293dc2b32512075f3a9","modified":1610587163485},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-8aac61ef.png","hash":"f0bdacb8f80777e6c96ef358551596111893dfd7","modified":1610587163877},{"_id":"source/cloudink8s/assets/3.3.app-deploy-svc-be1b3956.png","hash":"83e7abbd5df896c14a1757218af5f67a8fd77887","modified":1610587163908},{"_id":"source/cloudink8s/assets/3.3.app-deploy-svc-111f9d4e.png","hash":"197899856c7c0ddce6dadaa0baa4ee6493b5b7f8","modified":1610587163903},{"_id":"source/cloudink8s/assets/4.app-monitor-c4b57eb0.png","hash":"ca12d50117b7cd8c1208d689c15a375f06734857","modified":1610587163922},{"_id":"source/cloudink8s/assets/6.2.app-ip-cf199e8d.png","hash":"31ed41240ef3c0d82ac40d0344357d32abcdb2eb","modified":1610587163938},{"_id":"source/cloudink8s/assets/7.1.app-swr-59307a6d.png","hash":"af62101e285db84ec02d2c42875eae3748332e0b","modified":1610587163518},{"_id":"source/cloudink8s/assets/7.1.app-swr-d40d2594.png","hash":"e3f14dac2ccebe8032d8c941d50647b677dfa001","modified":1610587163523},{"_id":"source/cloudink8s/assets/7.1.app-swr-1f4923cb.png","hash":"dea8d320960052d05b4d56529a18579892c735d1","modified":1610587163515},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-210480f8.png","hash":"c96cabf1caa4acdd99dab238003829d546eb727b","modified":1610587163534},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-d872a607.png","hash":"3be74fee25c9fb4aa55ec5b6a8f69955e004fe09","modified":1610587163554},{"_id":"source/cloudink8s/assets/7.3.app-deploy-svc-1678f0be.png","hash":"03c9f670c1f86c2fb4bb5a6aefbea9d95d31a7d9","modified":1610587163559},{"_id":"source/cloudink8s/assets/8.app-monitor-63c782c3.png","hash":"491a3da9465fda417a0f1bb47049e5fb33af1de2","modified":1610587163578},{"_id":"source/cok-book/image/ccs-login.png","hash":"ffe636d2bb37b72d8bb4952790627e67fdafcdec","modified":1610587167871},{"_id":"source/docker/assets/1.ccs-in-k8s-a727e2c5.png","hash":"6998a08e2c4fde2fa05a822535a101d3a1920f64","modified":1610587165843},{"_id":"source/docker/assets/1.ccs-in-k8s-dbe82e59.png","hash":"c13d70269aa7d179344826c3d1a797efa136380f","modified":1610587165846},{"_id":"source/cloudink8s/assets/10.2.import-images-d6e503a8.png","hash":"2c37208247c1d2193caeb22d7a221cc48bf97fb9","modified":1610587163448},{"_id":"source/cloudink8s/assets/10.1.export-images-562e7d6a.png","hash":"c1d07afe43a55e3fbcfe316e16a77df13eac9114","modified":1610587163438},{"_id":"source/cloudink8s/assets/10.2.import-images-1f4923cb.png","hash":"dea8d320960052d05b4d56529a18579892c735d1","modified":1610587163443},{"_id":"source/cloudink8s/assets/10.2.import-images-fe4432b5.png","hash":"ea34a46df6969aaf0e1a8802c90ffb3841540787","modified":1610587163452},{"_id":"source/cloudink8s/assets/10.3.app-create-084e3050.png","hash":"bc2919a2c4978f2833598438fe16d5c14ce72a01","modified":1610587163462},{"_id":"source/cloudink8s/assets/10.3.app-create-110a647f.png","hash":"d043acba32290f842446c62bf0533538e614c1b8","modified":1610587163466},{"_id":"source/cloudink8s/assets/3.2.app-deploy-k8s-a976bc41.png","hash":"7d78f7ce011672ceff465b9e61759919206ce7fe","modified":1610587163879},{"_id":"source/cloudink8s/assets/7.1.app-swr-fe4432b5.png","hash":"ea34a46df6969aaf0e1a8802c90ffb3841540787","modified":1610587163528},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-5cbcc485.png","hash":"5b07a14e14217a9b92ec93723030ffb640a72d6a","modified":1610587163538},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-9f15e7ef.png","hash":"8163c0ff2168282ef1070b935d0aa147389fad42","modified":1610587163546},{"_id":"source/cloudink8s/assets/7.3.app-deploy-svc-3e2203a8.png","hash":"8d9aa1b00e6f205810e19331246e095b1753ab09","modified":1610587163562},{"_id":"source/cloudink8s/assets/7.3.app-deploy-svc-ddbcbd49.png","hash":"2bdf302cb52c5a7556947e75108a503c88a5c761","modified":1610587163566},{"_id":"source/cloudink8s/assets/8.app-monitor-1a375ed3.png","hash":"3d98d6f3571b61030be043da85d5f1a807c4b2da","modified":1610587163572},{"_id":"themes/book/layout/index.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1626681566438},{"_id":"source/cok-book/image/ccs-main.png","hash":"ffe636d2bb37b72d8bb4952790627e67fdafcdec","modified":1610587167873},{"_id":"source/docker/assets/5.1.docker-monitor-980df022.png","hash":"74ac17b153e1b0cda6dbb521e2008c295e6419a8","modified":1610587165928},{"_id":"source/cloudink8s/assets/10.1.export-images-1344bea8.png","hash":"ab8b126846765b93246018d375be52d41c6c4768","modified":1610587163436},{"_id":"source/cloudink8s/assets/10.3.app-create-1820238e.png","hash":"bd607932cbc973b22cad3f77dcd3fed519c9416a","modified":1610587163472},{"_id":"themes/book/LICENSE","hash":"03157c4b6e91d27f69508dbdc62c09bc38fd78fc","modified":1626448934334},{"_id":"themes/book/README.md","hash":"aeece538443aff02fedebace7a6057d30e93309a","modified":1626448934334},{"_id":"themes/book/layout/archive.ejs","hash":"dec48c24f9f94a2ddd733f70a96fba0886f563e5","modified":1626448934336},{"_id":"themes/book/_config.yml","hash":"0d77109c6a417e5e14515132ec245e9d9534d16b","modified":1626676159418},{"_id":"themes/book/.DS_Store","hash":"cdeab4cd8d08ff72927bfa3683fd6cadb5bb9fd2","modified":1626601844503},{"_id":"themes/book/layout/categories.ejs","hash":"e3e1aa97b9a21f5bd85c4f0c56d79e7096eda48c","modified":1626448934337},{"_id":"themes/book/layout/layout.ejs","hash":"c7ac56a20341d5c3314784bc2ec410cc97ac87dc","modified":1626681571377},{"_id":"themes/book/layout/post.ejs","hash":"6ea16ae750cc647705203c65ebf4e08058044c83","modified":1626676501212},{"_id":"themes/book/scripts/merge-configs.js","hash":"73d4d9c35cedfe4ed99c849c73fcee4012738a1c","modified":1626448934338},{"_id":"themes/book/layout/tags.ejs","hash":"f2744252f6de3451c19d695f8f518c5a054f58b7","modified":1626448934337},{"_id":"themes/book/layout/page.ejs","hash":"c71e71543465f96ce9e41d1ef47afecece902842","modified":1626618752560},{"_id":"themes/book/scripts/render.js","hash":"0190cae64d12ac47b601b9fb0f1434a09c5ac168","modified":1626448934338},{"_id":"themes/book/layout/_components/brand.ejs","hash":"a5272fbc584e7b89c0ccf205661e90f2c99354a1","modified":1626448934335},{"_id":"themes/book/layout/_components/menu.ejs","hash":"c2c0efd59fed898cb41ad6a0ec94c49aca3e7fea","modified":1626448934335},{"_id":"themes/book/source/.DS_Store","hash":"71ed426d8fb7a43fac07fee8a67c6fc2188b6602","modified":1626602696329},{"_id":"themes/book/layout/_components/post-meta.ejs","hash":"243532bf3d848291cb191331910e97b9a6b40bfa","modified":1626448934335},{"_id":"themes/book/layout/_components/sidebar-toggle.ejs","hash":"53d6fc0e8bfb8f36942d2d7afcbb306dd0f89c31","modified":1626448934335},{"_id":"themes/book/layout/_components/toc.ejs","hash":"92259942c0cbe60ede9db992f7142206e93431f2","modified":1626448934335},{"_id":"themes/book/layout/_lib/comments.ejs","hash":"823afb4dcbee4e8b2258671aaf1332fed038774e","modified":1626448934335},{"_id":"themes/book/layout/_lib/zooming-image.ejs","hash":"c9b2c4772bac30ca2a8939e6e305c9c9397d9003","modified":1626448934336},{"_id":"themes/book/layout/_lib/google-analytics.ejs","hash":"8fac33b80001d1eba38ec7f35e9bd22d79705f43","modified":1626448934336},{"_id":"themes/book/layout/_partials/head.ejs","hash":"7348521bef7ef79bfb4b3dbf005adfa4ba42ba17","modified":1626448934336},{"_id":"themes/book/layout/_partials/donate.ejs","hash":"506446a954e15cc2cb424d8d1b895155377ee53b","modified":1626673079253},{"_id":"themes/book/layout/_partials/navbar.ejs","hash":"10eae8b5ed78e82a38b58d9525422f10b9be89cf","modified":1626448934336},{"_id":"themes/book/layout/_partials/post-info.ejs","hash":"d9ff5a91882a47ceb2144dcdccdd9b56191e4228","modified":1626448934336},{"_id":"themes/book/source/css/_variables.scss","hash":"1e24fa7f2467f06be7ab6d034a47ff2438384d51","modified":1626448934343},{"_id":"themes/book/source/css/book.scss","hash":"d1cb781d0b23a06d64eb1be78d99b0ee39c817c5","modified":1626660128892},{"_id":"themes/book/source/js/book-menu.js","hash":"deebd62833f484c84e08357291ccc797c7544eb6","modified":1626448934345},{"_id":"themes/book/source/js/book-post.js","hash":"d239e79163ceb5a37c9274c0c83010eea80554d8","modified":1626448934345},{"_id":"themes/book/source/js/book-toc.js","hash":"fcbf2a88d9bab50dbd1337150a5909e8b9eecd13","modified":1626448934346},{"_id":"themes/book/source/js/book.js","hash":"c150427c7397aea35ad83624f8db8f4b19846bb6","modified":1626448934346},{"_id":"themes/book/source/css/_components/brand.scss","hash":"d6d944b2ce367bc67249dcb917c2a36df2c7d285","modified":1626448934338},{"_id":"themes/book/source/css/_components/comments.scss","hash":"1e5204db1a98e70ccb3027df8eb5a0fbfa3530c1","modified":1626448934338},{"_id":"themes/book/source/css/_components/menu.scss","hash":"0b9ba0d7f5df5f9a1a4321b9f5ede89fc92be0b4","modified":1626448934339},{"_id":"themes/book/source/css/_components/post-meta.scss","hash":"489673d51d470fc6c47c0c5e942fb027f6f9846b","modified":1626448934339},{"_id":"themes/book/source/css/_components/post.scss","hash":"ad6e61a4a7fa6259577dc34263be727a4afc8b03","modified":1626448934339},{"_id":"themes/book/source/css/_components/sidebar-toggle.scss","hash":"9f1d81d4e98c0c2f62a17512bbd7fbdff59d5bfc","modified":1626448934340},{"_id":"themes/book/source/css/_components/toc.scss","hash":"30c6fa4a4d9ed70b43ac26bd869ac8f58e3e0214","modified":1626448934340},{"_id":"themes/book/source/css/_partials/book-archive.scss","hash":"c5ac27a8769860174af70d8111b2c2beee2921d6","modified":1626448934340},{"_id":"themes/book/source/css/_partials/book-content.scss","hash":"8e7a53eb11d87925d2bf940bb29ea5a9ea8a22f4","modified":1626448934341},{"_id":"themes/book/source/css/_partials/book-donate.scss","hash":"0311ca1c1e556841f594ff12267f808aa7bc4d31","modified":1626660223521},{"_id":"themes/book/source/css/_partials/book-navbar.scss","hash":"c7311a76fc29a262ed03091661b4dea30d53d4f7","modified":1626448934341},{"_id":"themes/book/source/css/_partials/book-sidebar.scss","hash":"3e4b1b06404b084df7cbc4a31cfaf7db3594e75c","modified":1626448934342},{"_id":"themes/book/source/css/_components/highlight/diff.scss","hash":"e1a087d44e499beb05d0906b8a64fff62a7ba01d","modified":1626448934339},{"_id":"themes/book/source/css/_components/highlight/highlight.scss","hash":"5d7851dec993537f0e32d0301bae70ac0ccbb52d","modified":1626448934339},{"_id":"themes/book/source/css/_components/highlight/theme.scss","hash":"ec78a76370e44d9f1978c6f4ec2f3d523286f23a","modified":1626448934339},{"_id":"source/docker/assets/3.1.docker-build-client-af040c46.png","hash":"25719202f6c9d7a6f9e8b8b416904141fc5166e2","modified":1610587165891},{"_id":"source/cloudink8s/assets/5.infrustructure-9d0486a4.png","hash":"fd9bae5e2ec40c462728ac09da43dbcb383d9705","modified":1610587163931},{"_id":"source/cloudink8s/assets/6.1.app-vpc-919e2f5b.png","hash":"19b7663ffa04fa3b3374356930916e5d5c3b4900","modified":1610587163505},{"_id":"source/cloudink8s/assets/6.3.app-k8s-0352f379.png","hash":"93dd7497ae804fa85591fc1cf772f2bfc789051e","modified":1610587163510},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-65116075.png","hash":"4ed6966f8e7d46f67a8503ce1c2994f0197df7aa","modified":1610587163544},{"_id":"source/cloudink8s/assets/8.app-monitor-3d6cc27f.png","hash":"3dd6eae91458e05c2e63bf3e20919f1a2d616336","modified":1610587163575},{"_id":"source/cloudink8s/assets/1.infrustructure-1f6b245b.png","hash":"69df7b1d4908b26319e6c51d41244b7d4a0cb883","modified":1610587163591},{"_id":"source/cloudink8s/assets/2.1.app-vpc-4bcc35c8.png","hash":"7058833d1b635dc48c5cce8216fd5a9ec4ec7f18","modified":1610587163600},{"_id":"source/cloudink8s/assets/4.app-monitor-805de976.png","hash":"91b6af58f6f2bc10684492bb2123d976e4140902","modified":1610587163919},{"_id":"source/cloudink8s/assets/6.1.app-vpc-20cd37e1.png","hash":"3cf292069b6178616f4870096dffc296351ef658","modified":1610587163496},{"_id":"source/cloudink8s/assets/7.2.app-deploy-k8s-1a696690.png","hash":"7179390fe69d6023e7855aeb52277e3c10ad5945","modified":1610587163531},{"_id":"source/cloudink8s/assets/6.1.app-vpc-5b85d130.png","hash":"9a280fc415260f02da2b6fe217c742174f6747f5","modified":1610587163499},{"_id":"themes/book/source/favicon.png","hash":"8835f14a3d32720489280d267e8db4cafd4bd370","modified":1626601620938},{"_id":"source/docker/assets/2.what-docker-todo-860e7fc0.png","hash":"d258ea6c8d0f18d71e8d2c61687b91a8152afea1","modified":1610587165871},{"_id":"source/cloudink8s/assets/1.infrustructure-b8089c8d.png","hash":"6ebd9b5fd02917ec050186fff5f712fab4fa30e6","modified":1610587163595},{"_id":"source/cloudink8s/assets/2.3.app-k8s-c9d7bd49.png","hash":"3c6aca58e469a8018b4dba1cff6691a9f1414783","modified":1610587163639},{"_id":"source/cloudink8s/assets/8.app-monitor-17cec9b4.png","hash":"1a05a0ff18df1d9f55a599e3e75e989f9e007a90","modified":1610587163569},{"_id":"source/cloudink8s/assets/1.infrustructure-011dd82a.png","hash":"62c21456a673a551f2f0aae9a0746a040021ddea","modified":1610587163588},{"_id":"source/img/home.jpg","hash":"735bf4411b92af8f0444e8636c9ddb76cf623bde","modified":1626659703197},{"_id":"public/docker/1.ccs-in-k8s.html","hash":"a7704df6acdc915094afc6ef6a841717393874a4","modified":1626681587359},{"_id":"public/docker/1.docker-infrustructure.html","hash":"b30652607559835e056ba56562e5bc53244ed7be","modified":1626681587359},{"_id":"public/docker/2.database-in-k8s.html","hash":"60394b4019bdd131afb17c76f8ec3f23f79e968b","modified":1626681587359},{"_id":"public/docker/2.what-docker-todo.html","hash":"b1bec4b8379e5da4b0bbd09c718c74f857ff9308","modified":1626681587359},{"_id":"public/docker/3.1.docker-build.html","hash":"cf36258c40d63f6a87fd1da9b1458c1df4f95bdd","modified":1626681587359},{"_id":"public/docker/3.1.2docker-build-dockerfile.html","hash":"5613fa21e56491311e6a082dd6e7c55fa84fc436","modified":1626681587359},{"_id":"public/docker/3.3.docker-build-war.html","hash":"939420f09d08d2527d457abd14a38340a9ef9a02","modified":1626681587359},{"_id":"public/docker/3.5.docker-build-go.html","hash":"4e3cbcec54b92298d31163d619ddf49ba1213640","modified":1626681587359},{"_id":"public/docker/3.4.docker-build-npm.html","hash":"4c4a63e1c023c6feeba58d9e87d4f74565a14344","modified":1626681587359},{"_id":"public/docker/3.docker-practice.html","hash":"df71de47c1a8b2a5c0abb75d2dc2fca2f3a30e5d","modified":1626681587359},{"_id":"public/docker/3.6.docker-build-skill.html","hash":"1e5490be2874195aea4f14b6dd2b571161689d27","modified":1626681587359},{"_id":"public/docker/3.storage-in-k8s.html","hash":"e4a703f1510f510af762d698b7e04dfb239d51de","modified":1626681587359},{"_id":"public/docker/4.2.docker-resource.html","hash":"0b76eb38d7a7747aae99f1a1b8f72cb6512036bc","modified":1626681587359},{"_id":"public/docker/4.docker-diagnose.html","hash":"3dd7ac5cb1ca65a4dd3834aaa384f242ff8cbc0b","modified":1626681587359},{"_id":"public/docker/README.html","hash":"148390b0630a6eb1a46c256fd436620d5661ec41","modified":1626681587359},{"_id":"public/cloudink8s/1.infrustructure.html","hash":"c51497ffc5a7b279f4d2212e1bc40f9464123d25","modified":1626681587359},{"_id":"public/cloudink8s/10.1.export-images.html","hash":"6c6b5db391c6f7de617b421a567757ca14d8c459","modified":1626681587359},{"_id":"public/cloudink8s/10.2.import-images.html","hash":"99a58d80d0ac13a575b95ab9b560ccfa7ca55a7f","modified":1626681587359},{"_id":"public/cloudink8s/10.3.app-create.html","hash":"a3d2f2c6dc0ac1659af97cc902eb3d8327fef776","modified":1626681587359},{"_id":"public/cloudink8s/10.app-deploy.html","hash":"16e25fb86bf940382d906c4b04a5856216a955a2","modified":1626681587359},{"_id":"public/cloudink8s/2.1.app-vpc.html","hash":"48110dddb3c700ab2482e34596967a20c765ab91","modified":1626681587359},{"_id":"public/cloudink8s/2.2.app-ip.html","hash":"7c5dd5a67383b239cb97a6d5d47a191f34fa64ce","modified":1626681587359},{"_id":"public/cloudink8s/2.3.app-k8s.html","hash":"60c100a22db420788fb0cbc49418ada69681a3a1","modified":1626681587359},{"_id":"public/cloudink8s/2.app-deploy.html","hash":"d54a70578239b0bb7b79cbe31c5313e437a480f1","modified":1626681587359},{"_id":"public/cloudink8s/3.1.app-swr.html","hash":"1593f933c006af9fd8a43d8b487ca46b5a05746e","modified":1626681587359},{"_id":"public/cloudink8s/3.2.app-deploy-k8s.html","hash":"0d38839f194a7e134009d7f4a89f10d679d8a1c3","modified":1626681587359},{"_id":"public/cloudink8s/3.3.app-deploy-svc.html","hash":"65dedd821e93e5ed694fa2d0843d5d4ec0112b15","modified":1626681587359},{"_id":"public/cloudink8s/3.app-deploy.html","hash":"bf9a9c583c0e537dda47003576e0ff4cc53d23f9","modified":1626681587359},{"_id":"public/cloudink8s/4.app-monitor.html","hash":"259e17c1034b5f394735bc71e0f4ca29b81c0f45","modified":1626681587359},{"_id":"public/cloudink8s/5.infrustructure.html","hash":"56c1c742b75616ab3eba64f9d64a6efe5fc880df","modified":1626681587359},{"_id":"public/cloudink8s/6.1.app-k8s-create.html","hash":"2eebb98065cb5f2d8564eeb0d844d514c2eb631c","modified":1626681587359},{"_id":"public/cloudink8s/6.1.app-vpc.html","hash":"fdf1d4622ae6faa32ba22b72bace3526747d0bdf","modified":1626681587359},{"_id":"public/cloudink8s/6.2.app-ip.html","hash":"376798435933694ff3c6301d5c7a602f5cf7597f","modified":1626681587359},{"_id":"public/cloudink8s/6.3.app-k8s.html","hash":"fa7682d6cc4a4a4bf6f32d710bbc86ecaa4554a4","modified":1626681587359},{"_id":"public/cloudink8s/6.app-deploy.html","hash":"72f651f08048f38394ccd4ecf84b9e1917c63d3e","modified":1626681587359},{"_id":"public/cloudink8s/7.1.app-swr.html","hash":"0af3bcd6994fedc57c0db7467f5b3c5fcf2a4c43","modified":1626681587359},{"_id":"public/cloudink8s/7.2.app-deploy-k8s.html","hash":"96e3022260d6acef8f8edb0b71104e741d99b291","modified":1626681587359},{"_id":"public/cloudink8s/7.3.app-deploy-svc.html","hash":"b3fcad7eb09fdcdc1dd14d87f9c7140ece3414bf","modified":1626681587359},{"_id":"public/cloudink8s/7.app-deploy.html","hash":"74d540b0cdbb5c8d46e8c0b78a5f0a4cd3ca80ac","modified":1626681587359},{"_id":"public/cloudink8s/8.app-monitor.html","hash":"4c4a5a6467037e1ce485a865c4051bd4277679f1","modified":1626681587359},{"_id":"public/cloudink8s/9.infrustructure.html","hash":"fdb921bafa32d4d6267b0109c487ffee6173b667","modified":1626681587359},{"_id":"public/cloudink8s/README.html","hash":"ec7792195c6219cbeeb36446ed8f1cdcefe8f991","modified":1626681587359},{"_id":"public/cok-book/1.ccs-infrustructure.html","hash":"c0bcf95fe66c599bbd164b7015b0b03160a36b34","modified":1626681587359},{"_id":"public/cok-book/3.project-practice.html","hash":"e3dd7da4e62623b47ea3e13794c151a13017c897","modified":1626681587359},{"_id":"public/cok-book/4.1.ccs-main-deploy-scene-example-snv-maven.html","hash":"5336aef4acd915b52a2be00e895710af3af77475","modified":1626681587359},{"_id":"public/cok-book/4.2.ccs-main-deploy-scene-example-upload-jar.html","hash":"417fb5a507e5af6d07c486aca40e55e2a5b129ef","modified":1626681587359},{"_id":"public/cok-book/4.3.ccs-main-deploy-scene-example-docker-image.html","hash":"40471a8199820e0b7001f5467f772df749facd46","modified":1626681587359},{"_id":"public/cok-book/4.4.ccs-main-deploy-scene-example-npm.html","hash":"5301ee4afcc1f7a50629a30b11a5d49472c2e10e","modified":1626681587359},{"_id":"public/cok-book/4.5.ccs-main-deploy-scene-example-soft-market.html","hash":"06753c10552b138a96b7fefaccd34dcca834ac43","modified":1626681587359},{"_id":"public/cok-book/4.ccs-main-deploy-scene-example.html","hash":"daabbd492fb488b828c267914bfae2a399d73362","modified":1626681587359},{"_id":"public/cok-book/5.1.ccs-other-functions-monitor.html","hash":"260af85385348b3e6e6e16c2921d72ba91ee7dd7","modified":1626681587359},{"_id":"public/cok-book/5.2.ccs-other-functions-logs.html","hash":"7c4c1aa7c9fb73df3500a0c216ca7d7edbbf1f02","modified":1626681587359},{"_id":"public/cok-book/5.3.ccs-other-functions-version-ctl.html","hash":"63a96b676cc6fde3b0a94b704c2d79718bbac3d9","modified":1626681587359},{"_id":"public/cok-book/5.ccs-other-functions.html","hash":"6c74a3675b7fdfb80b27a4b859807e35f694f300","modified":1626681587359},{"_id":"public/cok-book/6.deploy-main-points.html","hash":"7460f91e0e76bb74b446eba67ea62fb1c8c055cf","modified":1626681587359},{"_id":"public/cok-book/README.html","hash":"d304aa78c2614c833da0c6e159f95a23c090be5b","modified":1626681587359},{"_id":"public/cok-book/SUMMARY.html","hash":"3874a5236f834db4d032be6ccd66371c97aafd76","modified":1626681587359},{"_id":"public/2021/07/19/20210719blog/index.html","hash":"8753cdfb4a4b0caa7448d6e4cabc0d3bf011deb2","modified":1626681587359},{"_id":"public/archives/index.html","hash":"86a98560feb5e7c8edb52ab33172f2a6f442f4dc","modified":1626681587359},{"_id":"public/archives/2021/index.html","hash":"86a98560feb5e7c8edb52ab33172f2a6f442f4dc","modified":1626681587359},{"_id":"public/archives/2021/07/index.html","hash":"86a98560feb5e7c8edb52ab33172f2a6f442f4dc","modified":1626681587359},{"_id":"public/index.html","hash":"329397b2f2c72e69eea69075b494db72678fadc7","modified":1626681587359},{"_id":"public/docker/3.1.1docker-build-client.html","hash":"e51cb48dc55f25b73bc9ad1fc2eed46099901fc3","modified":1626681587359},{"_id":"public/docker/3.2.docker-build-cloud.html","hash":"a8cc5f543e2433624de9d8e4cb867b529021b68a","modified":1626681587359},{"_id":"public/docker/4.1.docker-monitor.html","hash":"cbb7d35556851d3efd00591d89906e54e718bbfb","modified":1626681587359},{"_id":"public/cok-book/2.what-ccs-todo.html","hash":"f63aa56800622d0b915e8d4d8c1e8acfdbfee26e","modified":1626681587359},{"_id":"public/cok-book/3.1.project-to-docker.html","hash":"570caa925c34f775558504b4e4f9ce0f69b35dca","modified":1626681587359},{"_id":"public/cok-book/3.2.project-to-k8s.html","hash":"85d07d3793ec48440a096de6f641118236e5f5b1","modified":1626681587359},{"_id":"public/cok-book/3.3.project-to-ccs.html","hash":"214dfa1473b02d3e10d06bdab1c159cc4a9272f9","modified":1626681587359},{"_id":"public/cloudink8s/build.sh","hash":"529ba3da6c0a076fa05b74bbb3c4a11e80fd4b81","modified":1626681587359},{"_id":"public/cloudink8s/init.sh","hash":"ecda4b8226a0da306b5332d8b122c7880012eb75","modified":1626681587359},{"_id":"public/cok-book/build.bat","hash":"3b9e54eb16ea14368a2fc58c6eead425010860b6","modified":1626681587359},{"_id":"public/cok-book/init.bat","hash":"c9732cea850e97fc60aadaa300b34a4c3520c05b","modified":1626681587359},{"_id":"public/docker/assets/2.what-docker-todo-372ee802.png","hash":"ec120b7a422e6ce17e5f44a7852215dbb7a3ddc0","modified":1626681587359},{"_id":"public/docker/assets/3.1.docker-build-client-55282df1.png","hash":"146900cc5c6d82d681f5689af4aab59a99dde3fd","modified":1626681587359},{"_id":"public/docker/assets/3.1.docker-build-client-70a13111.png","hash":"e1922e6e8d3ea8a3c2e95a4402eb5ac83c15256e","modified":1626681587359},{"_id":"public/docker/assets/3.1.docker-build-client-5c442ad0.png","hash":"6ba05287976934bb5a2e9039a51370b73f370927","modified":1626681587359},{"_id":"public/docker/assets/3.1.docker-build-client-fcd4285e.png","hash":"3e6d72c6eb92bd92d31a877e9aa974ce8a80c93b","modified":1626681587359},{"_id":"public/docker/assets/3.1.docker-build-dockerfile-51113ade.png","hash":"67dd3c24e7fe2a1ede0e2a0b90db66367392954b","modified":1626681587359},{"_id":"public/docker/assets/3.1.docker-build-dockerfile-d866744b.png","hash":"f21640383ea281dfe15c2f3f666c4fd3eec28307","modified":1626681587359},{"_id":"public/docker/assets/3.2.docker-build-cloud-d6ef43c8.png","hash":"f92e29f7aa3c3419afc8c99e6bd2a1f49c8c2f3c","modified":1626681587359},{"_id":"public/docker/assets/3.4.docker-build-npm-288a73a3.png","hash":"0e23191e751ae47ea3bcfebe980c6d14f9e0912d","modified":1626681587359},{"_id":"public/docker/assets/3.5.docker-build-go-cab4c619.png","hash":"17fb001103cef75a151f3abe21b23218256697f9","modified":1626681587359},{"_id":"public/docker/assets/5.1.docker-monitor-963b5ef4.png","hash":"98490b860b9cc072a6dc5b6ff3bf27e4e52b7641","modified":1626681587359},{"_id":"public/docker/assets/README-52116020.png","hash":"0d2082a2f9d0a527eb93a5424e77c9b6e0ff856b","modified":1626681587359},{"_id":"public/docker/assets/5.2.docker-resource-6c92d7e0.png","hash":"1167c46e4e15d05e1d0b4c5ad69aba5acb43d667","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.1.export-images-0cd2a817.png","hash":"4c2c7d8378f36eb5ec2e3e312b9bdbba2209a1f6","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.1.app-vpc-1ff93cf8.png","hash":"f899aaf9457195865598900b1206aed38ee9a0ca","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.2.app-ip-4b323317.png","hash":"1c344d9a9d1243786f337581ef0d85cc67d239f0","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.3.app-k8s-f55c87b6.png","hash":"3de860956e7819b7246e6dbbac3ff41f1f871bbe","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.1.app-swr-48d4cf2b.png","hash":"11f312a0da18525f112fe4e5b09e68e240fb4ce2","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-3608c03b.png","hash":"583842c5ed2e6b54e65f426e4190ba01d887a4f7","modified":1626681587359},{"_id":"public/cloudink8s/assets/4.app-monitor-525f26eb.png","hash":"d7c8e0c2f99beadad46321bb27755ca8d25a3d67","modified":1626681587359},{"_id":"public/cloudink8s/assets/6.1.app-vpc-cc414a1b.png","hash":"8ee8c95dc9651fcd2e286d4052989201c097e47a","modified":1626681587359},{"_id":"public/cloudink8s/assets/6.2.app-ip-5fa7dea8.png","hash":"d97ab183a9cf07dcd4fcd8ae75d23d332c908c65","modified":1626681587359},{"_id":"public/cloudink8s/assets/9.infrustructure-3740cdb3.png","hash":"ff695d679fcf598056c89692da2a1374adc4d0fb","modified":1626681587359},{"_id":"public/cok-book/image/20200512_180022_95.png","hash":"04c3a654b0fe59231a939580bb8271bef137ade0","modified":1626681587359},{"_id":"public/cok-book/image/20200512_180521_54.png","hash":"72bae5ec9249bf1b346ebdd1d605a9ac932a1a46","modified":1626681587359},{"_id":"public/cok-book/image/20200512_180238_75.png","hash":"c14503340a10ebd81dbab11b70bc0374c902873c","modified":1626681587359},{"_id":"public/cok-book/image/20200512_180651_67.png","hash":"9c87bcb793ae3c5d73a85965b846ad2e45758bda","modified":1626681587359},{"_id":"public/cok-book/image/20200512_180656_16.png","hash":"9c87bcb793ae3c5d73a85965b846ad2e45758bda","modified":1626681587359},{"_id":"public/cok-book/image/20200512_180812_45.png","hash":"2361ad5dabe8093035b35ea3ba3e3350609fcb01","modified":1626681587359},{"_id":"public/cok-book/image/20200521_114252_61.png","hash":"ad3a18d3fb97f58c11fa44887d8bdf09da887459","modified":1626681587359},{"_id":"public/cok-book/image/20200521_132204_66.png","hash":"4134cf2ea2c02f61f4ebf427fada5e1339030ee6","modified":1626681587359},{"_id":"public/cok-book/image/20200521_133917_56.png","hash":"44f963e7b9be84f11f9001535c1c68edb2af5f95","modified":1626681587359},{"_id":"public/cok-book/image/20200521_161821_87.png","hash":"921e9827c2f9d2d1cc3df6aa319f4ff3ec22553c","modified":1626681587359},{"_id":"public/cok-book/image/20200521_161841_31.png","hash":"63ffaa1f3831da13abe8ff0094a8ed90606b7f90","modified":1626681587359},{"_id":"public/cok-book/image/20200521_165323_29.png","hash":"a2d37a3cf046f604c61af8321d3f84d170ee9d9d","modified":1626681587359},{"_id":"public/cok-book/image/20200522_194518_31.png","hash":"4e0b35cf87c51b37b21531b2f3ffa4227241350d","modified":1626681587359},{"_id":"public/cok-book/image/20200522_200754_75.png","hash":"477ec9bdf26f3889aba2a1c26f8c339599d9f20a","modified":1626681587359},{"_id":"public/cok-book/image/20200522_200957_63.png","hash":"18a6cb7288803ecb461abe11c67cd0b66323c89a","modified":1626681587359},{"_id":"public/cok-book/image/20200522_201158_49.png","hash":"25d28860aa4de2f6532aebe32bcabbc4afaac29e","modified":1626681587359},{"_id":"public/cok-book/image/20200522_201315_93.png","hash":"6c653511c066ebd48390ec4db216b7155d0364ce","modified":1626681587359},{"_id":"public/cok-book/image/20200522_202529_68.png","hash":"b505dbf1b46da278674291d6c05f6368503c00fd","modified":1626681587359},{"_id":"public/cok-book/image/20200522_213709_70.png","hash":"dda2dcff7669bd553d9aeeef4ad45a12843311fc","modified":1626681587359},{"_id":"public/cok-book/image/20200522_213753_38.png","hash":"8b76a94108eea5490602d4143fdfc05d128ecadd","modified":1626681587359},{"_id":"public/cok-book/image/20200522_214007_77.png","hash":"54020b9f2758dab6d6230059c7942693ec5eafd7","modified":1626681587359},{"_id":"public/cok-book/image/20200522_214124_66.png","hash":"d23b5b6d30dd859b5a5802301a2ccacbd03adcbb","modified":1626681587359},{"_id":"public/cok-book/image/20200522_214326_50.png","hash":"ecbfe6c67f8e2293c88886c3e3e31f876c4cdbdc","modified":1626681587359},{"_id":"public/cok-book/image/20200522_214806_18.png","hash":"0e1245a8d86856e7c9aab22bcae14c1c9f2f8887","modified":1626681587359},{"_id":"public/cok-book/image/20200522_214730_14.png","hash":"b8f359c2feeadc587f11f0568ba8a83391b7b5a8","modified":1626681587359},{"_id":"public/cok-book/image/20200522_215152_89.png","hash":"0d0263a4b659dae5cf1b46a8369b34b6b8206f93","modified":1626681587359},{"_id":"public/cok-book/image/20200522_215035_42.png","hash":"2a5493d21933e3616a22f98c2da8f7ab097a88e6","modified":1626681587359},{"_id":"public/cok-book/image/20200522_215459_51.png","hash":"614508cee0e82b53b21ef08afcc8895874d4ac9a","modified":1626681587359},{"_id":"public/cok-book/image/20200522_215520_16.png","hash":"3729e3c5af8cd7e409a2d3ef5c2e8702750bf370","modified":1626681587359},{"_id":"public/cok-book/image/20200526_130312_98.png","hash":"42270a40e816d9a6ab7f9b676a71bfe4c69acaf2","modified":1626681587359},{"_id":"public/cok-book/image/20200526_115027_41.png","hash":"3aac094ad0d4f67e7687e597229e51f239694088","modified":1626681587359},{"_id":"public/cok-book/image/20200526_144508_58.png","hash":"007871d1cdd7743ca96e4a1e9b7ec9506309b977","modified":1626681587359},{"_id":"public/cok-book/image/20200526_144527_96.png","hash":"2b0506b0f065f73b017e302975f647cb13392b8b","modified":1626681587359},{"_id":"public/cok-book/image/20200526_223208_56.png","hash":"837c7729a93b7e90ca6522584804b323624de044","modified":1626681587359},{"_id":"public/cok-book/image/20200526_232432_99.png","hash":"9c981476d800fcb50cf623be62fc162a89e80f82","modified":1626681587359},{"_id":"public/cok-book/image/20200526_225215_47.png","hash":"f291949d50cf6281e1d58ae3e5fc6a7381ea6342","modified":1626681587359},{"_id":"public/cok-book/image/20200527_134123_97.png","hash":"caf32b502c632d452dbc3fbf4934562b2d20c7ee","modified":1626681587359},{"_id":"public/cok-book/image/20200527_132639_59.png","hash":"09f1f29ae23cef5d3758cb0b4daefb88c99c0502","modified":1626681587359},{"_id":"public/cok-book/image/20200527_134404_99.png","hash":"ae3f38946fc456c94a55d4bf62740077830f8368","modified":1626681587359},{"_id":"public/cok-book/image/20200527_134628_14.png","hash":"3cbf28a28b0a52746a7c6ef249329afb221f5ca8","modified":1626681587359},{"_id":"public/cok-book/image/20200527_134431_39.png","hash":"f4b5672f8d91dd10f5614fa3698488020bcd2853","modified":1626681587359},{"_id":"public/cok-book/image/20200527_134453_28.png","hash":"0a33eb63fd4dc636893c353706cca92c657772e9","modified":1626681587359},{"_id":"public/cok-book/image/20200527_142056_12.png","hash":"c06aee40ce9c437b10310e33e1b6a2a4c385e900","modified":1626681587359},{"_id":"public/cok-book/image/20200527_180137_85.png","hash":"a1abba7114e267e030a8e03893ff1f3a0e60637a","modified":1626681587359},{"_id":"public/cok-book/image/20200528_113757_63.png","hash":"2d2cec81d4231777c465ed5ed772c4fd30d643f9","modified":1626681587359},{"_id":"public/cok-book/image/20200528_113907_78.png","hash":"72e61384e8f9109b9be23052cf09b60c4097eb3c","modified":1626681587359},{"_id":"public/cok-book/image/20200528_113947_25.png","hash":"903677b24e544e90b47a769029902a354600156c","modified":1626681587359},{"_id":"public/cok-book/image/20200528_114125_42.png","hash":"9200b5ff16395e2f578ed5294c1f26e2587dd0c0","modified":1626681587359},{"_id":"public/cok-book/image/20200528_114045_70.png","hash":"60749a9f987b4ecc211c33d5f3da4fd79a63ebff","modified":1626681587359},{"_id":"public/cok-book/image/20200528_122116_76.png","hash":"469b17d1a8e4619aeca034bdf083c2685ef2af38","modified":1626681587359},{"_id":"public/cok-book/image/20200528_123410_85.png","hash":"d85c9421cb633c7cb1590515414edee137757310","modified":1626681587359},{"_id":"public/cok-book/image/20200528_123518_16.png","hash":"2502cb71921d4a36f0f61ec091da36bb5815ac53","modified":1626681587359},{"_id":"public/cok-book/image/ccs-infrustructure.png","hash":"ff695d679fcf598056c89692da2a1374adc4d0fb","modified":1626681587359},{"_id":"public/cok-book/image/20200529_100114_48.png","hash":"d57b5d271fec49373906c7a4c1c42db3c5ce2e41","modified":1626681587359},{"_id":"public/cok-book/image/20200529_100221_46.png","hash":"957c2b9586e3b516308ab9fbe3db75facdcf3e7c","modified":1626681587359},{"_id":"public/docker/assets/1.ccs-in-k8s-230b019e.png","hash":"0d4c8862c5d18d0ea00b408279d708efcc6d1ba9","modified":1626681587359},{"_id":"public/docker/assets/1.docker-infrustructure-75c043e9.png","hash":"0391d9b41fa9e4d0b5b3f4382d4b8c571827e0cc","modified":1626681587359},{"_id":"public/docker/assets/1.docker-infrustructure-8f80df54.png","hash":"a9f13780b16692b3f5bdcba123e3fd34fc2c75d7","modified":1626681587359},{"_id":"public/docker/assets/3.1.2docker-build-dockerfile-0159e81f.png","hash":"d9e989d2df4a5cf48d043f1b97986cf5afab87b7","modified":1626681587359},{"_id":"public/docker/assets/3.1.docker-build-client-2832e624.png","hash":"c18557e773c72011a78c92465a967beaecaef591","modified":1626681587359},{"_id":"public/docker/assets/3.1.docker-build-client-2fb8c48f.png","hash":"e20153adf98b03e1b0e470cf06e8a1c8de382842","modified":1626681587359},{"_id":"public/docker/assets/3.1.docker-build-dockerfile-5738e6c7.png","hash":"3975ca9ee44213fb7b399874a3e3f664fac26fbb","modified":1626681587359},{"_id":"public/docker/assets/3.1.docker-build-dockerfile-95b57c00.png","hash":"a36087caee45f8d63515fef0c02e93df96d90762","modified":1626681587359},{"_id":"public/docker/assets/3.2.docker-build-cloud-6357415e.png","hash":"7bfe8f4d8d0c403231b88e179938591aa2d4c3db","modified":1626681587359},{"_id":"public/docker/assets/3.3.docker-build-war-1c2f92f2.png","hash":"49d99f1ffbd9a8088bed9d8b31f5f54c062a79d4","modified":1626681587359},{"_id":"public/docker/assets/3.2.docker-build-cloud-81f63f76.png","hash":"d68e64e19bf89baea72b4b43964f3ee35ff6c394","modified":1626681587359},{"_id":"public/docker/assets/5.1.docker-monitor-5ea2e6e9.png","hash":"6310ede04f13eaef97d9bbb8cee9c34170f81932","modified":1626681587359},{"_id":"public/docker/assets/5.2.docker-resource-036307e8.png","hash":"ce01ef434af2a4a5a25cfcc1ec3df6c271cbecf0","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.1.export-images-9244a427.png","hash":"a6d9543c81b8feed339de7503280046fc6b25033","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.3.app-create-12673d72.png","hash":"bc8df010c74d9367dac9f9a9dedd826a19a6645a","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.3.app-create-27dcc76d.png","hash":"e14ab1f827e00e9f4b0280309dc8c7691a949929","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.3.app-create-dc5be485.png","hash":"01e06040168736300d8432f86d7aefc5c7c2daae","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.2.app-ip-873498d9.png","hash":"f6e75c117343eac41126d003006c1e62b1313b33","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.1.app-swr-dec510e6.png","hash":"68670551aaafd4f4b70ea93a022a19c9f52fe397","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-0b16a4f8.png","hash":"d74882655b54a5fafece0e2036be8e660b18c04c","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-415742ef.png","hash":"583ec8d437776fb5fb3fa2a51b954b0f181a380b","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-431ef67b.png","hash":"76a35d48c9bb1db6f793c27bef9fab5da73d05a2","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-47bcb21a.png","hash":"48e321ece070f0a097f2c6275b4b16cf37870608","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-bde3cc4b.png","hash":"9b8eadfffe387bf071665534a00891091209d2a2","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-c4909581.png","hash":"3f43c0f909d39383725b469b2dc3add261565472","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-dcd72da9.png","hash":"ae378024b88243f1067e286fdadc52494fdf1ef7","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.3.app-deploy-svc-f7749987.png","hash":"c23bd478f4523e6f59a91d531cd50dc5fe025647","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.2.app-deploy-k8s-b2a8a281.png","hash":"811632ecf49718a2bdda298dd2515b16b74f2b58","modified":1626681587359},{"_id":"public/cok-book/image/20200521_132148_85.png","hash":"58150f3ef91f1428d4fc2732c126d82cb4db9fab","modified":1626681587359},{"_id":"public/cok-book/image/20200522_202609_17.png","hash":"d1c3533907e2d86c26bf136c80ffc67b1a64c30c","modified":1626681587359},{"_id":"public/cok-book/image/20200522_215305_60.png","hash":"26d13622ecffec802c14bd4cdcbb5f41d0d9b016","modified":1626681587359},{"_id":"public/cok-book/image/20200526_113209_24.png","hash":"735c5e57ddf0c0165372b610561a6c7ff68982c1","modified":1626681587359},{"_id":"public/cok-book/image/20200526_134645_66.png","hash":"e739953334bbc4f42ef7f59301f1f6ad7902363f","modified":1626681587359},{"_id":"public/cok-book/image/20200526_144419_47.png","hash":"a16c4d7cf2f87a0a020ad9d4afa85f2e712b0f99","modified":1626681587359},{"_id":"public/cok-book/image/20200526_145716_92.png","hash":"252608737d5e390cbe35fbdfef86211d62a84192","modified":1626681587359},{"_id":"public/cok-book/image/20200527_133110_62.png","hash":"648b7dc5f94a7011603e6a769a8ca4315ccc9304","modified":1626681587359},{"_id":"public/cok-book/image/20200527_133139_35.png","hash":"60b2617fdc34e090b8869574dbaad46cb2da1934","modified":1626681587359},{"_id":"public/cok-book/image/20200527_180319_84.png","hash":"2c70dadba147e69053d6799330939cd846820552","modified":1626681587359},{"_id":"public/cok-book/image/20200527_181024_76.png","hash":"ee3a38f9b027e3b3cc4965908164974a4ff2897d","modified":1626681587359},{"_id":"public/cok-book/image/20200527_182815_35.png","hash":"f6890fb20dc21a93db3370058c12e260483fd801","modified":1626681587359},{"_id":"public/cok-book/image/20200528_114217_64.png","hash":"0896455735ed942811df8c6d07434ace43201808","modified":1626681587359},{"_id":"public/favicon.png","hash":"8835f14a3d32720489280d267e8db4cafd4bd370","modified":1626681587359},{"_id":"public/docker/assets/1.ccs-in-k8s-5764c11c.png","hash":"a62418eafe0bffeebfddc484ceba572b1daf8f92","modified":1626681587359},{"_id":"public/docker/assets/1.ccs-in-k8s-7aa18d7d.png","hash":"fd44d81094fcffb284907497c223b661616ebff8","modified":1626681587359},{"_id":"public/docker/assets/3.1.docker-build-client-0a13bf6d.png","hash":"367f173db9ffcf55a5ccdc7376210fba23c059ed","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.2.import-images-b894b65d.png","hash":"8823bf5038c853a534bb975417a4cc1265eb9e5f","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.3.app-create-3988b087.png","hash":"5e1cb0806fec8edcdf7377318be84c1bd09280a8","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.2.app-ip-3b3377c1.png","hash":"a02b282cfdc0dedabdbb7a800204691e3d06c68a","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.1.app-vpc-a7643b78.png","hash":"28ca9cae1153ce4ee695a0fecd609bc1b9070149","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.2.app-ip-5ea09f6d.png","hash":"66837f173c9eeb011396e4d0bd63c27b619714de","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.3.app-k8s-1a543010.png","hash":"2a7f0570a8ddc260c223aa35cc58ed86bb1878cb","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.3.app-k8s-0f2a3a39.png","hash":"36e80db67426104428512b7133d2ddbcfea65edd","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.3.app-k8s-7ab84881.png","hash":"acf7c2d55153908ae5b6d8c29496ab3545406d7b","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.3.app-k8s-b51148d0.png","hash":"caed2ed6ea4d2b679b6652e5e84ba0516082ddea","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.3.app-k8s-8784bd4a.png","hash":"4b2bf35c721980638c3421a4eec384fdc1477ad2","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.1.app-swr-65c66a1d.png","hash":"5f410018061a07643cbe54c63e13e2d072730de5","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.1.app-swr-ce798493.png","hash":"657809275855da2136c32cf898c0b4c92dc1b9a8","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.1.app-swr-b894b65d.png","hash":"8823bf5038c853a534bb975417a4cc1265eb9e5f","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.1.app-swr-e81418fc.png","hash":"4c1d4ed3f9d4634bcd111a6258a028130c67b282","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-0bf625fd.png","hash":"0d7558c4a478e628f940d99832e21470e969ab8e","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-316ca3d9.png","hash":"85ed20b45726058950cb0d11188fe285b59f5f71","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-2ed44802.png","hash":"2026461891417f2662cd4d6a954a81f22b5f5b18","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-55f6ff78.png","hash":"ae2aaee7371d47ad1d5d9c63b0bc5b960a3446a4","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-56250529.png","hash":"e2cfcac6a91a07a3b8f0e581628f1b892346c33d","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-56b35de6.png","hash":"7272947e1a77d19d5bb1fb944451c855919dad34","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-b06aa32f.png","hash":"0bae18c62bc11c8b85ca81b9bb72b4dd8a38c850","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-bd824de7.png","hash":"d3f3456cbec4127de3734d0411f21804f0f22301","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.3.app-deploy-svc-53c49e9e.png","hash":"2cc23ecec94f0e91b16fec031657e19783b1c1a9","modified":1626681587359},{"_id":"public/cloudink8s/assets/5.infrustructure-86ce3b57.png","hash":"22360ac02f6c2bf4602c9f6fb026d3abd0eee73a","modified":1626681587359},{"_id":"public/cloudink8s/assets/6.1.app-vpc-07ddb9c5.png","hash":"38a90069a0b9a9050b58d51fd976b714b7473b8a","modified":1626681587359},{"_id":"public/cloudink8s/assets/6.1.app-vpc-7f5a405f.png","hash":"7833844748d1aefcfa1834147bc416a7cac15e4e","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.1.app-swr-bfb74b2a.png","hash":"cdf53b16b0ae3ecf69ea00d8abe9cb956b7e556a","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.1.app-swr-f63aad82.png","hash":"f22407d4002cbaf8f3971007ed04e21fdc3351dc","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.2.app-deploy-k8s-f0eca9fe.png","hash":"e7c6be75511471a4d3ca8512f8981796126ccfaa","modified":1626681587359},{"_id":"public/js/book-menu.js","hash":"deebd62833f484c84e08357291ccc797c7544eb6","modified":1626681587359},{"_id":"public/js/book-post.js","hash":"d239e79163ceb5a37c9274c0c83010eea80554d8","modified":1626681587359},{"_id":"public/js/book-toc.js","hash":"fcbf2a88d9bab50dbd1337150a5909e8b9eecd13","modified":1626681587359},{"_id":"public/js/book.js","hash":"c150427c7397aea35ad83624f8db8f4b19846bb6","modified":1626681587359},{"_id":"public/docker/assets/1.ccs-in-k8s-e5f22393.png","hash":"7a2d78569ad7f8fd491a4bce8747a57bc59035e3","modified":1626681587359},{"_id":"public/docker/assets/3.1.docker-build-client-af64f5a8.png","hash":"321616ea31cc75ae8955415148ec48e1814fd3f0","modified":1626681587359},{"_id":"public/docker/assets/3.2.docker-build-cloud-74350e49.png","hash":"26988fbee1143bd7269d2318455bd8b7f8c363ac","modified":1626681587359},{"_id":"public/docker/assets/5.1.docker-monitor-78f4468e.png","hash":"8b99d9c8d7d88e5444cf39b20431eeffedca9fa8","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.2.import-images-d6e503a8.png","hash":"2c37208247c1d2193caeb22d7a221cc48bf97fb9","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.3.app-create-0695a4b8.png","hash":"f4d3bb205e4a0b5fa9cd7baee13380a00c0fa373","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.3.app-create-21407512.png","hash":"84ae41f01367ea300785c39345c2e34956074936","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.3.app-create-1dc22aa8.png","hash":"afb9d32ed7906d80f862324509ab3fb39404808d","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.1.app-vpc-65398c36.png","hash":"e2ebd8640fc9ae734320bbd8666423104e8d7ce0","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.3.app-k8s-3e1e6129.png","hash":"0f0709ec7ee8f998041cd0099a21807bc6f56183","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.1.app-swr-d6e503a8.png","hash":"2c37208247c1d2193caeb22d7a221cc48bf97fb9","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-53cafd27.png","hash":"ddcdd835481473409c1afdc8786bf39d4504fc72","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-c314373a.png","hash":"027c601432b206c1339bd34721f3032acbfff8d0","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-d0b58328.png","hash":"f3e6118d57e85e8cc785131914d5a90c667201e4","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.3.app-deploy-svc-c0d39aad.png","hash":"7dd7c572b11b6638de91e7d2a5448de9302a303b","modified":1626681587359},{"_id":"public/cloudink8s/assets/4.app-monitor-f07cb531.png","hash":"077a88e08c500688180622fa01791f719c92532c","modified":1626681587359},{"_id":"public/cloudink8s/assets/6.2.app-ip-2d2824d9.png","hash":"8064e9b0e70ef755045115f19857599d87b8732c","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.1.app-swr-d40d2594.png","hash":"e3f14dac2ccebe8032d8c941d50647b677dfa001","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.2.app-deploy-k8s-6159afee.png","hash":"9f3d09daba797d46fa8c2e5c60d270b5ddc8a24e","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.2.app-deploy-k8s-c068a25d.png","hash":"2e71e08a43e0e13e2b63ee7bd57c7577ac4ddf4d","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.2.app-deploy-k8s-d872a607.png","hash":"3be74fee25c9fb4aa55ec5b6a8f69955e004fe09","modified":1626681587359},{"_id":"public/cloudink8s/assets/8.app-monitor-63c782c3.png","hash":"491a3da9465fda417a0f1bb47049e5fb33af1de2","modified":1626681587359},{"_id":"public/docker/assets/3.1.docker-build-client-22c49142.png","hash":"03a390e566cc2ff41b289457e3d84d7cc3c00fe7","modified":1626681587359},{"_id":"public/docker/assets/3.storage-in-k8s-2397258e.png","hash":"b20be5c44e33585e2a45ae6626e6885cde9583d0","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.3.app-create-04b7ca8f.png","hash":"f6a25da2342148d5796ee99621f906c8143d2efd","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.3.app-create-bd4eb83e.png","hash":"700fa1f125cdde3e6784f312c949945015b04b35","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-05eb7a77.png","hash":"78926a6e97073647c3e31ec79a58b662edc00654","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-a976bc41.png","hash":"7d78f7ce011672ceff465b9e61759919206ce7fe","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.2.app-deploy-k8s-8aac61ef.png","hash":"f0bdacb8f80777e6c96ef358551596111893dfd7","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.3.app-deploy-svc-be1b3956.png","hash":"83e7abbd5df896c14a1757218af5f67a8fd77887","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.3.app-create-110a647f.png","hash":"d043acba32290f842446c62bf0533538e614c1b8","modified":1626681587359},{"_id":"public/cloudink8s/assets/6.3.app-k8s-dd9a738a.png","hash":"611a5ad053920d663ec66d7d11036dba7bf78213","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.1.app-swr-59307a6d.png","hash":"af62101e285db84ec02d2c42875eae3748332e0b","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.2.app-deploy-k8s-210480f8.png","hash":"c96cabf1caa4acdd99dab238003829d546eb727b","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.2.app-deploy-k8s-9f15e7ef.png","hash":"8163c0ff2168282ef1070b935d0aa147389fad42","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.3.app-deploy-svc-1678f0be.png","hash":"03c9f670c1f86c2fb4bb5a6aefbea9d95d31a7d9","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.3.app-deploy-svc-3e2203a8.png","hash":"8d9aa1b00e6f205810e19331246e095b1753ab09","modified":1626681587359},{"_id":"public/cloudink8s/assets/8.app-monitor-a546062a.png","hash":"bffb75e06c0452564bc63a99027a292e889e2542","modified":1626681587359},{"_id":"public/cok-book/image/ccs-login.png","hash":"ffe636d2bb37b72d8bb4952790627e67fdafcdec","modified":1626681587359},{"_id":"public/docker/assets/1.ccs-in-k8s-a727e2c5.png","hash":"6998a08e2c4fde2fa05a822535a101d3a1920f64","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.1.export-images-562e7d6a.png","hash":"c1d07afe43a55e3fbcfe316e16a77df13eac9114","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.2.import-images-1f4923cb.png","hash":"dea8d320960052d05b4d56529a18579892c735d1","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.3.app-create-084e3050.png","hash":"bc2919a2c4978f2833598438fe16d5c14ce72a01","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.2.import-images-fe4432b5.png","hash":"ea34a46df6969aaf0e1a8802c90ffb3841540787","modified":1626681587359},{"_id":"public/cloudink8s/assets/3.3.app-deploy-svc-111f9d4e.png","hash":"197899856c7c0ddce6dadaa0baa4ee6493b5b7f8","modified":1626681587359},{"_id":"public/cloudink8s/assets/4.app-monitor-c4b57eb0.png","hash":"ca12d50117b7cd8c1208d689c15a375f06734857","modified":1626681587359},{"_id":"public/cloudink8s/assets/6.2.app-ip-cf199e8d.png","hash":"31ed41240ef3c0d82ac40d0344357d32abcdb2eb","modified":1626681587359},{"_id":"public/cloudink8s/assets/6.3.app-k8s-0352f379.png","hash":"93dd7497ae804fa85591fc1cf772f2bfc789051e","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.1.app-swr-1f4923cb.png","hash":"dea8d320960052d05b4d56529a18579892c735d1","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.2.app-deploy-k8s-1a696690.png","hash":"7179390fe69d6023e7855aeb52277e3c10ad5945","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.2.app-deploy-k8s-5cbcc485.png","hash":"5b07a14e14217a9b92ec93723030ffb640a72d6a","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.3.app-deploy-svc-ddbcbd49.png","hash":"2bdf302cb52c5a7556947e75108a503c88a5c761","modified":1626681587359},{"_id":"public/cloudink8s/assets/8.app-monitor-3d6cc27f.png","hash":"3dd6eae91458e05c2e63bf3e20919f1a2d616336","modified":1626681587359},{"_id":"public/docker/assets/1.ccs-in-k8s-dbe82e59.png","hash":"c13d70269aa7d179344826c3d1a797efa136380f","modified":1626681587359},{"_id":"public/cloudink8s/assets/4.app-monitor-805de976.png","hash":"91b6af58f6f2bc10684492bb2123d976e4140902","modified":1626681587359},{"_id":"public/cok-book/image/ccs-main.png","hash":"ffe636d2bb37b72d8bb4952790627e67fdafcdec","modified":1626681587359},{"_id":"public/docker/assets/5.1.docker-monitor-980df022.png","hash":"74ac17b153e1b0cda6dbb521e2008c295e6419a8","modified":1626681587359},{"_id":"public/cloudink8s/assets/1.infrustructure-b8089c8d.png","hash":"6ebd9b5fd02917ec050186fff5f712fab4fa30e6","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.3.app-create-1820238e.png","hash":"bd607932cbc973b22cad3f77dcd3fed519c9416a","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.3.app-create-8020ddd5.png","hash":"97566aacee9294e479656293dc2b32512075f3a9","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.3.app-k8s-c9d7bd49.png","hash":"3c6aca58e469a8018b4dba1cff6691a9f1414783","modified":1626681587359},{"_id":"public/cloudink8s/assets/6.1.app-vpc-20cd37e1.png","hash":"3cf292069b6178616f4870096dffc296351ef658","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.1.app-swr-fe4432b5.png","hash":"ea34a46df6969aaf0e1a8802c90ffb3841540787","modified":1626681587359},{"_id":"public/cloudink8s/assets/7.2.app-deploy-k8s-65116075.png","hash":"4ed6966f8e7d46f67a8503ce1c2994f0197df7aa","modified":1626681587359},{"_id":"public/cloudink8s/assets/6.1.app-vpc-919e2f5b.png","hash":"19b7663ffa04fa3b3374356930916e5d5c3b4900","modified":1626681587359},{"_id":"public/docker/assets/3.1.docker-build-client-af040c46.png","hash":"25719202f6c9d7a6f9e8b8b416904141fc5166e2","modified":1626681587359},{"_id":"public/cloudink8s/assets/1.infrustructure-1f6b245b.png","hash":"69df7b1d4908b26319e6c51d41244b7d4a0cb883","modified":1626681587359},{"_id":"public/cloudink8s/assets/2.1.app-vpc-4bcc35c8.png","hash":"7058833d1b635dc48c5cce8216fd5a9ec4ec7f18","modified":1626681587359},{"_id":"public/cloudink8s/assets/10.1.export-images-1344bea8.png","hash":"ab8b126846765b93246018d375be52d41c6c4768","modified":1626681587359},{"_id":"public/cloudink8s/assets/6.1.app-vpc-5b85d130.png","hash":"9a280fc415260f02da2b6fe217c742174f6747f5","modified":1626681587359},{"_id":"public/docker/assets/2.what-docker-todo-860e7fc0.png","hash":"d258ea6c8d0f18d71e8d2c61687b91a8152afea1","modified":1626681587359},{"_id":"public/cloudink8s/assets/1.infrustructure-011dd82a.png","hash":"62c21456a673a551f2f0aae9a0746a040021ddea","modified":1626681587359},{"_id":"public/cloudink8s/assets/8.app-monitor-1a375ed3.png","hash":"3d98d6f3571b61030be043da85d5f1a807c4b2da","modified":1626681587359},{"_id":"public/cloudink8s/assets/5.infrustructure-9d0486a4.png","hash":"fd9bae5e2ec40c462728ac09da43dbcb383d9705","modified":1626681587359},{"_id":"public/cloudink8s/assets/8.app-monitor-17cec9b4.png","hash":"1a05a0ff18df1d9f55a599e3e75e989f9e007a90","modified":1626681587359},{"_id":"public/img/home.jpg","hash":"735bf4411b92af8f0444e8636c9ddb76cf623bde","modified":1626681587359},{"_id":"public/css/book.css","hash":"aa0062c0eb05e1be110fee564fd4403ad7192c54","modified":1626681587359}],"Category":[],"Data":[],"Page":[{"_content":"![](img/home.jpg)\n\n* 修行以行制性，悟道以性施行，觉者由心生律，修者以律制心。\n\n","source":"home.md","raw":"![](img/home.jpg)\n\n* 修行以行制性，悟道以性施行，觉者由心生律，修者以律制心。\n\n","date":"2021-07-19T07:51:44.461Z","updated":"2021-07-19T07:51:44.461Z","path":"home.html","title":"","comments":1,"layout":"page","_id":"ckrac7wqn0000z8s68ced6jxi","content":"<p><img src=\"img/home.jpg\" alt=\"\"></p>\n<ul>\n<li>修行以行制性，悟道以性施行，觉者由心生律，修者以律制心。</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"img/home.jpg\" alt=\"\"></p>\n<ul>\n<li>修行以行制性，悟道以性施行，觉者由心生律，修者以律制心。</li>\n</ul>\n"},{"_content":"## 容器技术专辑\n* [容器入门](/docker/README)\n* [容器中级](/cloudink8s/README)\n* [容器上云](/cok-book/README)\n\n## 微服务技术专辑\n\n## 杂记","source":"menu.md","raw":"## 容器技术专辑\n* [容器入门](/docker/README)\n* [容器中级](/cloudink8s/README)\n* [容器上云](/cok-book/README)\n\n## 微服务技术专辑\n\n## 杂记","date":"2021-07-19T07:29:38.893Z","updated":"2021-07-19T07:29:38.893Z","path":"menu.html","title":"","comments":1,"layout":"page","_id":"ckrac7wvk0002z8s6ahar9z49","content":"<h2 id=\"容器技术专辑\">容器技术专辑</h2>\n<ul>\n<li><a href=\"/docker/README\">容器入门</a></li>\n<li><a href=\"/cloudink8s/README\">容器中级</a></li>\n<li><a href=\"/cok-book/README\">容器上云</a></li>\n</ul>\n<h2 id=\"微服务技术专辑\">微服务技术专辑</h2>\n<h2 id=\"杂记\">杂记</h2>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"容器技术专辑\">容器技术专辑</h2>\n<ul>\n<li><a href=\"/docker/README\">容器入门</a></li>\n<li><a href=\"/cloudink8s/README\">容器中级</a></li>\n<li><a href=\"/cok-book/README\">容器上云</a></li>\n</ul>\n<h2 id=\"微服务技术专辑\">微服务技术专辑</h2>\n<h2 id=\"杂记\">杂记</h2>\n"},{"_content":"# 1.在k8s中CI/CD的实现方式\n## 1.1 容器云场景图\n![](assets/1.ccs-in-k8s-5764c11c.png)\n## 1.2 CICD流程图\n![](assets/1.ccs-in-k8s-230b019e.png)\n - 1.创建任务，选择模版或者应用商店。\n - 2.填写项目基础信息，包括项目的svn地址，账号密码，项目运行参数等等。\n - 3.填写容器基础信息，包括项目集群需要的副本集，弹性扩展，健康检测。\n - 4.填写容器服务信息，包括项目集群端口暴露，http或者https域名的创建。\n - 5.创建，发布任务到k8s集群。\n ## 1.3 任务监控\n ![](assets/1.ccs-in-k8s-a727e2c5.png)\n ## 1.4 容器监控\n![](assets/1.ccs-in-k8s-e5f22393.png)\n ## 1.5 指标监控\n ![](assets/1.ccs-in-k8s-7aa18d7d.png)\n ## 1.6 项目日志监控\n ![](assets/1.ccs-in-k8s-dbe82e59.png)\n","source":"docker/1.ccs-in-k8s.md","raw":"# 1.在k8s中CI/CD的实现方式\n## 1.1 容器云场景图\n![](assets/1.ccs-in-k8s-5764c11c.png)\n## 1.2 CICD流程图\n![](assets/1.ccs-in-k8s-230b019e.png)\n - 1.创建任务，选择模版或者应用商店。\n - 2.填写项目基础信息，包括项目的svn地址，账号密码，项目运行参数等等。\n - 3.填写容器基础信息，包括项目集群需要的副本集，弹性扩展，健康检测。\n - 4.填写容器服务信息，包括项目集群端口暴露，http或者https域名的创建。\n - 5.创建，发布任务到k8s集群。\n ## 1.3 任务监控\n ![](assets/1.ccs-in-k8s-a727e2c5.png)\n ## 1.4 容器监控\n![](assets/1.ccs-in-k8s-e5f22393.png)\n ## 1.5 指标监控\n ![](assets/1.ccs-in-k8s-7aa18d7d.png)\n ## 1.6 项目日志监控\n ![](assets/1.ccs-in-k8s-dbe82e59.png)\n","date":"2021-07-18T03:27:18.134Z","updated":"2021-01-14T01:19:25.938Z","path":"docker/1.ccs-in-k8s.html","title":"","comments":1,"layout":"page","_id":"ckrac7wy50003z8s6f54kecnu","content":"<h1>1.在k8s中CI/CD的实现方式</h1>\n<h2 id=\"1-1-容器云场景图\">1.1 容器云场景图</h2>\n<p><img src=\"assets/1.ccs-in-k8s-5764c11c.png\" alt=\"\"></p>\n<h2 id=\"1-2-CICD流程图\">1.2 CICD流程图</h2>\n<p><img src=\"assets/1.ccs-in-k8s-230b019e.png\" alt=\"\"></p>\n<ul>\n<li>1.创建任务，选择模版或者应用商店。</li>\n<li>2.填写项目基础信息，包括项目的svn地址，账号密码，项目运行参数等等。</li>\n<li>3.填写容器基础信息，包括项目集群需要的副本集，弹性扩展，健康检测。</li>\n<li>4.填写容器服务信息，包括项目集群端口暴露，http或者https域名的创建。</li>\n<li>5.创建，发布任务到k8s集群。</li>\n</ul>\n<h2 id=\"1-3-任务监控\">1.3 任务监控</h2>\n<p><img src=\"assets/1.ccs-in-k8s-a727e2c5.png\" alt=\"\"></p>\n<h2 id=\"1-4-容器监控\">1.4 容器监控</h2>\n<p><img src=\"assets/1.ccs-in-k8s-e5f22393.png\" alt=\"\"></p>\n<h2 id=\"1-5-指标监控\">1.5 指标监控</h2>\n<p><img src=\"assets/1.ccs-in-k8s-7aa18d7d.png\" alt=\"\"></p>\n<h2 id=\"1-6-项目日志监控\">1.6 项目日志监控</h2>\n<p><img src=\"assets/1.ccs-in-k8s-dbe82e59.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>1.在k8s中CI/CD的实现方式</h1>\n<h2 id=\"1-1-容器云场景图\">1.1 容器云场景图</h2>\n<p><img src=\"assets/1.ccs-in-k8s-5764c11c.png\" alt=\"\"></p>\n<h2 id=\"1-2-CICD流程图\">1.2 CICD流程图</h2>\n<p><img src=\"assets/1.ccs-in-k8s-230b019e.png\" alt=\"\"></p>\n<ul>\n<li>1.创建任务，选择模版或者应用商店。</li>\n<li>2.填写项目基础信息，包括项目的svn地址，账号密码，项目运行参数等等。</li>\n<li>3.填写容器基础信息，包括项目集群需要的副本集，弹性扩展，健康检测。</li>\n<li>4.填写容器服务信息，包括项目集群端口暴露，http或者https域名的创建。</li>\n<li>5.创建，发布任务到k8s集群。</li>\n</ul>\n<h2 id=\"1-3-任务监控\">1.3 任务监控</h2>\n<p><img src=\"assets/1.ccs-in-k8s-a727e2c5.png\" alt=\"\"></p>\n<h2 id=\"1-4-容器监控\">1.4 容器监控</h2>\n<p><img src=\"assets/1.ccs-in-k8s-e5f22393.png\" alt=\"\"></p>\n<h2 id=\"1-5-指标监控\">1.5 指标监控</h2>\n<p><img src=\"assets/1.ccs-in-k8s-7aa18d7d.png\" alt=\"\"></p>\n<h2 id=\"1-6-项目日志监控\">1.6 项目日志监控</h2>\n<p><img src=\"assets/1.ccs-in-k8s-dbe82e59.png\" alt=\"\"></p>\n"},{"_content":"## 1. Docker是什么\n![](assets/README-3eade5a3.png)\n- Docker 是一个开源的应用容器引擎，由 server ，rest api， Client 三部分组成，基于 Go 语言 并遵从Apache2.0协议开源。\n\n## 2. Docker架构图\n![](assets/1.docker-infrustructure-75c043e9.png)\n\n## 3. Docker能干什么\n![](assets/1.docker-infrustructure-8f80df54.png)\n- 基于Docker的特征，现在常见的利用Docker进行持续集成的流程如下：\n  1.开发者提交代码；\n  2.镜像构建；\n  3.构建镜像上传至私有仓库；\n  4.镜像下载至执行机器（开发，测试，生产）；\n  5.镜像运行。\n","source":"docker/1.docker-infrustructure.md","raw":"## 1. Docker是什么\n![](assets/README-3eade5a3.png)\n- Docker 是一个开源的应用容器引擎，由 server ，rest api， Client 三部分组成，基于 Go 语言 并遵从Apache2.0协议开源。\n\n## 2. Docker架构图\n![](assets/1.docker-infrustructure-75c043e9.png)\n\n## 3. Docker能干什么\n![](assets/1.docker-infrustructure-8f80df54.png)\n- 基于Docker的特征，现在常见的利用Docker进行持续集成的流程如下：\n  1.开发者提交代码；\n  2.镜像构建；\n  3.构建镜像上传至私有仓库；\n  4.镜像下载至执行机器（开发，测试，生产）；\n  5.镜像运行。\n","date":"2021-07-18T03:27:18.135Z","updated":"2021-01-14T01:19:25.828Z","path":"docker/1.docker-infrustructure.html","title":"","comments":1,"layout":"page","_id":"ckrac7wy50004z8s628r0g6qg","content":"<h2 id=\"1-Docker是什么\">1. Docker是什么</h2>\n<p><img src=\"assets/README-3eade5a3.png\" alt=\"\"></p>\n<ul>\n<li>Docker 是一个开源的应用容器引擎，由 server ，rest api， Client 三部分组成，基于 Go 语言 并遵从Apache2.0协议开源。</li>\n</ul>\n<h2 id=\"2-Docker架构图\">2. Docker架构图</h2>\n<p><img src=\"assets/1.docker-infrustructure-75c043e9.png\" alt=\"\"></p>\n<h2 id=\"3-Docker能干什么\">3. Docker能干什么</h2>\n<p><img src=\"assets/1.docker-infrustructure-8f80df54.png\" alt=\"\"></p>\n<ul>\n<li>基于Docker的特征，现在常见的利用Docker进行持续集成的流程如下：<br>\n1.开发者提交代码；<br>\n2.镜像构建；<br>\n3.构建镜像上传至私有仓库；<br>\n4.镜像下载至执行机器（开发，测试，生产）；<br>\n5.镜像运行。</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-Docker是什么\">1. Docker是什么</h2>\n<p><img src=\"assets/README-3eade5a3.png\" alt=\"\"></p>\n<ul>\n<li>Docker 是一个开源的应用容器引擎，由 server ，rest api， Client 三部分组成，基于 Go 语言 并遵从Apache2.0协议开源。</li>\n</ul>\n<h2 id=\"2-Docker架构图\">2. Docker架构图</h2>\n<p><img src=\"assets/1.docker-infrustructure-75c043e9.png\" alt=\"\"></p>\n<h2 id=\"3-Docker能干什么\">3. Docker能干什么</h2>\n<p><img src=\"assets/1.docker-infrustructure-8f80df54.png\" alt=\"\"></p>\n<ul>\n<li>基于Docker的特征，现在常见的利用Docker进行持续集成的流程如下：<br>\n1.开发者提交代码；<br>\n2.镜像构建；<br>\n3.构建镜像上传至私有仓库；<br>\n4.镜像下载至执行机器（开发，测试，生产）；<br>\n5.镜像运行。</li>\n</ul>\n"},{"_content":"# 2.在k8s对数据库对支持\n   测试环境中，可以把mysql，mongdb，redis等服务部署到k8s集群，但是在生产环境中，建议剥离到单独的机器，不部署到k8s集群中。\n   1. 不建议，目前还够成熟。\n     - 数据安全性（数据备份）\n     - 网络需求 （增加复杂度）\n     - 容器状态（有状态和无状态，加大系统的故障排查范围）\n   2. 无头服务。引入外部服务\n   ```shell\n  apiVersion: v1\n  kind: Endpoints\n  metadata:\n    name: ep-mysql\n  subsets:\n    - addresses:\n      - ip: 192.168.4.9\n      ports:\n      - port: 3306\n        protocol: TCP\n   ```\n   ```shell\n  apiVersion: v1\n  kind: Service\n  metadata:\n    name: ep-mysql\n  spec:\n    ports:\n    - port: 80\n      protocol: TCP\n ```\n   访问： mysql -h p-mysql -u root -P 80 -p\n   3. 直接访问。外部数据库。\n","source":"docker/2.database-in-k8s.md","raw":"# 2.在k8s对数据库对支持\n   测试环境中，可以把mysql，mongdb，redis等服务部署到k8s集群，但是在生产环境中，建议剥离到单独的机器，不部署到k8s集群中。\n   1. 不建议，目前还够成熟。\n     - 数据安全性（数据备份）\n     - 网络需求 （增加复杂度）\n     - 容器状态（有状态和无状态，加大系统的故障排查范围）\n   2. 无头服务。引入外部服务\n   ```shell\n  apiVersion: v1\n  kind: Endpoints\n  metadata:\n    name: ep-mysql\n  subsets:\n    - addresses:\n      - ip: 192.168.4.9\n      ports:\n      - port: 3306\n        protocol: TCP\n   ```\n   ```shell\n  apiVersion: v1\n  kind: Service\n  metadata:\n    name: ep-mysql\n  spec:\n    ports:\n    - port: 80\n      protocol: TCP\n ```\n   访问： mysql -h p-mysql -u root -P 80 -p\n   3. 直接访问。外部数据库。\n","date":"2021-07-18T03:27:18.142Z","updated":"2021-01-14T01:19:25.940Z","path":"docker/2.database-in-k8s.html","title":"","comments":1,"layout":"page","_id":"ckrac7wy60005z8s6hrl737vo","content":"<h1>2.在k8s对数据库对支持</h1>\n<p>测试环境中，可以把mysql，mongdb，redis等服务部署到k8s集群，但是在生产环境中，建议剥离到单独的机器，不部署到k8s集群中。</p>\n<ol>\n<li>不建议，目前还够成熟。<br>\n- 数据安全性（数据备份）<br>\n- 网络需求 （增加复杂度）<br>\n- 容器状态（有状态和无状态，加大系统的故障排查范围）</li>\n<li>无头服务。引入外部服务</li>\n</ol>\n   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: v1</span><br><span class=\"line\">kind: Endpoints</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  name: ep-mysql</span><br><span class=\"line\">subsets:</span><br><span class=\"line\">  - addresses:</span><br><span class=\"line\">    - ip: 192.168.4.9</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">    - port: 3306</span><br><span class=\"line\">      protocol: TCP</span><br></pre></td></tr></table></figure>\n   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: v1</span><br><span class=\"line\">kind: Service</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  name: ep-mysql</span><br><span class=\"line\">spec:</span><br><span class=\"line\">  ports:</span><br><span class=\"line\">  - port: 80</span><br><span class=\"line\">    protocol: TCP</span><br></pre></td></tr></table></figure>\n<p>访问： mysql -h p-mysql -u root -P 80 -p<br>\n3. 直接访问。外部数据库。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1>2.在k8s对数据库对支持</h1>\n<p>测试环境中，可以把mysql，mongdb，redis等服务部署到k8s集群，但是在生产环境中，建议剥离到单独的机器，不部署到k8s集群中。</p>\n<ol>\n<li>不建议，目前还够成熟。<br>\n- 数据安全性（数据备份）<br>\n- 网络需求 （增加复杂度）<br>\n- 容器状态（有状态和无状态，加大系统的故障排查范围）</li>\n<li>无头服务。引入外部服务</li>\n</ol>\n   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: v1</span><br><span class=\"line\">kind: Endpoints</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  name: ep-mysql</span><br><span class=\"line\">subsets:</span><br><span class=\"line\">  - addresses:</span><br><span class=\"line\">    - ip: 192.168.4.9</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">    - port: 3306</span><br><span class=\"line\">      protocol: TCP</span><br></pre></td></tr></table></figure>\n   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: v1</span><br><span class=\"line\">kind: Service</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  name: ep-mysql</span><br><span class=\"line\">spec:</span><br><span class=\"line\">  ports:</span><br><span class=\"line\">  - port: 80</span><br><span class=\"line\">    protocol: TCP</span><br></pre></td></tr></table></figure>\n<p>访问： mysql -h p-mysql -u root -P 80 -p<br>\n3. 直接访问。外部数据库。</p>\n"},{"_content":"# 3.1.1 场景一、命令行构建镜像\n![](assets/3.1.docker-build-client-5c442ad0.png)\n\n### 1. 查找合适的基础镜像\n    -   docker images 查找本地镜像\n```shell\n   docker images\n```\n  ![](assets/3.1.docker-build-client-af040c46.png)\n    - docker search 查找dockerhub镜像。如果是pull太慢，可以设置阿里的容器镜像服务。\n```shell\n   docker search mysql\n```\n  ![](assets/3.1.docker-build-client-22c49142.png)\n    - 通过 dockerhub 查找镜像。\n```shell\n   docker pull openjdk:8u252-jre\n\n   docker pull tomcat:8.5.56-jdk8-adoptopenjdk-hotspot\n```\n  ![](assets/3.1.docker-build-client-af64f5a8.png)\n  ![](assets/3.1.docker-build-client-0a13bf6d.png)\n  ![](assets/3.1.docker-build-client-2832e624.png)\n### 2. 运行并进入到容器\n  - 后台方式运行一个容器。\n  - docker run 命令：\n```shell\n  -a stdin: 指定标准输入输出内容类型，可选 STDIN/STDOUT/STDERR 三项；\n\n  -d: 后台运行容器，并返回容器ID；\n\n  -i: 以交互模式运行容器，通常与 -t 同时使用；\n\n  -P: 随机端口映射，容器内部端口随机映射到主机的端口\n\n  -p: 指定端口映射，格式为：主机(宿主)端口:容器端口\n\n  -t: 为容器重新分配一个伪输入终端，通常与 -i 同时使用；\n\n  --name=\"nginx-lb\": 为容器指定一个名称；\n\n  --dns 8.8.8.8: 指定容器使用的DNS服务器，默认和宿主一致；\n\n  --dns-search example.com: 指定容器DNS搜索域名，默认和宿主一致；\n\n  -h \"mars\": 指定容器的hostname；\n\n  -e username=\"ritchie\": 设置环境变量；\n\n  --env-file=[]: 从指定文件读入环境变量；\n\n  --cpuset=\"0-2\" or --cpuset=\"0,1,2\": 绑定容器到指定CPU运行；\n\n  -m :设置容器使用内存最大值；\n\n  --net=\"bridge\": 指定容器的网络连接类型，支持 bridge/host/none/container: 四种类型；\n\n  --link=[]: 添加链接到另一个容器；\n\n  --expose=[]: 开放一个端口或一组端口；\n\n  --volume , -v: 绑定一个卷\n```\n```shell\n  docker run -itd busybox:1.29.3\n  docker exec -it 482aed1fe41 sh\n```\n\n ![](assets/3.1.docker-build-client-70a13111.png)\n -  进入运行中的容器并修改配置文件。\n ![](assets/3.1.docker-build-client-fcd4285e.png)\n### 3. 提交一个新的容器\n  - 对刚才修改后的容器保存一个新镜像。\n  ```shell\n    docker commit 482aed1fe41 mybusybox:v0.1\n  ```\n![](assets/3.1.docker-build-client-2fb8c48f.png)\n\n### 4. 验证新的容器\n![](assets/3.1.docker-build-client-55282df1.png)\n","source":"docker/3.1.1docker-build-client.md","raw":"# 3.1.1 场景一、命令行构建镜像\n![](assets/3.1.docker-build-client-5c442ad0.png)\n\n### 1. 查找合适的基础镜像\n    -   docker images 查找本地镜像\n```shell\n   docker images\n```\n  ![](assets/3.1.docker-build-client-af040c46.png)\n    - docker search 查找dockerhub镜像。如果是pull太慢，可以设置阿里的容器镜像服务。\n```shell\n   docker search mysql\n```\n  ![](assets/3.1.docker-build-client-22c49142.png)\n    - 通过 dockerhub 查找镜像。\n```shell\n   docker pull openjdk:8u252-jre\n\n   docker pull tomcat:8.5.56-jdk8-adoptopenjdk-hotspot\n```\n  ![](assets/3.1.docker-build-client-af64f5a8.png)\n  ![](assets/3.1.docker-build-client-0a13bf6d.png)\n  ![](assets/3.1.docker-build-client-2832e624.png)\n### 2. 运行并进入到容器\n  - 后台方式运行一个容器。\n  - docker run 命令：\n```shell\n  -a stdin: 指定标准输入输出内容类型，可选 STDIN/STDOUT/STDERR 三项；\n\n  -d: 后台运行容器，并返回容器ID；\n\n  -i: 以交互模式运行容器，通常与 -t 同时使用；\n\n  -P: 随机端口映射，容器内部端口随机映射到主机的端口\n\n  -p: 指定端口映射，格式为：主机(宿主)端口:容器端口\n\n  -t: 为容器重新分配一个伪输入终端，通常与 -i 同时使用；\n\n  --name=\"nginx-lb\": 为容器指定一个名称；\n\n  --dns 8.8.8.8: 指定容器使用的DNS服务器，默认和宿主一致；\n\n  --dns-search example.com: 指定容器DNS搜索域名，默认和宿主一致；\n\n  -h \"mars\": 指定容器的hostname；\n\n  -e username=\"ritchie\": 设置环境变量；\n\n  --env-file=[]: 从指定文件读入环境变量；\n\n  --cpuset=\"0-2\" or --cpuset=\"0,1,2\": 绑定容器到指定CPU运行；\n\n  -m :设置容器使用内存最大值；\n\n  --net=\"bridge\": 指定容器的网络连接类型，支持 bridge/host/none/container: 四种类型；\n\n  --link=[]: 添加链接到另一个容器；\n\n  --expose=[]: 开放一个端口或一组端口；\n\n  --volume , -v: 绑定一个卷\n```\n```shell\n  docker run -itd busybox:1.29.3\n  docker exec -it 482aed1fe41 sh\n```\n\n ![](assets/3.1.docker-build-client-70a13111.png)\n -  进入运行中的容器并修改配置文件。\n ![](assets/3.1.docker-build-client-fcd4285e.png)\n### 3. 提交一个新的容器\n  - 对刚才修改后的容器保存一个新镜像。\n  ```shell\n    docker commit 482aed1fe41 mybusybox:v0.1\n  ```\n![](assets/3.1.docker-build-client-2fb8c48f.png)\n\n### 4. 验证新的容器\n![](assets/3.1.docker-build-client-55282df1.png)\n","date":"2021-07-18T03:27:18.150Z","updated":"2021-01-14T01:19:25.942Z","path":"docker/3.1.1docker-build-client.html","title":"","comments":1,"layout":"page","_id":"ckrac7wy70006z8s6ecsq17cz","content":"<h1>3.1.1 场景一、命令行构建镜像</h1>\n<p><img src=\"assets/3.1.docker-build-client-5c442ad0.png\" alt=\"\"></p>\n<h3 id=\"1-查找合适的基础镜像\">1. 查找合适的基础镜像</h3>\n<pre><code>-   docker images 查找本地镜像\n</code></pre>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.1.docker-build-client-af040c46.png\" alt=\"\"><br>\n- docker search 查找dockerhub镜像。如果是pull太慢，可以设置阿里的容器镜像服务。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker search mysql</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.1.docker-build-client-22c49142.png\" alt=\"\"><br>\n- 通过 dockerhub 查找镜像。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull openjdk:8u252-jre</span><br><span class=\"line\"></span><br><span class=\"line\">docker pull tomcat:8.5.56-jdk8-adoptopenjdk-hotspot</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.1.docker-build-client-af64f5a8.png\" alt=\"\"><br>\n<img src=\"assets/3.1.docker-build-client-0a13bf6d.png\" alt=\"\"><br>\n<img src=\"assets/3.1.docker-build-client-2832e624.png\" alt=\"\"></p>\n<h3 id=\"2-运行并进入到容器\">2. 运行并进入到容器</h3>\n<ul>\n<li>后台方式运行一个容器。</li>\n<li>docker run 命令：</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-a stdin: 指定标准输入输出内容类型，可选 STDIN/STDOUT/STDERR 三项；</span><br><span class=\"line\"></span><br><span class=\"line\">-d: 后台运行容器，并返回容器ID；</span><br><span class=\"line\"></span><br><span class=\"line\">-i: 以交互模式运行容器，通常与 -t 同时使用；</span><br><span class=\"line\"></span><br><span class=\"line\">-P: 随机端口映射，容器内部端口随机映射到主机的端口</span><br><span class=\"line\"></span><br><span class=\"line\">-p: 指定端口映射，格式为：主机(宿主)端口:容器端口</span><br><span class=\"line\"></span><br><span class=\"line\">-t: 为容器重新分配一个伪输入终端，通常与 -i 同时使用；</span><br><span class=\"line\"></span><br><span class=\"line\">--name=&quot;nginx-lb&quot;: 为容器指定一个名称；</span><br><span class=\"line\"></span><br><span class=\"line\">--dns 8.8.8.8: 指定容器使用的DNS服务器，默认和宿主一致；</span><br><span class=\"line\"></span><br><span class=\"line\">--dns-search example.com: 指定容器DNS搜索域名，默认和宿主一致；</span><br><span class=\"line\"></span><br><span class=\"line\">-h &quot;mars&quot;: 指定容器的hostname；</span><br><span class=\"line\"></span><br><span class=\"line\">-e username=&quot;ritchie&quot;: 设置环境变量；</span><br><span class=\"line\"></span><br><span class=\"line\">--env-file=[]: 从指定文件读入环境变量；</span><br><span class=\"line\"></span><br><span class=\"line\">--cpuset=&quot;0-2&quot; or --cpuset=&quot;0,1,2&quot;: 绑定容器到指定CPU运行；</span><br><span class=\"line\"></span><br><span class=\"line\">-m :设置容器使用内存最大值；</span><br><span class=\"line\"></span><br><span class=\"line\">--net=&quot;bridge&quot;: 指定容器的网络连接类型，支持 bridge/host/none/container: 四种类型；</span><br><span class=\"line\"></span><br><span class=\"line\">--link=[]: 添加链接到另一个容器；</span><br><span class=\"line\"></span><br><span class=\"line\">--expose=[]: 开放一个端口或一组端口；</span><br><span class=\"line\"></span><br><span class=\"line\">--volume , -v: 绑定一个卷</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd busybox:1.29.3</span><br><span class=\"line\">docker exec -it 482aed1fe41 sh</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.1.docker-build-client-70a13111.png\" alt=\"\"></p>\n<ul>\n<li>进入运行中的容器并修改配置文件。<br>\n<img src=\"assets/3.1.docker-build-client-fcd4285e.png\" alt=\"\"></li>\n</ul>\n<h3 id=\"3-提交一个新的容器\">3. 提交一个新的容器</h3>\n<ul>\n<li>对刚才修改后的容器保存一个新镜像。</li>\n</ul>\n  <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker commit 482aed1fe41 mybusybox:v0.1</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.1.docker-build-client-2fb8c48f.png\" alt=\"\"></p>\n<h3 id=\"4-验证新的容器\">4. 验证新的容器</h3>\n<p><img src=\"assets/3.1.docker-build-client-55282df1.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>3.1.1 场景一、命令行构建镜像</h1>\n<p><img src=\"assets/3.1.docker-build-client-5c442ad0.png\" alt=\"\"></p>\n<h3 id=\"1-查找合适的基础镜像\">1. 查找合适的基础镜像</h3>\n<pre><code>-   docker images 查找本地镜像\n</code></pre>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.1.docker-build-client-af040c46.png\" alt=\"\"><br>\n- docker search 查找dockerhub镜像。如果是pull太慢，可以设置阿里的容器镜像服务。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker search mysql</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.1.docker-build-client-22c49142.png\" alt=\"\"><br>\n- 通过 dockerhub 查找镜像。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull openjdk:8u252-jre</span><br><span class=\"line\"></span><br><span class=\"line\">docker pull tomcat:8.5.56-jdk8-adoptopenjdk-hotspot</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.1.docker-build-client-af64f5a8.png\" alt=\"\"><br>\n<img src=\"assets/3.1.docker-build-client-0a13bf6d.png\" alt=\"\"><br>\n<img src=\"assets/3.1.docker-build-client-2832e624.png\" alt=\"\"></p>\n<h3 id=\"2-运行并进入到容器\">2. 运行并进入到容器</h3>\n<ul>\n<li>后台方式运行一个容器。</li>\n<li>docker run 命令：</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-a stdin: 指定标准输入输出内容类型，可选 STDIN/STDOUT/STDERR 三项；</span><br><span class=\"line\"></span><br><span class=\"line\">-d: 后台运行容器，并返回容器ID；</span><br><span class=\"line\"></span><br><span class=\"line\">-i: 以交互模式运行容器，通常与 -t 同时使用；</span><br><span class=\"line\"></span><br><span class=\"line\">-P: 随机端口映射，容器内部端口随机映射到主机的端口</span><br><span class=\"line\"></span><br><span class=\"line\">-p: 指定端口映射，格式为：主机(宿主)端口:容器端口</span><br><span class=\"line\"></span><br><span class=\"line\">-t: 为容器重新分配一个伪输入终端，通常与 -i 同时使用；</span><br><span class=\"line\"></span><br><span class=\"line\">--name=&quot;nginx-lb&quot;: 为容器指定一个名称；</span><br><span class=\"line\"></span><br><span class=\"line\">--dns 8.8.8.8: 指定容器使用的DNS服务器，默认和宿主一致；</span><br><span class=\"line\"></span><br><span class=\"line\">--dns-search example.com: 指定容器DNS搜索域名，默认和宿主一致；</span><br><span class=\"line\"></span><br><span class=\"line\">-h &quot;mars&quot;: 指定容器的hostname；</span><br><span class=\"line\"></span><br><span class=\"line\">-e username=&quot;ritchie&quot;: 设置环境变量；</span><br><span class=\"line\"></span><br><span class=\"line\">--env-file=[]: 从指定文件读入环境变量；</span><br><span class=\"line\"></span><br><span class=\"line\">--cpuset=&quot;0-2&quot; or --cpuset=&quot;0,1,2&quot;: 绑定容器到指定CPU运行；</span><br><span class=\"line\"></span><br><span class=\"line\">-m :设置容器使用内存最大值；</span><br><span class=\"line\"></span><br><span class=\"line\">--net=&quot;bridge&quot;: 指定容器的网络连接类型，支持 bridge/host/none/container: 四种类型；</span><br><span class=\"line\"></span><br><span class=\"line\">--link=[]: 添加链接到另一个容器；</span><br><span class=\"line\"></span><br><span class=\"line\">--expose=[]: 开放一个端口或一组端口；</span><br><span class=\"line\"></span><br><span class=\"line\">--volume , -v: 绑定一个卷</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd busybox:1.29.3</span><br><span class=\"line\">docker exec -it 482aed1fe41 sh</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.1.docker-build-client-70a13111.png\" alt=\"\"></p>\n<ul>\n<li>进入运行中的容器并修改配置文件。<br>\n<img src=\"assets/3.1.docker-build-client-fcd4285e.png\" alt=\"\"></li>\n</ul>\n<h3 id=\"3-提交一个新的容器\">3. 提交一个新的容器</h3>\n<ul>\n<li>对刚才修改后的容器保存一个新镜像。</li>\n</ul>\n  <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker commit 482aed1fe41 mybusybox:v0.1</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.1.docker-build-client-2fb8c48f.png\" alt=\"\"></p>\n<h3 id=\"4-验证新的容器\">4. 验证新的容器</h3>\n<p><img src=\"assets/3.1.docker-build-client-55282df1.png\" alt=\"\"></p>\n"},{"_content":"# 2.Docker底层原理\n## 1. Docker容器的启动过程：\n - 容器的启动命令：\n  docker run -i -t ubuntu /bin/bash\n![](assets/2.what-docker-todo-860e7fc0.png)\n  1. docker client(即：docker终端命令行)会调用docker daemon请求启动一个容器，\n  2. docker daemon会向host os(即：linux)请求创建容器\n  3. linux会创建一个空的容器（可以简单理解为：一个未安装操作系统的裸机，只有虚拟出来的CPU、内存等硬件资源）\n  4. docker daemon请检查本机是否存在docker镜像文件（可以简单理解为操作系统安装光盘），如果有，则加载到容器中（即：光盘插入裸机，准备安装操作系统）\n  5. 将镜像文件加载到容器中（即：裸机上安装好了操作系统，不再是裸机状态）\n## 2. Docker的核心技术：\n  Docker容器本质上是属主机上的进程。Docker通过namespace实现了资源隔离，通过cgroups实现了资源限制，通过写时复制机制（copy-on-write）实现了高效的文件操作。\n - namespace 是 Linux 为我们提供的用于分离进程树、网络接口、挂载点以及进程间通信等资源的方法。Linux内核提供了下面6种namespace隔离的系统调用。目的就是实现轻量级虚拟化（容器）服务。在同一个namespace下的进程可以感知彼此，而对外界的进程一无所知。以达到独立和隔离的目的。\n ![](assets/2.what-docker-todo-372ee802.png)\n 参考：http://dockone.io/article/2941\n - cgroups资源限制，四大功能\n  资源限制：可以对任务使用的资源总额进行限制\n　优先级分配：通过分配的cpu时间片数量以及磁盘IO带宽大小，实际上相当于控制了任务运行优先级\n　资源统计：可以统计系统的资源使用量，如cpu时长，内存用量等\n　任务控制：cgroup可以对任务执行挂起、恢复等操作\n## 3. 容器化思维：\n###### 我如何进行容器调试，该怎么办？\n###### sshd要怎么配置？\n###### 容器如何做备份？\n  - SSH服务器的替代方案\n  首先Docker不是一个轻量级虚拟机技术，他实际上是一个进程，所以不需要考虑ssh服务器，也就不需要配置。在容器里，提供 docker exec命令， 可以进入已经运行的容器，在里面执行命令。\n  - 如果说要长期使用的配置文件，就做到镜像中，如果是经常修改的配置文件，就需要用到docker数据卷共享这个配置文件。\n","source":"docker/2.what-docker-todo.md","raw":"# 2.Docker底层原理\n## 1. Docker容器的启动过程：\n - 容器的启动命令：\n  docker run -i -t ubuntu /bin/bash\n![](assets/2.what-docker-todo-860e7fc0.png)\n  1. docker client(即：docker终端命令行)会调用docker daemon请求启动一个容器，\n  2. docker daemon会向host os(即：linux)请求创建容器\n  3. linux会创建一个空的容器（可以简单理解为：一个未安装操作系统的裸机，只有虚拟出来的CPU、内存等硬件资源）\n  4. docker daemon请检查本机是否存在docker镜像文件（可以简单理解为操作系统安装光盘），如果有，则加载到容器中（即：光盘插入裸机，准备安装操作系统）\n  5. 将镜像文件加载到容器中（即：裸机上安装好了操作系统，不再是裸机状态）\n## 2. Docker的核心技术：\n  Docker容器本质上是属主机上的进程。Docker通过namespace实现了资源隔离，通过cgroups实现了资源限制，通过写时复制机制（copy-on-write）实现了高效的文件操作。\n - namespace 是 Linux 为我们提供的用于分离进程树、网络接口、挂载点以及进程间通信等资源的方法。Linux内核提供了下面6种namespace隔离的系统调用。目的就是实现轻量级虚拟化（容器）服务。在同一个namespace下的进程可以感知彼此，而对外界的进程一无所知。以达到独立和隔离的目的。\n ![](assets/2.what-docker-todo-372ee802.png)\n 参考：http://dockone.io/article/2941\n - cgroups资源限制，四大功能\n  资源限制：可以对任务使用的资源总额进行限制\n　优先级分配：通过分配的cpu时间片数量以及磁盘IO带宽大小，实际上相当于控制了任务运行优先级\n　资源统计：可以统计系统的资源使用量，如cpu时长，内存用量等\n　任务控制：cgroup可以对任务执行挂起、恢复等操作\n## 3. 容器化思维：\n###### 我如何进行容器调试，该怎么办？\n###### sshd要怎么配置？\n###### 容器如何做备份？\n  - SSH服务器的替代方案\n  首先Docker不是一个轻量级虚拟机技术，他实际上是一个进程，所以不需要考虑ssh服务器，也就不需要配置。在容器里，提供 docker exec命令， 可以进入已经运行的容器，在里面执行命令。\n  - 如果说要长期使用的配置文件，就做到镜像中，如果是经常修改的配置文件，就需要用到docker数据卷共享这个配置文件。\n","date":"2021-07-18T03:27:18.145Z","updated":"2021-01-14T01:19:26.017Z","path":"docker/2.what-docker-todo.html","title":"","comments":1,"layout":"page","_id":"ckrac7wy80007z8s61yswcjmb","content":"<h1>2.Docker底层原理</h1>\n<h2 id=\"1-Docker容器的启动过程：\">1. Docker容器的启动过程：</h2>\n<ul>\n<li>容器的启动命令：<br>\ndocker run -i -t ubuntu /bin/bash<br>\n<img src=\"assets/2.what-docker-todo-860e7fc0.png\" alt=\"\"></li>\n</ul>\n<ol>\n<li>docker client(即：docker终端命令行)会调用docker daemon请求启动一个容器，</li>\n<li>docker daemon会向host os(即：linux)请求创建容器</li>\n<li>linux会创建一个空的容器（可以简单理解为：一个未安装操作系统的裸机，只有虚拟出来的CPU、内存等硬件资源）</li>\n<li>docker daemon请检查本机是否存在docker镜像文件（可以简单理解为操作系统安装光盘），如果有，则加载到容器中（即：光盘插入裸机，准备安装操作系统）</li>\n<li>将镜像文件加载到容器中（即：裸机上安装好了操作系统，不再是裸机状态）</li>\n</ol>\n<h2 id=\"2-Docker的核心技术：\">2. Docker的核心技术：</h2>\n<p>Docker容器本质上是属主机上的进程。Docker通过namespace实现了资源隔离，通过cgroups实现了资源限制，通过写时复制机制（copy-on-write）实现了高效的文件操作。</p>\n<ul>\n<li>namespace 是 Linux 为我们提供的用于分离进程树、网络接口、挂载点以及进程间通信等资源的方法。Linux内核提供了下面6种namespace隔离的系统调用。目的就是实现轻量级虚拟化（容器）服务。在同一个namespace下的进程可以感知彼此，而对外界的进程一无所知。以达到独立和隔离的目的。<br>\n<img src=\"assets/2.what-docker-todo-372ee802.png\" alt=\"\"><br>\n参考：<a href=\"http://dockone.io/article/2941\">http://dockone.io/article/2941</a></li>\n<li>cgroups资源限制，四大功能<br>\n资源限制：可以对任务使用的资源总额进行限制<br>\n　优先级分配：通过分配的cpu时间片数量以及磁盘IO带宽大小，实际上相当于控制了任务运行优先级<br>\n　资源统计：可以统计系统的资源使用量，如cpu时长，内存用量等<br>\n　任务控制：cgroup可以对任务执行挂起、恢复等操作</li>\n</ul>\n<h2 id=\"3-容器化思维：\">3. 容器化思维：</h2>\n<h6 id=\"我如何进行容器调试，该怎么办？\">我如何进行容器调试，该怎么办？</h6>\n<h6 id=\"sshd要怎么配置？\">sshd要怎么配置？</h6>\n<h6 id=\"容器如何做备份？\">容器如何做备份？</h6>\n<ul>\n<li>SSH服务器的替代方案<br>\n首先Docker不是一个轻量级虚拟机技术，他实际上是一个进程，所以不需要考虑ssh服务器，也就不需要配置。在容器里，提供 docker exec命令， 可以进入已经运行的容器，在里面执行命令。</li>\n<li>如果说要长期使用的配置文件，就做到镜像中，如果是经常修改的配置文件，就需要用到docker数据卷共享这个配置文件。</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>2.Docker底层原理</h1>\n<h2 id=\"1-Docker容器的启动过程：\">1. Docker容器的启动过程：</h2>\n<ul>\n<li>容器的启动命令：<br>\ndocker run -i -t ubuntu /bin/bash<br>\n<img src=\"assets/2.what-docker-todo-860e7fc0.png\" alt=\"\"></li>\n</ul>\n<ol>\n<li>docker client(即：docker终端命令行)会调用docker daemon请求启动一个容器，</li>\n<li>docker daemon会向host os(即：linux)请求创建容器</li>\n<li>linux会创建一个空的容器（可以简单理解为：一个未安装操作系统的裸机，只有虚拟出来的CPU、内存等硬件资源）</li>\n<li>docker daemon请检查本机是否存在docker镜像文件（可以简单理解为操作系统安装光盘），如果有，则加载到容器中（即：光盘插入裸机，准备安装操作系统）</li>\n<li>将镜像文件加载到容器中（即：裸机上安装好了操作系统，不再是裸机状态）</li>\n</ol>\n<h2 id=\"2-Docker的核心技术：\">2. Docker的核心技术：</h2>\n<p>Docker容器本质上是属主机上的进程。Docker通过namespace实现了资源隔离，通过cgroups实现了资源限制，通过写时复制机制（copy-on-write）实现了高效的文件操作。</p>\n<ul>\n<li>namespace 是 Linux 为我们提供的用于分离进程树、网络接口、挂载点以及进程间通信等资源的方法。Linux内核提供了下面6种namespace隔离的系统调用。目的就是实现轻量级虚拟化（容器）服务。在同一个namespace下的进程可以感知彼此，而对外界的进程一无所知。以达到独立和隔离的目的。<br>\n<img src=\"assets/2.what-docker-todo-372ee802.png\" alt=\"\"><br>\n参考：<a href=\"http://dockone.io/article/2941\">http://dockone.io/article/2941</a></li>\n<li>cgroups资源限制，四大功能<br>\n资源限制：可以对任务使用的资源总额进行限制<br>\n　优先级分配：通过分配的cpu时间片数量以及磁盘IO带宽大小，实际上相当于控制了任务运行优先级<br>\n　资源统计：可以统计系统的资源使用量，如cpu时长，内存用量等<br>\n　任务控制：cgroup可以对任务执行挂起、恢复等操作</li>\n</ul>\n<h2 id=\"3-容器化思维：\">3. 容器化思维：</h2>\n<h6 id=\"我如何进行容器调试，该怎么办？\">我如何进行容器调试，该怎么办？</h6>\n<h6 id=\"sshd要怎么配置？\">sshd要怎么配置？</h6>\n<h6 id=\"容器如何做备份？\">容器如何做备份？</h6>\n<ul>\n<li>SSH服务器的替代方案<br>\n首先Docker不是一个轻量级虚拟机技术，他实际上是一个进程，所以不需要考虑ssh服务器，也就不需要配置。在容器里，提供 docker exec命令， 可以进入已经运行的容器，在里面执行命令。</li>\n<li>如果说要长期使用的配置文件，就做到镜像中，如果是经常修改的配置文件，就需要用到docker数据卷共享这个配置文件。</li>\n</ul>\n"},{"_content":"# 3.1.Docker镜像构建\n* [3.1.Docker镜像构建](3.1.docker-build)\n    * [3.1.1 场景一、命令行构建](3.1.1docker-build-client)\n    * [3.1.2 场景二、Dockerfile构建](3.1.2docker-build-dockerfile)\n","source":"docker/3.1.docker-build.md","raw":"# 3.1.Docker镜像构建\n* [3.1.Docker镜像构建](3.1.docker-build)\n    * [3.1.1 场景一、命令行构建](3.1.1docker-build-client)\n    * [3.1.2 场景二、Dockerfile构建](3.1.2docker-build-dockerfile)\n","date":"2021-07-18T14:15:47.746Z","updated":"2021-07-18T14:15:47.746Z","path":"docker/3.1.docker-build.html","title":"","comments":1,"layout":"page","_id":"ckrac7wy90008z8s6c70bdbum","content":"<h1>3.1.Docker镜像构建</h1>\n<ul>\n<li><a href=\"3.1.docker-build\">3.1.Docker镜像构建</a>\n<ul>\n<li><a href=\"3.1.1docker-build-client\">3.1.1 场景一、命令行构建</a></li>\n<li><a href=\"3.1.2docker-build-dockerfile\">3.1.2 场景二、Dockerfile构建</a></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>3.1.Docker镜像构建</h1>\n<ul>\n<li><a href=\"3.1.docker-build\">3.1.Docker镜像构建</a>\n<ul>\n<li><a href=\"3.1.1docker-build-client\">3.1.1 场景一、命令行构建</a></li>\n<li><a href=\"3.1.2docker-build-dockerfile\">3.1.2 场景二、Dockerfile构建</a></li>\n</ul>\n</li>\n</ul>\n"},{"_content":"# 3.1.2 场景二、Dockerfile构建\n### 1.dockerfile语法：\n![](assets/3.1.docker-build-dockerfile-5738e6c7.png)\n 参考：https://db2go.net/k8s/docker/3-dockerfile%E4%BB%8B%E7%BB%8D.html\n### 2.编写镜像文件Dockerfile步骤图：\n![](assets/3.1.2docker-build-dockerfile-0159e81f.png)\n### 3.构建镜像文件Dockerfile：\n```shell\n构建命令： docker build -t eureka:jre8-v1.0  .\n\nSending build context to Docker daemon  42.91MB\nStep 1/6 : FROM openjdk:8-jre-alpine\n ---> f7a292bbb70c\nStep 2/6 : MAINTAINER xxx@sgcc.com.cn\n ---> Using cache\n ---> 8c3ba67a2209\nStep 3/6 : COPY eureka.jar /opt/eureka.jar\n ---> Using cache\n ---> 316ca7606ca5\nStep 4/6 : WORKDIR /opt\n ---> Using cache\n ---> b8940ce2741e\nStep 5/6 : EXPOSE 8761\n ---> Using cache\n ---> b67b2687a83f\nStep 6/6 : CMD java $JAVA_OPTIONS -jar eureka.jar\n ---> Using cache\n ---> ea902f82499a\nSuccessfully built ea902f82499a\nSuccessfully tagged eureka:jre8-v1.0\n```\n### 4.查找并运行镜像：\n```shell\n  docker images|grep eureka\n  docker run -d -e JAVA_OPTIONS='-Xmx512M -Xms512M' hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-demo:1.5.0-SNAPSHOT \n```\n![](assets/3.1.docker-build-dockerfile-d866744b.png)\n - docker ps|grep eureka 查询运行到容器\n![](assets/3.1.docker-build-dockerfile-51113ade.png)\n","source":"docker/3.1.2docker-build-dockerfile.md","raw":"# 3.1.2 场景二、Dockerfile构建\n### 1.dockerfile语法：\n![](assets/3.1.docker-build-dockerfile-5738e6c7.png)\n 参考：https://db2go.net/k8s/docker/3-dockerfile%E4%BB%8B%E7%BB%8D.html\n### 2.编写镜像文件Dockerfile步骤图：\n![](assets/3.1.2docker-build-dockerfile-0159e81f.png)\n### 3.构建镜像文件Dockerfile：\n```shell\n构建命令： docker build -t eureka:jre8-v1.0  .\n\nSending build context to Docker daemon  42.91MB\nStep 1/6 : FROM openjdk:8-jre-alpine\n ---> f7a292bbb70c\nStep 2/6 : MAINTAINER xxx@sgcc.com.cn\n ---> Using cache\n ---> 8c3ba67a2209\nStep 3/6 : COPY eureka.jar /opt/eureka.jar\n ---> Using cache\n ---> 316ca7606ca5\nStep 4/6 : WORKDIR /opt\n ---> Using cache\n ---> b8940ce2741e\nStep 5/6 : EXPOSE 8761\n ---> Using cache\n ---> b67b2687a83f\nStep 6/6 : CMD java $JAVA_OPTIONS -jar eureka.jar\n ---> Using cache\n ---> ea902f82499a\nSuccessfully built ea902f82499a\nSuccessfully tagged eureka:jre8-v1.0\n```\n### 4.查找并运行镜像：\n```shell\n  docker images|grep eureka\n  docker run -d -e JAVA_OPTIONS='-Xmx512M -Xms512M' hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-demo:1.5.0-SNAPSHOT \n```\n![](assets/3.1.docker-build-dockerfile-d866744b.png)\n - docker ps|grep eureka 查询运行到容器\n![](assets/3.1.docker-build-dockerfile-51113ade.png)\n","date":"2021-07-18T03:27:18.162Z","updated":"2021-01-14T01:19:25.830Z","path":"docker/3.1.2docker-build-dockerfile.html","title":"","comments":1,"layout":"page","_id":"ckrac7wy90009z8s68fevapyo","content":"<h1>3.1.2 场景二、Dockerfile构建</h1>\n<h3 id=\"1-dockerfile语法：\">1.dockerfile语法：</h3>\n<p><img src=\"assets/3.1.docker-build-dockerfile-5738e6c7.png\" alt=\"\"><br>\n参考：<a href=\"https://db2go.net/k8s/docker/3-dockerfile%E4%BB%8B%E7%BB%8D.html\">https://db2go.net/k8s/docker/3-dockerfile介绍.html</a></p>\n<h3 id=\"2-编写镜像文件Dockerfile步骤图：\">2.编写镜像文件Dockerfile步骤图：</h3>\n<p><img src=\"assets/3.1.2docker-build-dockerfile-0159e81f.png\" alt=\"\"></p>\n<h3 id=\"3-构建镜像文件Dockerfile：\">3.构建镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">构建命令： docker build -t eureka:jre8-v1.0  .</span><br><span class=\"line\"></span><br><span class=\"line\">Sending build context to Docker daemon  42.91MB</span><br><span class=\"line\">Step 1/6 : FROM openjdk:8-jre-alpine</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> f7a292bbb70c</span></span><br><span class=\"line\">Step 2/6 : MAINTAINER xxx@sgcc.com.cn</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 8c3ba67a2209</span></span><br><span class=\"line\">Step 3/6 : COPY eureka.jar /opt/eureka.jar</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 316ca7606ca5</span></span><br><span class=\"line\">Step 4/6 : WORKDIR /opt</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> b8940ce2741e</span></span><br><span class=\"line\">Step 5/6 : EXPOSE 8761</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> b67b2687a83f</span></span><br><span class=\"line\">Step 6/6 : CMD java $JAVA_OPTIONS -jar eureka.jar</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> ea902f82499a</span></span><br><span class=\"line\">Successfully built ea902f82499a</span><br><span class=\"line\">Successfully tagged eureka:jre8-v1.0</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-查找并运行镜像：\">4.查找并运行镜像：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images|grep eureka</span><br><span class=\"line\">docker run -d -e JAVA_OPTIONS=&#x27;-Xmx512M -Xms512M&#x27; hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-demo:1.5.0-SNAPSHOT </span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.1.docker-build-dockerfile-d866744b.png\" alt=\"\"></p>\n<ul>\n<li>docker ps|grep eureka 查询运行到容器<br>\n<img src=\"assets/3.1.docker-build-dockerfile-51113ade.png\" alt=\"\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>3.1.2 场景二、Dockerfile构建</h1>\n<h3 id=\"1-dockerfile语法：\">1.dockerfile语法：</h3>\n<p><img src=\"assets/3.1.docker-build-dockerfile-5738e6c7.png\" alt=\"\"><br>\n参考：<a href=\"https://db2go.net/k8s/docker/3-dockerfile%E4%BB%8B%E7%BB%8D.html\">https://db2go.net/k8s/docker/3-dockerfile介绍.html</a></p>\n<h3 id=\"2-编写镜像文件Dockerfile步骤图：\">2.编写镜像文件Dockerfile步骤图：</h3>\n<p><img src=\"assets/3.1.2docker-build-dockerfile-0159e81f.png\" alt=\"\"></p>\n<h3 id=\"3-构建镜像文件Dockerfile：\">3.构建镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">构建命令： docker build -t eureka:jre8-v1.0  .</span><br><span class=\"line\"></span><br><span class=\"line\">Sending build context to Docker daemon  42.91MB</span><br><span class=\"line\">Step 1/6 : FROM openjdk:8-jre-alpine</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> f7a292bbb70c</span></span><br><span class=\"line\">Step 2/6 : MAINTAINER xxx@sgcc.com.cn</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 8c3ba67a2209</span></span><br><span class=\"line\">Step 3/6 : COPY eureka.jar /opt/eureka.jar</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 316ca7606ca5</span></span><br><span class=\"line\">Step 4/6 : WORKDIR /opt</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> b8940ce2741e</span></span><br><span class=\"line\">Step 5/6 : EXPOSE 8761</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> b67b2687a83f</span></span><br><span class=\"line\">Step 6/6 : CMD java $JAVA_OPTIONS -jar eureka.jar</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> ea902f82499a</span></span><br><span class=\"line\">Successfully built ea902f82499a</span><br><span class=\"line\">Successfully tagged eureka:jre8-v1.0</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-查找并运行镜像：\">4.查找并运行镜像：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images|grep eureka</span><br><span class=\"line\">docker run -d -e JAVA_OPTIONS=&#x27;-Xmx512M -Xms512M&#x27; hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-demo:1.5.0-SNAPSHOT </span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.1.docker-build-dockerfile-d866744b.png\" alt=\"\"></p>\n<ul>\n<li>docker ps|grep eureka 查询运行到容器<br>\n<img src=\"assets/3.1.docker-build-dockerfile-51113ade.png\" alt=\"\"></li>\n</ul>\n"},{"_content":"# 3.3.war包应用构建\n\n### 准备工作，1.数据库准备，程序源码\n```shell\nhttps://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-war\n```\n### 1.准备cok-war包，编写镜像文件Dockerfile：\n```shell\nfrom tomcat:8.5.55-jdk8\nRUN rm -fr /usr/local/tomcat/webapps/ROOT\nCOPY target/cok-war /usr/local/tomcat/webapps/ROOT\n```\n### 2.构建镜像文件Dockerfile：\n```shell\ndocker build -t hub.aosccs.com.cn:8888/test1/cok-war:v1.0 .\n```\n### 3.启动容器：\n```shell\ndocker run -itd  --name cok-war -v /root/luojunjie/docker/war/cok-war/jdbc.properties:/usr/local/tomcat/webapps/ROOT/WEB-INF/classes/prop/jdbc.properties -p 18080:8080  hub.aosccs.com.cn:8888/test1/cok-war:v1.0\n```\n### 4.访问：\nhttp://192.168.3.6:18080/test/index\n![](assets/3.3.docker-build-war-1c2f92f2.png)\n","source":"docker/3.3.docker-build-war.md","raw":"# 3.3.war包应用构建\n\n### 准备工作，1.数据库准备，程序源码\n```shell\nhttps://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-war\n```\n### 1.准备cok-war包，编写镜像文件Dockerfile：\n```shell\nfrom tomcat:8.5.55-jdk8\nRUN rm -fr /usr/local/tomcat/webapps/ROOT\nCOPY target/cok-war /usr/local/tomcat/webapps/ROOT\n```\n### 2.构建镜像文件Dockerfile：\n```shell\ndocker build -t hub.aosccs.com.cn:8888/test1/cok-war:v1.0 .\n```\n### 3.启动容器：\n```shell\ndocker run -itd  --name cok-war -v /root/luojunjie/docker/war/cok-war/jdbc.properties:/usr/local/tomcat/webapps/ROOT/WEB-INF/classes/prop/jdbc.properties -p 18080:8080  hub.aosccs.com.cn:8888/test1/cok-war:v1.0\n```\n### 4.访问：\nhttp://192.168.3.6:18080/test/index\n![](assets/3.3.docker-build-war-1c2f92f2.png)\n","date":"2021-07-18T03:27:18.138Z","updated":"2021-01-14T01:19:26.024Z","path":"docker/3.3.docker-build-war.html","title":"","comments":1,"layout":"page","_id":"ckrac7wyb000az8s6764layk8","content":"<h1>3.3.war包应用构建</h1>\n<h3 id=\"准备工作，1-数据库准备，程序源码\">准备工作，1.数据库准备，程序源码</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-war</span><br></pre></td></tr></table></figure>\n<h3 id=\"1-准备cok-war包，编写镜像文件Dockerfile：\">1.准备cok-war包，编写镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from tomcat:8.5.55-jdk8</span><br><span class=\"line\">RUN rm -fr /usr/local/tomcat/webapps/ROOT</span><br><span class=\"line\">COPY target/cok-war /usr/local/tomcat/webapps/ROOT</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-构建镜像文件Dockerfile：\">2.构建镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t hub.aosccs.com.cn:8888/test1/cok-war:v1.0 .</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-启动容器：\">3.启动容器：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd  --name cok-war -v /root/luojunjie/docker/war/cok-war/jdbc.properties:/usr/local/tomcat/webapps/ROOT/WEB-INF/classes/prop/jdbc.properties -p 18080:8080  hub.aosccs.com.cn:8888/test1/cok-war:v1.0</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-访问：\">4.访问：</h3>\n<p><a href=\"http://192.168.3.6:18080/test/index\">http://192.168.3.6:18080/test/index</a><br>\n<img src=\"assets/3.3.docker-build-war-1c2f92f2.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>3.3.war包应用构建</h1>\n<h3 id=\"准备工作，1-数据库准备，程序源码\">准备工作，1.数据库准备，程序源码</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-war</span><br></pre></td></tr></table></figure>\n<h3 id=\"1-准备cok-war包，编写镜像文件Dockerfile：\">1.准备cok-war包，编写镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from tomcat:8.5.55-jdk8</span><br><span class=\"line\">RUN rm -fr /usr/local/tomcat/webapps/ROOT</span><br><span class=\"line\">COPY target/cok-war /usr/local/tomcat/webapps/ROOT</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-构建镜像文件Dockerfile：\">2.构建镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t hub.aosccs.com.cn:8888/test1/cok-war:v1.0 .</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-启动容器：\">3.启动容器：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd  --name cok-war -v /root/luojunjie/docker/war/cok-war/jdbc.properties:/usr/local/tomcat/webapps/ROOT/WEB-INF/classes/prop/jdbc.properties -p 18080:8080  hub.aosccs.com.cn:8888/test1/cok-war:v1.0</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-访问：\">4.访问：</h3>\n<p><a href=\"http://192.168.3.6:18080/test/index\">http://192.168.3.6:18080/test/index</a><br>\n<img src=\"assets/3.3.docker-build-war-1c2f92f2.png\" alt=\"\"></p>\n"},{"_content":"# 3.2.微服务应用构建\n### 准备工作，1.准备微服务需要的数据库，redis。2.微服务容器网络创建：\n```shell\ndocker network create -d bridge acloudbridge\n```\n![](assets/3.2.docker-build-cloud-d6ef43c8.png)\n### 1.准备微服务eureka jar包，编写镜像文件Dockerfile：\n```shell\nFROM openjdk:8-jre-alpine\n\nMAINTAINER xxx@sgcc.com.cn\n\nRUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && echo 'Asia/Shanghai' >/etc/timezone\n\nCOPY acloud-bc-eureka-server-1.5.0-20191104.021740-73.jar /u01/app.jar\n\nWORKDIR /u01\n\nEXPOSE 18003\n\nCMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar\n```\n### 2.构建镜像文件Dockerfile：\n```shell\n[root@host-192-168-3-6 eureka]# docker build -t hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-server:1.5.0-SNAPSHOT .\nSending build context to Docker daemon  66.82MB\nStep 1/7 : FROM openjdk:8-jre-alpine\n ---> f7a292bbb70c\nStep 2/7 : RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && echo 'Asia/Shanghai' >/etc/timezone\n ---> Using cache\n ---> 692554e348a5\nStep 3/7 : MAINTAINER xxx@sgcc.com.cn\n ---> Using cache\n ---> 7b6f340614d6\nStep 4/7 : COPY acloud-bc-eureka-server-1.5.0-20191104.021740-73.jar /u01/app.jar\n ---> Using cache\n ---> 17acd0f679c0\nStep 5/7 : WORKDIR /u01\n ---> Using cache\n ---> f9983504e266\nStep 6/7 : EXPOSE 18003\n ---> Using cache\n ---> 7018737f83e5\nStep 7/7 : CMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar\n ---> Running in 3499e7c24271\nRemoving intermediate container 3499e7c24271\n ---> ddf59ada10d6\nSuccessfully built ddf59ada10d6\nSuccessfully tagged hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-server:1.5.0-SNAPSHOT\n```\n### 3.启动eureka容器：\n```shell\ndocker run -itd --network acloudbridge  --name acloud-eureka -p 18003:18003 -v /root/luojunjie/docker/acloud/eureka/logs:/u01/target/logs  -v /root/luojunjie/docker/acloud/eureka/application.yml:/u01/application.yml -v /root/luojunjie/docker/acloud/eureka/bootstrap.yml:/u01/bootstrap.yml  hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-server:1.5.0-SNAPSHOT  \n```\n![](assets/3.2.docker-build-cloud-81f63f76.png)\n\n### 4.准备微服务zuul jar包，编写镜像文件Dockerfile：\n```shell\nFROM openjdk:8-jre-alpine\n\nMAINTAINER xxx@sgcc.com.cn\n\nRUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && echo 'Asia/Shanghai' >/etc/timezone\n\n\nCOPY acloud-bc-zuul-server-1.5.0-20191205.105939-106.jar /u01/app.jar\n\nWORKDIR /u01\n\nEXPOSE 18000\n\nCMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar\n```\n### 5.构建镜像文件Dockerfile：\n```shell\ndocker build -t hub.aosccs.com.cn:8888/test1/docker-acloud-bc-zuul-server:1.5.0-SNAPSHOT .\n```\n### 6.启动zuul容器：\n```shell\ndocker run -itd --network acloudbridge -p 18000:18000 -v /root/luojunjie/docker/acloud/zuul/logs:/u01/target/logs  -v /root/luojunjie/docker/acloud/zuul/application.yml:/u01/application.yml -v /root/luojunjie/docker/acloud/zuul/bootstrap.yml:/u01/bootstrap.yml  hub.aosccs.com.cn:8888/test1/docker-acloud-bc-zuul-server:1.5.0-SNAPSHOT\n```\n### 7.准备微服务family jar包，编写镜像文件Dockerfile：\n```shell\nFROM openjdk:8-jre-alpine\n\nMAINTAINER xxx@sgcc.com.cn\n\nRUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && echo 'Asia/Shanghai' >/etc/timezone\n\n\nCOPY acloud-family-server-jdbc-1.5.0-20191205.110300-143.jar /u01/app.jar\n\nWORKDIR /u01\n\nEXPOSE 18001\n\nCMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar\n```\n### 8.构建镜像文件Dockerfile：\n```shell\ndocker build -t hub.aosccs.com.cn:8888/test1/docker-acloud-bc-family-server:1.5.0-SNAPSHOT .\n```\n### 9.启动family容器：\n```shell\ndocker run -itd --network acloudbridge -p 18001:18001 -v /root/luojunjie/docker/acloud/family/logs:/u01/target/logs  -v /root/luojunjie/docker/acloud/family/application.yml:/u01/application.yml -v /root/luojunjie/docker/acloud/family/bootstrap.yml:/u01/bootstrap.yml  hub.aosccs.com.cn:8888/test1/docker-acloud-bc-family-server:1.5.0-SNAPSHOT  \n```\n### 10.登录微服务：\ndocker 查询结果\n![](assets/3.2.docker-build-cloud-6357415e.png)\n\n![](assets/3.2.docker-build-cloud-74350e49.png)\n","source":"docker/3.2.docker-build-cloud.md","raw":"# 3.2.微服务应用构建\n### 准备工作，1.准备微服务需要的数据库，redis。2.微服务容器网络创建：\n```shell\ndocker network create -d bridge acloudbridge\n```\n![](assets/3.2.docker-build-cloud-d6ef43c8.png)\n### 1.准备微服务eureka jar包，编写镜像文件Dockerfile：\n```shell\nFROM openjdk:8-jre-alpine\n\nMAINTAINER xxx@sgcc.com.cn\n\nRUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && echo 'Asia/Shanghai' >/etc/timezone\n\nCOPY acloud-bc-eureka-server-1.5.0-20191104.021740-73.jar /u01/app.jar\n\nWORKDIR /u01\n\nEXPOSE 18003\n\nCMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar\n```\n### 2.构建镜像文件Dockerfile：\n```shell\n[root@host-192-168-3-6 eureka]# docker build -t hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-server:1.5.0-SNAPSHOT .\nSending build context to Docker daemon  66.82MB\nStep 1/7 : FROM openjdk:8-jre-alpine\n ---> f7a292bbb70c\nStep 2/7 : RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && echo 'Asia/Shanghai' >/etc/timezone\n ---> Using cache\n ---> 692554e348a5\nStep 3/7 : MAINTAINER xxx@sgcc.com.cn\n ---> Using cache\n ---> 7b6f340614d6\nStep 4/7 : COPY acloud-bc-eureka-server-1.5.0-20191104.021740-73.jar /u01/app.jar\n ---> Using cache\n ---> 17acd0f679c0\nStep 5/7 : WORKDIR /u01\n ---> Using cache\n ---> f9983504e266\nStep 6/7 : EXPOSE 18003\n ---> Using cache\n ---> 7018737f83e5\nStep 7/7 : CMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar\n ---> Running in 3499e7c24271\nRemoving intermediate container 3499e7c24271\n ---> ddf59ada10d6\nSuccessfully built ddf59ada10d6\nSuccessfully tagged hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-server:1.5.0-SNAPSHOT\n```\n### 3.启动eureka容器：\n```shell\ndocker run -itd --network acloudbridge  --name acloud-eureka -p 18003:18003 -v /root/luojunjie/docker/acloud/eureka/logs:/u01/target/logs  -v /root/luojunjie/docker/acloud/eureka/application.yml:/u01/application.yml -v /root/luojunjie/docker/acloud/eureka/bootstrap.yml:/u01/bootstrap.yml  hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-server:1.5.0-SNAPSHOT  \n```\n![](assets/3.2.docker-build-cloud-81f63f76.png)\n\n### 4.准备微服务zuul jar包，编写镜像文件Dockerfile：\n```shell\nFROM openjdk:8-jre-alpine\n\nMAINTAINER xxx@sgcc.com.cn\n\nRUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && echo 'Asia/Shanghai' >/etc/timezone\n\n\nCOPY acloud-bc-zuul-server-1.5.0-20191205.105939-106.jar /u01/app.jar\n\nWORKDIR /u01\n\nEXPOSE 18000\n\nCMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar\n```\n### 5.构建镜像文件Dockerfile：\n```shell\ndocker build -t hub.aosccs.com.cn:8888/test1/docker-acloud-bc-zuul-server:1.5.0-SNAPSHOT .\n```\n### 6.启动zuul容器：\n```shell\ndocker run -itd --network acloudbridge -p 18000:18000 -v /root/luojunjie/docker/acloud/zuul/logs:/u01/target/logs  -v /root/luojunjie/docker/acloud/zuul/application.yml:/u01/application.yml -v /root/luojunjie/docker/acloud/zuul/bootstrap.yml:/u01/bootstrap.yml  hub.aosccs.com.cn:8888/test1/docker-acloud-bc-zuul-server:1.5.0-SNAPSHOT\n```\n### 7.准备微服务family jar包，编写镜像文件Dockerfile：\n```shell\nFROM openjdk:8-jre-alpine\n\nMAINTAINER xxx@sgcc.com.cn\n\nRUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && echo 'Asia/Shanghai' >/etc/timezone\n\n\nCOPY acloud-family-server-jdbc-1.5.0-20191205.110300-143.jar /u01/app.jar\n\nWORKDIR /u01\n\nEXPOSE 18001\n\nCMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar\n```\n### 8.构建镜像文件Dockerfile：\n```shell\ndocker build -t hub.aosccs.com.cn:8888/test1/docker-acloud-bc-family-server:1.5.0-SNAPSHOT .\n```\n### 9.启动family容器：\n```shell\ndocker run -itd --network acloudbridge -p 18001:18001 -v /root/luojunjie/docker/acloud/family/logs:/u01/target/logs  -v /root/luojunjie/docker/acloud/family/application.yml:/u01/application.yml -v /root/luojunjie/docker/acloud/family/bootstrap.yml:/u01/bootstrap.yml  hub.aosccs.com.cn:8888/test1/docker-acloud-bc-family-server:1.5.0-SNAPSHOT  \n```\n### 10.登录微服务：\ndocker 查询结果\n![](assets/3.2.docker-build-cloud-6357415e.png)\n\n![](assets/3.2.docker-build-cloud-74350e49.png)\n","date":"2021-07-18T03:27:18.132Z","updated":"2021-01-14T01:19:25.831Z","path":"docker/3.2.docker-build-cloud.html","title":"","comments":1,"layout":"page","_id":"ckrac7wyc000bz8s6g6egbtae","content":"<h1>3.2.微服务应用构建</h1>\n<h3 id=\"准备工作，1-准备微服务需要的数据库，redis。2-微服务容器网络创建：\">准备工作，1.准备微服务需要的数据库，redis。2.微服务容器网络创建：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker network create -d bridge acloudbridge</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.2.docker-build-cloud-d6ef43c8.png\" alt=\"\"></p>\n<h3 id=\"1-准备微服务eureka-jar包，编写镜像文件Dockerfile：\">1.准备微服务eureka jar包，编写镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM openjdk:8-jre-alpine</span><br><span class=\"line\"></span><br><span class=\"line\">MAINTAINER xxx@sgcc.com.cn</span><br><span class=\"line\"></span><br><span class=\"line\">RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; echo &#x27;Asia/Shanghai&#x27; &gt;/etc/timezone</span><br><span class=\"line\"></span><br><span class=\"line\">COPY acloud-bc-eureka-server-1.5.0-20191104.021740-73.jar /u01/app.jar</span><br><span class=\"line\"></span><br><span class=\"line\">WORKDIR /u01</span><br><span class=\"line\"></span><br><span class=\"line\">EXPOSE 18003</span><br><span class=\"line\"></span><br><span class=\"line\">CMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-构建镜像文件Dockerfile：\">2.构建镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@host-192-168-3-6 eureka]# docker build -t hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-server:1.5.0-SNAPSHOT .</span><br><span class=\"line\">Sending build context to Docker daemon  66.82MB</span><br><span class=\"line\">Step 1/7 : FROM openjdk:8-jre-alpine</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> f7a292bbb70c</span></span><br><span class=\"line\">Step 2/7 : RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; echo &#x27;Asia/Shanghai&#x27; &gt;/etc/timezone</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 692554e348a5</span></span><br><span class=\"line\">Step 3/7 : MAINTAINER xxx@sgcc.com.cn</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 7b6f340614d6</span></span><br><span class=\"line\">Step 4/7 : COPY acloud-bc-eureka-server-1.5.0-20191104.021740-73.jar /u01/app.jar</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 17acd0f679c0</span></span><br><span class=\"line\">Step 5/7 : WORKDIR /u01</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> f9983504e266</span></span><br><span class=\"line\">Step 6/7 : EXPOSE 18003</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 7018737f83e5</span></span><br><span class=\"line\">Step 7/7 : CMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Running <span class=\"keyword\">in</span> 3499e7c24271</span></span><br><span class=\"line\">Removing intermediate container 3499e7c24271</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> ddf59ada10d6</span></span><br><span class=\"line\">Successfully built ddf59ada10d6</span><br><span class=\"line\">Successfully tagged hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-server:1.5.0-SNAPSHOT</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-启动eureka容器：\">3.启动eureka容器：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd --network acloudbridge  --name acloud-eureka -p 18003:18003 -v /root/luojunjie/docker/acloud/eureka/logs:/u01/target/logs  -v /root/luojunjie/docker/acloud/eureka/application.yml:/u01/application.yml -v /root/luojunjie/docker/acloud/eureka/bootstrap.yml:/u01/bootstrap.yml  hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-server:1.5.0-SNAPSHOT  </span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.2.docker-build-cloud-81f63f76.png\" alt=\"\"></p>\n<h3 id=\"4-准备微服务zuul-jar包，编写镜像文件Dockerfile：\">4.准备微服务zuul jar包，编写镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM openjdk:8-jre-alpine</span><br><span class=\"line\"></span><br><span class=\"line\">MAINTAINER xxx@sgcc.com.cn</span><br><span class=\"line\"></span><br><span class=\"line\">RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; echo &#x27;Asia/Shanghai&#x27; &gt;/etc/timezone</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">COPY acloud-bc-zuul-server-1.5.0-20191205.105939-106.jar /u01/app.jar</span><br><span class=\"line\"></span><br><span class=\"line\">WORKDIR /u01</span><br><span class=\"line\"></span><br><span class=\"line\">EXPOSE 18000</span><br><span class=\"line\"></span><br><span class=\"line\">CMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar</span><br></pre></td></tr></table></figure>\n<h3 id=\"5-构建镜像文件Dockerfile：\">5.构建镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t hub.aosccs.com.cn:8888/test1/docker-acloud-bc-zuul-server:1.5.0-SNAPSHOT .</span><br></pre></td></tr></table></figure>\n<h3 id=\"6-启动zuul容器：\">6.启动zuul容器：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd --network acloudbridge -p 18000:18000 -v /root/luojunjie/docker/acloud/zuul/logs:/u01/target/logs  -v /root/luojunjie/docker/acloud/zuul/application.yml:/u01/application.yml -v /root/luojunjie/docker/acloud/zuul/bootstrap.yml:/u01/bootstrap.yml  hub.aosccs.com.cn:8888/test1/docker-acloud-bc-zuul-server:1.5.0-SNAPSHOT</span><br></pre></td></tr></table></figure>\n<h3 id=\"7-准备微服务family-jar包，编写镜像文件Dockerfile：\">7.准备微服务family jar包，编写镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM openjdk:8-jre-alpine</span><br><span class=\"line\"></span><br><span class=\"line\">MAINTAINER xxx@sgcc.com.cn</span><br><span class=\"line\"></span><br><span class=\"line\">RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; echo &#x27;Asia/Shanghai&#x27; &gt;/etc/timezone</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">COPY acloud-family-server-jdbc-1.5.0-20191205.110300-143.jar /u01/app.jar</span><br><span class=\"line\"></span><br><span class=\"line\">WORKDIR /u01</span><br><span class=\"line\"></span><br><span class=\"line\">EXPOSE 18001</span><br><span class=\"line\"></span><br><span class=\"line\">CMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar</span><br></pre></td></tr></table></figure>\n<h3 id=\"8-构建镜像文件Dockerfile：\">8.构建镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t hub.aosccs.com.cn:8888/test1/docker-acloud-bc-family-server:1.5.0-SNAPSHOT .</span><br></pre></td></tr></table></figure>\n<h3 id=\"9-启动family容器：\">9.启动family容器：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd --network acloudbridge -p 18001:18001 -v /root/luojunjie/docker/acloud/family/logs:/u01/target/logs  -v /root/luojunjie/docker/acloud/family/application.yml:/u01/application.yml -v /root/luojunjie/docker/acloud/family/bootstrap.yml:/u01/bootstrap.yml  hub.aosccs.com.cn:8888/test1/docker-acloud-bc-family-server:1.5.0-SNAPSHOT  </span><br></pre></td></tr></table></figure>\n<h3 id=\"10-登录微服务：\">10.登录微服务：</h3>\n<p>docker 查询结果<br>\n<img src=\"assets/3.2.docker-build-cloud-6357415e.png\" alt=\"\"></p>\n<p><img src=\"assets/3.2.docker-build-cloud-74350e49.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>3.2.微服务应用构建</h1>\n<h3 id=\"准备工作，1-准备微服务需要的数据库，redis。2-微服务容器网络创建：\">准备工作，1.准备微服务需要的数据库，redis。2.微服务容器网络创建：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker network create -d bridge acloudbridge</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.2.docker-build-cloud-d6ef43c8.png\" alt=\"\"></p>\n<h3 id=\"1-准备微服务eureka-jar包，编写镜像文件Dockerfile：\">1.准备微服务eureka jar包，编写镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM openjdk:8-jre-alpine</span><br><span class=\"line\"></span><br><span class=\"line\">MAINTAINER xxx@sgcc.com.cn</span><br><span class=\"line\"></span><br><span class=\"line\">RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; echo &#x27;Asia/Shanghai&#x27; &gt;/etc/timezone</span><br><span class=\"line\"></span><br><span class=\"line\">COPY acloud-bc-eureka-server-1.5.0-20191104.021740-73.jar /u01/app.jar</span><br><span class=\"line\"></span><br><span class=\"line\">WORKDIR /u01</span><br><span class=\"line\"></span><br><span class=\"line\">EXPOSE 18003</span><br><span class=\"line\"></span><br><span class=\"line\">CMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-构建镜像文件Dockerfile：\">2.构建镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@host-192-168-3-6 eureka]# docker build -t hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-server:1.5.0-SNAPSHOT .</span><br><span class=\"line\">Sending build context to Docker daemon  66.82MB</span><br><span class=\"line\">Step 1/7 : FROM openjdk:8-jre-alpine</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> f7a292bbb70c</span></span><br><span class=\"line\">Step 2/7 : RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; echo &#x27;Asia/Shanghai&#x27; &gt;/etc/timezone</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 692554e348a5</span></span><br><span class=\"line\">Step 3/7 : MAINTAINER xxx@sgcc.com.cn</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 7b6f340614d6</span></span><br><span class=\"line\">Step 4/7 : COPY acloud-bc-eureka-server-1.5.0-20191104.021740-73.jar /u01/app.jar</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 17acd0f679c0</span></span><br><span class=\"line\">Step 5/7 : WORKDIR /u01</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> f9983504e266</span></span><br><span class=\"line\">Step 6/7 : EXPOSE 18003</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Using cache</span></span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> 7018737f83e5</span></span><br><span class=\"line\">Step 7/7 : CMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> Running <span class=\"keyword\">in</span> 3499e7c24271</span></span><br><span class=\"line\">Removing intermediate container 3499e7c24271</span><br><span class=\"line\"><span class=\"meta\"> ---&gt;</span><span class=\"bash\"> ddf59ada10d6</span></span><br><span class=\"line\">Successfully built ddf59ada10d6</span><br><span class=\"line\">Successfully tagged hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-server:1.5.0-SNAPSHOT</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-启动eureka容器：\">3.启动eureka容器：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd --network acloudbridge  --name acloud-eureka -p 18003:18003 -v /root/luojunjie/docker/acloud/eureka/logs:/u01/target/logs  -v /root/luojunjie/docker/acloud/eureka/application.yml:/u01/application.yml -v /root/luojunjie/docker/acloud/eureka/bootstrap.yml:/u01/bootstrap.yml  hub.aosccs.com.cn:8888/test1/docker-acloud-bc-eureka-server:1.5.0-SNAPSHOT  </span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/3.2.docker-build-cloud-81f63f76.png\" alt=\"\"></p>\n<h3 id=\"4-准备微服务zuul-jar包，编写镜像文件Dockerfile：\">4.准备微服务zuul jar包，编写镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM openjdk:8-jre-alpine</span><br><span class=\"line\"></span><br><span class=\"line\">MAINTAINER xxx@sgcc.com.cn</span><br><span class=\"line\"></span><br><span class=\"line\">RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; echo &#x27;Asia/Shanghai&#x27; &gt;/etc/timezone</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">COPY acloud-bc-zuul-server-1.5.0-20191205.105939-106.jar /u01/app.jar</span><br><span class=\"line\"></span><br><span class=\"line\">WORKDIR /u01</span><br><span class=\"line\"></span><br><span class=\"line\">EXPOSE 18000</span><br><span class=\"line\"></span><br><span class=\"line\">CMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar</span><br></pre></td></tr></table></figure>\n<h3 id=\"5-构建镜像文件Dockerfile：\">5.构建镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t hub.aosccs.com.cn:8888/test1/docker-acloud-bc-zuul-server:1.5.0-SNAPSHOT .</span><br></pre></td></tr></table></figure>\n<h3 id=\"6-启动zuul容器：\">6.启动zuul容器：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd --network acloudbridge -p 18000:18000 -v /root/luojunjie/docker/acloud/zuul/logs:/u01/target/logs  -v /root/luojunjie/docker/acloud/zuul/application.yml:/u01/application.yml -v /root/luojunjie/docker/acloud/zuul/bootstrap.yml:/u01/bootstrap.yml  hub.aosccs.com.cn:8888/test1/docker-acloud-bc-zuul-server:1.5.0-SNAPSHOT</span><br></pre></td></tr></table></figure>\n<h3 id=\"7-准备微服务family-jar包，编写镜像文件Dockerfile：\">7.准备微服务family jar包，编写镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM openjdk:8-jre-alpine</span><br><span class=\"line\"></span><br><span class=\"line\">MAINTAINER xxx@sgcc.com.cn</span><br><span class=\"line\"></span><br><span class=\"line\">RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; echo &#x27;Asia/Shanghai&#x27; &gt;/etc/timezone</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">COPY acloud-family-server-jdbc-1.5.0-20191205.110300-143.jar /u01/app.jar</span><br><span class=\"line\"></span><br><span class=\"line\">WORKDIR /u01</span><br><span class=\"line\"></span><br><span class=\"line\">EXPOSE 18001</span><br><span class=\"line\"></span><br><span class=\"line\">CMD java -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -jar app.jar</span><br></pre></td></tr></table></figure>\n<h3 id=\"8-构建镜像文件Dockerfile：\">8.构建镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t hub.aosccs.com.cn:8888/test1/docker-acloud-bc-family-server:1.5.0-SNAPSHOT .</span><br></pre></td></tr></table></figure>\n<h3 id=\"9-启动family容器：\">9.启动family容器：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd --network acloudbridge -p 18001:18001 -v /root/luojunjie/docker/acloud/family/logs:/u01/target/logs  -v /root/luojunjie/docker/acloud/family/application.yml:/u01/application.yml -v /root/luojunjie/docker/acloud/family/bootstrap.yml:/u01/bootstrap.yml  hub.aosccs.com.cn:8888/test1/docker-acloud-bc-family-server:1.5.0-SNAPSHOT  </span><br></pre></td></tr></table></figure>\n<h3 id=\"10-登录微服务：\">10.登录微服务：</h3>\n<p>docker 查询结果<br>\n<img src=\"assets/3.2.docker-build-cloud-6357415e.png\" alt=\"\"></p>\n<p><img src=\"assets/3.2.docker-build-cloud-74350e49.png\" alt=\"\"></p>\n"},{"_content":"# 3.5.go应用构建\n### 准备工作，1.程序源码\n```shell\npackage main\n\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"net/http\"\n    \"time\"\n)\n\nfunc sayHello(w http.ResponseWriter, r *http.Request) {\n      new :=time.Now()\n     fmt.Fprintf(w,new.Format(\"2006-01-02 15:04:05\"))    \n     fmt.Fprintf(w, \"欢迎参加docker培训\")\n}\nfunc main() {\n    http.HandleFunc(\"/\", sayHello)//注册URI路径\n    log.Println(\"【docker项目】服务启动成功 监听端口 80\")\n    er := http.ListenAndServe(\"0.0.0.0:80\", nil)\n    if er != nil {\n        log.Fatal(\"ListenAndServe: \", er)\n    }\n\n}\n\n```\n### 1.go 加入依赖库编译：\n```shell\nCGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o main main.go\n```\n### 2.编写镜像文件Dockerfile：\n```shell\nFROM scratch\nADD main /\nENTRYPOINT [\"/main\"]\n```\n### 3.构建镜像文件Dockerfile：\n```shell\ndocker build -t hub.aosccs.com.cn:8888/test1/go-web-demo:v1.0 .\n```\n### 4.启动容器：\n```shell\ndocker run -itd --name go-web-demo -p 18070:80  hub.aosccs.com.cn:8888/test1/go-web-demo:v1.0\n```\n### 5.访问：\nhttp://192.168.3.6:18070/\n![](assets/3.5.docker-build-go-cab4c619.png)\n","source":"docker/3.5.docker-build-go.md","raw":"# 3.5.go应用构建\n### 准备工作，1.程序源码\n```shell\npackage main\n\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"net/http\"\n    \"time\"\n)\n\nfunc sayHello(w http.ResponseWriter, r *http.Request) {\n      new :=time.Now()\n     fmt.Fprintf(w,new.Format(\"2006-01-02 15:04:05\"))    \n     fmt.Fprintf(w, \"欢迎参加docker培训\")\n}\nfunc main() {\n    http.HandleFunc(\"/\", sayHello)//注册URI路径\n    log.Println(\"【docker项目】服务启动成功 监听端口 80\")\n    er := http.ListenAndServe(\"0.0.0.0:80\", nil)\n    if er != nil {\n        log.Fatal(\"ListenAndServe: \", er)\n    }\n\n}\n\n```\n### 1.go 加入依赖库编译：\n```shell\nCGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o main main.go\n```\n### 2.编写镜像文件Dockerfile：\n```shell\nFROM scratch\nADD main /\nENTRYPOINT [\"/main\"]\n```\n### 3.构建镜像文件Dockerfile：\n```shell\ndocker build -t hub.aosccs.com.cn:8888/test1/go-web-demo:v1.0 .\n```\n### 4.启动容器：\n```shell\ndocker run -itd --name go-web-demo -p 18070:80  hub.aosccs.com.cn:8888/test1/go-web-demo:v1.0\n```\n### 5.访问：\nhttp://192.168.3.6:18070/\n![](assets/3.5.docker-build-go-cab4c619.png)\n","date":"2021-07-18T03:27:18.148Z","updated":"2021-01-14T01:19:26.029Z","path":"docker/3.5.docker-build-go.html","title":"","comments":1,"layout":"page","_id":"ckrac7wyc000cz8s658i8662y","content":"<h1>3.5.go应用构建</h1>\n<h3 id=\"准备工作，1-程序源码\">准备工作，1.程序源码</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package main</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">import (</span><br><span class=\"line\">    &quot;fmt&quot;</span><br><span class=\"line\">    &quot;log&quot;</span><br><span class=\"line\">    &quot;net/http&quot;</span><br><span class=\"line\">    &quot;time&quot;</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\">func sayHello(w http.ResponseWriter, r *http.Request) &#123;</span><br><span class=\"line\">      new :=time.Now()</span><br><span class=\"line\">     fmt.Fprintf(w,new.Format(&quot;2006-01-02 15:04:05&quot;))    </span><br><span class=\"line\">     fmt.Fprintf(w, &quot;欢迎参加docker培训&quot;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">func main() &#123;</span><br><span class=\"line\">    http.HandleFunc(&quot;/&quot;, sayHello)//注册URI路径</span><br><span class=\"line\">    log.Println(&quot;【docker项目】服务启动成功 监听端口 80&quot;)</span><br><span class=\"line\">    er := http.ListenAndServe(&quot;0.0.0.0:80&quot;, nil)</span><br><span class=\"line\">    if er != nil &#123;</span><br><span class=\"line\">        log.Fatal(&quot;ListenAndServe: &quot;, er)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"1-go-加入依赖库编译：\">1.go 加入依赖库编译：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o main main.go</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-编写镜像文件Dockerfile：\">2.编写镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM scratch</span><br><span class=\"line\">ADD main /</span><br><span class=\"line\">ENTRYPOINT [&quot;/main&quot;]</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-构建镜像文件Dockerfile：\">3.构建镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t hub.aosccs.com.cn:8888/test1/go-web-demo:v1.0 .</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-启动容器：\">4.启动容器：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd --name go-web-demo -p 18070:80  hub.aosccs.com.cn:8888/test1/go-web-demo:v1.0</span><br></pre></td></tr></table></figure>\n<h3 id=\"5-访问：\">5.访问：</h3>\n<p><a href=\"http://192.168.3.6:18070/\">http://192.168.3.6:18070/</a><br>\n<img src=\"assets/3.5.docker-build-go-cab4c619.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>3.5.go应用构建</h1>\n<h3 id=\"准备工作，1-程序源码\">准备工作，1.程序源码</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package main</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">import (</span><br><span class=\"line\">    &quot;fmt&quot;</span><br><span class=\"line\">    &quot;log&quot;</span><br><span class=\"line\">    &quot;net/http&quot;</span><br><span class=\"line\">    &quot;time&quot;</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\">func sayHello(w http.ResponseWriter, r *http.Request) &#123;</span><br><span class=\"line\">      new :=time.Now()</span><br><span class=\"line\">     fmt.Fprintf(w,new.Format(&quot;2006-01-02 15:04:05&quot;))    </span><br><span class=\"line\">     fmt.Fprintf(w, &quot;欢迎参加docker培训&quot;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">func main() &#123;</span><br><span class=\"line\">    http.HandleFunc(&quot;/&quot;, sayHello)//注册URI路径</span><br><span class=\"line\">    log.Println(&quot;【docker项目】服务启动成功 监听端口 80&quot;)</span><br><span class=\"line\">    er := http.ListenAndServe(&quot;0.0.0.0:80&quot;, nil)</span><br><span class=\"line\">    if er != nil &#123;</span><br><span class=\"line\">        log.Fatal(&quot;ListenAndServe: &quot;, er)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"1-go-加入依赖库编译：\">1.go 加入依赖库编译：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o main main.go</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-编写镜像文件Dockerfile：\">2.编写镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM scratch</span><br><span class=\"line\">ADD main /</span><br><span class=\"line\">ENTRYPOINT [&quot;/main&quot;]</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-构建镜像文件Dockerfile：\">3.构建镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t hub.aosccs.com.cn:8888/test1/go-web-demo:v1.0 .</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-启动容器：\">4.启动容器：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd --name go-web-demo -p 18070:80  hub.aosccs.com.cn:8888/test1/go-web-demo:v1.0</span><br></pre></td></tr></table></figure>\n<h3 id=\"5-访问：\">5.访问：</h3>\n<p><a href=\"http://192.168.3.6:18070/\">http://192.168.3.6:18070/</a><br>\n<img src=\"assets/3.5.docker-build-go-cab4c619.png\" alt=\"\"></p>\n"},{"_content":"# 3.4.前端应用构建\n### 准备工作，1.程序源码\n```shell\nhttps://gitee.com/olivee/cok/tree/master/cok-source-vue\n```\n### 1.准备vue包，编写镜像文件Dockerfile：\n```shell\nFROM nginx:1.18-alpine\nCOPY dist /usr/share/nginx/html/cok-ui/\n```\n```\n### 2.构建镜像文件Dockerfile：\n```shell\ndocker build -t hub.aosccs.com.cn:8888/test1/cok-source-vue:v1.0 .\n```\n### 3.启动容器：\n```shell\ndocker run -itd --name cok-source-vue -p 18090:80  hub.aosccs.com.cn:8888/test1/cok-source-vue:v1.0\n```\n### 4.访问：\nhttp://192.168.3.6:18090/cok-ui/index.html#/\n![](assets/3.4.docker-build-npm-288a73a3.png)\n","source":"docker/3.4.docker-build-npm.md","raw":"# 3.4.前端应用构建\n### 准备工作，1.程序源码\n```shell\nhttps://gitee.com/olivee/cok/tree/master/cok-source-vue\n```\n### 1.准备vue包，编写镜像文件Dockerfile：\n```shell\nFROM nginx:1.18-alpine\nCOPY dist /usr/share/nginx/html/cok-ui/\n```\n```\n### 2.构建镜像文件Dockerfile：\n```shell\ndocker build -t hub.aosccs.com.cn:8888/test1/cok-source-vue:v1.0 .\n```\n### 3.启动容器：\n```shell\ndocker run -itd --name cok-source-vue -p 18090:80  hub.aosccs.com.cn:8888/test1/cok-source-vue:v1.0\n```\n### 4.访问：\nhttp://192.168.3.6:18090/cok-ui/index.html#/\n![](assets/3.4.docker-build-npm-288a73a3.png)\n","date":"2021-07-18T03:27:18.166Z","updated":"2021-01-14T01:19:26.026Z","path":"docker/3.4.docker-build-npm.html","title":"","comments":1,"layout":"page","_id":"ckrac7x1n000dz8s6gncl2545","content":"<h1>3.4.前端应用构建</h1>\n<h3 id=\"准备工作，1-程序源码\">准备工作，1.程序源码</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://gitee.com/olivee/cok/tree/master/cok-source-vue</span><br></pre></td></tr></table></figure>\n<h3 id=\"1-准备vue包，编写镜像文件Dockerfile：\">1.准备vue包，编写镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM nginx:1.18-alpine</span><br><span class=\"line\">COPY dist /usr/share/nginx/html/cok-ui/</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">### 2.构建镜像文件Dockerfile：</span><br><span class=\"line\">```shell</span><br><span class=\"line\">docker build -t hub.aosccs.com.cn:8888/test1/cok-source-vue:v1.0 .</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-启动容器：\">3.启动容器：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd --name cok-source-vue -p 18090:80  hub.aosccs.com.cn:8888/test1/cok-source-vue:v1.0</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-访问：\">4.访问：</h3>\n<p><a href=\"http://192.168.3.6:18090/cok-ui/index.html#/\">http://192.168.3.6:18090/cok-ui/index.html#/</a><br>\n<img src=\"assets/3.4.docker-build-npm-288a73a3.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>3.4.前端应用构建</h1>\n<h3 id=\"准备工作，1-程序源码\">准备工作，1.程序源码</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://gitee.com/olivee/cok/tree/master/cok-source-vue</span><br></pre></td></tr></table></figure>\n<h3 id=\"1-准备vue包，编写镜像文件Dockerfile：\">1.准备vue包，编写镜像文件Dockerfile：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM nginx:1.18-alpine</span><br><span class=\"line\">COPY dist /usr/share/nginx/html/cok-ui/</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">### 2.构建镜像文件Dockerfile：</span><br><span class=\"line\">```shell</span><br><span class=\"line\">docker build -t hub.aosccs.com.cn:8888/test1/cok-source-vue:v1.0 .</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-启动容器：\">3.启动容器：</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -itd --name cok-source-vue -p 18090:80  hub.aosccs.com.cn:8888/test1/cok-source-vue:v1.0</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-访问：\">4.访问：</h3>\n<p><a href=\"http://192.168.3.6:18090/cok-ui/index.html#/\">http://192.168.3.6:18090/cok-ui/index.html#/</a><br>\n<img src=\"assets/3.4.docker-build-npm-288a73a3.png\" alt=\"\"></p>\n"},{"_content":"# 3.构建一个Docker应用程序\n\n","source":"docker/3.docker-practice.md","raw":"# 3.构建一个Docker应用程序\n\n","date":"2021-07-18T03:27:18.164Z","updated":"2021-01-14T01:19:26.034Z","path":"docker/3.docker-practice.html","title":"","comments":1,"layout":"page","_id":"ckrac7x1s000ez8s6a0dh6opt","content":"<h1>3.构建一个Docker应用程序</h1>\n","site":{"data":{}},"excerpt":"","more":"<h1>3.构建一个Docker应用程序</h1>\n"},{"_content":"# 3.6.Docker镜像文件编写技巧\n### 1.镜像默认时区是0区，跟东八区相差8个小时，所以部署服务的时候要注意这个差异。\n\n### 2.镜像不是越小越好，是越适用越好，构建初期涉及到部署问题的发现和调试，建议可以装一些适用的工具，在稳定后再取消。\n","source":"docker/3.6.docker-build-skill.md","raw":"# 3.6.Docker镜像文件编写技巧\n### 1.镜像默认时区是0区，跟东八区相差8个小时，所以部署服务的时候要注意这个差异。\n\n### 2.镜像不是越小越好，是越适用越好，构建初期涉及到部署问题的发现和调试，建议可以装一些适用的工具，在稳定后再取消。\n","date":"2021-07-18T03:27:18.152Z","updated":"2021-01-14T01:19:26.031Z","path":"docker/3.6.docker-build-skill.html","title":"","comments":1,"layout":"page","_id":"ckrac7x1t000fz8s68ccncy3y","content":"<h1>3.6.Docker镜像文件编写技巧</h1>\n<h3 id=\"1-镜像默认时区是0区，跟东八区相差8个小时，所以部署服务的时候要注意这个差异。\">1.镜像默认时区是0区，跟东八区相差8个小时，所以部署服务的时候要注意这个差异。</h3>\n<h3 id=\"2-镜像不是越小越好，是越适用越好，构建初期涉及到部署问题的发现和调试，建议可以装一些适用的工具，在稳定后再取消。\">2.镜像不是越小越好，是越适用越好，构建初期涉及到部署问题的发现和调试，建议可以装一些适用的工具，在稳定后再取消。</h3>\n","site":{"data":{}},"excerpt":"","more":"<h1>3.6.Docker镜像文件编写技巧</h1>\n<h3 id=\"1-镜像默认时区是0区，跟东八区相差8个小时，所以部署服务的时候要注意这个差异。\">1.镜像默认时区是0区，跟东八区相差8个小时，所以部署服务的时候要注意这个差异。</h3>\n<h3 id=\"2-镜像不是越小越好，是越适用越好，构建初期涉及到部署问题的发现和调试，建议可以装一些适用的工具，在稳定后再取消。\">2.镜像不是越小越好，是越适用越好，构建初期涉及到部署问题的发现和调试，建议可以装一些适用的工具，在稳定后再取消。</h3>\n"},{"_content":"# 3.在k8s持久化存储\n- pv和pvc和sc的生命周期\n![](assets/3.storage-in-k8s-2397258e.png)\n## 3.1. PV\n- 持久化卷， 支持本地存储和网络存储， 例如hostpath，ceph rbd， nfs等，只支持两个属性， capacity和accessModes。其中capacity只支持size的定义，不支持iops等参数的设定，accessModes有三种，ReadWriteOnce（被单个node读写）， ReadOnlyMany（被多个nodes读）， ReadWriteMany（被多个nodes读写）\n```shell\napiVersion: v1\nkind: PersistentVolume\nmetadata:\n  labels:\n    app: workspaces-pv\n  name: workspaces-pv\nspec:\n  accessModes:\n  - ReadWriteMany\n  capacity:\n    storage: 5Gi\n  claimRef:\n    apiVersion: v1\n    kind: PersistentVolumeClaim\n    name: workspaces-pvc\n    namespace: portal-nx\n  nfs:\n    path: /home/nfs/workspaces-pvc\n    server: 192.168.3.149\n  persistentVolumeReclaimPolicy: Retain\n  volumeMode: Filesystem\n```\n\n## 3.2. PVC\n- 对pv或者storageclass资源的请求， pvc 对 pv 类比于pod 对不同的cpu， mem的请求。\n```shell\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  annotations:\n    volume.beta.kubernetes.io/storage-provisioner: fuseim.pri/ifs\n  name: mysql-data\n  namespace: esp\nspec:\n  accessModes:\n  - ReadWriteMany\n  resources:\n    requests:\n      storage: 20Gi\n  storageClassName: managed-nfs-storage\n```\n## 3.3. storageclass\n- 另外一种提供存储资源的方式， 提供更多的层级选型， 如iops等参数。 但是具体的参数与提供方是绑定的。 如aws和gce它们提供的storageclass的参数可选项是有不同的。\n```shell\napiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\n  name: managed-nfs-storage\nparameters:\n  archiveOnDelete: \"false\"\nprovisioner: fuseim.pri/ifs\nreclaimPolicy: Delete\nvolumeBindingMode: Immediate\n```\n","source":"docker/3.storage-in-k8s.md","raw":"# 3.在k8s持久化存储\n- pv和pvc和sc的生命周期\n![](assets/3.storage-in-k8s-2397258e.png)\n## 3.1. PV\n- 持久化卷， 支持本地存储和网络存储， 例如hostpath，ceph rbd， nfs等，只支持两个属性， capacity和accessModes。其中capacity只支持size的定义，不支持iops等参数的设定，accessModes有三种，ReadWriteOnce（被单个node读写）， ReadOnlyMany（被多个nodes读）， ReadWriteMany（被多个nodes读写）\n```shell\napiVersion: v1\nkind: PersistentVolume\nmetadata:\n  labels:\n    app: workspaces-pv\n  name: workspaces-pv\nspec:\n  accessModes:\n  - ReadWriteMany\n  capacity:\n    storage: 5Gi\n  claimRef:\n    apiVersion: v1\n    kind: PersistentVolumeClaim\n    name: workspaces-pvc\n    namespace: portal-nx\n  nfs:\n    path: /home/nfs/workspaces-pvc\n    server: 192.168.3.149\n  persistentVolumeReclaimPolicy: Retain\n  volumeMode: Filesystem\n```\n\n## 3.2. PVC\n- 对pv或者storageclass资源的请求， pvc 对 pv 类比于pod 对不同的cpu， mem的请求。\n```shell\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  annotations:\n    volume.beta.kubernetes.io/storage-provisioner: fuseim.pri/ifs\n  name: mysql-data\n  namespace: esp\nspec:\n  accessModes:\n  - ReadWriteMany\n  resources:\n    requests:\n      storage: 20Gi\n  storageClassName: managed-nfs-storage\n```\n## 3.3. storageclass\n- 另外一种提供存储资源的方式， 提供更多的层级选型， 如iops等参数。 但是具体的参数与提供方是绑定的。 如aws和gce它们提供的storageclass的参数可选项是有不同的。\n```shell\napiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\n  name: managed-nfs-storage\nparameters:\n  archiveOnDelete: \"false\"\nprovisioner: fuseim.pri/ifs\nreclaimPolicy: Delete\nvolumeBindingMode: Immediate\n```\n","date":"2021-07-18T03:27:18.157Z","updated":"2021-01-14T01:19:25.999Z","path":"docker/3.storage-in-k8s.html","title":"","comments":1,"layout":"page","_id":"ckrac7x1v000gz8s6frzu26ze","content":"<h1>3.在k8s持久化存储</h1>\n<ul>\n<li>pv和pvc和sc的生命周期<br>\n<img src=\"assets/3.storage-in-k8s-2397258e.png\" alt=\"\"></li>\n</ul>\n<h2 id=\"3-1-PV\">3.1. PV</h2>\n<ul>\n<li>持久化卷， 支持本地存储和网络存储， 例如hostpath，ceph rbd， nfs等，只支持两个属性， capacity和accessModes。其中capacity只支持size的定义，不支持iops等参数的设定，accessModes有三种，ReadWriteOnce（被单个node读写）， ReadOnlyMany（被多个nodes读）， ReadWriteMany（被多个nodes读写）</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: v1</span><br><span class=\"line\">kind: PersistentVolume</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  labels:</span><br><span class=\"line\">    app: workspaces-pv</span><br><span class=\"line\">  name: workspaces-pv</span><br><span class=\"line\">spec:</span><br><span class=\"line\">  accessModes:</span><br><span class=\"line\">  - ReadWriteMany</span><br><span class=\"line\">  capacity:</span><br><span class=\"line\">    storage: 5Gi</span><br><span class=\"line\">  claimRef:</span><br><span class=\"line\">    apiVersion: v1</span><br><span class=\"line\">    kind: PersistentVolumeClaim</span><br><span class=\"line\">    name: workspaces-pvc</span><br><span class=\"line\">    namespace: portal-nx</span><br><span class=\"line\">  nfs:</span><br><span class=\"line\">    path: /home/nfs/workspaces-pvc</span><br><span class=\"line\">    server: 192.168.3.149</span><br><span class=\"line\">  persistentVolumeReclaimPolicy: Retain</span><br><span class=\"line\">  volumeMode: Filesystem</span><br></pre></td></tr></table></figure>\n<h2 id=\"3-2-PVC\">3.2. PVC</h2>\n<ul>\n<li>对pv或者storageclass资源的请求， pvc 对 pv 类比于pod 对不同的cpu， mem的请求。</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: v1</span><br><span class=\"line\">kind: PersistentVolumeClaim</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  annotations:</span><br><span class=\"line\">    volume.beta.kubernetes.io/storage-provisioner: fuseim.pri/ifs</span><br><span class=\"line\">  name: mysql-data</span><br><span class=\"line\">  namespace: esp</span><br><span class=\"line\">spec:</span><br><span class=\"line\">  accessModes:</span><br><span class=\"line\">  - ReadWriteMany</span><br><span class=\"line\">  resources:</span><br><span class=\"line\">    requests:</span><br><span class=\"line\">      storage: 20Gi</span><br><span class=\"line\">  storageClassName: managed-nfs-storage</span><br></pre></td></tr></table></figure>\n<h2 id=\"3-3-storageclass\">3.3. storageclass</h2>\n<ul>\n<li>另外一种提供存储资源的方式， 提供更多的层级选型， 如iops等参数。 但是具体的参数与提供方是绑定的。 如aws和gce它们提供的storageclass的参数可选项是有不同的。</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: storage.k8s.io/v1</span><br><span class=\"line\">kind: StorageClass</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  name: managed-nfs-storage</span><br><span class=\"line\">parameters:</span><br><span class=\"line\">  archiveOnDelete: &quot;false&quot;</span><br><span class=\"line\">provisioner: fuseim.pri/ifs</span><br><span class=\"line\">reclaimPolicy: Delete</span><br><span class=\"line\">volumeBindingMode: Immediate</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1>3.在k8s持久化存储</h1>\n<ul>\n<li>pv和pvc和sc的生命周期<br>\n<img src=\"assets/3.storage-in-k8s-2397258e.png\" alt=\"\"></li>\n</ul>\n<h2 id=\"3-1-PV\">3.1. PV</h2>\n<ul>\n<li>持久化卷， 支持本地存储和网络存储， 例如hostpath，ceph rbd， nfs等，只支持两个属性， capacity和accessModes。其中capacity只支持size的定义，不支持iops等参数的设定，accessModes有三种，ReadWriteOnce（被单个node读写）， ReadOnlyMany（被多个nodes读）， ReadWriteMany（被多个nodes读写）</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: v1</span><br><span class=\"line\">kind: PersistentVolume</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  labels:</span><br><span class=\"line\">    app: workspaces-pv</span><br><span class=\"line\">  name: workspaces-pv</span><br><span class=\"line\">spec:</span><br><span class=\"line\">  accessModes:</span><br><span class=\"line\">  - ReadWriteMany</span><br><span class=\"line\">  capacity:</span><br><span class=\"line\">    storage: 5Gi</span><br><span class=\"line\">  claimRef:</span><br><span class=\"line\">    apiVersion: v1</span><br><span class=\"line\">    kind: PersistentVolumeClaim</span><br><span class=\"line\">    name: workspaces-pvc</span><br><span class=\"line\">    namespace: portal-nx</span><br><span class=\"line\">  nfs:</span><br><span class=\"line\">    path: /home/nfs/workspaces-pvc</span><br><span class=\"line\">    server: 192.168.3.149</span><br><span class=\"line\">  persistentVolumeReclaimPolicy: Retain</span><br><span class=\"line\">  volumeMode: Filesystem</span><br></pre></td></tr></table></figure>\n<h2 id=\"3-2-PVC\">3.2. PVC</h2>\n<ul>\n<li>对pv或者storageclass资源的请求， pvc 对 pv 类比于pod 对不同的cpu， mem的请求。</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: v1</span><br><span class=\"line\">kind: PersistentVolumeClaim</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  annotations:</span><br><span class=\"line\">    volume.beta.kubernetes.io/storage-provisioner: fuseim.pri/ifs</span><br><span class=\"line\">  name: mysql-data</span><br><span class=\"line\">  namespace: esp</span><br><span class=\"line\">spec:</span><br><span class=\"line\">  accessModes:</span><br><span class=\"line\">  - ReadWriteMany</span><br><span class=\"line\">  resources:</span><br><span class=\"line\">    requests:</span><br><span class=\"line\">      storage: 20Gi</span><br><span class=\"line\">  storageClassName: managed-nfs-storage</span><br></pre></td></tr></table></figure>\n<h2 id=\"3-3-storageclass\">3.3. storageclass</h2>\n<ul>\n<li>另外一种提供存储资源的方式， 提供更多的层级选型， 如iops等参数。 但是具体的参数与提供方是绑定的。 如aws和gce它们提供的storageclass的参数可选项是有不同的。</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: storage.k8s.io/v1</span><br><span class=\"line\">kind: StorageClass</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  name: managed-nfs-storage</span><br><span class=\"line\">parameters:</span><br><span class=\"line\">  archiveOnDelete: &quot;false&quot;</span><br><span class=\"line\">provisioner: fuseim.pri/ifs</span><br><span class=\"line\">reclaimPolicy: Delete</span><br><span class=\"line\">volumeBindingMode: Immediate</span><br></pre></td></tr></table></figure>\n"},{"_content":"# 4.1.容器监控\n\n### 1.docker ps 命令\n```shell\ndocker ps\n```\n![](assets/5.1.docker-monitor-980df022.png)\n```shell\ndocker ps -a\n```\n![](assets/5.1.docker-monitor-78f4468e.png)\n\n### 2.docker stats 命令\n\n```shell\ndocker stats 2caf69c6bb56\n```\n![](assets/5.1.docker-monitor-5ea2e6e9.png)\n\n### 3.docker inspect 命令\n\n```shell\ndocker inspect 2caf69c6bb56\n\n\n[\n    {\n        \"Id\": \"2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44\",\n        \"Created\": \"2020-06-24T06:30:10.97345785Z\",\n        \"Path\": \"/main\",\n        \"Args\": [],\n        \"State\": {\n            \"Status\": \"running\",\n            \"Running\": true,\n            \"Paused\": false,\n            \"Restarting\": false,\n            \"OOMKilled\": false,\n            \"Dead\": false,\n            \"Pid\": 18112,\n            \"ExitCode\": 0,\n            \"Error\": \"\",\n            \"StartedAt\": \"2020-06-24T06:30:11.382188297Z\",\n            \"FinishedAt\": \"0001-01-01T00:00:00Z\"\n        },\n        \"Image\": \"sha256:a7ec304e4215d981b7a007475c3bd95badd0434f1018ae55f7de482a2a366f05\",\n        \"ResolvConfPath\": \"/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/resolv.conf\",\n        \"HostnamePath\": \"/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/hostname\",\n        \"HostsPath\": \"/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/hosts\",\n        \"LogPath\": \"/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44-json.log\",\n        \"Name\": \"/go-web-demo\",\n        \"RestartCount\": 0,\n        \"Driver\": \"overlay2\",\n        \"Platform\": \"linux\",\n        \"MountLabel\": \"\",\n        \"ProcessLabel\": \"\",\n        \"AppArmorProfile\": \"\",\n        \"ExecIDs\": null,\n        \"HostConfig\": {\n            \"Binds\": [\n                \"/etc/localtime:/etc/localtime\"\n            ],\n            \"ContainerIDFile\": \"\",\n            \"LogConfig\": {\n                \"Type\": \"json-file\",\n                \"Config\": {}\n            },\n            \"NetworkMode\": \"default\",\n            \"PortBindings\": {\n                \"80/tcp\": [\n                    {\n                        \"HostIp\": \"\",\n                        \"HostPort\": \"18070\"\n                    }\n                ]\n            },\n            \"RestartPolicy\": {\n                \"Name\": \"no\",\n                \"MaximumRetryCount\": 0\n            },\n            \"AutoRemove\": false,\n            \"VolumeDriver\": \"\",\n            \"VolumesFrom\": null,\n            \"CapAdd\": null,\n            \"CapDrop\": null,\n            \"Dns\": [],\n            \"DnsOptions\": [],\n            \"DnsSearch\": [],\n            \"ExtraHosts\": null,\n            \"GroupAdd\": null,\n            \"IpcMode\": \"shareable\",\n            \"Cgroup\": \"\",\n            \"Links\": null,\n            \"OomScoreAdj\": 0,\n            \"PidMode\": \"\",\n            \"Privileged\": false,\n            \"PublishAllPorts\": false,\n            \"ReadonlyRootfs\": false,\n            \"SecurityOpt\": null,\n            \"UTSMode\": \"\",\n            \"UsernsMode\": \"\",\n            \"ShmSize\": 67108864,\n            \"Runtime\": \"runc\",\n            \"ConsoleSize\": [\n                0,\n                0\n            ],\n            \"Isolation\": \"\",\n            \"CpuShares\": 0,\n            \"Memory\": 0,\n            \"NanoCpus\": 0,\n            \"CgroupParent\": \"\",\n            \"BlkioWeight\": 0,\n            \"BlkioWeightDevice\": [],\n            \"BlkioDeviceReadBps\": null,\n            \"BlkioDeviceWriteBps\": null,\n            \"BlkioDeviceReadIOps\": null,\n            \"BlkioDeviceWriteIOps\": null,\n            \"CpuPeriod\": 0,\n            \"CpuQuota\": 0,\n            \"CpuRealtimePeriod\": 0,\n            \"CpuRealtimeRuntime\": 0,\n            \"CpusetCpus\": \"\",\n            \"CpusetMems\": \"\",\n            \"Devices\": [],\n            \"DeviceCgroupRules\": null,\n            \"DiskQuota\": 0,\n            \"KernelMemory\": 0,\n            \"MemoryReservation\": 0,\n            \"MemorySwap\": 0,\n            \"MemorySwappiness\": null,\n            \"OomKillDisable\": false,\n            \"PidsLimit\": 0,\n            \"Ulimits\": null,\n            \"CpuCount\": 0,\n            \"CpuPercent\": 0,\n            \"IOMaximumIOps\": 0,\n            \"IOMaximumBandwidth\": 0,\n            \"MaskedPaths\": [\n                \"/proc/asound\",\n                \"/proc/acpi\",\n                \"/proc/kcore\",\n                \"/proc/keys\",\n                \"/proc/latency_stats\",\n                \"/proc/timer_list\",\n                \"/proc/timer_stats\",\n                \"/proc/sched_debug\",\n                \"/proc/scsi\",\n                \"/sys/firmware\"\n            ],\n            \"ReadonlyPaths\": [\n                \"/proc/bus\",\n                \"/proc/fs\",\n                \"/proc/irq\",\n                \"/proc/sys\",\n                \"/proc/sysrq-trigger\"\n            ]\n        },\n        \"GraphDriver\": {\n            \"Data\": {\n                \"LowerDir\": \"/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3-init/diff:/dockerdata/docker/overlay2/508a92d1a4cfee6eec3248e7cb97ce0b5387ef143f2530ad7bbcd06ae7bff21d/diff\",\n                \"MergedDir\": \"/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3/merged\",\n                \"UpperDir\": \"/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3/diff\",\n                \"WorkDir\": \"/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3/work\"\n            },\n            \"Name\": \"overlay2\"\n        },\n        \"Mounts\": [\n            {\n                \"Type\": \"bind\",\n                \"Source\": \"/etc/localtime\",\n                \"Destination\": \"/etc/localtime\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"rprivate\"\n            }\n        ],\n        \"Config\": {\n            \"Hostname\": \"2caf69c6bb56\",\n            \"Domainname\": \"\",\n            \"User\": \"\",\n            \"AttachStdin\": false,\n            \"AttachStdout\": false,\n            \"AttachStderr\": false,\n            \"ExposedPorts\": {\n                \"80/tcp\": {}\n            },\n            \"Tty\": true,\n            \"OpenStdin\": true,\n            \"StdinOnce\": false,\n            \"Env\": [\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\n            ],\n            \"Cmd\": null,\n            \"Image\": \"hub.aosccs.com.cn:8888/test1/go-web-demo:v1.0\",\n            \"Volumes\": null,\n            \"WorkingDir\": \"\",\n            \"Entrypoint\": [\n                \"/main\"\n            ],\n            \"OnBuild\": null,\n            \"Labels\": {}\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"456abdb15ec3c7bef11e42277b33078eab0f9ab46260f9641b8765718acc6856\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {\n                \"80/tcp\": [\n                    {\n                        \"HostIp\": \"0.0.0.0\",\n                        \"HostPort\": \"18070\"\n                    }\n                ]\n            },\n            \"SandboxKey\": \"/var/run/docker/netns/456abdb15ec3\",\n            \"SecondaryIPAddresses\": null,\n            \"SecondaryIPv6Addresses\": null,\n            \"EndpointID\": \"58b84ac1ea19693b26e71bf4fde9b74d54244da51a7f650bd50564a6704e56c2\",\n            \"Gateway\": \"172.17.0.1\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAddress\": \"172.17.0.11\",\n            \"IPPrefixLen\": 16,\n            \"IPv6Gateway\": \"\",\n            \"MacAddress\": \"02:42:ac:11:00:0b\",\n            \"Networks\": {\n                \"bridge\": {\n                    \"IPAMConfig\": null,\n                    \"Links\": null,\n                    \"Aliases\": null,\n                    \"NetworkID\": \"9d46ad3db3d40d747de9772f7fa203e2db398fc7c96acc3f84bded8087ca709e\",\n                    \"EndpointID\": \"58b84ac1ea19693b26e71bf4fde9b74d54244da51a7f650bd50564a6704e56c2\",\n                    \"Gateway\": \"172.17.0.1\",\n                    \"IPAddress\": \"172.17.0.11\",\n                    \"IPPrefixLen\": 16,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"02:42:ac:11:00:0b\",\n                    \"DriverOpts\": null\n                }\n            }\n        }\n    }\n]\n```\n### 4.docker top 命令 查看进程情况\n```shell\ndocker top 733626f653a3\n```\n![](assets/5.1.docker-monitor-963b5ef4.png)\n","source":"docker/4.1.docker-monitor.md","raw":"# 4.1.容器监控\n\n### 1.docker ps 命令\n```shell\ndocker ps\n```\n![](assets/5.1.docker-monitor-980df022.png)\n```shell\ndocker ps -a\n```\n![](assets/5.1.docker-monitor-78f4468e.png)\n\n### 2.docker stats 命令\n\n```shell\ndocker stats 2caf69c6bb56\n```\n![](assets/5.1.docker-monitor-5ea2e6e9.png)\n\n### 3.docker inspect 命令\n\n```shell\ndocker inspect 2caf69c6bb56\n\n\n[\n    {\n        \"Id\": \"2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44\",\n        \"Created\": \"2020-06-24T06:30:10.97345785Z\",\n        \"Path\": \"/main\",\n        \"Args\": [],\n        \"State\": {\n            \"Status\": \"running\",\n            \"Running\": true,\n            \"Paused\": false,\n            \"Restarting\": false,\n            \"OOMKilled\": false,\n            \"Dead\": false,\n            \"Pid\": 18112,\n            \"ExitCode\": 0,\n            \"Error\": \"\",\n            \"StartedAt\": \"2020-06-24T06:30:11.382188297Z\",\n            \"FinishedAt\": \"0001-01-01T00:00:00Z\"\n        },\n        \"Image\": \"sha256:a7ec304e4215d981b7a007475c3bd95badd0434f1018ae55f7de482a2a366f05\",\n        \"ResolvConfPath\": \"/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/resolv.conf\",\n        \"HostnamePath\": \"/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/hostname\",\n        \"HostsPath\": \"/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/hosts\",\n        \"LogPath\": \"/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44-json.log\",\n        \"Name\": \"/go-web-demo\",\n        \"RestartCount\": 0,\n        \"Driver\": \"overlay2\",\n        \"Platform\": \"linux\",\n        \"MountLabel\": \"\",\n        \"ProcessLabel\": \"\",\n        \"AppArmorProfile\": \"\",\n        \"ExecIDs\": null,\n        \"HostConfig\": {\n            \"Binds\": [\n                \"/etc/localtime:/etc/localtime\"\n            ],\n            \"ContainerIDFile\": \"\",\n            \"LogConfig\": {\n                \"Type\": \"json-file\",\n                \"Config\": {}\n            },\n            \"NetworkMode\": \"default\",\n            \"PortBindings\": {\n                \"80/tcp\": [\n                    {\n                        \"HostIp\": \"\",\n                        \"HostPort\": \"18070\"\n                    }\n                ]\n            },\n            \"RestartPolicy\": {\n                \"Name\": \"no\",\n                \"MaximumRetryCount\": 0\n            },\n            \"AutoRemove\": false,\n            \"VolumeDriver\": \"\",\n            \"VolumesFrom\": null,\n            \"CapAdd\": null,\n            \"CapDrop\": null,\n            \"Dns\": [],\n            \"DnsOptions\": [],\n            \"DnsSearch\": [],\n            \"ExtraHosts\": null,\n            \"GroupAdd\": null,\n            \"IpcMode\": \"shareable\",\n            \"Cgroup\": \"\",\n            \"Links\": null,\n            \"OomScoreAdj\": 0,\n            \"PidMode\": \"\",\n            \"Privileged\": false,\n            \"PublishAllPorts\": false,\n            \"ReadonlyRootfs\": false,\n            \"SecurityOpt\": null,\n            \"UTSMode\": \"\",\n            \"UsernsMode\": \"\",\n            \"ShmSize\": 67108864,\n            \"Runtime\": \"runc\",\n            \"ConsoleSize\": [\n                0,\n                0\n            ],\n            \"Isolation\": \"\",\n            \"CpuShares\": 0,\n            \"Memory\": 0,\n            \"NanoCpus\": 0,\n            \"CgroupParent\": \"\",\n            \"BlkioWeight\": 0,\n            \"BlkioWeightDevice\": [],\n            \"BlkioDeviceReadBps\": null,\n            \"BlkioDeviceWriteBps\": null,\n            \"BlkioDeviceReadIOps\": null,\n            \"BlkioDeviceWriteIOps\": null,\n            \"CpuPeriod\": 0,\n            \"CpuQuota\": 0,\n            \"CpuRealtimePeriod\": 0,\n            \"CpuRealtimeRuntime\": 0,\n            \"CpusetCpus\": \"\",\n            \"CpusetMems\": \"\",\n            \"Devices\": [],\n            \"DeviceCgroupRules\": null,\n            \"DiskQuota\": 0,\n            \"KernelMemory\": 0,\n            \"MemoryReservation\": 0,\n            \"MemorySwap\": 0,\n            \"MemorySwappiness\": null,\n            \"OomKillDisable\": false,\n            \"PidsLimit\": 0,\n            \"Ulimits\": null,\n            \"CpuCount\": 0,\n            \"CpuPercent\": 0,\n            \"IOMaximumIOps\": 0,\n            \"IOMaximumBandwidth\": 0,\n            \"MaskedPaths\": [\n                \"/proc/asound\",\n                \"/proc/acpi\",\n                \"/proc/kcore\",\n                \"/proc/keys\",\n                \"/proc/latency_stats\",\n                \"/proc/timer_list\",\n                \"/proc/timer_stats\",\n                \"/proc/sched_debug\",\n                \"/proc/scsi\",\n                \"/sys/firmware\"\n            ],\n            \"ReadonlyPaths\": [\n                \"/proc/bus\",\n                \"/proc/fs\",\n                \"/proc/irq\",\n                \"/proc/sys\",\n                \"/proc/sysrq-trigger\"\n            ]\n        },\n        \"GraphDriver\": {\n            \"Data\": {\n                \"LowerDir\": \"/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3-init/diff:/dockerdata/docker/overlay2/508a92d1a4cfee6eec3248e7cb97ce0b5387ef143f2530ad7bbcd06ae7bff21d/diff\",\n                \"MergedDir\": \"/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3/merged\",\n                \"UpperDir\": \"/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3/diff\",\n                \"WorkDir\": \"/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3/work\"\n            },\n            \"Name\": \"overlay2\"\n        },\n        \"Mounts\": [\n            {\n                \"Type\": \"bind\",\n                \"Source\": \"/etc/localtime\",\n                \"Destination\": \"/etc/localtime\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"rprivate\"\n            }\n        ],\n        \"Config\": {\n            \"Hostname\": \"2caf69c6bb56\",\n            \"Domainname\": \"\",\n            \"User\": \"\",\n            \"AttachStdin\": false,\n            \"AttachStdout\": false,\n            \"AttachStderr\": false,\n            \"ExposedPorts\": {\n                \"80/tcp\": {}\n            },\n            \"Tty\": true,\n            \"OpenStdin\": true,\n            \"StdinOnce\": false,\n            \"Env\": [\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\n            ],\n            \"Cmd\": null,\n            \"Image\": \"hub.aosccs.com.cn:8888/test1/go-web-demo:v1.0\",\n            \"Volumes\": null,\n            \"WorkingDir\": \"\",\n            \"Entrypoint\": [\n                \"/main\"\n            ],\n            \"OnBuild\": null,\n            \"Labels\": {}\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"456abdb15ec3c7bef11e42277b33078eab0f9ab46260f9641b8765718acc6856\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {\n                \"80/tcp\": [\n                    {\n                        \"HostIp\": \"0.0.0.0\",\n                        \"HostPort\": \"18070\"\n                    }\n                ]\n            },\n            \"SandboxKey\": \"/var/run/docker/netns/456abdb15ec3\",\n            \"SecondaryIPAddresses\": null,\n            \"SecondaryIPv6Addresses\": null,\n            \"EndpointID\": \"58b84ac1ea19693b26e71bf4fde9b74d54244da51a7f650bd50564a6704e56c2\",\n            \"Gateway\": \"172.17.0.1\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAddress\": \"172.17.0.11\",\n            \"IPPrefixLen\": 16,\n            \"IPv6Gateway\": \"\",\n            \"MacAddress\": \"02:42:ac:11:00:0b\",\n            \"Networks\": {\n                \"bridge\": {\n                    \"IPAMConfig\": null,\n                    \"Links\": null,\n                    \"Aliases\": null,\n                    \"NetworkID\": \"9d46ad3db3d40d747de9772f7fa203e2db398fc7c96acc3f84bded8087ca709e\",\n                    \"EndpointID\": \"58b84ac1ea19693b26e71bf4fde9b74d54244da51a7f650bd50564a6704e56c2\",\n                    \"Gateway\": \"172.17.0.1\",\n                    \"IPAddress\": \"172.17.0.11\",\n                    \"IPPrefixLen\": 16,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"02:42:ac:11:00:0b\",\n                    \"DriverOpts\": null\n                }\n            }\n        }\n    }\n]\n```\n### 4.docker top 命令 查看进程情况\n```shell\ndocker top 733626f653a3\n```\n![](assets/5.1.docker-monitor-963b5ef4.png)\n","date":"2021-07-18T03:27:18.140Z","updated":"2021-01-14T01:19:26.001Z","path":"docker/4.1.docker-monitor.html","title":"","comments":1,"layout":"page","_id":"ckrac7x1w000hz8s64xepfryt","content":"<h1>4.1.容器监控</h1>\n<h3 id=\"1-docker-ps-命令\">1.docker ps 命令</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/5.1.docker-monitor-980df022.png\" alt=\"\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps -a</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/5.1.docker-monitor-78f4468e.png\" alt=\"\"></p>\n<h3 id=\"2-docker-stats-命令\">2.docker stats 命令</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker stats 2caf69c6bb56</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/5.1.docker-monitor-5ea2e6e9.png\" alt=\"\"></p>\n<h3 id=\"3-docker-inspect-命令\">3.docker inspect 命令</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker inspect 2caf69c6bb56</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        &quot;Id&quot;: &quot;2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44&quot;,</span><br><span class=\"line\">        &quot;Created&quot;: &quot;2020-06-24T06:30:10.97345785Z&quot;,</span><br><span class=\"line\">        &quot;Path&quot;: &quot;/main&quot;,</span><br><span class=\"line\">        &quot;Args&quot;: [],</span><br><span class=\"line\">        &quot;State&quot;: &#123;</span><br><span class=\"line\">            &quot;Status&quot;: &quot;running&quot;,</span><br><span class=\"line\">            &quot;Running&quot;: true,</span><br><span class=\"line\">            &quot;Paused&quot;: false,</span><br><span class=\"line\">            &quot;Restarting&quot;: false,</span><br><span class=\"line\">            &quot;OOMKilled&quot;: false,</span><br><span class=\"line\">            &quot;Dead&quot;: false,</span><br><span class=\"line\">            &quot;Pid&quot;: 18112,</span><br><span class=\"line\">            &quot;ExitCode&quot;: 0,</span><br><span class=\"line\">            &quot;Error&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;StartedAt&quot;: &quot;2020-06-24T06:30:11.382188297Z&quot;,</span><br><span class=\"line\">            &quot;FinishedAt&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;Image&quot;: &quot;sha256:a7ec304e4215d981b7a007475c3bd95badd0434f1018ae55f7de482a2a366f05&quot;,</span><br><span class=\"line\">        &quot;ResolvConfPath&quot;: &quot;/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/resolv.conf&quot;,</span><br><span class=\"line\">        &quot;HostnamePath&quot;: &quot;/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/hostname&quot;,</span><br><span class=\"line\">        &quot;HostsPath&quot;: &quot;/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/hosts&quot;,</span><br><span class=\"line\">        &quot;LogPath&quot;: &quot;/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44-json.log&quot;,</span><br><span class=\"line\">        &quot;Name&quot;: &quot;/go-web-demo&quot;,</span><br><span class=\"line\">        &quot;RestartCount&quot;: 0,</span><br><span class=\"line\">        &quot;Driver&quot;: &quot;overlay2&quot;,</span><br><span class=\"line\">        &quot;Platform&quot;: &quot;linux&quot;,</span><br><span class=\"line\">        &quot;MountLabel&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;ProcessLabel&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;AppArmorProfile&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;ExecIDs&quot;: null,</span><br><span class=\"line\">        &quot;HostConfig&quot;: &#123;</span><br><span class=\"line\">            &quot;Binds&quot;: [</span><br><span class=\"line\">                &quot;/etc/localtime:/etc/localtime&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;ContainerIDFile&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;LogConfig&quot;: &#123;</span><br><span class=\"line\">                &quot;Type&quot;: &quot;json-file&quot;,</span><br><span class=\"line\">                &quot;Config&quot;: &#123;&#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;NetworkMode&quot;: &quot;default&quot;,</span><br><span class=\"line\">            &quot;PortBindings&quot;: &#123;</span><br><span class=\"line\">                &quot;80/tcp&quot;: [</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        &quot;HostIp&quot;: &quot;&quot;,</span><br><span class=\"line\">                        &quot;HostPort&quot;: &quot;18070&quot;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                ]</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;RestartPolicy&quot;: &#123;</span><br><span class=\"line\">                &quot;Name&quot;: &quot;no&quot;,</span><br><span class=\"line\">                &quot;MaximumRetryCount&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;AutoRemove&quot;: false,</span><br><span class=\"line\">            &quot;VolumeDriver&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;VolumesFrom&quot;: null,</span><br><span class=\"line\">            &quot;CapAdd&quot;: null,</span><br><span class=\"line\">            &quot;CapDrop&quot;: null,</span><br><span class=\"line\">            &quot;Dns&quot;: [],</span><br><span class=\"line\">            &quot;DnsOptions&quot;: [],</span><br><span class=\"line\">            &quot;DnsSearch&quot;: [],</span><br><span class=\"line\">            &quot;ExtraHosts&quot;: null,</span><br><span class=\"line\">            &quot;GroupAdd&quot;: null,</span><br><span class=\"line\">            &quot;IpcMode&quot;: &quot;shareable&quot;,</span><br><span class=\"line\">            &quot;Cgroup&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Links&quot;: null,</span><br><span class=\"line\">            &quot;OomScoreAdj&quot;: 0,</span><br><span class=\"line\">            &quot;PidMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Privileged&quot;: false,</span><br><span class=\"line\">            &quot;PublishAllPorts&quot;: false,</span><br><span class=\"line\">            &quot;ReadonlyRootfs&quot;: false,</span><br><span class=\"line\">            &quot;SecurityOpt&quot;: null,</span><br><span class=\"line\">            &quot;UTSMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;UsernsMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;ShmSize&quot;: 67108864,</span><br><span class=\"line\">            &quot;Runtime&quot;: &quot;runc&quot;,</span><br><span class=\"line\">            &quot;ConsoleSize&quot;: [</span><br><span class=\"line\">                0,</span><br><span class=\"line\">                0</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Isolation&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;CpuShares&quot;: 0,</span><br><span class=\"line\">            &quot;Memory&quot;: 0,</span><br><span class=\"line\">            &quot;NanoCpus&quot;: 0,</span><br><span class=\"line\">            &quot;CgroupParent&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;BlkioWeight&quot;: 0,</span><br><span class=\"line\">            &quot;BlkioWeightDevice&quot;: [],</span><br><span class=\"line\">            &quot;BlkioDeviceReadBps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceWriteBps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceReadIOps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceWriteIOps&quot;: null,</span><br><span class=\"line\">            &quot;CpuPeriod&quot;: 0,</span><br><span class=\"line\">            &quot;CpuQuota&quot;: 0,</span><br><span class=\"line\">            &quot;CpuRealtimePeriod&quot;: 0,</span><br><span class=\"line\">            &quot;CpuRealtimeRuntime&quot;: 0,</span><br><span class=\"line\">            &quot;CpusetCpus&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;CpusetMems&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Devices&quot;: [],</span><br><span class=\"line\">            &quot;DeviceCgroupRules&quot;: null,</span><br><span class=\"line\">            &quot;DiskQuota&quot;: 0,</span><br><span class=\"line\">            &quot;KernelMemory&quot;: 0,</span><br><span class=\"line\">            &quot;MemoryReservation&quot;: 0,</span><br><span class=\"line\">            &quot;MemorySwap&quot;: 0,</span><br><span class=\"line\">            &quot;MemorySwappiness&quot;: null,</span><br><span class=\"line\">            &quot;OomKillDisable&quot;: false,</span><br><span class=\"line\">            &quot;PidsLimit&quot;: 0,</span><br><span class=\"line\">            &quot;Ulimits&quot;: null,</span><br><span class=\"line\">            &quot;CpuCount&quot;: 0,</span><br><span class=\"line\">            &quot;CpuPercent&quot;: 0,</span><br><span class=\"line\">            &quot;IOMaximumIOps&quot;: 0,</span><br><span class=\"line\">            &quot;IOMaximumBandwidth&quot;: 0,</span><br><span class=\"line\">            &quot;MaskedPaths&quot;: [</span><br><span class=\"line\">                &quot;/proc/asound&quot;,</span><br><span class=\"line\">                &quot;/proc/acpi&quot;,</span><br><span class=\"line\">                &quot;/proc/kcore&quot;,</span><br><span class=\"line\">                &quot;/proc/keys&quot;,</span><br><span class=\"line\">                &quot;/proc/latency_stats&quot;,</span><br><span class=\"line\">                &quot;/proc/timer_list&quot;,</span><br><span class=\"line\">                &quot;/proc/timer_stats&quot;,</span><br><span class=\"line\">                &quot;/proc/sched_debug&quot;,</span><br><span class=\"line\">                &quot;/proc/scsi&quot;,</span><br><span class=\"line\">                &quot;/sys/firmware&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;ReadonlyPaths&quot;: [</span><br><span class=\"line\">                &quot;/proc/bus&quot;,</span><br><span class=\"line\">                &quot;/proc/fs&quot;,</span><br><span class=\"line\">                &quot;/proc/irq&quot;,</span><br><span class=\"line\">                &quot;/proc/sys&quot;,</span><br><span class=\"line\">                &quot;/proc/sysrq-trigger&quot;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;GraphDriver&quot;: &#123;</span><br><span class=\"line\">            &quot;Data&quot;: &#123;</span><br><span class=\"line\">                &quot;LowerDir&quot;: &quot;/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3-init/diff:/dockerdata/docker/overlay2/508a92d1a4cfee6eec3248e7cb97ce0b5387ef143f2530ad7bbcd06ae7bff21d/diff&quot;,</span><br><span class=\"line\">                &quot;MergedDir&quot;: &quot;/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3/merged&quot;,</span><br><span class=\"line\">                &quot;UpperDir&quot;: &quot;/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3/diff&quot;,</span><br><span class=\"line\">                &quot;WorkDir&quot;: &quot;/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3/work&quot;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;Mounts&quot;: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;Type&quot;: &quot;bind&quot;,</span><br><span class=\"line\">                &quot;Source&quot;: &quot;/etc/localtime&quot;,</span><br><span class=\"line\">                &quot;Destination&quot;: &quot;/etc/localtime&quot;,</span><br><span class=\"line\">                &quot;Mode&quot;: &quot;&quot;,</span><br><span class=\"line\">                &quot;RW&quot;: true,</span><br><span class=\"line\">                &quot;Propagation&quot;: &quot;rprivate&quot;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        &quot;Config&quot;: &#123;</span><br><span class=\"line\">            &quot;Hostname&quot;: &quot;2caf69c6bb56&quot;,</span><br><span class=\"line\">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;User&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;AttachStdin&quot;: false,</span><br><span class=\"line\">            &quot;AttachStdout&quot;: false,</span><br><span class=\"line\">            &quot;AttachStderr&quot;: false,</span><br><span class=\"line\">            &quot;ExposedPorts&quot;: &#123;</span><br><span class=\"line\">                &quot;80/tcp&quot;: &#123;&#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;Tty&quot;: true,</span><br><span class=\"line\">            &quot;OpenStdin&quot;: true,</span><br><span class=\"line\">            &quot;StdinOnce&quot;: false,</span><br><span class=\"line\">            &quot;Env&quot;: [</span><br><span class=\"line\">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Cmd&quot;: null,</span><br><span class=\"line\">            &quot;Image&quot;: &quot;hub.aosccs.com.cn:8888/test1/go-web-demo:v1.0&quot;,</span><br><span class=\"line\">            &quot;Volumes&quot;: null,</span><br><span class=\"line\">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Entrypoint&quot;: [</span><br><span class=\"line\">                &quot;/main&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;OnBuild&quot;: null,</span><br><span class=\"line\">            &quot;Labels&quot;: &#123;&#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;NetworkSettings&quot;: &#123;</span><br><span class=\"line\">            &quot;Bridge&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;SandboxID&quot;: &quot;456abdb15ec3c7bef11e42277b33078eab0f9ab46260f9641b8765718acc6856&quot;,</span><br><span class=\"line\">            &quot;HairpinMode&quot;: false,</span><br><span class=\"line\">            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;LinkLocalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">            &quot;Ports&quot;: &#123;</span><br><span class=\"line\">                &quot;80/tcp&quot;: [</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        &quot;HostIp&quot;: &quot;0.0.0.0&quot;,</span><br><span class=\"line\">                        &quot;HostPort&quot;: &quot;18070&quot;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                ]</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;SandboxKey&quot;: &quot;/var/run/docker/netns/456abdb15ec3&quot;,</span><br><span class=\"line\">            &quot;SecondaryIPAddresses&quot;: null,</span><br><span class=\"line\">            &quot;SecondaryIPv6Addresses&quot;: null,</span><br><span class=\"line\">            &quot;EndpointID&quot;: &quot;58b84ac1ea19693b26e71bf4fde9b74d54244da51a7f650bd50564a6704e56c2&quot;,</span><br><span class=\"line\">            &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class=\"line\">            &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">            &quot;IPAddress&quot;: &quot;172.17.0.11&quot;,</span><br><span class=\"line\">            &quot;IPPrefixLen&quot;: 16,</span><br><span class=\"line\">            &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;MacAddress&quot;: &quot;02:42:ac:11:00:0b&quot;,</span><br><span class=\"line\">            &quot;Networks&quot;: &#123;</span><br><span class=\"line\">                &quot;bridge&quot;: &#123;</span><br><span class=\"line\">                    &quot;IPAMConfig&quot;: null,</span><br><span class=\"line\">                    &quot;Links&quot;: null,</span><br><span class=\"line\">                    &quot;Aliases&quot;: null,</span><br><span class=\"line\">                    &quot;NetworkID&quot;: &quot;9d46ad3db3d40d747de9772f7fa203e2db398fc7c96acc3f84bded8087ca709e&quot;,</span><br><span class=\"line\">                    &quot;EndpointID&quot;: &quot;58b84ac1ea19693b26e71bf4fde9b74d54244da51a7f650bd50564a6704e56c2&quot;,</span><br><span class=\"line\">                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class=\"line\">                    &quot;IPAddress&quot;: &quot;172.17.0.11&quot;,</span><br><span class=\"line\">                    &quot;IPPrefixLen&quot;: 16,</span><br><span class=\"line\">                    &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class=\"line\">                    &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">                    &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">                    &quot;MacAddress&quot;: &quot;02:42:ac:11:00:0b&quot;,</span><br><span class=\"line\">                    &quot;DriverOpts&quot;: null</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-docker-top-命令-查看进程情况\">4.docker top 命令 查看进程情况</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker top 733626f653a3</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/5.1.docker-monitor-963b5ef4.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>4.1.容器监控</h1>\n<h3 id=\"1-docker-ps-命令\">1.docker ps 命令</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/5.1.docker-monitor-980df022.png\" alt=\"\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps -a</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/5.1.docker-monitor-78f4468e.png\" alt=\"\"></p>\n<h3 id=\"2-docker-stats-命令\">2.docker stats 命令</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker stats 2caf69c6bb56</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/5.1.docker-monitor-5ea2e6e9.png\" alt=\"\"></p>\n<h3 id=\"3-docker-inspect-命令\">3.docker inspect 命令</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker inspect 2caf69c6bb56</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        &quot;Id&quot;: &quot;2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44&quot;,</span><br><span class=\"line\">        &quot;Created&quot;: &quot;2020-06-24T06:30:10.97345785Z&quot;,</span><br><span class=\"line\">        &quot;Path&quot;: &quot;/main&quot;,</span><br><span class=\"line\">        &quot;Args&quot;: [],</span><br><span class=\"line\">        &quot;State&quot;: &#123;</span><br><span class=\"line\">            &quot;Status&quot;: &quot;running&quot;,</span><br><span class=\"line\">            &quot;Running&quot;: true,</span><br><span class=\"line\">            &quot;Paused&quot;: false,</span><br><span class=\"line\">            &quot;Restarting&quot;: false,</span><br><span class=\"line\">            &quot;OOMKilled&quot;: false,</span><br><span class=\"line\">            &quot;Dead&quot;: false,</span><br><span class=\"line\">            &quot;Pid&quot;: 18112,</span><br><span class=\"line\">            &quot;ExitCode&quot;: 0,</span><br><span class=\"line\">            &quot;Error&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;StartedAt&quot;: &quot;2020-06-24T06:30:11.382188297Z&quot;,</span><br><span class=\"line\">            &quot;FinishedAt&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;Image&quot;: &quot;sha256:a7ec304e4215d981b7a007475c3bd95badd0434f1018ae55f7de482a2a366f05&quot;,</span><br><span class=\"line\">        &quot;ResolvConfPath&quot;: &quot;/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/resolv.conf&quot;,</span><br><span class=\"line\">        &quot;HostnamePath&quot;: &quot;/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/hostname&quot;,</span><br><span class=\"line\">        &quot;HostsPath&quot;: &quot;/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/hosts&quot;,</span><br><span class=\"line\">        &quot;LogPath&quot;: &quot;/dockerdata/docker/containers/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44/2caf69c6bb56e1ae0081a4d923d4577cb393458de1f4e02e3d608dfdb4652b44-json.log&quot;,</span><br><span class=\"line\">        &quot;Name&quot;: &quot;/go-web-demo&quot;,</span><br><span class=\"line\">        &quot;RestartCount&quot;: 0,</span><br><span class=\"line\">        &quot;Driver&quot;: &quot;overlay2&quot;,</span><br><span class=\"line\">        &quot;Platform&quot;: &quot;linux&quot;,</span><br><span class=\"line\">        &quot;MountLabel&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;ProcessLabel&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;AppArmorProfile&quot;: &quot;&quot;,</span><br><span class=\"line\">        &quot;ExecIDs&quot;: null,</span><br><span class=\"line\">        &quot;HostConfig&quot;: &#123;</span><br><span class=\"line\">            &quot;Binds&quot;: [</span><br><span class=\"line\">                &quot;/etc/localtime:/etc/localtime&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;ContainerIDFile&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;LogConfig&quot;: &#123;</span><br><span class=\"line\">                &quot;Type&quot;: &quot;json-file&quot;,</span><br><span class=\"line\">                &quot;Config&quot;: &#123;&#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;NetworkMode&quot;: &quot;default&quot;,</span><br><span class=\"line\">            &quot;PortBindings&quot;: &#123;</span><br><span class=\"line\">                &quot;80/tcp&quot;: [</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        &quot;HostIp&quot;: &quot;&quot;,</span><br><span class=\"line\">                        &quot;HostPort&quot;: &quot;18070&quot;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                ]</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;RestartPolicy&quot;: &#123;</span><br><span class=\"line\">                &quot;Name&quot;: &quot;no&quot;,</span><br><span class=\"line\">                &quot;MaximumRetryCount&quot;: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;AutoRemove&quot;: false,</span><br><span class=\"line\">            &quot;VolumeDriver&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;VolumesFrom&quot;: null,</span><br><span class=\"line\">            &quot;CapAdd&quot;: null,</span><br><span class=\"line\">            &quot;CapDrop&quot;: null,</span><br><span class=\"line\">            &quot;Dns&quot;: [],</span><br><span class=\"line\">            &quot;DnsOptions&quot;: [],</span><br><span class=\"line\">            &quot;DnsSearch&quot;: [],</span><br><span class=\"line\">            &quot;ExtraHosts&quot;: null,</span><br><span class=\"line\">            &quot;GroupAdd&quot;: null,</span><br><span class=\"line\">            &quot;IpcMode&quot;: &quot;shareable&quot;,</span><br><span class=\"line\">            &quot;Cgroup&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Links&quot;: null,</span><br><span class=\"line\">            &quot;OomScoreAdj&quot;: 0,</span><br><span class=\"line\">            &quot;PidMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Privileged&quot;: false,</span><br><span class=\"line\">            &quot;PublishAllPorts&quot;: false,</span><br><span class=\"line\">            &quot;ReadonlyRootfs&quot;: false,</span><br><span class=\"line\">            &quot;SecurityOpt&quot;: null,</span><br><span class=\"line\">            &quot;UTSMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;UsernsMode&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;ShmSize&quot;: 67108864,</span><br><span class=\"line\">            &quot;Runtime&quot;: &quot;runc&quot;,</span><br><span class=\"line\">            &quot;ConsoleSize&quot;: [</span><br><span class=\"line\">                0,</span><br><span class=\"line\">                0</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Isolation&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;CpuShares&quot;: 0,</span><br><span class=\"line\">            &quot;Memory&quot;: 0,</span><br><span class=\"line\">            &quot;NanoCpus&quot;: 0,</span><br><span class=\"line\">            &quot;CgroupParent&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;BlkioWeight&quot;: 0,</span><br><span class=\"line\">            &quot;BlkioWeightDevice&quot;: [],</span><br><span class=\"line\">            &quot;BlkioDeviceReadBps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceWriteBps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceReadIOps&quot;: null,</span><br><span class=\"line\">            &quot;BlkioDeviceWriteIOps&quot;: null,</span><br><span class=\"line\">            &quot;CpuPeriod&quot;: 0,</span><br><span class=\"line\">            &quot;CpuQuota&quot;: 0,</span><br><span class=\"line\">            &quot;CpuRealtimePeriod&quot;: 0,</span><br><span class=\"line\">            &quot;CpuRealtimeRuntime&quot;: 0,</span><br><span class=\"line\">            &quot;CpusetCpus&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;CpusetMems&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Devices&quot;: [],</span><br><span class=\"line\">            &quot;DeviceCgroupRules&quot;: null,</span><br><span class=\"line\">            &quot;DiskQuota&quot;: 0,</span><br><span class=\"line\">            &quot;KernelMemory&quot;: 0,</span><br><span class=\"line\">            &quot;MemoryReservation&quot;: 0,</span><br><span class=\"line\">            &quot;MemorySwap&quot;: 0,</span><br><span class=\"line\">            &quot;MemorySwappiness&quot;: null,</span><br><span class=\"line\">            &quot;OomKillDisable&quot;: false,</span><br><span class=\"line\">            &quot;PidsLimit&quot;: 0,</span><br><span class=\"line\">            &quot;Ulimits&quot;: null,</span><br><span class=\"line\">            &quot;CpuCount&quot;: 0,</span><br><span class=\"line\">            &quot;CpuPercent&quot;: 0,</span><br><span class=\"line\">            &quot;IOMaximumIOps&quot;: 0,</span><br><span class=\"line\">            &quot;IOMaximumBandwidth&quot;: 0,</span><br><span class=\"line\">            &quot;MaskedPaths&quot;: [</span><br><span class=\"line\">                &quot;/proc/asound&quot;,</span><br><span class=\"line\">                &quot;/proc/acpi&quot;,</span><br><span class=\"line\">                &quot;/proc/kcore&quot;,</span><br><span class=\"line\">                &quot;/proc/keys&quot;,</span><br><span class=\"line\">                &quot;/proc/latency_stats&quot;,</span><br><span class=\"line\">                &quot;/proc/timer_list&quot;,</span><br><span class=\"line\">                &quot;/proc/timer_stats&quot;,</span><br><span class=\"line\">                &quot;/proc/sched_debug&quot;,</span><br><span class=\"line\">                &quot;/proc/scsi&quot;,</span><br><span class=\"line\">                &quot;/sys/firmware&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;ReadonlyPaths&quot;: [</span><br><span class=\"line\">                &quot;/proc/bus&quot;,</span><br><span class=\"line\">                &quot;/proc/fs&quot;,</span><br><span class=\"line\">                &quot;/proc/irq&quot;,</span><br><span class=\"line\">                &quot;/proc/sys&quot;,</span><br><span class=\"line\">                &quot;/proc/sysrq-trigger&quot;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;GraphDriver&quot;: &#123;</span><br><span class=\"line\">            &quot;Data&quot;: &#123;</span><br><span class=\"line\">                &quot;LowerDir&quot;: &quot;/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3-init/diff:/dockerdata/docker/overlay2/508a92d1a4cfee6eec3248e7cb97ce0b5387ef143f2530ad7bbcd06ae7bff21d/diff&quot;,</span><br><span class=\"line\">                &quot;MergedDir&quot;: &quot;/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3/merged&quot;,</span><br><span class=\"line\">                &quot;UpperDir&quot;: &quot;/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3/diff&quot;,</span><br><span class=\"line\">                &quot;WorkDir&quot;: &quot;/dockerdata/docker/overlay2/895f0164e245f5597256458910180049d892df1e33bc5c66685857891f6d3fd3/work&quot;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;Mounts&quot;: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;Type&quot;: &quot;bind&quot;,</span><br><span class=\"line\">                &quot;Source&quot;: &quot;/etc/localtime&quot;,</span><br><span class=\"line\">                &quot;Destination&quot;: &quot;/etc/localtime&quot;,</span><br><span class=\"line\">                &quot;Mode&quot;: &quot;&quot;,</span><br><span class=\"line\">                &quot;RW&quot;: true,</span><br><span class=\"line\">                &quot;Propagation&quot;: &quot;rprivate&quot;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        &quot;Config&quot;: &#123;</span><br><span class=\"line\">            &quot;Hostname&quot;: &quot;2caf69c6bb56&quot;,</span><br><span class=\"line\">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;User&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;AttachStdin&quot;: false,</span><br><span class=\"line\">            &quot;AttachStdout&quot;: false,</span><br><span class=\"line\">            &quot;AttachStderr&quot;: false,</span><br><span class=\"line\">            &quot;ExposedPorts&quot;: &#123;</span><br><span class=\"line\">                &quot;80/tcp&quot;: &#123;&#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;Tty&quot;: true,</span><br><span class=\"line\">            &quot;OpenStdin&quot;: true,</span><br><span class=\"line\">            &quot;StdinOnce&quot;: false,</span><br><span class=\"line\">            &quot;Env&quot;: [</span><br><span class=\"line\">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;Cmd&quot;: null,</span><br><span class=\"line\">            &quot;Image&quot;: &quot;hub.aosccs.com.cn:8888/test1/go-web-demo:v1.0&quot;,</span><br><span class=\"line\">            &quot;Volumes&quot;: null,</span><br><span class=\"line\">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;Entrypoint&quot;: [</span><br><span class=\"line\">                &quot;/main&quot;</span><br><span class=\"line\">            ],</span><br><span class=\"line\">            &quot;OnBuild&quot;: null,</span><br><span class=\"line\">            &quot;Labels&quot;: &#123;&#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;NetworkSettings&quot;: &#123;</span><br><span class=\"line\">            &quot;Bridge&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;SandboxID&quot;: &quot;456abdb15ec3c7bef11e42277b33078eab0f9ab46260f9641b8765718acc6856&quot;,</span><br><span class=\"line\">            &quot;HairpinMode&quot;: false,</span><br><span class=\"line\">            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;LinkLocalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">            &quot;Ports&quot;: &#123;</span><br><span class=\"line\">                &quot;80/tcp&quot;: [</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        &quot;HostIp&quot;: &quot;0.0.0.0&quot;,</span><br><span class=\"line\">                        &quot;HostPort&quot;: &quot;18070&quot;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                ]</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;SandboxKey&quot;: &quot;/var/run/docker/netns/456abdb15ec3&quot;,</span><br><span class=\"line\">            &quot;SecondaryIPAddresses&quot;: null,</span><br><span class=\"line\">            &quot;SecondaryIPv6Addresses&quot;: null,</span><br><span class=\"line\">            &quot;EndpointID&quot;: &quot;58b84ac1ea19693b26e71bf4fde9b74d54244da51a7f650bd50564a6704e56c2&quot;,</span><br><span class=\"line\">            &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class=\"line\">            &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">            &quot;IPAddress&quot;: &quot;172.17.0.11&quot;,</span><br><span class=\"line\">            &quot;IPPrefixLen&quot;: 16,</span><br><span class=\"line\">            &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class=\"line\">            &quot;MacAddress&quot;: &quot;02:42:ac:11:00:0b&quot;,</span><br><span class=\"line\">            &quot;Networks&quot;: &#123;</span><br><span class=\"line\">                &quot;bridge&quot;: &#123;</span><br><span class=\"line\">                    &quot;IPAMConfig&quot;: null,</span><br><span class=\"line\">                    &quot;Links&quot;: null,</span><br><span class=\"line\">                    &quot;Aliases&quot;: null,</span><br><span class=\"line\">                    &quot;NetworkID&quot;: &quot;9d46ad3db3d40d747de9772f7fa203e2db398fc7c96acc3f84bded8087ca709e&quot;,</span><br><span class=\"line\">                    &quot;EndpointID&quot;: &quot;58b84ac1ea19693b26e71bf4fde9b74d54244da51a7f650bd50564a6704e56c2&quot;,</span><br><span class=\"line\">                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class=\"line\">                    &quot;IPAddress&quot;: &quot;172.17.0.11&quot;,</span><br><span class=\"line\">                    &quot;IPPrefixLen&quot;: 16,</span><br><span class=\"line\">                    &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class=\"line\">                    &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class=\"line\">                    &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class=\"line\">                    &quot;MacAddress&quot;: &quot;02:42:ac:11:00:0b&quot;,</span><br><span class=\"line\">                    &quot;DriverOpts&quot;: null</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-docker-top-命令-查看进程情况\">4.docker top 命令 查看进程情况</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker top 733626f653a3</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/5.1.docker-monitor-963b5ef4.png\" alt=\"\"></p>\n"},{"_content":"# 4.2.资源控制\n\n - 在使用 docker 运行容器时，默认的情况下，docker没有对容器进行硬件资源的限制，当一台主机上运行几百个容器，这些容器虽然互相隔离，但是底层却使用着相同的 CPU、内存和磁盘资源。如果不对容器使用的资源进行限制，那么容器之间会互相影响，小的来说会导致容器资源使用不公平；大的来说，可能会导致主机和集群资源耗尽，服务完全不可用。\n### 4.2.1 内存cpu控制\n```shell\ndocker run --name stresscentos -itd -m 300m --cpus=0.5 centos-stress:v1.0\n\n  -m或--memory：设置内存的使用限额，例如 100M, 2G。\n  --memory-swap：设置内存+swap的使用限额\n ```\n\n![](assets/5.2.docker-resource-6c92d7e0.png)\n\n### 4.2.2 指定cpu\n```shell\ndocker run --name stresscentos -itd -m 300m --cpus=0.5 --cpuset-cpus 1,3 centos-stress:v1.0\n\n ```\n![](assets/5.2.docker-resource-036307e8.png)\n","source":"docker/4.2.docker-resource.md","raw":"# 4.2.资源控制\n\n - 在使用 docker 运行容器时，默认的情况下，docker没有对容器进行硬件资源的限制，当一台主机上运行几百个容器，这些容器虽然互相隔离，但是底层却使用着相同的 CPU、内存和磁盘资源。如果不对容器使用的资源进行限制，那么容器之间会互相影响，小的来说会导致容器资源使用不公平；大的来说，可能会导致主机和集群资源耗尽，服务完全不可用。\n### 4.2.1 内存cpu控制\n```shell\ndocker run --name stresscentos -itd -m 300m --cpus=0.5 centos-stress:v1.0\n\n  -m或--memory：设置内存的使用限额，例如 100M, 2G。\n  --memory-swap：设置内存+swap的使用限额\n ```\n\n![](assets/5.2.docker-resource-6c92d7e0.png)\n\n### 4.2.2 指定cpu\n```shell\ndocker run --name stresscentos -itd -m 300m --cpus=0.5 --cpuset-cpus 1,3 centos-stress:v1.0\n\n ```\n![](assets/5.2.docker-resource-036307e8.png)\n","date":"2021-07-18T03:27:18.143Z","updated":"2021-01-14T01:19:26.005Z","path":"docker/4.2.docker-resource.html","title":"","comments":1,"layout":"page","_id":"ckrac7x1x000iz8s65rsg7a4k","content":"<h1>4.2.资源控制</h1>\n<ul>\n<li>在使用 docker 运行容器时，默认的情况下，docker没有对容器进行硬件资源的限制，当一台主机上运行几百个容器，这些容器虽然互相隔离，但是底层却使用着相同的 CPU、内存和磁盘资源。如果不对容器使用的资源进行限制，那么容器之间会互相影响，小的来说会导致容器资源使用不公平；大的来说，可能会导致主机和集群资源耗尽，服务完全不可用。</li>\n</ul>\n<h3 id=\"4-2-1-内存cpu控制\">4.2.1 内存cpu控制</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name stresscentos -itd -m 300m --cpus=0.5 centos-stress:v1.0</span><br><span class=\"line\"></span><br><span class=\"line\">  -m或--memory：设置内存的使用限额，例如 100M, 2G。</span><br><span class=\"line\">  --memory-swap：设置内存+swap的使用限额</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/5.2.docker-resource-6c92d7e0.png\" alt=\"\"></p>\n<h3 id=\"4-2-2-指定cpu\">4.2.2 指定cpu</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name stresscentos -itd -m 300m --cpus=0.5 --cpuset-cpus 1,3 centos-stress:v1.0</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/5.2.docker-resource-036307e8.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>4.2.资源控制</h1>\n<ul>\n<li>在使用 docker 运行容器时，默认的情况下，docker没有对容器进行硬件资源的限制，当一台主机上运行几百个容器，这些容器虽然互相隔离，但是底层却使用着相同的 CPU、内存和磁盘资源。如果不对容器使用的资源进行限制，那么容器之间会互相影响，小的来说会导致容器资源使用不公平；大的来说，可能会导致主机和集群资源耗尽，服务完全不可用。</li>\n</ul>\n<h3 id=\"4-2-1-内存cpu控制\">4.2.1 内存cpu控制</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name stresscentos -itd -m 300m --cpus=0.5 centos-stress:v1.0</span><br><span class=\"line\"></span><br><span class=\"line\">  -m或--memory：设置内存的使用限额，例如 100M, 2G。</span><br><span class=\"line\">  --memory-swap：设置内存+swap的使用限额</span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/5.2.docker-resource-6c92d7e0.png\" alt=\"\"></p>\n<h3 id=\"4-2-2-指定cpu\">4.2.2 指定cpu</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name stresscentos -itd -m 300m --cpus=0.5 --cpuset-cpus 1,3 centos-stress:v1.0</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><img src=\"assets/5.2.docker-resource-036307e8.png\" alt=\"\"></p>\n"},{"_content":"# 4.容器诊断\n","source":"docker/4.docker-diagnose.md","raw":"# 4.容器诊断\n","date":"2021-07-18T03:27:18.160Z","updated":"2021-01-14T01:19:26.008Z","path":"docker/4.docker-diagnose.html","title":"","comments":1,"layout":"page","_id":"ckrac7x1y000jz8s6epe0hvlj","content":"<h1>4.容器诊断</h1>\n","site":{"data":{}},"excerpt":"","more":"<h1>4.容器诊断</h1>\n"},{"title":"Docker 培训","date":"2021-07-18T05:44:57.000Z","type":"categories","_content":"\n![docker](assets/README-52116020.png)\n* [0.Introduction](README)\n* [1.Docker架构](1.docker-infrustructure)\n* [2.Docker底层原理](2.what-docker-todo)\n* [3.构建一个Docker应用程序](3.docker-practice)\n    * [3.1.Docker镜像构建](3.1.docker-build)\n        * [3.1.1 场景一、命令行构建](3.1.1docker-build-client)\n        * [3.1.2 场景二、Dockerfile构建](3.1.2docker-build-dockerfile)\n    * [3.2.微服务应用构建](3.2.docker-build-cloud)\n    * [3.3.war包应用构建](3.3.docker-build-war)\n    * [3.4.前端应用构建](3.4.docker-build-npm)\n    * [3.5.go应用构建](3.5.docker-build-go)\n    * [3.6.Docker镜像文件编写技巧](3.6.docker-build-skill)\n* [4.容器诊断](4.docker-diagnose)\n    * [4.1.容器监控](4.1.docker-monitor)\n    * [4.2.资源控制](4.2.docker-resource)\n\n-----\n# 容器云\n* [1.在k8s中CI/CD的实现方式](1.ccs-in-k8s)\n* [2.在k8s对数据库对支持](2.database-in-k8s)\n* [3.在k8s持久化存储](3.storage-in-k8s)\n","source":"docker/README.md","raw":"\ntitle: Docker 培训\ndate: 2021-07-18 13:44:57\ntype: \"categories\"\n---\n\n![docker](assets/README-52116020.png)\n* [0.Introduction](README)\n* [1.Docker架构](1.docker-infrustructure)\n* [2.Docker底层原理](2.what-docker-todo)\n* [3.构建一个Docker应用程序](3.docker-practice)\n    * [3.1.Docker镜像构建](3.1.docker-build)\n        * [3.1.1 场景一、命令行构建](3.1.1docker-build-client)\n        * [3.1.2 场景二、Dockerfile构建](3.1.2docker-build-dockerfile)\n    * [3.2.微服务应用构建](3.2.docker-build-cloud)\n    * [3.3.war包应用构建](3.3.docker-build-war)\n    * [3.4.前端应用构建](3.4.docker-build-npm)\n    * [3.5.go应用构建](3.5.docker-build-go)\n    * [3.6.Docker镜像文件编写技巧](3.6.docker-build-skill)\n* [4.容器诊断](4.docker-diagnose)\n    * [4.1.容器监控](4.1.docker-monitor)\n    * [4.2.资源控制](4.2.docker-resource)\n\n-----\n# 容器云\n* [1.在k8s中CI/CD的实现方式](1.ccs-in-k8s)\n* [2.在k8s对数据库对支持](2.database-in-k8s)\n* [3.在k8s持久化存储](3.storage-in-k8s)\n","updated":"2021-07-19T01:36:38.690Z","path":"docker/README.html","comments":1,"layout":"page","_id":"ckrac7x23000kz8s6atkmb8ba","content":"<p><img src=\"assets/README-52116020.png\" alt=\"docker\"></p>\n<ul>\n<li><a href=\"README\">0.Introduction</a></li>\n<li><a href=\"1.docker-infrustructure\">1.Docker架构</a></li>\n<li><a href=\"2.what-docker-todo\">2.Docker底层原理</a></li>\n<li><a href=\"3.docker-practice\">3.构建一个Docker应用程序</a>\n<ul>\n<li><a href=\"3.1.docker-build\">3.1.Docker镜像构建</a>\n<ul>\n<li><a href=\"3.1.1docker-build-client\">3.1.1 场景一、命令行构建</a></li>\n<li><a href=\"3.1.2docker-build-dockerfile\">3.1.2 场景二、Dockerfile构建</a></li>\n</ul>\n</li>\n<li><a href=\"3.2.docker-build-cloud\">3.2.微服务应用构建</a></li>\n<li><a href=\"3.3.docker-build-war\">3.3.war包应用构建</a></li>\n<li><a href=\"3.4.docker-build-npm\">3.4.前端应用构建</a></li>\n<li><a href=\"3.5.docker-build-go\">3.5.go应用构建</a></li>\n<li><a href=\"3.6.docker-build-skill\">3.6.Docker镜像文件编写技巧</a></li>\n</ul>\n</li>\n<li><a href=\"4.docker-diagnose\">4.容器诊断</a>\n<ul>\n<li><a href=\"4.1.docker-monitor\">4.1.容器监控</a></li>\n<li><a href=\"4.2.docker-resource\">4.2.资源控制</a></li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1>容器云</h1>\n<ul>\n<li><a href=\"1.ccs-in-k8s\">1.在k8s中CI/CD的实现方式</a></li>\n<li><a href=\"2.database-in-k8s\">2.在k8s对数据库对支持</a></li>\n<li><a href=\"3.storage-in-k8s\">3.在k8s持久化存储</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"assets/README-52116020.png\" alt=\"docker\"></p>\n<ul>\n<li><a href=\"README\">0.Introduction</a></li>\n<li><a href=\"1.docker-infrustructure\">1.Docker架构</a></li>\n<li><a href=\"2.what-docker-todo\">2.Docker底层原理</a></li>\n<li><a href=\"3.docker-practice\">3.构建一个Docker应用程序</a>\n<ul>\n<li><a href=\"3.1.docker-build\">3.1.Docker镜像构建</a>\n<ul>\n<li><a href=\"3.1.1docker-build-client\">3.1.1 场景一、命令行构建</a></li>\n<li><a href=\"3.1.2docker-build-dockerfile\">3.1.2 场景二、Dockerfile构建</a></li>\n</ul>\n</li>\n<li><a href=\"3.2.docker-build-cloud\">3.2.微服务应用构建</a></li>\n<li><a href=\"3.3.docker-build-war\">3.3.war包应用构建</a></li>\n<li><a href=\"3.4.docker-build-npm\">3.4.前端应用构建</a></li>\n<li><a href=\"3.5.docker-build-go\">3.5.go应用构建</a></li>\n<li><a href=\"3.6.docker-build-skill\">3.6.Docker镜像文件编写技巧</a></li>\n</ul>\n</li>\n<li><a href=\"4.docker-diagnose\">4.容器诊断</a>\n<ul>\n<li><a href=\"4.1.docker-monitor\">4.1.容器监控</a></li>\n<li><a href=\"4.2.docker-resource\">4.2.资源控制</a></li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1>容器云</h1>\n<ul>\n<li><a href=\"1.ccs-in-k8s\">1.在k8s中CI/CD的实现方式</a></li>\n<li><a href=\"2.database-in-k8s\">2.在k8s对数据库对支持</a></li>\n<li><a href=\"3.storage-in-k8s\">3.在k8s持久化存储</a></li>\n</ul>\n"},{"_content":"# 1.华为云概念\n- 华为云Stack是物理分散、逻辑统一、业务驱动、云管协同、业务感知的数据中心解决方案，可支持企业或机构业务的持续发展，能满足对业务全生命周期的管理。华为云 Stack的核心理念在于物理分散和逻辑统一。\n- 华为云Stack，采用FusionSphere OpenStack作为云平台，对各个物理数据 中心资源进行整合;采用ManageOne作为数据中心管理软件，对多个数据中心提供统一管理。通过云平台和数据中心管理软件协同运作，达到多数据中心融合、提升企业 整体IT效率的目的。并基于此，提供计算、存储、网络、安全、灾备、大数据和PaaS (平台即服务)等丰富的云服务。\n\n# 2.华为云系统架构\n![](assets/1.infrustructure-1f6b245b.png)\n# 3.华为云网络架构\n![](assets/1.infrustructure-b8089c8d.png)\n# 4.华为云管理架构\n![](assets/1.infrustructure-011dd82a.png)\n","source":"cloudink8s/1.infrustructure.md","raw":"# 1.华为云概念\n- 华为云Stack是物理分散、逻辑统一、业务驱动、云管协同、业务感知的数据中心解决方案，可支持企业或机构业务的持续发展，能满足对业务全生命周期的管理。华为云 Stack的核心理念在于物理分散和逻辑统一。\n- 华为云Stack，采用FusionSphere OpenStack作为云平台，对各个物理数据 中心资源进行整合;采用ManageOne作为数据中心管理软件，对多个数据中心提供统一管理。通过云平台和数据中心管理软件协同运作，达到多数据中心融合、提升企业 整体IT效率的目的。并基于此，提供计算、存储、网络、安全、灾备、大数据和PaaS (平台即服务)等丰富的云服务。\n\n# 2.华为云系统架构\n![](assets/1.infrustructure-1f6b245b.png)\n# 3.华为云网络架构\n![](assets/1.infrustructure-b8089c8d.png)\n# 4.华为云管理架构\n![](assets/1.infrustructure-011dd82a.png)\n","date":"2021-07-18T15:47:31.307Z","updated":"2021-01-14T01:19:24.058Z","path":"cloudink8s/1.infrustructure.html","title":"","comments":1,"layout":"page","_id":"ckrac7x2t000lz8s670o3g2vt","content":"<h1>1.华为云概念</h1>\n<ul>\n<li>华为云Stack是物理分散、逻辑统一、业务驱动、云管协同、业务感知的数据中心解决方案，可支持企业或机构业务的持续发展，能满足对业务全生命周期的管理。华为云 Stack的核心理念在于物理分散和逻辑统一。</li>\n<li>华为云Stack，采用FusionSphere OpenStack作为云平台，对各个物理数据 中心资源进行整合;采用ManageOne作为数据中心管理软件，对多个数据中心提供统一管理。通过云平台和数据中心管理软件协同运作，达到多数据中心融合、提升企业 整体IT效率的目的。并基于此，提供计算、存储、网络、安全、灾备、大数据和PaaS (平台即服务)等丰富的云服务。</li>\n</ul>\n<h1>2.华为云系统架构</h1>\n<p><img src=\"assets/1.infrustructure-1f6b245b.png\" alt=\"\"></p>\n<h1>3.华为云网络架构</h1>\n<p><img src=\"assets/1.infrustructure-b8089c8d.png\" alt=\"\"></p>\n<h1>4.华为云管理架构</h1>\n<p><img src=\"assets/1.infrustructure-011dd82a.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>1.华为云概念</h1>\n<ul>\n<li>华为云Stack是物理分散、逻辑统一、业务驱动、云管协同、业务感知的数据中心解决方案，可支持企业或机构业务的持续发展，能满足对业务全生命周期的管理。华为云 Stack的核心理念在于物理分散和逻辑统一。</li>\n<li>华为云Stack，采用FusionSphere OpenStack作为云平台，对各个物理数据 中心资源进行整合;采用ManageOne作为数据中心管理软件，对多个数据中心提供统一管理。通过云平台和数据中心管理软件协同运作，达到多数据中心融合、提升企业 整体IT效率的目的。并基于此，提供计算、存储、网络、安全、灾备、大数据和PaaS (平台即服务)等丰富的云服务。</li>\n</ul>\n<h1>2.华为云系统架构</h1>\n<p><img src=\"assets/1.infrustructure-1f6b245b.png\" alt=\"\"></p>\n<h1>3.华为云网络架构</h1>\n<p><img src=\"assets/1.infrustructure-b8089c8d.png\" alt=\"\"></p>\n<h1>4.华为云管理架构</h1>\n<p><img src=\"assets/1.infrustructure-011dd82a.png\" alt=\"\"></p>\n"},{"_content":"# 容器云项目导出\n## 1. 使用k8sExport工具导出数据。\n\n### 1.1 配置yml/application.yml文件，指定kubectl工具位置、harbor服务器账号密码、docker配置\n![](assets/10.1.export-images-9244a427.png)\n### 1.2 连接需要导出项目的k8s集群，输入账号密码\n![](assets/10.1.export-images-0cd2a817.png)\n### 1.3 输入项目，回车开始导出\n![](assets/10.1.export-images-562e7d6a.png)\n### 1.4 项目镜像和相关配置文件\n![](assets/10.1.export-images-1344bea8.png)\n","source":"cloudink8s/10.1.export-images.md","raw":"# 容器云项目导出\n## 1. 使用k8sExport工具导出数据。\n\n### 1.1 配置yml/application.yml文件，指定kubectl工具位置、harbor服务器账号密码、docker配置\n![](assets/10.1.export-images-9244a427.png)\n### 1.2 连接需要导出项目的k8s集群，输入账号密码\n![](assets/10.1.export-images-0cd2a817.png)\n### 1.3 输入项目，回车开始导出\n![](assets/10.1.export-images-562e7d6a.png)\n### 1.4 项目镜像和相关配置文件\n![](assets/10.1.export-images-1344bea8.png)\n","date":"2021-07-18T15:47:31.326Z","updated":"2021-01-14T01:19:23.400Z","path":"cloudink8s/10.1.export-images.html","title":"","comments":1,"layout":"page","_id":"ckrac7x2u000mz8s69xop40a3","content":"<h1>容器云项目导出</h1>\n<h2 id=\"1-使用k8sExport工具导出数据。\">1. 使用k8sExport工具导出数据。</h2>\n<h3 id=\"1-1-配置yml-application-yml文件，指定kubectl工具位置、harbor服务器账号密码、docker配置\">1.1 配置yml/application.yml文件，指定kubectl工具位置、harbor服务器账号密码、docker配置</h3>\n<p><img src=\"assets/10.1.export-images-9244a427.png\" alt=\"\"></p>\n<h3 id=\"1-2-连接需要导出项目的k8s集群，输入账号密码\">1.2 连接需要导出项目的k8s集群，输入账号密码</h3>\n<p><img src=\"assets/10.1.export-images-0cd2a817.png\" alt=\"\"></p>\n<h3 id=\"1-3-输入项目，回车开始导出\">1.3 输入项目，回车开始导出</h3>\n<p><img src=\"assets/10.1.export-images-562e7d6a.png\" alt=\"\"></p>\n<h3 id=\"1-4-项目镜像和相关配置文件\">1.4 项目镜像和相关配置文件</h3>\n<p><img src=\"assets/10.1.export-images-1344bea8.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>容器云项目导出</h1>\n<h2 id=\"1-使用k8sExport工具导出数据。\">1. 使用k8sExport工具导出数据。</h2>\n<h3 id=\"1-1-配置yml-application-yml文件，指定kubectl工具位置、harbor服务器账号密码、docker配置\">1.1 配置yml/application.yml文件，指定kubectl工具位置、harbor服务器账号密码、docker配置</h3>\n<p><img src=\"assets/10.1.export-images-9244a427.png\" alt=\"\"></p>\n<h3 id=\"1-2-连接需要导出项目的k8s集群，输入账号密码\">1.2 连接需要导出项目的k8s集群，输入账号密码</h3>\n<p><img src=\"assets/10.1.export-images-0cd2a817.png\" alt=\"\"></p>\n<h3 id=\"1-3-输入项目，回车开始导出\">1.3 输入项目，回车开始导出</h3>\n<p><img src=\"assets/10.1.export-images-562e7d6a.png\" alt=\"\"></p>\n<h3 id=\"1-4-项目镜像和相关配置文件\">1.4 项目镜像和相关配置文件</h3>\n<p><img src=\"assets/10.1.export-images-1344bea8.png\" alt=\"\"></p>\n"},{"_content":"# 容器云项目镜像导入\n## 1. 华为云镜像导入。\n### 1.1 进入容器镜像服务系统，命令行方式导入镜像。\n  ![](assets/10.2.import-images-d6e503a8.png)\n### 1.2 进入容器镜像服务系统，页面导入镜像。\n  ![](assets/10.2.import-images-b894b65d.png)\n## 2. 阿里云镜像导入。\n### 2.1 进入容器镜像服务系统，命令行方式导入镜像。\n  ![](assets/10.2.import-images-1f4923cb.png)\n","source":"cloudink8s/10.2.import-images.md","raw":"# 容器云项目镜像导入\n## 1. 华为云镜像导入。\n### 1.1 进入容器镜像服务系统，命令行方式导入镜像。\n  ![](assets/10.2.import-images-d6e503a8.png)\n### 1.2 进入容器镜像服务系统，页面导入镜像。\n  ![](assets/10.2.import-images-b894b65d.png)\n## 2. 阿里云镜像导入。\n### 2.1 进入容器镜像服务系统，命令行方式导入镜像。\n  ![](assets/10.2.import-images-1f4923cb.png)\n","date":"2021-07-18T15:47:31.406Z","updated":"2021-01-14T01:19:23.403Z","path":"cloudink8s/10.2.import-images.html","title":"","comments":1,"layout":"page","_id":"ckrac7x2u000nz8s66ybfgv62","content":"<h1>容器云项目镜像导入</h1>\n<h2 id=\"1-华为云镜像导入。\">1. 华为云镜像导入。</h2>\n<h3 id=\"1-1-进入容器镜像服务系统，命令行方式导入镜像。\">1.1 进入容器镜像服务系统，命令行方式导入镜像。</h3>\n<p><img src=\"assets/10.2.import-images-d6e503a8.png\" alt=\"\"></p>\n<h3 id=\"1-2-进入容器镜像服务系统，页面导入镜像。\">1.2 进入容器镜像服务系统，页面导入镜像。</h3>\n<p><img src=\"assets/10.2.import-images-b894b65d.png\" alt=\"\"></p>\n<h2 id=\"2-阿里云镜像导入。\">2. 阿里云镜像导入。</h2>\n<h3 id=\"2-1-进入容器镜像服务系统，命令行方式导入镜像。\">2.1 进入容器镜像服务系统，命令行方式导入镜像。</h3>\n<p><img src=\"assets/10.2.import-images-1f4923cb.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>容器云项目镜像导入</h1>\n<h2 id=\"1-华为云镜像导入。\">1. 华为云镜像导入。</h2>\n<h3 id=\"1-1-进入容器镜像服务系统，命令行方式导入镜像。\">1.1 进入容器镜像服务系统，命令行方式导入镜像。</h3>\n<p><img src=\"assets/10.2.import-images-d6e503a8.png\" alt=\"\"></p>\n<h3 id=\"1-2-进入容器镜像服务系统，页面导入镜像。\">1.2 进入容器镜像服务系统，页面导入镜像。</h3>\n<p><img src=\"assets/10.2.import-images-b894b65d.png\" alt=\"\"></p>\n<h2 id=\"2-阿里云镜像导入。\">2. 阿里云镜像导入。</h2>\n<h3 id=\"2-1-进入容器镜像服务系统，命令行方式导入镜像。\">2.1 进入容器镜像服务系统，命令行方式导入镜像。</h3>\n<p><img src=\"assets/10.2.import-images-1f4923cb.png\" alt=\"\"></p>\n"},{"_content":"# 容器云项目配置导入（用acloudex举例）\n## 1. 华为云项目配置导入。\n### 1.1 容器云项目配置信息\n![](assets/10.3.app-create-dc5be485.png)\n![](assets/10.3.app-create-27dcc76d.png)\n### 2.1 对应的华为云项目配置信息\n![](assets/10.3.app-create-110a647f.png)\n![](assets/10.3.app-create-0695a4b8.png)\n![](assets/10.3.app-create-1dc22aa8.png)\n![](assets/10.3.app-create-04b7ca8f.png)\n下图的configmap创建可以直接使用导出的configMap\n![](assets/10.3.app-create-8020ddd5.png)\n### 3.1 对应的阿里云项目配置信息\n![](assets/10.3.app-create-1820238e.png)\n### 4.1 工具导出ccs项目配置信息(提示都是对应的ccs里面的配置项)\n![](assets/10.3.app-create-084e3050.png)\nacloudex.deployment.yaml\n![](assets/10.3.app-create-21407512.png)\n![](assets/10.3.app-create-bd4eb83e.png)\n![](assets/10.3.app-create-12673d72.png)\n![](assets/10.3.app-create-3988b087.png)\n","source":"cloudink8s/10.3.app-create.md","raw":"# 容器云项目配置导入（用acloudex举例）\n## 1. 华为云项目配置导入。\n### 1.1 容器云项目配置信息\n![](assets/10.3.app-create-dc5be485.png)\n![](assets/10.3.app-create-27dcc76d.png)\n### 2.1 对应的华为云项目配置信息\n![](assets/10.3.app-create-110a647f.png)\n![](assets/10.3.app-create-0695a4b8.png)\n![](assets/10.3.app-create-1dc22aa8.png)\n![](assets/10.3.app-create-04b7ca8f.png)\n下图的configmap创建可以直接使用导出的configMap\n![](assets/10.3.app-create-8020ddd5.png)\n### 3.1 对应的阿里云项目配置信息\n![](assets/10.3.app-create-1820238e.png)\n### 4.1 工具导出ccs项目配置信息(提示都是对应的ccs里面的配置项)\n![](assets/10.3.app-create-084e3050.png)\nacloudex.deployment.yaml\n![](assets/10.3.app-create-21407512.png)\n![](assets/10.3.app-create-bd4eb83e.png)\n![](assets/10.3.app-create-12673d72.png)\n![](assets/10.3.app-create-3988b087.png)\n","date":"2021-07-18T15:47:31.315Z","updated":"2021-01-14T01:19:23.406Z","path":"cloudink8s/10.3.app-create.html","title":"","comments":1,"layout":"page","_id":"ckrac7x2w000oz8s62x1k96u9","content":"<h1>容器云项目配置导入（用acloudex举例）</h1>\n<h2 id=\"1-华为云项目配置导入。\">1. 华为云项目配置导入。</h2>\n<h3 id=\"1-1-容器云项目配置信息\">1.1 容器云项目配置信息</h3>\n<p><img src=\"assets/10.3.app-create-dc5be485.png\" alt=\"\"><br>\n<img src=\"assets/10.3.app-create-27dcc76d.png\" alt=\"\"></p>\n<h3 id=\"2-1-对应的华为云项目配置信息\">2.1 对应的华为云项目配置信息</h3>\n<p><img src=\"assets/10.3.app-create-110a647f.png\" alt=\"\"><br>\n<img src=\"assets/10.3.app-create-0695a4b8.png\" alt=\"\"><br>\n<img src=\"assets/10.3.app-create-1dc22aa8.png\" alt=\"\"><br>\n<img src=\"assets/10.3.app-create-04b7ca8f.png\" alt=\"\"><br>\n下图的configmap创建可以直接使用导出的configMap<br>\n<img src=\"assets/10.3.app-create-8020ddd5.png\" alt=\"\"></p>\n<h3 id=\"3-1-对应的阿里云项目配置信息\">3.1 对应的阿里云项目配置信息</h3>\n<p><img src=\"assets/10.3.app-create-1820238e.png\" alt=\"\"></p>\n<h3 id=\"4-1-工具导出ccs项目配置信息-提示都是对应的ccs里面的配置项\">4.1 工具导出ccs项目配置信息(提示都是对应的ccs里面的配置项)</h3>\n<p><img src=\"assets/10.3.app-create-084e3050.png\" alt=\"\"><br>\nacloudex.deployment.yaml<br>\n<img src=\"assets/10.3.app-create-21407512.png\" alt=\"\"><br>\n<img src=\"assets/10.3.app-create-bd4eb83e.png\" alt=\"\"><br>\n<img src=\"assets/10.3.app-create-12673d72.png\" alt=\"\"><br>\n<img src=\"assets/10.3.app-create-3988b087.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>容器云项目配置导入（用acloudex举例）</h1>\n<h2 id=\"1-华为云项目配置导入。\">1. 华为云项目配置导入。</h2>\n<h3 id=\"1-1-容器云项目配置信息\">1.1 容器云项目配置信息</h3>\n<p><img src=\"assets/10.3.app-create-dc5be485.png\" alt=\"\"><br>\n<img src=\"assets/10.3.app-create-27dcc76d.png\" alt=\"\"></p>\n<h3 id=\"2-1-对应的华为云项目配置信息\">2.1 对应的华为云项目配置信息</h3>\n<p><img src=\"assets/10.3.app-create-110a647f.png\" alt=\"\"><br>\n<img src=\"assets/10.3.app-create-0695a4b8.png\" alt=\"\"><br>\n<img src=\"assets/10.3.app-create-1dc22aa8.png\" alt=\"\"><br>\n<img src=\"assets/10.3.app-create-04b7ca8f.png\" alt=\"\"><br>\n下图的configmap创建可以直接使用导出的configMap<br>\n<img src=\"assets/10.3.app-create-8020ddd5.png\" alt=\"\"></p>\n<h3 id=\"3-1-对应的阿里云项目配置信息\">3.1 对应的阿里云项目配置信息</h3>\n<p><img src=\"assets/10.3.app-create-1820238e.png\" alt=\"\"></p>\n<h3 id=\"4-1-工具导出ccs项目配置信息-提示都是对应的ccs里面的配置项\">4.1 工具导出ccs项目配置信息(提示都是对应的ccs里面的配置项)</h3>\n<p><img src=\"assets/10.3.app-create-084e3050.png\" alt=\"\"><br>\nacloudex.deployment.yaml<br>\n<img src=\"assets/10.3.app-create-21407512.png\" alt=\"\"><br>\n<img src=\"assets/10.3.app-create-bd4eb83e.png\" alt=\"\"><br>\n<img src=\"assets/10.3.app-create-12673d72.png\" alt=\"\"><br>\n<img src=\"assets/10.3.app-create-3988b087.png\" alt=\"\"></p>\n"},{"_content":"* [10.迁移到华为/阿里云](10.app-deploy)\n    * [10.1.工具导出镜像](10.1.export-images)\n    * [10.2.镜像导入](10.2.import-images)\n    * [10.3.应用创建](10.3.app-create)\n","source":"cloudink8s/10.app-deploy.md","raw":"* [10.迁移到华为/阿里云](10.app-deploy)\n    * [10.1.工具导出镜像](10.1.export-images)\n    * [10.2.镜像导入](10.2.import-images)\n    * [10.3.应用创建](10.3.app-create)\n","date":"2021-07-18T15:52:16.646Z","updated":"2021-07-18T15:52:16.646Z","path":"cloudink8s/10.app-deploy.html","title":"","comments":1,"layout":"page","_id":"ckrac7x2z000pz8s62cylaniz","content":"<ul>\n<li><a href=\"10.app-deploy\">10.迁移到华为/阿里云</a>\n<ul>\n<li><a href=\"10.1.export-images\">10.1.工具导出镜像</a></li>\n<li><a href=\"10.2.import-images\">10.2.镜像导入</a></li>\n<li><a href=\"10.3.app-create\">10.3.应用创建</a></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><a href=\"10.app-deploy\">10.迁移到华为/阿里云</a>\n<ul>\n<li><a href=\"10.1.export-images\">10.1.工具导出镜像</a></li>\n<li><a href=\"10.2.import-images\">10.2.镜像导入</a></li>\n<li><a href=\"10.3.app-create\">10.3.应用创建</a></li>\n</ul>\n</li>\n</ul>\n"},{"_content":"# 虚拟私有云\n## 1. 能做什么\n  - 虚拟私有云（Virtual Private Cloud，以下简称VPC），为云服务器、云容器、云数据库等资源构建隔离的、用户自主配置和管理的虚拟网络环境，提升用户云上资源的安全性，简化用户的网络部署。\n\n## 2. 架构图\n  ![](assets/2.1.app-vpc-1ff93cf8.png)\n## 3. 步骤\n  - 进入云平台，选择虚拟私有云\n  ![](assets/2.1.app-vpc-4bcc35c8.png)\n  - 进入网络控制台，创建虚拟私有云\n  ![](assets/2.1.app-vpc-65398c36.png)\n  - 填写基本信息，创建申请\n  ![](assets/2.1.app-vpc-a7643b78.png)\n","source":"cloudink8s/2.1.app-vpc.md","raw":"# 虚拟私有云\n## 1. 能做什么\n  - 虚拟私有云（Virtual Private Cloud，以下简称VPC），为云服务器、云容器、云数据库等资源构建隔离的、用户自主配置和管理的虚拟网络环境，提升用户云上资源的安全性，简化用户的网络部署。\n\n## 2. 架构图\n  ![](assets/2.1.app-vpc-1ff93cf8.png)\n## 3. 步骤\n  - 进入云平台，选择虚拟私有云\n  ![](assets/2.1.app-vpc-4bcc35c8.png)\n  - 进入网络控制台，创建虚拟私有云\n  ![](assets/2.1.app-vpc-65398c36.png)\n  - 填写基本信息，创建申请\n  ![](assets/2.1.app-vpc-a7643b78.png)\n","date":"2021-07-18T15:47:31.376Z","updated":"2021-01-14T01:19:24.060Z","path":"cloudink8s/2.1.app-vpc.html","title":"","comments":1,"layout":"page","_id":"ckrac7x34000qz8s6gwruhxrs","content":"<h1>虚拟私有云</h1>\n<h2 id=\"1-能做什么\">1. 能做什么</h2>\n<ul>\n<li>虚拟私有云（Virtual Private Cloud，以下简称VPC），为云服务器、云容器、云数据库等资源构建隔离的、用户自主配置和管理的虚拟网络环境，提升用户云上资源的安全性，简化用户的网络部署。</li>\n</ul>\n<h2 id=\"2-架构图\">2. 架构图</h2>\n<p><img src=\"assets/2.1.app-vpc-1ff93cf8.png\" alt=\"\"></p>\n<h2 id=\"3-步骤\">3. 步骤</h2>\n<ul>\n<li>进入云平台，选择虚拟私有云<br>\n<img src=\"assets/2.1.app-vpc-4bcc35c8.png\" alt=\"\"></li>\n<li>进入网络控制台，创建虚拟私有云<br>\n<img src=\"assets/2.1.app-vpc-65398c36.png\" alt=\"\"></li>\n<li>填写基本信息，创建申请<br>\n<img src=\"assets/2.1.app-vpc-a7643b78.png\" alt=\"\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>虚拟私有云</h1>\n<h2 id=\"1-能做什么\">1. 能做什么</h2>\n<ul>\n<li>虚拟私有云（Virtual Private Cloud，以下简称VPC），为云服务器、云容器、云数据库等资源构建隔离的、用户自主配置和管理的虚拟网络环境，提升用户云上资源的安全性，简化用户的网络部署。</li>\n</ul>\n<h2 id=\"2-架构图\">2. 架构图</h2>\n<p><img src=\"assets/2.1.app-vpc-1ff93cf8.png\" alt=\"\"></p>\n<h2 id=\"3-步骤\">3. 步骤</h2>\n<ul>\n<li>进入云平台，选择虚拟私有云<br>\n<img src=\"assets/2.1.app-vpc-4bcc35c8.png\" alt=\"\"></li>\n<li>进入网络控制台，创建虚拟私有云<br>\n<img src=\"assets/2.1.app-vpc-65398c36.png\" alt=\"\"></li>\n<li>填写基本信息，创建申请<br>\n<img src=\"assets/2.1.app-vpc-a7643b78.png\" alt=\"\"></li>\n</ul>\n"},{"_content":"# 弹性IP\n## 1. 能做什么\n  - 弹性公网IP（Elastic IP，简称EIP）提供独立的公网IP资源，包括公网IP地址与公网出口带宽服务。可以与弹性云服务器、裸金属服务器、虚拟IP、弹性负载均衡、NAT网关等资源灵活地绑定及解绑。拥有多种灵活的计费方式，可以满足各种业务场景的需要。\n  - 一个弹性公网IP只能绑定一个云资源使用。\n\n## 2. 架构图\n![](assets/2.2.app-ip-4b323317.png)\n## 3. 步骤\n  - 进入虚拟私有云，选择创建弹性公网IP\n![](assets/2.2.app-ip-5ea09f6d.png)\n  - 填入基本信息，创建申请\n![](assets/2.2.app-ip-3b3377c1.png)\n  - 网省情况\n![](assets/2.2.app-ip-873498d9.png)\n","source":"cloudink8s/2.2.app-ip.md","raw":"# 弹性IP\n## 1. 能做什么\n  - 弹性公网IP（Elastic IP，简称EIP）提供独立的公网IP资源，包括公网IP地址与公网出口带宽服务。可以与弹性云服务器、裸金属服务器、虚拟IP、弹性负载均衡、NAT网关等资源灵活地绑定及解绑。拥有多种灵活的计费方式，可以满足各种业务场景的需要。\n  - 一个弹性公网IP只能绑定一个云资源使用。\n\n## 2. 架构图\n![](assets/2.2.app-ip-4b323317.png)\n## 3. 步骤\n  - 进入虚拟私有云，选择创建弹性公网IP\n![](assets/2.2.app-ip-5ea09f6d.png)\n  - 填入基本信息，创建申请\n![](assets/2.2.app-ip-3b3377c1.png)\n  - 网省情况\n![](assets/2.2.app-ip-873498d9.png)\n","date":"2021-07-18T15:47:31.312Z","updated":"2021-01-14T01:19:24.062Z","path":"cloudink8s/2.2.app-ip.html","title":"","comments":1,"layout":"page","_id":"ckrac7x35000rz8s675vk466c","content":"<h1>弹性IP</h1>\n<h2 id=\"1-能做什么\">1. 能做什么</h2>\n<ul>\n<li>弹性公网IP（Elastic IP，简称EIP）提供独立的公网IP资源，包括公网IP地址与公网出口带宽服务。可以与弹性云服务器、裸金属服务器、虚拟IP、弹性负载均衡、NAT网关等资源灵活地绑定及解绑。拥有多种灵活的计费方式，可以满足各种业务场景的需要。</li>\n<li>一个弹性公网IP只能绑定一个云资源使用。</li>\n</ul>\n<h2 id=\"2-架构图\">2. 架构图</h2>\n<p><img src=\"assets/2.2.app-ip-4b323317.png\" alt=\"\"></p>\n<h2 id=\"3-步骤\">3. 步骤</h2>\n<ul>\n<li>进入虚拟私有云，选择创建弹性公网IP<br>\n<img src=\"assets/2.2.app-ip-5ea09f6d.png\" alt=\"\"></li>\n<li>填入基本信息，创建申请<br>\n<img src=\"assets/2.2.app-ip-3b3377c1.png\" alt=\"\"></li>\n<li>网省情况<br>\n<img src=\"assets/2.2.app-ip-873498d9.png\" alt=\"\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>弹性IP</h1>\n<h2 id=\"1-能做什么\">1. 能做什么</h2>\n<ul>\n<li>弹性公网IP（Elastic IP，简称EIP）提供独立的公网IP资源，包括公网IP地址与公网出口带宽服务。可以与弹性云服务器、裸金属服务器、虚拟IP、弹性负载均衡、NAT网关等资源灵活地绑定及解绑。拥有多种灵活的计费方式，可以满足各种业务场景的需要。</li>\n<li>一个弹性公网IP只能绑定一个云资源使用。</li>\n</ul>\n<h2 id=\"2-架构图\">2. 架构图</h2>\n<p><img src=\"assets/2.2.app-ip-4b323317.png\" alt=\"\"></p>\n<h2 id=\"3-步骤\">3. 步骤</h2>\n<ul>\n<li>进入虚拟私有云，选择创建弹性公网IP<br>\n<img src=\"assets/2.2.app-ip-5ea09f6d.png\" alt=\"\"></li>\n<li>填入基本信息，创建申请<br>\n<img src=\"assets/2.2.app-ip-3b3377c1.png\" alt=\"\"></li>\n<li>网省情况<br>\n<img src=\"assets/2.2.app-ip-873498d9.png\" alt=\"\"></li>\n</ul>\n"},{"_content":"# 2.3.云容器引擎CCE（创建K8S集群）\n## 1. 能做什么\n  - 云容器引擎（Cloud Container Engine，简称CCE）提供高度可扩展的、高性能的企业级Kubernetes集群，支持运行Docker容器。借助云容器引擎，您可以在华为云上轻松部署、管理和扩展容器化应用程序。\n  - 云容器引擎提供了Kubernetes集群管理、容器应用全生命周期管理、应用服务网格、Helm应用模板、插件管理、应用调度、监控与运维等容器全栈能力。\n\n## 2. 架构图\n![](assets/2.3.app-k8s-f55c87b6.png)\n## 3. 步骤\n  - 进入云容器引擎，选择创建Kubernetes集群\n![](assets/2.3.app-k8s-c9d7bd49.png)\n  - 创建Kubernetes集群，选择k8s版本\n![](assets/2.3.app-k8s-b51148d0.png)\n  - 选择k8s节点配置\n![](assets/2.3.app-k8s-3e1e6129.png)\n  - 选择节点系统盘和数据盘配置\n![](assets/2.3.app-k8s-1a543010.png)\n  - 创建Kubernetes集群，执行状态\n![](assets/2.3.app-k8s-8784bd4a.png)\n  - 创建Kubernetes集群，执行状态\n![](assets/2.3.app-k8s-7ab84881.png)\n  - 集群管理，查看集群状态\n![](assets/2.3.app-k8s-0f2a3a39.png)\n","source":"cloudink8s/2.3.app-k8s.md","raw":"# 2.3.云容器引擎CCE（创建K8S集群）\n## 1. 能做什么\n  - 云容器引擎（Cloud Container Engine，简称CCE）提供高度可扩展的、高性能的企业级Kubernetes集群，支持运行Docker容器。借助云容器引擎，您可以在华为云上轻松部署、管理和扩展容器化应用程序。\n  - 云容器引擎提供了Kubernetes集群管理、容器应用全生命周期管理、应用服务网格、Helm应用模板、插件管理、应用调度、监控与运维等容器全栈能力。\n\n## 2. 架构图\n![](assets/2.3.app-k8s-f55c87b6.png)\n## 3. 步骤\n  - 进入云容器引擎，选择创建Kubernetes集群\n![](assets/2.3.app-k8s-c9d7bd49.png)\n  - 创建Kubernetes集群，选择k8s版本\n![](assets/2.3.app-k8s-b51148d0.png)\n  - 选择k8s节点配置\n![](assets/2.3.app-k8s-3e1e6129.png)\n  - 选择节点系统盘和数据盘配置\n![](assets/2.3.app-k8s-1a543010.png)\n  - 创建Kubernetes集群，执行状态\n![](assets/2.3.app-k8s-8784bd4a.png)\n  - 创建Kubernetes集群，执行状态\n![](assets/2.3.app-k8s-7ab84881.png)\n  - 集群管理，查看集群状态\n![](assets/2.3.app-k8s-0f2a3a39.png)\n","date":"2021-07-18T15:47:31.320Z","updated":"2021-01-14T01:19:24.064Z","path":"cloudink8s/2.3.app-k8s.html","title":"","comments":1,"layout":"page","_id":"ckrac7x3c000sz8s60irt5uab","content":"<h1>2.3.云容器引擎CCE（创建K8S集群）</h1>\n<h2 id=\"1-能做什么\">1. 能做什么</h2>\n<ul>\n<li>云容器引擎（Cloud Container Engine，简称CCE）提供高度可扩展的、高性能的企业级Kubernetes集群，支持运行Docker容器。借助云容器引擎，您可以在华为云上轻松部署、管理和扩展容器化应用程序。</li>\n<li>云容器引擎提供了Kubernetes集群管理、容器应用全生命周期管理、应用服务网格、Helm应用模板、插件管理、应用调度、监控与运维等容器全栈能力。</li>\n</ul>\n<h2 id=\"2-架构图\">2. 架构图</h2>\n<p><img src=\"assets/2.3.app-k8s-f55c87b6.png\" alt=\"\"></p>\n<h2 id=\"3-步骤\">3. 步骤</h2>\n<ul>\n<li>进入云容器引擎，选择创建Kubernetes集群<br>\n<img src=\"assets/2.3.app-k8s-c9d7bd49.png\" alt=\"\"></li>\n<li>创建Kubernetes集群，选择k8s版本<br>\n<img src=\"assets/2.3.app-k8s-b51148d0.png\" alt=\"\"></li>\n<li>选择k8s节点配置<br>\n<img src=\"assets/2.3.app-k8s-3e1e6129.png\" alt=\"\"></li>\n<li>选择节点系统盘和数据盘配置<br>\n<img src=\"assets/2.3.app-k8s-1a543010.png\" alt=\"\"></li>\n<li>创建Kubernetes集群，执行状态<br>\n<img src=\"assets/2.3.app-k8s-8784bd4a.png\" alt=\"\"></li>\n<li>创建Kubernetes集群，执行状态<br>\n<img src=\"assets/2.3.app-k8s-7ab84881.png\" alt=\"\"></li>\n<li>集群管理，查看集群状态<br>\n<img src=\"assets/2.3.app-k8s-0f2a3a39.png\" alt=\"\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>2.3.云容器引擎CCE（创建K8S集群）</h1>\n<h2 id=\"1-能做什么\">1. 能做什么</h2>\n<ul>\n<li>云容器引擎（Cloud Container Engine，简称CCE）提供高度可扩展的、高性能的企业级Kubernetes集群，支持运行Docker容器。借助云容器引擎，您可以在华为云上轻松部署、管理和扩展容器化应用程序。</li>\n<li>云容器引擎提供了Kubernetes集群管理、容器应用全生命周期管理、应用服务网格、Helm应用模板、插件管理、应用调度、监控与运维等容器全栈能力。</li>\n</ul>\n<h2 id=\"2-架构图\">2. 架构图</h2>\n<p><img src=\"assets/2.3.app-k8s-f55c87b6.png\" alt=\"\"></p>\n<h2 id=\"3-步骤\">3. 步骤</h2>\n<ul>\n<li>进入云容器引擎，选择创建Kubernetes集群<br>\n<img src=\"assets/2.3.app-k8s-c9d7bd49.png\" alt=\"\"></li>\n<li>创建Kubernetes集群，选择k8s版本<br>\n<img src=\"assets/2.3.app-k8s-b51148d0.png\" alt=\"\"></li>\n<li>选择k8s节点配置<br>\n<img src=\"assets/2.3.app-k8s-3e1e6129.png\" alt=\"\"></li>\n<li>选择节点系统盘和数据盘配置<br>\n<img src=\"assets/2.3.app-k8s-1a543010.png\" alt=\"\"></li>\n<li>创建Kubernetes集群，执行状态<br>\n<img src=\"assets/2.3.app-k8s-8784bd4a.png\" alt=\"\"></li>\n<li>创建Kubernetes集群，执行状态<br>\n<img src=\"assets/2.3.app-k8s-7ab84881.png\" alt=\"\"></li>\n<li>集群管理，查看集群状态<br>\n<img src=\"assets/2.3.app-k8s-0f2a3a39.png\" alt=\"\"></li>\n</ul>\n"},{"_content":"* [2.集群部署](2.app-deploy)\n    * [2.1.虚拟私有云](2.1.app-vpc)\n    * [2.2.弹性IP](2.2.app-ip)\n    * [2.3.集群创建](2.3.app-k8s)\n","source":"cloudink8s/2.app-deploy.md","raw":"* [2.集群部署](2.app-deploy)\n    * [2.1.虚拟私有云](2.1.app-vpc)\n    * [2.2.弹性IP](2.2.app-ip)\n    * [2.3.集群创建](2.3.app-k8s)\n","date":"2021-07-18T15:52:51.050Z","updated":"2021-07-18T15:52:51.050Z","path":"cloudink8s/2.app-deploy.html","title":"","comments":1,"layout":"page","_id":"ckrac7x3d000tz8s6fbp301pl","content":"<ul>\n<li><a href=\"2.app-deploy\">2.集群部署</a>\n<ul>\n<li><a href=\"2.1.app-vpc\">2.1.虚拟私有云</a></li>\n<li><a href=\"2.2.app-ip\">2.2.弹性IP</a></li>\n<li><a href=\"2.3.app-k8s\">2.3.集群创建</a></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><a href=\"2.app-deploy\">2.集群部署</a>\n<ul>\n<li><a href=\"2.1.app-vpc\">2.1.虚拟私有云</a></li>\n<li><a href=\"2.2.app-ip\">2.2.弹性IP</a></li>\n<li><a href=\"2.3.app-k8s\">2.3.集群创建</a></li>\n</ul>\n</li>\n</ul>\n"},{"_content":"# 镜像上传\n## 1. 能做什么\n  - 容器镜像服务（Software Repository for Container，简称SWR）是一种支持镜像全生命周期管理的服务， 提供简单易用、安全可靠的镜像管理功能，帮助您快速部署容器化服务。您可以通过界面、Docker CLI和原生API上传、下载和管理Docker镜像。\n\n## 2. 镜像服务流程图\n![](assets/3.1.app-swr-48d4cf2b.png)\n## 3. 步骤\n  - 进入容器镜像服务，选择总览\n  ![](assets/3.1.app-swr-dec510e6.png)\n  - 选择组织管理，创建组织\n  ![](assets/3.1.app-swr-e81418fc.png)\n  - 选择我的镜像，客户端上传\n  ![](assets/3.1.app-swr-d6e503a8.png)\n  客户端上传流程\n  ![](assets/3.1.app-swr-ce798493.png)\n  结果查询\n  ![](assets/3.1.app-swr-65c66a1d.png)\n  - 选择我的镜像，页面上传\n  ![](assets/3.1.app-swr-b894b65d.png)\n","source":"cloudink8s/3.1.app-swr.md","raw":"# 镜像上传\n## 1. 能做什么\n  - 容器镜像服务（Software Repository for Container，简称SWR）是一种支持镜像全生命周期管理的服务， 提供简单易用、安全可靠的镜像管理功能，帮助您快速部署容器化服务。您可以通过界面、Docker CLI和原生API上传、下载和管理Docker镜像。\n\n## 2. 镜像服务流程图\n![](assets/3.1.app-swr-48d4cf2b.png)\n## 3. 步骤\n  - 进入容器镜像服务，选择总览\n  ![](assets/3.1.app-swr-dec510e6.png)\n  - 选择组织管理，创建组织\n  ![](assets/3.1.app-swr-e81418fc.png)\n  - 选择我的镜像，客户端上传\n  ![](assets/3.1.app-swr-d6e503a8.png)\n  客户端上传流程\n  ![](assets/3.1.app-swr-ce798493.png)\n  结果查询\n  ![](assets/3.1.app-swr-65c66a1d.png)\n  - 选择我的镜像，页面上传\n  ![](assets/3.1.app-swr-b894b65d.png)\n","date":"2021-07-18T15:47:31.341Z","updated":"2021-01-14T01:19:24.069Z","path":"cloudink8s/3.1.app-swr.html","title":"","comments":1,"layout":"page","_id":"ckrac7x3d000uz8s6a5y06g5n","content":"<h1>镜像上传</h1>\n<h2 id=\"1-能做什么\">1. 能做什么</h2>\n<ul>\n<li>容器镜像服务（Software Repository for Container，简称SWR）是一种支持镜像全生命周期管理的服务， 提供简单易用、安全可靠的镜像管理功能，帮助您快速部署容器化服务。您可以通过界面、Docker CLI和原生API上传、下载和管理Docker镜像。</li>\n</ul>\n<h2 id=\"2-镜像服务流程图\">2. 镜像服务流程图</h2>\n<p><img src=\"assets/3.1.app-swr-48d4cf2b.png\" alt=\"\"></p>\n<h2 id=\"3-步骤\">3. 步骤</h2>\n<ul>\n<li>进入容器镜像服务，选择总览<br>\n<img src=\"assets/3.1.app-swr-dec510e6.png\" alt=\"\"></li>\n<li>选择组织管理，创建组织<br>\n<img src=\"assets/3.1.app-swr-e81418fc.png\" alt=\"\"></li>\n<li>选择我的镜像，客户端上传<br>\n<img src=\"assets/3.1.app-swr-d6e503a8.png\" alt=\"\"><br>\n客户端上传流程<br>\n<img src=\"assets/3.1.app-swr-ce798493.png\" alt=\"\"><br>\n结果查询<br>\n<img src=\"assets/3.1.app-swr-65c66a1d.png\" alt=\"\"></li>\n<li>选择我的镜像，页面上传<br>\n<img src=\"assets/3.1.app-swr-b894b65d.png\" alt=\"\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>镜像上传</h1>\n<h2 id=\"1-能做什么\">1. 能做什么</h2>\n<ul>\n<li>容器镜像服务（Software Repository for Container，简称SWR）是一种支持镜像全生命周期管理的服务， 提供简单易用、安全可靠的镜像管理功能，帮助您快速部署容器化服务。您可以通过界面、Docker CLI和原生API上传、下载和管理Docker镜像。</li>\n</ul>\n<h2 id=\"2-镜像服务流程图\">2. 镜像服务流程图</h2>\n<p><img src=\"assets/3.1.app-swr-48d4cf2b.png\" alt=\"\"></p>\n<h2 id=\"3-步骤\">3. 步骤</h2>\n<ul>\n<li>进入容器镜像服务，选择总览<br>\n<img src=\"assets/3.1.app-swr-dec510e6.png\" alt=\"\"></li>\n<li>选择组织管理，创建组织<br>\n<img src=\"assets/3.1.app-swr-e81418fc.png\" alt=\"\"></li>\n<li>选择我的镜像，客户端上传<br>\n<img src=\"assets/3.1.app-swr-d6e503a8.png\" alt=\"\"><br>\n客户端上传流程<br>\n<img src=\"assets/3.1.app-swr-ce798493.png\" alt=\"\"><br>\n结果查询<br>\n<img src=\"assets/3.1.app-swr-65c66a1d.png\" alt=\"\"></li>\n<li>选择我的镜像，页面上传<br>\n<img src=\"assets/3.1.app-swr-b894b65d.png\" alt=\"\"></li>\n</ul>\n"},{"_content":"# 镜像部署\n## 3.1. 能做什么\n  - 应用管理与运维平台（ServiceStage）是一个应用托管和微服务管理平台，可以帮助企业简化部署、监控、运维和治理等应用生命周期管理工作。ServiceStage面向企业提供微服务、移动和Web类应用开发的全栈解决方案，帮助您的各类应用轻松上云，聚焦业务创新，帮助企业数字化快速转型。\n\n## 3.2. 产品功能\n![](assets/3.2.app-deploy-k8s-415742ef.png)\n#3.3 应用部署方式\n## 3.3.1 方式一、创建应用\n  - 进入应用管理与运维平台，选择应用列表\n![](assets/3.2.app-deploy-k8s-0bf625fd.png)\n  - 创建应用\n![](assets/3.2.app-deploy-k8s-55f6ff78.png)\n  - 创建应用，新增组件\n![](assets/3.2.app-deploy-k8s-56250529.png)\n  - 新增组件，选择通用模版\n![](assets/3.2.app-deploy-k8s-431ef67b.png)\n  - （通用模版）提供多语言（Java，PHP，Python等）、多运行环境的部署能力，开放定制，您可以灵活地搭建自己的应用组件。\n![](assets/3.2.app-deploy-k8s-0b16a4f8.png)\n  - 选择K8S集群\n![](assets/3.2.app-deploy-k8s-47bcb21a.png)\n  - 选择上传的镜像\n![](assets/3.2.app-deploy-k8s-3608c03b.png)\n  - 部署\n![](assets/3.2.app-deploy-k8s-c4909581.png)\n  - 部署状态\n![](assets/3.2.app-deploy-k8s-bde3cc4b.png)\n  -  部署日志\n![](assets/3.2.app-deploy-k8s-8aac61ef.png)\n  -  实例列表\n![](assets/3.2.app-deploy-k8s-56b35de6.png)\n## 3.3.2 方式二、创建应用\n  -  进入云容器引擎，创建无状态工作负载\n![](assets/3.2.app-deploy-k8s-53cafd27.png)\n  -  选择上传的镜像\n![](assets/3.2.app-deploy-k8s-bd824de7.png)\n  -  CPU，内存等基础设置\n![](assets/3.2.app-deploy-k8s-b06aa32f.png)\n  -  文件挂载\n![](assets/3.2.app-deploy-k8s-2ed44802.png)\n  -  configmap文件挂载\n![](assets/3.2.app-deploy-k8s-316ca3d9.png)\n  -  添加服务\n![](assets/3.2.app-deploy-k8s-dcd72da9.png)\n  -  应用升级策略\n![](assets/3.2.app-deploy-k8s-05eb7a77.png)\n  -  实例列表\n![](assets/3.2.app-deploy-k8s-d0b58328.png)\n  -  访问方式\n![](assets/3.2.app-deploy-k8s-a976bc41.png)\n  -  deployment清单\n![](assets/3.2.app-deploy-k8s-c314373a.png)\n","source":"cloudink8s/3.2.app-deploy-k8s.md","raw":"# 镜像部署\n## 3.1. 能做什么\n  - 应用管理与运维平台（ServiceStage）是一个应用托管和微服务管理平台，可以帮助企业简化部署、监控、运维和治理等应用生命周期管理工作。ServiceStage面向企业提供微服务、移动和Web类应用开发的全栈解决方案，帮助您的各类应用轻松上云，聚焦业务创新，帮助企业数字化快速转型。\n\n## 3.2. 产品功能\n![](assets/3.2.app-deploy-k8s-415742ef.png)\n#3.3 应用部署方式\n## 3.3.1 方式一、创建应用\n  - 进入应用管理与运维平台，选择应用列表\n![](assets/3.2.app-deploy-k8s-0bf625fd.png)\n  - 创建应用\n![](assets/3.2.app-deploy-k8s-55f6ff78.png)\n  - 创建应用，新增组件\n![](assets/3.2.app-deploy-k8s-56250529.png)\n  - 新增组件，选择通用模版\n![](assets/3.2.app-deploy-k8s-431ef67b.png)\n  - （通用模版）提供多语言（Java，PHP，Python等）、多运行环境的部署能力，开放定制，您可以灵活地搭建自己的应用组件。\n![](assets/3.2.app-deploy-k8s-0b16a4f8.png)\n  - 选择K8S集群\n![](assets/3.2.app-deploy-k8s-47bcb21a.png)\n  - 选择上传的镜像\n![](assets/3.2.app-deploy-k8s-3608c03b.png)\n  - 部署\n![](assets/3.2.app-deploy-k8s-c4909581.png)\n  - 部署状态\n![](assets/3.2.app-deploy-k8s-bde3cc4b.png)\n  -  部署日志\n![](assets/3.2.app-deploy-k8s-8aac61ef.png)\n  -  实例列表\n![](assets/3.2.app-deploy-k8s-56b35de6.png)\n## 3.3.2 方式二、创建应用\n  -  进入云容器引擎，创建无状态工作负载\n![](assets/3.2.app-deploy-k8s-53cafd27.png)\n  -  选择上传的镜像\n![](assets/3.2.app-deploy-k8s-bd824de7.png)\n  -  CPU，内存等基础设置\n![](assets/3.2.app-deploy-k8s-b06aa32f.png)\n  -  文件挂载\n![](assets/3.2.app-deploy-k8s-2ed44802.png)\n  -  configmap文件挂载\n![](assets/3.2.app-deploy-k8s-316ca3d9.png)\n  -  添加服务\n![](assets/3.2.app-deploy-k8s-dcd72da9.png)\n  -  应用升级策略\n![](assets/3.2.app-deploy-k8s-05eb7a77.png)\n  -  实例列表\n![](assets/3.2.app-deploy-k8s-d0b58328.png)\n  -  访问方式\n![](assets/3.2.app-deploy-k8s-a976bc41.png)\n  -  deployment清单\n![](assets/3.2.app-deploy-k8s-c314373a.png)\n","date":"2021-07-18T15:47:31.332Z","updated":"2021-01-14T01:19:24.071Z","path":"cloudink8s/3.2.app-deploy-k8s.html","title":"","comments":1,"layout":"page","_id":"ckrac7x3e000vz8s67yux6iih","content":"<h1>镜像部署</h1>\n<h2 id=\"3-1-能做什么\">3.1. 能做什么</h2>\n<ul>\n<li>应用管理与运维平台（ServiceStage）是一个应用托管和微服务管理平台，可以帮助企业简化部署、监控、运维和治理等应用生命周期管理工作。ServiceStage面向企业提供微服务、移动和Web类应用开发的全栈解决方案，帮助您的各类应用轻松上云，聚焦业务创新，帮助企业数字化快速转型。</li>\n</ul>\n<h2 id=\"3-2-产品功能\">3.2. 产品功能</h2>\n<p><img src=\"assets/3.2.app-deploy-k8s-415742ef.png\" alt=\"\"><br>\n#3.3 应用部署方式</p>\n<h2 id=\"3-3-1-方式一、创建应用\">3.3.1 方式一、创建应用</h2>\n<ul>\n<li>进入应用管理与运维平台，选择应用列表<br>\n<img src=\"assets/3.2.app-deploy-k8s-0bf625fd.png\" alt=\"\"></li>\n<li>创建应用<br>\n<img src=\"assets/3.2.app-deploy-k8s-55f6ff78.png\" alt=\"\"></li>\n<li>创建应用，新增组件<br>\n<img src=\"assets/3.2.app-deploy-k8s-56250529.png\" alt=\"\"></li>\n<li>新增组件，选择通用模版<br>\n<img src=\"assets/3.2.app-deploy-k8s-431ef67b.png\" alt=\"\"></li>\n<li>（通用模版）提供多语言（Java，PHP，Python等）、多运行环境的部署能力，开放定制，您可以灵活地搭建自己的应用组件。<br>\n<img src=\"assets/3.2.app-deploy-k8s-0b16a4f8.png\" alt=\"\"></li>\n<li>选择K8S集群<br>\n<img src=\"assets/3.2.app-deploy-k8s-47bcb21a.png\" alt=\"\"></li>\n<li>选择上传的镜像<br>\n<img src=\"assets/3.2.app-deploy-k8s-3608c03b.png\" alt=\"\"></li>\n<li>部署<br>\n<img src=\"assets/3.2.app-deploy-k8s-c4909581.png\" alt=\"\"></li>\n<li>部署状态<br>\n<img src=\"assets/3.2.app-deploy-k8s-bde3cc4b.png\" alt=\"\"></li>\n<li>部署日志<br>\n<img src=\"assets/3.2.app-deploy-k8s-8aac61ef.png\" alt=\"\"></li>\n<li>实例列表<br>\n<img src=\"assets/3.2.app-deploy-k8s-56b35de6.png\" alt=\"\"></li>\n</ul>\n<h2 id=\"3-3-2-方式二、创建应用\">3.3.2 方式二、创建应用</h2>\n<ul>\n<li>进入云容器引擎，创建无状态工作负载<br>\n<img src=\"assets/3.2.app-deploy-k8s-53cafd27.png\" alt=\"\"></li>\n<li>选择上传的镜像<br>\n<img src=\"assets/3.2.app-deploy-k8s-bd824de7.png\" alt=\"\"></li>\n<li>CPU，内存等基础设置<br>\n<img src=\"assets/3.2.app-deploy-k8s-b06aa32f.png\" alt=\"\"></li>\n<li>文件挂载<br>\n<img src=\"assets/3.2.app-deploy-k8s-2ed44802.png\" alt=\"\"></li>\n<li>configmap文件挂载<br>\n<img src=\"assets/3.2.app-deploy-k8s-316ca3d9.png\" alt=\"\"></li>\n<li>添加服务<br>\n<img src=\"assets/3.2.app-deploy-k8s-dcd72da9.png\" alt=\"\"></li>\n<li>应用升级策略<br>\n<img src=\"assets/3.2.app-deploy-k8s-05eb7a77.png\" alt=\"\"></li>\n<li>实例列表<br>\n<img src=\"assets/3.2.app-deploy-k8s-d0b58328.png\" alt=\"\"></li>\n<li>访问方式<br>\n<img src=\"assets/3.2.app-deploy-k8s-a976bc41.png\" alt=\"\"></li>\n<li>deployment清单<br>\n<img src=\"assets/3.2.app-deploy-k8s-c314373a.png\" alt=\"\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>镜像部署</h1>\n<h2 id=\"3-1-能做什么\">3.1. 能做什么</h2>\n<ul>\n<li>应用管理与运维平台（ServiceStage）是一个应用托管和微服务管理平台，可以帮助企业简化部署、监控、运维和治理等应用生命周期管理工作。ServiceStage面向企业提供微服务、移动和Web类应用开发的全栈解决方案，帮助您的各类应用轻松上云，聚焦业务创新，帮助企业数字化快速转型。</li>\n</ul>\n<h2 id=\"3-2-产品功能\">3.2. 产品功能</h2>\n<p><img src=\"assets/3.2.app-deploy-k8s-415742ef.png\" alt=\"\"><br>\n#3.3 应用部署方式</p>\n<h2 id=\"3-3-1-方式一、创建应用\">3.3.1 方式一、创建应用</h2>\n<ul>\n<li>进入应用管理与运维平台，选择应用列表<br>\n<img src=\"assets/3.2.app-deploy-k8s-0bf625fd.png\" alt=\"\"></li>\n<li>创建应用<br>\n<img src=\"assets/3.2.app-deploy-k8s-55f6ff78.png\" alt=\"\"></li>\n<li>创建应用，新增组件<br>\n<img src=\"assets/3.2.app-deploy-k8s-56250529.png\" alt=\"\"></li>\n<li>新增组件，选择通用模版<br>\n<img src=\"assets/3.2.app-deploy-k8s-431ef67b.png\" alt=\"\"></li>\n<li>（通用模版）提供多语言（Java，PHP，Python等）、多运行环境的部署能力，开放定制，您可以灵活地搭建自己的应用组件。<br>\n<img src=\"assets/3.2.app-deploy-k8s-0b16a4f8.png\" alt=\"\"></li>\n<li>选择K8S集群<br>\n<img src=\"assets/3.2.app-deploy-k8s-47bcb21a.png\" alt=\"\"></li>\n<li>选择上传的镜像<br>\n<img src=\"assets/3.2.app-deploy-k8s-3608c03b.png\" alt=\"\"></li>\n<li>部署<br>\n<img src=\"assets/3.2.app-deploy-k8s-c4909581.png\" alt=\"\"></li>\n<li>部署状态<br>\n<img src=\"assets/3.2.app-deploy-k8s-bde3cc4b.png\" alt=\"\"></li>\n<li>部署日志<br>\n<img src=\"assets/3.2.app-deploy-k8s-8aac61ef.png\" alt=\"\"></li>\n<li>实例列表<br>\n<img src=\"assets/3.2.app-deploy-k8s-56b35de6.png\" alt=\"\"></li>\n</ul>\n<h2 id=\"3-3-2-方式二、创建应用\">3.3.2 方式二、创建应用</h2>\n<ul>\n<li>进入云容器引擎，创建无状态工作负载<br>\n<img src=\"assets/3.2.app-deploy-k8s-53cafd27.png\" alt=\"\"></li>\n<li>选择上传的镜像<br>\n<img src=\"assets/3.2.app-deploy-k8s-bd824de7.png\" alt=\"\"></li>\n<li>CPU，内存等基础设置<br>\n<img src=\"assets/3.2.app-deploy-k8s-b06aa32f.png\" alt=\"\"></li>\n<li>文件挂载<br>\n<img src=\"assets/3.2.app-deploy-k8s-2ed44802.png\" alt=\"\"></li>\n<li>configmap文件挂载<br>\n<img src=\"assets/3.2.app-deploy-k8s-316ca3d9.png\" alt=\"\"></li>\n<li>添加服务<br>\n<img src=\"assets/3.2.app-deploy-k8s-dcd72da9.png\" alt=\"\"></li>\n<li>应用升级策略<br>\n<img src=\"assets/3.2.app-deploy-k8s-05eb7a77.png\" alt=\"\"></li>\n<li>实例列表<br>\n<img src=\"assets/3.2.app-deploy-k8s-d0b58328.png\" alt=\"\"></li>\n<li>访问方式<br>\n<img src=\"assets/3.2.app-deploy-k8s-a976bc41.png\" alt=\"\"></li>\n<li>deployment清单<br>\n<img src=\"assets/3.2.app-deploy-k8s-c314373a.png\" alt=\"\"></li>\n</ul>\n"},{"_content":"# 访问方式\n##3.3.1 能做什么\n云容器引擎通过将Kubernetes网络和VPC的深度集成，提供了稳定高性能的容器网络。在容器服务中，支持以下类型的互联互通。\n - 集群内访问（ClusterIP）\n - 节点访问（NodePort）\n 节点访问 ( NodePort )是指在每个节点的IP上开放一个静态端口，通过静态端口对外暴露服务。\n - 负载均衡 ( LoadBalancer )\n   通过弹性负载均衡从公网访问工作负载，与弹性IP方式相比提供了高可靠的保障，一般用于系统中需要暴露到公网的服务。\n - DNAT网关 ( DNAT )\n\n##3.3.2 创建无状态工作负载\n![](assets/3.3.app-deploy-svc-be1b3956.png)\n  - 添加Service\n![](assets/3.3.app-deploy-svc-f7749987.png)\n  - 添加Service\n![](assets/3.3.app-deploy-svc-111f9d4e.png)\n  - 选择节点端口\n![](assets/3.3.app-deploy-svc-53c49e9e.png)\n  - 服务清单\n![](assets/3.3.app-deploy-svc-c0d39aad.png)\n","source":"cloudink8s/3.3.app-deploy-svc.md","raw":"# 访问方式\n##3.3.1 能做什么\n云容器引擎通过将Kubernetes网络和VPC的深度集成，提供了稳定高性能的容器网络。在容器服务中，支持以下类型的互联互通。\n - 集群内访问（ClusterIP）\n - 节点访问（NodePort）\n 节点访问 ( NodePort )是指在每个节点的IP上开放一个静态端口，通过静态端口对外暴露服务。\n - 负载均衡 ( LoadBalancer )\n   通过弹性负载均衡从公网访问工作负载，与弹性IP方式相比提供了高可靠的保障，一般用于系统中需要暴露到公网的服务。\n - DNAT网关 ( DNAT )\n\n##3.3.2 创建无状态工作负载\n![](assets/3.3.app-deploy-svc-be1b3956.png)\n  - 添加Service\n![](assets/3.3.app-deploy-svc-f7749987.png)\n  - 添加Service\n![](assets/3.3.app-deploy-svc-111f9d4e.png)\n  - 选择节点端口\n![](assets/3.3.app-deploy-svc-53c49e9e.png)\n  - 服务清单\n![](assets/3.3.app-deploy-svc-c0d39aad.png)\n","date":"2021-07-18T15:47:32.419Z","updated":"2021-01-14T01:19:24.074Z","path":"cloudink8s/3.3.app-deploy-svc.html","title":"","comments":1,"layout":"page","_id":"ckrac7x3e000wz8s63hbcc93r","content":"<h1>访问方式</h1>\n<p>##3.3.1 能做什么<br>\n云容器引擎通过将Kubernetes网络和VPC的深度集成，提供了稳定高性能的容器网络。在容器服务中，支持以下类型的互联互通。</p>\n<ul>\n<li>集群内访问（ClusterIP）</li>\n<li>节点访问（NodePort）<br>\n节点访问 ( NodePort )是指在每个节点的IP上开放一个静态端口，通过静态端口对外暴露服务。</li>\n<li>负载均衡 ( LoadBalancer )<br>\n通过弹性负载均衡从公网访问工作负载，与弹性IP方式相比提供了高可靠的保障，一般用于系统中需要暴露到公网的服务。</li>\n<li>DNAT网关 ( DNAT )</li>\n</ul>\n<p>##3.3.2 创建无状态工作负载<br>\n<img src=\"assets/3.3.app-deploy-svc-be1b3956.png\" alt=\"\"></p>\n<ul>\n<li>添加Service<br>\n<img src=\"assets/3.3.app-deploy-svc-f7749987.png\" alt=\"\"></li>\n<li>添加Service<br>\n<img src=\"assets/3.3.app-deploy-svc-111f9d4e.png\" alt=\"\"></li>\n<li>选择节点端口<br>\n<img src=\"assets/3.3.app-deploy-svc-53c49e9e.png\" alt=\"\"></li>\n<li>服务清单<br>\n<img src=\"assets/3.3.app-deploy-svc-c0d39aad.png\" alt=\"\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>访问方式</h1>\n<p>##3.3.1 能做什么<br>\n云容器引擎通过将Kubernetes网络和VPC的深度集成，提供了稳定高性能的容器网络。在容器服务中，支持以下类型的互联互通。</p>\n<ul>\n<li>集群内访问（ClusterIP）</li>\n<li>节点访问（NodePort）<br>\n节点访问 ( NodePort )是指在每个节点的IP上开放一个静态端口，通过静态端口对外暴露服务。</li>\n<li>负载均衡 ( LoadBalancer )<br>\n通过弹性负载均衡从公网访问工作负载，与弹性IP方式相比提供了高可靠的保障，一般用于系统中需要暴露到公网的服务。</li>\n<li>DNAT网关 ( DNAT )</li>\n</ul>\n<p>##3.3.2 创建无状态工作负载<br>\n<img src=\"assets/3.3.app-deploy-svc-be1b3956.png\" alt=\"\"></p>\n<ul>\n<li>添加Service<br>\n<img src=\"assets/3.3.app-deploy-svc-f7749987.png\" alt=\"\"></li>\n<li>添加Service<br>\n<img src=\"assets/3.3.app-deploy-svc-111f9d4e.png\" alt=\"\"></li>\n<li>选择节点端口<br>\n<img src=\"assets/3.3.app-deploy-svc-53c49e9e.png\" alt=\"\"></li>\n<li>服务清单<br>\n<img src=\"assets/3.3.app-deploy-svc-c0d39aad.png\" alt=\"\"></li>\n</ul>\n"},{"_content":"* [3.应用部署](3.app-deploy)\n    * [3.1.镜像上传](3.1.app-swr)\n    * [3.2.镜像部署](3.2.app-deploy-k8s)\n    * [3.3.弹性负载均衡](3.3.app-deploy-svc)\n","source":"cloudink8s/3.app-deploy.md","raw":"* [3.应用部署](3.app-deploy)\n    * [3.1.镜像上传](3.1.app-swr)\n    * [3.2.镜像部署](3.2.app-deploy-k8s)\n    * [3.3.弹性负载均衡](3.3.app-deploy-svc)\n","date":"2021-07-18T15:52:42.190Z","updated":"2021-07-18T15:52:42.190Z","path":"cloudink8s/3.app-deploy.html","title":"","comments":1,"layout":"page","_id":"ckrac7x3f000xz8s6dwxccozt","content":"<ul>\n<li><a href=\"3.app-deploy\">3.应用部署</a>\n<ul>\n<li><a href=\"3.1.app-swr\">3.1.镜像上传</a></li>\n<li><a href=\"3.2.app-deploy-k8s\">3.2.镜像部署</a></li>\n<li><a href=\"3.3.app-deploy-svc\">3.3.弹性负载均衡</a></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><a href=\"3.app-deploy\">3.应用部署</a>\n<ul>\n<li><a href=\"3.1.app-swr\">3.1.镜像上传</a></li>\n<li><a href=\"3.2.app-deploy-k8s\">3.2.镜像部署</a></li>\n<li><a href=\"3.3.app-deploy-svc\">3.3.弹性负载均衡</a></li>\n</ul>\n</li>\n</ul>\n"},{"_content":"# 4.应用运维管理（监控）\n## 1. 能做什么\n应用运维管理（Application Operations Management，简称AOM）是云上应用的一站式立体化运维管理平台，实时监控您的应用及相关云资源，分析应用健康状态，提供灵活丰富的数据可视化功能，帮助您及时发现故障，全面掌握应用、资源及业务的实时运行状况。\n\n## 2. 架构图\n![](assets/4.app-monitor-525f26eb.png)\n## 3. 监控\n - 总览\n![](assets/4.app-monitor-805de976.png)\n - 事件\n![](assets/4.app-monitor-c4b57eb0.png)\n - 应用实例\n![](assets/4.app-monitor-f07cb531.png)\n","source":"cloudink8s/4.app-monitor.md","raw":"# 4.应用运维管理（监控）\n## 1. 能做什么\n应用运维管理（Application Operations Management，简称AOM）是云上应用的一站式立体化运维管理平台，实时监控您的应用及相关云资源，分析应用健康状态，提供灵活丰富的数据可视化功能，帮助您及时发现故障，全面掌握应用、资源及业务的实时运行状况。\n\n## 2. 架构图\n![](assets/4.app-monitor-525f26eb.png)\n## 3. 监控\n - 总览\n![](assets/4.app-monitor-805de976.png)\n - 事件\n![](assets/4.app-monitor-c4b57eb0.png)\n - 应用实例\n![](assets/4.app-monitor-f07cb531.png)\n","date":"2021-07-18T15:47:32.410Z","updated":"2021-01-14T01:19:24.078Z","path":"cloudink8s/4.app-monitor.html","title":"","comments":1,"layout":"page","_id":"ckrac7x47000yz8s6gplxbztm","content":"<h1>4.应用运维管理（监控）</h1>\n<h2 id=\"1-能做什么\">1. 能做什么</h2>\n<p>应用运维管理（Application Operations Management，简称AOM）是云上应用的一站式立体化运维管理平台，实时监控您的应用及相关云资源，分析应用健康状态，提供灵活丰富的数据可视化功能，帮助您及时发现故障，全面掌握应用、资源及业务的实时运行状况。</p>\n<h2 id=\"2-架构图\">2. 架构图</h2>\n<p><img src=\"assets/4.app-monitor-525f26eb.png\" alt=\"\"></p>\n<h2 id=\"3-监控\">3. 监控</h2>\n<ul>\n<li>总览<br>\n<img src=\"assets/4.app-monitor-805de976.png\" alt=\"\"></li>\n<li>事件<br>\n<img src=\"assets/4.app-monitor-c4b57eb0.png\" alt=\"\"></li>\n<li>应用实例<br>\n<img src=\"assets/4.app-monitor-f07cb531.png\" alt=\"\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>4.应用运维管理（监控）</h1>\n<h2 id=\"1-能做什么\">1. 能做什么</h2>\n<p>应用运维管理（Application Operations Management，简称AOM）是云上应用的一站式立体化运维管理平台，实时监控您的应用及相关云资源，分析应用健康状态，提供灵活丰富的数据可视化功能，帮助您及时发现故障，全面掌握应用、资源及业务的实时运行状况。</p>\n<h2 id=\"2-架构图\">2. 架构图</h2>\n<p><img src=\"assets/4.app-monitor-525f26eb.png\" alt=\"\"></p>\n<h2 id=\"3-监控\">3. 监控</h2>\n<ul>\n<li>总览<br>\n<img src=\"assets/4.app-monitor-805de976.png\" alt=\"\"></li>\n<li>事件<br>\n<img src=\"assets/4.app-monitor-c4b57eb0.png\" alt=\"\"></li>\n<li>应用实例<br>\n<img src=\"assets/4.app-monitor-f07cb531.png\" alt=\"\"></li>\n</ul>\n"},{"_content":"# 1.阿里云概念\n  -  企业级分布式应用服务EDAS（Enterprise Distributed Application Service）是一个应用托管和微服务管理的云原生PaaS平台，提供应用开发、部署、监控、运维等全栈式解决方案，同时支持Spring Cloud和Apache Dubbo（以下简称Dubbo）等微服务运行环境，助力您的应用轻松上云。\n# 2.阿里云架构\n![](assets/5.infrustructure-86ce3b57.png)\n# 3.容器托管解决方案\n  - EDAS支持以容器的形式托管应用，无缝对接容器服务Kubernetes，您无需理解容器服务底层细节。通过EDAS控制台就能完成应用在容器里的全生命周期管理，包括监控，诊断等服务。您可以低门槛拥抱容器新技术，最大化利用资源。\n\n    - 无缝支持Kubernetes：Kubernetes集群托管给EDAS，您仅需关注应用生命周期管理即可。\n    - 容器与微服务完美结合：基于Kubernetes，快速构建容器上的微服务架构。\n    - 无需构建镜像：支持WAR包和JAR包直接部署，EDAS代为构建镜像并部署到Kubernetes集群，有效简化流程降低使用门槛。\n![](assets/5.infrustructure-9d0486a4.png)\n","source":"cloudink8s/5.infrustructure.md","raw":"# 1.阿里云概念\n  -  企业级分布式应用服务EDAS（Enterprise Distributed Application Service）是一个应用托管和微服务管理的云原生PaaS平台，提供应用开发、部署、监控、运维等全栈式解决方案，同时支持Spring Cloud和Apache Dubbo（以下简称Dubbo）等微服务运行环境，助力您的应用轻松上云。\n# 2.阿里云架构\n![](assets/5.infrustructure-86ce3b57.png)\n# 3.容器托管解决方案\n  - EDAS支持以容器的形式托管应用，无缝对接容器服务Kubernetes，您无需理解容器服务底层细节。通过EDAS控制台就能完成应用在容器里的全生命周期管理，包括监控，诊断等服务。您可以低门槛拥抱容器新技术，最大化利用资源。\n\n    - 无缝支持Kubernetes：Kubernetes集群托管给EDAS，您仅需关注应用生命周期管理即可。\n    - 容器与微服务完美结合：基于Kubernetes，快速构建容器上的微服务架构。\n    - 无需构建镜像：支持WAR包和JAR包直接部署，EDAS代为构建镜像并部署到Kubernetes集群，有效简化流程降低使用门槛。\n![](assets/5.infrustructure-9d0486a4.png)\n","date":"2021-07-18T15:47:31.310Z","updated":"2021-01-14T01:19:24.079Z","path":"cloudink8s/5.infrustructure.html","title":"","comments":1,"layout":"page","_id":"ckrac7x47000zz8s6hir777xq","content":"<h1>1.阿里云概念</h1>\n<ul>\n<li>企业级分布式应用服务EDAS（Enterprise Distributed Application Service）是一个应用托管和微服务管理的云原生PaaS平台，提供应用开发、部署、监控、运维等全栈式解决方案，同时支持Spring Cloud和Apache Dubbo（以下简称Dubbo）等微服务运行环境，助力您的应用轻松上云。</li>\n</ul>\n<h1>2.阿里云架构</h1>\n<p><img src=\"assets/5.infrustructure-86ce3b57.png\" alt=\"\"></p>\n<h1>3.容器托管解决方案</h1>\n<ul>\n<li>\n<p>EDAS支持以容器的形式托管应用，无缝对接容器服务Kubernetes，您无需理解容器服务底层细节。通过EDAS控制台就能完成应用在容器里的全生命周期管理，包括监控，诊断等服务。您可以低门槛拥抱容器新技术，最大化利用资源。</p>\n<ul>\n<li>无缝支持Kubernetes：Kubernetes集群托管给EDAS，您仅需关注应用生命周期管理即可。</li>\n<li>容器与微服务完美结合：基于Kubernetes，快速构建容器上的微服务架构。</li>\n<li>无需构建镜像：支持WAR包和JAR包直接部署，EDAS代为构建镜像并部署到Kubernetes集群，有效简化流程降低使用门槛。<br>\n<img src=\"assets/5.infrustructure-9d0486a4.png\" alt=\"\"></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>1.阿里云概念</h1>\n<ul>\n<li>企业级分布式应用服务EDAS（Enterprise Distributed Application Service）是一个应用托管和微服务管理的云原生PaaS平台，提供应用开发、部署、监控、运维等全栈式解决方案，同时支持Spring Cloud和Apache Dubbo（以下简称Dubbo）等微服务运行环境，助力您的应用轻松上云。</li>\n</ul>\n<h1>2.阿里云架构</h1>\n<p><img src=\"assets/5.infrustructure-86ce3b57.png\" alt=\"\"></p>\n<h1>3.容器托管解决方案</h1>\n<ul>\n<li>\n<p>EDAS支持以容器的形式托管应用，无缝对接容器服务Kubernetes，您无需理解容器服务底层细节。通过EDAS控制台就能完成应用在容器里的全生命周期管理，包括监控，诊断等服务。您可以低门槛拥抱容器新技术，最大化利用资源。</p>\n<ul>\n<li>无缝支持Kubernetes：Kubernetes集群托管给EDAS，您仅需关注应用生命周期管理即可。</li>\n<li>容器与微服务完美结合：基于Kubernetes，快速构建容器上的微服务架构。</li>\n<li>无需构建镜像：支持WAR包和JAR包直接部署，EDAS代为构建镜像并部署到Kubernetes集群，有效简化流程降低使用门槛。<br>\n<img src=\"assets/5.infrustructure-9d0486a4.png\" alt=\"\"></li>\n</ul>\n</li>\n</ul>\n"},{"_content":"\n# 6.1.容器服务Kubernetes版（创建k8s集群）\n## 1. 能做什么\n  - 容器服务 Kubernetes 版基于原生 Kubernetes 进行适配和增强，简化集群的搭建和扩容等工作，整合阿里云虚拟化、存储、网络和安全能力，打造云端最佳的 Kubernetes 容器化应用运行环境。\n\n## 2. 架构图\n![](assets/6.1.app-vpc-cc414a1b.png)\n## 3. 步骤\n  - 进入容器服务，选择创建集群\n  ![](assets/6.1.app-vpc-7f5a405f.png)\n  - 选择创建ACK托管集群\n  ![](assets/6.1.app-vpc-20cd37e1.png)\n  - 填入节点信息，选择创建集群\n  ![](assets/6.1.app-vpc-07ddb9c5.png)\n  - 确认节点信息，创建集群\n  ![](assets/6.1.app-vpc-919e2f5b.png)\n  - 集群创建中\n  ![](assets/6.1.app-vpc-5b85d130.png)\n","source":"cloudink8s/6.1.app-k8s-create.md","raw":"\n# 6.1.容器服务Kubernetes版（创建k8s集群）\n## 1. 能做什么\n  - 容器服务 Kubernetes 版基于原生 Kubernetes 进行适配和增强，简化集群的搭建和扩容等工作，整合阿里云虚拟化、存储、网络和安全能力，打造云端最佳的 Kubernetes 容器化应用运行环境。\n\n## 2. 架构图\n![](assets/6.1.app-vpc-cc414a1b.png)\n## 3. 步骤\n  - 进入容器服务，选择创建集群\n  ![](assets/6.1.app-vpc-7f5a405f.png)\n  - 选择创建ACK托管集群\n  ![](assets/6.1.app-vpc-20cd37e1.png)\n  - 填入节点信息，选择创建集群\n  ![](assets/6.1.app-vpc-07ddb9c5.png)\n  - 确认节点信息，创建集群\n  ![](assets/6.1.app-vpc-919e2f5b.png)\n  - 集群创建中\n  ![](assets/6.1.app-vpc-5b85d130.png)\n","date":"2021-07-18T15:47:31.370Z","updated":"2021-01-14T01:19:23.410Z","path":"cloudink8s/6.1.app-k8s-create.html","title":"","comments":1,"layout":"page","_id":"ckrac7x950010z8s6evoa20hy","content":"<h1>6.1.容器服务Kubernetes版（创建k8s集群）</h1>\n<h2 id=\"1-能做什么\">1. 能做什么</h2>\n<ul>\n<li>容器服务 Kubernetes 版基于原生 Kubernetes 进行适配和增强，简化集群的搭建和扩容等工作，整合阿里云虚拟化、存储、网络和安全能力，打造云端最佳的 Kubernetes 容器化应用运行环境。</li>\n</ul>\n<h2 id=\"2-架构图\">2. 架构图</h2>\n<p><img src=\"assets/6.1.app-vpc-cc414a1b.png\" alt=\"\"></p>\n<h2 id=\"3-步骤\">3. 步骤</h2>\n<ul>\n<li>进入容器服务，选择创建集群<br>\n<img src=\"assets/6.1.app-vpc-7f5a405f.png\" alt=\"\"></li>\n<li>选择创建ACK托管集群<br>\n<img src=\"assets/6.1.app-vpc-20cd37e1.png\" alt=\"\"></li>\n<li>填入节点信息，选择创建集群<br>\n<img src=\"assets/6.1.app-vpc-07ddb9c5.png\" alt=\"\"></li>\n<li>确认节点信息，创建集群<br>\n<img src=\"assets/6.1.app-vpc-919e2f5b.png\" alt=\"\"></li>\n<li>集群创建中<br>\n<img src=\"assets/6.1.app-vpc-5b85d130.png\" alt=\"\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>6.1.容器服务Kubernetes版（创建k8s集群）</h1>\n<h2 id=\"1-能做什么\">1. 能做什么</h2>\n<ul>\n<li>容器服务 Kubernetes 版基于原生 Kubernetes 进行适配和增强，简化集群的搭建和扩容等工作，整合阿里云虚拟化、存储、网络和安全能力，打造云端最佳的 Kubernetes 容器化应用运行环境。</li>\n</ul>\n<h2 id=\"2-架构图\">2. 架构图</h2>\n<p><img src=\"assets/6.1.app-vpc-cc414a1b.png\" alt=\"\"></p>\n<h2 id=\"3-步骤\">3. 步骤</h2>\n<ul>\n<li>进入容器服务，选择创建集群<br>\n<img src=\"assets/6.1.app-vpc-7f5a405f.png\" alt=\"\"></li>\n<li>选择创建ACK托管集群<br>\n<img src=\"assets/6.1.app-vpc-20cd37e1.png\" alt=\"\"></li>\n<li>填入节点信息，选择创建集群<br>\n<img src=\"assets/6.1.app-vpc-07ddb9c5.png\" alt=\"\"></li>\n<li>确认节点信息，创建集群<br>\n<img src=\"assets/6.1.app-vpc-919e2f5b.png\" alt=\"\"></li>\n<li>集群创建中<br>\n<img src=\"assets/6.1.app-vpc-5b85d130.png\" alt=\"\"></li>\n</ul>\n"},{"_content":"# 6.1.创建集群\n\n","source":"cloudink8s/6.1.app-vpc.md","raw":"# 6.1.创建集群\n\n","date":"2021-07-18T15:47:31.328Z","updated":"2021-01-14T01:19:24.081Z","path":"cloudink8s/6.1.app-vpc.html","title":"","comments":1,"layout":"page","_id":"ckrac7x950011z8s65ysr8htt","content":"<h1>6.1.创建集群</h1>\n","site":{"data":{}},"excerpt":"","more":"<h1>6.1.创建集群</h1>\n"},{"_content":"# 6.2.创建命名空间\n## 1. 能做什么\n  - 命名空间为应用提供互相隔离的运行环境，如开发、测试和生产环境等，您可以使用命名空间实现资源和服务的隔离。在同一个地域内不允许创建两个同名的命名空间。\n\n## 2. 步骤\n  - 进入企业级分布式应用服务，选择应用管理-命名空间，创建命名空间\n![](assets/6.2.app-ip-2d2824d9.png)\n  - 查询已创建的命名空间\n![](assets/6.2.app-ip-cf199e8d.png)\n  - 网省差异，里面有个租户的概念，这里框起来的TID是namespace的ID，AK是 access-key，SK是secret-key将这三个数据保存下来，以后配置nacos注册中心的时候要用到\n![](assets/6.2.app-ip-5fa7dea8.png)\n","source":"cloudink8s/6.2.app-ip.md","raw":"# 6.2.创建命名空间\n## 1. 能做什么\n  - 命名空间为应用提供互相隔离的运行环境，如开发、测试和生产环境等，您可以使用命名空间实现资源和服务的隔离。在同一个地域内不允许创建两个同名的命名空间。\n\n## 2. 步骤\n  - 进入企业级分布式应用服务，选择应用管理-命名空间，创建命名空间\n![](assets/6.2.app-ip-2d2824d9.png)\n  - 查询已创建的命名空间\n![](assets/6.2.app-ip-cf199e8d.png)\n  - 网省差异，里面有个租户的概念，这里框起来的TID是namespace的ID，AK是 access-key，SK是secret-key将这三个数据保存下来，以后配置nacos注册中心的时候要用到\n![](assets/6.2.app-ip-5fa7dea8.png)\n","date":"2021-07-18T15:47:31.343Z","updated":"2021-01-14T01:19:23.412Z","path":"cloudink8s/6.2.app-ip.html","title":"","comments":1,"layout":"page","_id":"ckrac7x960012z8s663np9qf7","content":"<h1>6.2.创建命名空间</h1>\n<h2 id=\"1-能做什么\">1. 能做什么</h2>\n<ul>\n<li>命名空间为应用提供互相隔离的运行环境，如开发、测试和生产环境等，您可以使用命名空间实现资源和服务的隔离。在同一个地域内不允许创建两个同名的命名空间。</li>\n</ul>\n<h2 id=\"2-步骤\">2. 步骤</h2>\n<ul>\n<li>进入企业级分布式应用服务，选择应用管理-命名空间，创建命名空间<br>\n<img src=\"assets/6.2.app-ip-2d2824d9.png\" alt=\"\"></li>\n<li>查询已创建的命名空间<br>\n<img src=\"assets/6.2.app-ip-cf199e8d.png\" alt=\"\"></li>\n<li>网省差异，里面有个租户的概念，这里框起来的TID是namespace的ID，AK是 access-key，SK是secret-key将这三个数据保存下来，以后配置nacos注册中心的时候要用到<br>\n<img src=\"assets/6.2.app-ip-5fa7dea8.png\" alt=\"\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>6.2.创建命名空间</h1>\n<h2 id=\"1-能做什么\">1. 能做什么</h2>\n<ul>\n<li>命名空间为应用提供互相隔离的运行环境，如开发、测试和生产环境等，您可以使用命名空间实现资源和服务的隔离。在同一个地域内不允许创建两个同名的命名空间。</li>\n</ul>\n<h2 id=\"2-步骤\">2. 步骤</h2>\n<ul>\n<li>进入企业级分布式应用服务，选择应用管理-命名空间，创建命名空间<br>\n<img src=\"assets/6.2.app-ip-2d2824d9.png\" alt=\"\"></li>\n<li>查询已创建的命名空间<br>\n<img src=\"assets/6.2.app-ip-cf199e8d.png\" alt=\"\"></li>\n<li>网省差异，里面有个租户的概念，这里框起来的TID是namespace的ID，AK是 access-key，SK是secret-key将这三个数据保存下来，以后配置nacos注册中心的时候要用到<br>\n<img src=\"assets/6.2.app-ip-5fa7dea8.png\" alt=\"\"></li>\n</ul>\n"},{"_content":"# 6.3.导入集群\n  - 进入企业级分布式应用服务，选择Serverless k8s集群，点击导入\n![](assets/6.3.app-k8s-dd9a738a.png)\n  - 导入日志\n![](assets/6.3.app-k8s-0352f379.png)\n","source":"cloudink8s/6.3.app-k8s.md","raw":"# 6.3.导入集群\n  - 进入企业级分布式应用服务，选择Serverless k8s集群，点击导入\n![](assets/6.3.app-k8s-dd9a738a.png)\n  - 导入日志\n![](assets/6.3.app-k8s-0352f379.png)\n","date":"2021-07-18T15:47:32.414Z","updated":"2021-01-14T01:19:23.413Z","path":"cloudink8s/6.3.app-k8s.html","title":"","comments":1,"layout":"page","_id":"ckrac7x960013z8s64g2f4ki8","content":"<h1>6.3.导入集群</h1>\n<ul>\n<li>进入企业级分布式应用服务，选择Serverless k8s集群，点击导入<br>\n<img src=\"assets/6.3.app-k8s-dd9a738a.png\" alt=\"\"></li>\n<li>导入日志<br>\n<img src=\"assets/6.3.app-k8s-0352f379.png\" alt=\"\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>6.3.导入集群</h1>\n<ul>\n<li>进入企业级分布式应用服务，选择Serverless k8s集群，点击导入<br>\n<img src=\"assets/6.3.app-k8s-dd9a738a.png\" alt=\"\"></li>\n<li>导入日志<br>\n<img src=\"assets/6.3.app-k8s-0352f379.png\" alt=\"\"></li>\n</ul>\n"},{"_content":"* [6.集群部署](6.app-deploy)\n    * [6.1.创建集群](6.1.app-vpc)\n    * [6.2.创建命名空间](6.2.app-ip)\n    * [6.3.导入集群](6.3.app-k8s)\n","source":"cloudink8s/6.app-deploy.md","raw":"* [6.集群部署](6.app-deploy)\n    * [6.1.创建集群](6.1.app-vpc)\n    * [6.2.创建命名空间](6.2.app-ip)\n    * [6.3.导入集群](6.3.app-k8s)\n","date":"2021-07-18T15:52:33.959Z","updated":"2021-07-18T15:52:33.959Z","path":"cloudink8s/6.app-deploy.html","title":"","comments":1,"layout":"page","_id":"ckrac7x970014z8s6bziod5dm","content":"<ul>\n<li><a href=\"6.app-deploy\">6.集群部署</a>\n<ul>\n<li><a href=\"6.1.app-vpc\">6.1.创建集群</a></li>\n<li><a href=\"6.2.app-ip\">6.2.创建命名空间</a></li>\n<li><a href=\"6.3.app-k8s\">6.3.导入集群</a></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><a href=\"6.app-deploy\">6.集群部署</a>\n<ul>\n<li><a href=\"6.1.app-vpc\">6.1.创建集群</a></li>\n<li><a href=\"6.2.app-ip\">6.2.创建命名空间</a></li>\n<li><a href=\"6.3.app-k8s\">6.3.导入集群</a></li>\n</ul>\n</li>\n</ul>\n"},{"_content":"# 7.1.镜像上传\n- 1.进入容器镜像服务，创建命名空间\n![](assets/7.1.app-swr-f63aad82.png)\n- 2.进入容器镜像服务，创建镜像仓库\n![](assets/7.1.app-swr-d40d2594.png)\n- 3.选择命名空间，填写镜像仓库名字\n![](assets/7.1.app-swr-59307a6d.png)\n- 4.选择本地仓库，创建镜像仓库\n![](assets/7.1.app-swr-bfb74b2a.png)\n- 5.根据仓库提示信息，推送本地自制的镜像。\n![](assets/7.1.app-swr-1f4923cb.png)\n- 6.或者根据云效系统编译源码，推送镜像到仓库或者阿里云的k8s\nhttps://flow.aliyun.com/\n![](assets/7.1.app-swr-fe4432b5.png)\n","source":"cloudink8s/7.1.app-swr.md","raw":"# 7.1.镜像上传\n- 1.进入容器镜像服务，创建命名空间\n![](assets/7.1.app-swr-f63aad82.png)\n- 2.进入容器镜像服务，创建镜像仓库\n![](assets/7.1.app-swr-d40d2594.png)\n- 3.选择命名空间，填写镜像仓库名字\n![](assets/7.1.app-swr-59307a6d.png)\n- 4.选择本地仓库，创建镜像仓库\n![](assets/7.1.app-swr-bfb74b2a.png)\n- 5.根据仓库提示信息，推送本地自制的镜像。\n![](assets/7.1.app-swr-1f4923cb.png)\n- 6.或者根据云效系统编译源码，推送镜像到仓库或者阿里云的k8s\nhttps://flow.aliyun.com/\n![](assets/7.1.app-swr-fe4432b5.png)\n","date":"2021-07-18T15:47:31.330Z","updated":"2021-01-14T01:19:23.418Z","path":"cloudink8s/7.1.app-swr.html","title":"","comments":1,"layout":"page","_id":"ckrac7x970015z8s61vpc3d2n","content":"<h1>7.1.镜像上传</h1>\n<ul>\n<li>1.进入容器镜像服务，创建命名空间<br>\n<img src=\"assets/7.1.app-swr-f63aad82.png\" alt=\"\"></li>\n<li>2.进入容器镜像服务，创建镜像仓库<br>\n<img src=\"assets/7.1.app-swr-d40d2594.png\" alt=\"\"></li>\n<li>3.选择命名空间，填写镜像仓库名字<br>\n<img src=\"assets/7.1.app-swr-59307a6d.png\" alt=\"\"></li>\n<li>4.选择本地仓库，创建镜像仓库<br>\n<img src=\"assets/7.1.app-swr-bfb74b2a.png\" alt=\"\"></li>\n<li>5.根据仓库提示信息，推送本地自制的镜像。<br>\n<img src=\"assets/7.1.app-swr-1f4923cb.png\" alt=\"\"></li>\n<li>6.或者根据云效系统编译源码，推送镜像到仓库或者阿里云的k8s<br>\n<a href=\"https://flow.aliyun.com/\">https://flow.aliyun.com/</a><br>\n<img src=\"assets/7.1.app-swr-fe4432b5.png\" alt=\"\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>7.1.镜像上传</h1>\n<ul>\n<li>1.进入容器镜像服务，创建命名空间<br>\n<img src=\"assets/7.1.app-swr-f63aad82.png\" alt=\"\"></li>\n<li>2.进入容器镜像服务，创建镜像仓库<br>\n<img src=\"assets/7.1.app-swr-d40d2594.png\" alt=\"\"></li>\n<li>3.选择命名空间，填写镜像仓库名字<br>\n<img src=\"assets/7.1.app-swr-59307a6d.png\" alt=\"\"></li>\n<li>4.选择本地仓库，创建镜像仓库<br>\n<img src=\"assets/7.1.app-swr-bfb74b2a.png\" alt=\"\"></li>\n<li>5.根据仓库提示信息，推送本地自制的镜像。<br>\n<img src=\"assets/7.1.app-swr-1f4923cb.png\" alt=\"\"></li>\n<li>6.或者根据云效系统编译源码，推送镜像到仓库或者阿里云的k8s<br>\n<a href=\"https://flow.aliyun.com/\">https://flow.aliyun.com/</a><br>\n<img src=\"assets/7.1.app-swr-fe4432b5.png\" alt=\"\"></li>\n</ul>\n"},{"_content":"\n# 7.2.应用创建\n- 1.进入企业级分布式应用服务，选择应用管理->应用列表->创建应用\n![](assets/7.2.app-deploy-k8s-5cbcc485.png)\n- 2.选择命名空间，集群，填写应用名\n![](assets/7.2.app-deploy-k8s-210480f8.png)\n- 3.选择上传的镜像，或者jar/war包。\n![](assets/7.2.app-deploy-k8s-6159afee.png)\n- 4.设置容器总数，容器的cpu和内存配置。创建应用\n![](assets/7.2.app-deploy-k8s-b2a8a281.png)\n- 5.demo应用详情。\n![](assets/7.2.app-deploy-k8s-1a696690.png)\n- 6.集群下面使用镜像创建。\n![](assets/7.2.app-deploy-k8s-65116075.png)\n- 7.集群下面使用镜像创建。设置内存，CPU等\n![](assets/7.2.app-deploy-k8s-d872a607.png)\n- 8.登录到已部署到容器。\n![](assets/7.2.app-deploy-k8s-f0eca9fe.png)\n- 10.应用基本信息。\n![](assets/7.2.app-deploy-k8s-c068a25d.png)\n","source":"cloudink8s/7.2.app-deploy-k8s.md","raw":"\n# 7.2.应用创建\n- 1.进入企业级分布式应用服务，选择应用管理->应用列表->创建应用\n![](assets/7.2.app-deploy-k8s-5cbcc485.png)\n- 2.选择命名空间，集群，填写应用名\n![](assets/7.2.app-deploy-k8s-210480f8.png)\n- 3.选择上传的镜像，或者jar/war包。\n![](assets/7.2.app-deploy-k8s-6159afee.png)\n- 4.设置容器总数，容器的cpu和内存配置。创建应用\n![](assets/7.2.app-deploy-k8s-b2a8a281.png)\n- 5.demo应用详情。\n![](assets/7.2.app-deploy-k8s-1a696690.png)\n- 6.集群下面使用镜像创建。\n![](assets/7.2.app-deploy-k8s-65116075.png)\n- 7.集群下面使用镜像创建。设置内存，CPU等\n![](assets/7.2.app-deploy-k8s-d872a607.png)\n- 8.登录到已部署到容器。\n![](assets/7.2.app-deploy-k8s-f0eca9fe.png)\n- 10.应用基本信息。\n![](assets/7.2.app-deploy-k8s-c068a25d.png)\n","date":"2021-07-18T15:47:31.388Z","updated":"2021-01-14T01:19:23.420Z","path":"cloudink8s/7.2.app-deploy-k8s.html","title":"","comments":1,"layout":"page","_id":"ckrac7x970016z8s63s270y7o","content":"<h1>7.2.应用创建</h1>\n<ul>\n<li>1.进入企业级分布式应用服务，选择应用管理-&gt;应用列表-&gt;创建应用<br>\n<img src=\"assets/7.2.app-deploy-k8s-5cbcc485.png\" alt=\"\"></li>\n<li>2.选择命名空间，集群，填写应用名<br>\n<img src=\"assets/7.2.app-deploy-k8s-210480f8.png\" alt=\"\"></li>\n<li>3.选择上传的镜像，或者jar/war包。<br>\n<img src=\"assets/7.2.app-deploy-k8s-6159afee.png\" alt=\"\"></li>\n<li>4.设置容器总数，容器的cpu和内存配置。创建应用<br>\n<img src=\"assets/7.2.app-deploy-k8s-b2a8a281.png\" alt=\"\"></li>\n<li>5.demo应用详情。<br>\n<img src=\"assets/7.2.app-deploy-k8s-1a696690.png\" alt=\"\"></li>\n<li>6.集群下面使用镜像创建。<br>\n<img src=\"assets/7.2.app-deploy-k8s-65116075.png\" alt=\"\"></li>\n<li>7.集群下面使用镜像创建。设置内存，CPU等<br>\n<img src=\"assets/7.2.app-deploy-k8s-d872a607.png\" alt=\"\"></li>\n<li>8.登录到已部署到容器。<br>\n<img src=\"assets/7.2.app-deploy-k8s-f0eca9fe.png\" alt=\"\"></li>\n<li>10.应用基本信息。<br>\n<img src=\"assets/7.2.app-deploy-k8s-c068a25d.png\" alt=\"\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>7.2.应用创建</h1>\n<ul>\n<li>1.进入企业级分布式应用服务，选择应用管理-&gt;应用列表-&gt;创建应用<br>\n<img src=\"assets/7.2.app-deploy-k8s-5cbcc485.png\" alt=\"\"></li>\n<li>2.选择命名空间，集群，填写应用名<br>\n<img src=\"assets/7.2.app-deploy-k8s-210480f8.png\" alt=\"\"></li>\n<li>3.选择上传的镜像，或者jar/war包。<br>\n<img src=\"assets/7.2.app-deploy-k8s-6159afee.png\" alt=\"\"></li>\n<li>4.设置容器总数，容器的cpu和内存配置。创建应用<br>\n<img src=\"assets/7.2.app-deploy-k8s-b2a8a281.png\" alt=\"\"></li>\n<li>5.demo应用详情。<br>\n<img src=\"assets/7.2.app-deploy-k8s-1a696690.png\" alt=\"\"></li>\n<li>6.集群下面使用镜像创建。<br>\n<img src=\"assets/7.2.app-deploy-k8s-65116075.png\" alt=\"\"></li>\n<li>7.集群下面使用镜像创建。设置内存，CPU等<br>\n<img src=\"assets/7.2.app-deploy-k8s-d872a607.png\" alt=\"\"></li>\n<li>8.登录到已部署到容器。<br>\n<img src=\"assets/7.2.app-deploy-k8s-f0eca9fe.png\" alt=\"\"></li>\n<li>10.应用基本信息。<br>\n<img src=\"assets/7.2.app-deploy-k8s-c068a25d.png\" alt=\"\"></li>\n</ul>\n"},{"_content":"# 7.3.弹性负载均衡\n- 1.根据应用创建负载均衡，私网和公网。\n![](assets/7.3.app-deploy-svc-ddbcbd49.png)\n- 2.根据应用创建负载均衡，私网和公网。\n![](assets/7.3.app-deploy-svc-1678f0be.png)\n- 3.应用配置清单。\n![](assets/7.3.app-deploy-svc-3e2203a8.png)\n","source":"cloudink8s/7.3.app-deploy-svc.md","raw":"# 7.3.弹性负载均衡\n- 1.根据应用创建负载均衡，私网和公网。\n![](assets/7.3.app-deploy-svc-ddbcbd49.png)\n- 2.根据应用创建负载均衡，私网和公网。\n![](assets/7.3.app-deploy-svc-1678f0be.png)\n- 3.应用配置清单。\n![](assets/7.3.app-deploy-svc-3e2203a8.png)\n","date":"2021-07-18T15:47:31.436Z","updated":"2021-01-14T01:19:23.422Z","path":"cloudink8s/7.3.app-deploy-svc.html","title":"","comments":1,"layout":"page","_id":"ckrac7xaa0017z8s67ndq1yp0","content":"<h1>7.3.弹性负载均衡</h1>\n<ul>\n<li>1.根据应用创建负载均衡，私网和公网。<br>\n<img src=\"assets/7.3.app-deploy-svc-ddbcbd49.png\" alt=\"\"></li>\n<li>2.根据应用创建负载均衡，私网和公网。<br>\n<img src=\"assets/7.3.app-deploy-svc-1678f0be.png\" alt=\"\"></li>\n<li>3.应用配置清单。<br>\n<img src=\"assets/7.3.app-deploy-svc-3e2203a8.png\" alt=\"\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>7.3.弹性负载均衡</h1>\n<ul>\n<li>1.根据应用创建负载均衡，私网和公网。<br>\n<img src=\"assets/7.3.app-deploy-svc-ddbcbd49.png\" alt=\"\"></li>\n<li>2.根据应用创建负载均衡，私网和公网。<br>\n<img src=\"assets/7.3.app-deploy-svc-1678f0be.png\" alt=\"\"></li>\n<li>3.应用配置清单。<br>\n<img src=\"assets/7.3.app-deploy-svc-3e2203a8.png\" alt=\"\"></li>\n</ul>\n"},{"_content":"* [7.应用部署](7.app-deploy)\n    * [7.1.镜像上传](7.1.app-swr)\n    * [7.2.镜像部署](7.2.app-deploy-k8s)\n    * [7.3.访问方式](7.3.app-deploy-svc)\n","source":"cloudink8s/7.app-deploy.md","raw":"* [7.应用部署](7.app-deploy)\n    * [7.1.镜像上传](7.1.app-swr)\n    * [7.2.镜像部署](7.2.app-deploy-k8s)\n    * [7.3.访问方式](7.3.app-deploy-svc)\n","date":"2021-07-18T15:52:25.880Z","updated":"2021-07-18T15:52:25.880Z","path":"cloudink8s/7.app-deploy.html","title":"","comments":1,"layout":"page","_id":"ckrac7xai0018z8s6d9euh2mt","content":"<ul>\n<li><a href=\"7.app-deploy\">7.应用部署</a>\n<ul>\n<li><a href=\"7.1.app-swr\">7.1.镜像上传</a></li>\n<li><a href=\"7.2.app-deploy-k8s\">7.2.镜像部署</a></li>\n<li><a href=\"7.3.app-deploy-svc\">7.3.访问方式</a></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><a href=\"7.app-deploy\">7.应用部署</a>\n<ul>\n<li><a href=\"7.1.app-swr\">7.1.镜像上传</a></li>\n<li><a href=\"7.2.app-deploy-k8s\">7.2.镜像部署</a></li>\n<li><a href=\"7.3.app-deploy-svc\">7.3.访问方式</a></li>\n</ul>\n</li>\n</ul>\n"},{"_content":"# 8.监控\n- 1.总览监控。\n![](assets/8.app-monitor-3d6cc27f.png)\n- 2.某应用监控。\n![](assets/8.app-monitor-1a375ed3.png)\n- 3.实例监控。\n![](assets/8.app-monitor-63c782c3.png)\n- 4.高级监控。\n![](assets/8.app-monitor-17cec9b4.png)\n- 5.prometheus监控。\n![](assets/8.app-monitor-a546062a.png)\n","source":"cloudink8s/8.app-monitor.md","raw":"# 8.监控\n- 1.总览监控。\n![](assets/8.app-monitor-3d6cc27f.png)\n- 2.某应用监控。\n![](assets/8.app-monitor-1a375ed3.png)\n- 3.实例监控。\n![](assets/8.app-monitor-63c782c3.png)\n- 4.高级监控。\n![](assets/8.app-monitor-17cec9b4.png)\n- 5.prometheus监控。\n![](assets/8.app-monitor-a546062a.png)\n","date":"2021-07-18T15:47:31.404Z","updated":"2021-01-14T01:19:23.424Z","path":"cloudink8s/8.app-monitor.html","title":"","comments":1,"layout":"page","_id":"ckrac7xaj0019z8s6frewcv6c","content":"<h1>8.监控</h1>\n<ul>\n<li>1.总览监控。<br>\n<img src=\"assets/8.app-monitor-3d6cc27f.png\" alt=\"\"></li>\n<li>2.某应用监控。<br>\n<img src=\"assets/8.app-monitor-1a375ed3.png\" alt=\"\"></li>\n<li>3.实例监控。<br>\n<img src=\"assets/8.app-monitor-63c782c3.png\" alt=\"\"></li>\n<li>4.高级监控。<br>\n<img src=\"assets/8.app-monitor-17cec9b4.png\" alt=\"\"></li>\n<li>5.prometheus监控。<br>\n<img src=\"assets/8.app-monitor-a546062a.png\" alt=\"\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>8.监控</h1>\n<ul>\n<li>1.总览监控。<br>\n<img src=\"assets/8.app-monitor-3d6cc27f.png\" alt=\"\"></li>\n<li>2.某应用监控。<br>\n<img src=\"assets/8.app-monitor-1a375ed3.png\" alt=\"\"></li>\n<li>3.实例监控。<br>\n<img src=\"assets/8.app-monitor-63c782c3.png\" alt=\"\"></li>\n<li>4.高级监控。<br>\n<img src=\"assets/8.app-monitor-17cec9b4.png\" alt=\"\"></li>\n<li>5.prometheus监控。<br>\n<img src=\"assets/8.app-monitor-a546062a.png\" alt=\"\"></li>\n</ul>\n"},{"_content":"\n\n# 容器云平台架构\n![](assets/9.infrustructure-3740cdb3.png)\n1. 容器云管理平台：独立于k8s部署，用于管理项目在k8s中的集成部署\n2. 容器云平台支持`多租户`、`多K8S集群`的管理\n3. 容器云平台不负责k8s集群的创建，只负责k8s集群的使用；任意已安装好的k8s集群可以接入到k8s集群；可以通过“云管平台”或\"自己手动创建k8s集群\"并接入到容器云平台\n4. 容器云平台提供docker镜像服务，统一管理各项目组的docker镜像\n- 更详细的部署K8S流程见：http://192.168.3.6:2222/cok/\n","source":"cloudink8s/9.infrustructure.md","raw":"\n\n# 容器云平台架构\n![](assets/9.infrustructure-3740cdb3.png)\n1. 容器云管理平台：独立于k8s部署，用于管理项目在k8s中的集成部署\n2. 容器云平台支持`多租户`、`多K8S集群`的管理\n3. 容器云平台不负责k8s集群的创建，只负责k8s集群的使用；任意已安装好的k8s集群可以接入到k8s集群；可以通过“云管平台”或\"自己手动创建k8s集群\"并接入到容器云平台\n4. 容器云平台提供docker镜像服务，统一管理各项目组的docker镜像\n- 更详细的部署K8S流程见：http://192.168.3.6:2222/cok/\n","date":"2021-07-18T15:47:31.411Z","updated":"2021-01-14T01:19:23.426Z","path":"cloudink8s/9.infrustructure.html","title":"","comments":1,"layout":"page","_id":"ckrac7xaj001az8s6d8lq6dvh","content":"<h1>容器云平台架构</h1>\n<p><img src=\"assets/9.infrustructure-3740cdb3.png\" alt=\"\"></p>\n<ol>\n<li>容器云管理平台：独立于k8s部署，用于管理项目在k8s中的集成部署</li>\n<li>容器云平台支持<code>多租户</code>、<code>多K8S集群</code>的管理</li>\n<li>容器云平台不负责k8s集群的创建，只负责k8s集群的使用；任意已安装好的k8s集群可以接入到k8s集群；可以通过“云管平台”或&quot;自己手动创建k8s集群&quot;并接入到容器云平台</li>\n<li>容器云平台提供docker镜像服务，统一管理各项目组的docker镜像</li>\n</ol>\n<ul>\n<li>更详细的部署K8S流程见：<a href=\"http://192.168.3.6:2222/cok/\">http://192.168.3.6:2222/cok/</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>容器云平台架构</h1>\n<p><img src=\"assets/9.infrustructure-3740cdb3.png\" alt=\"\"></p>\n<ol>\n<li>容器云管理平台：独立于k8s部署，用于管理项目在k8s中的集成部署</li>\n<li>容器云平台支持<code>多租户</code>、<code>多K8S集群</code>的管理</li>\n<li>容器云平台不负责k8s集群的创建，只负责k8s集群的使用；任意已安装好的k8s集群可以接入到k8s集群；可以通过“云管平台”或&quot;自己手动创建k8s集群&quot;并接入到容器云平台</li>\n<li>容器云平台提供docker镜像服务，统一管理各项目组的docker镜像</li>\n</ol>\n<ul>\n<li>更详细的部署K8S流程见：<a href=\"http://192.168.3.6:2222/cok/\">http://192.168.3.6:2222/cok/</a></li>\n</ul>\n"},{"_content":"# 华为云 培训\n.\n* [Introduction](README)\n* [1.华为云架构](1.infrustructure)\n* [2.集群部署](2.app-deploy)\n    * [2.1.虚拟私有云](2.1.app-vpc)\n    * [2.2.弹性IP](2.2.app-ip)\n    * [2.3.集群创建](2.3.app-k8s)\n* [3.应用部署](3.app-deploy)\n    * [3.1.镜像上传](3.1.app-swr)\n    * [3.2.镜像部署](3.2.app-deploy-k8s)\n    * [3.3.访问方式](3.3.app-deploy-svc)\n* [4.监控](3.app-monitor)\n\n-----\n\n# 阿里云 培训\n.\n* [Introduction](README)\n* [5.阿里云架构](5.infrustructure)\n* [6.集群部署](6.app-deploy)\n    * [6.1.创建集群](6.1.app-k8s-create)\n    * [6.2.创建命名空间](6.2.app-ip)\n    * [6.3.导入集群](6.3.app-k8s)\n* [7.应用部署](7.app-deploy)\n    * [7.1.镜像上传](7.1.app-swr)\n    * [7.2.镜像部署](7.2.app-deploy-k8s)\n    * [7.3.访问方式](7.3.app-deploy-svc)\n* [8.监控](8.app-monitor)\n\n-----\n\n# 容器云 培训\n.\n* [Introduction](README)\n* [9.容器云架构](9.infrustructure)\n* [10.迁移到华为/阿里云](10.app-deploy)\n    * [10.1.工具导出镜像](10.1.export-images)\n    * [10.2.镜像导入](10.2.import-images)\n    * [10.3.应用创建](10.3.app-create)\n","source":"cloudink8s/README.md","raw":"# 华为云 培训\n.\n* [Introduction](README)\n* [1.华为云架构](1.infrustructure)\n* [2.集群部署](2.app-deploy)\n    * [2.1.虚拟私有云](2.1.app-vpc)\n    * [2.2.弹性IP](2.2.app-ip)\n    * [2.3.集群创建](2.3.app-k8s)\n* [3.应用部署](3.app-deploy)\n    * [3.1.镜像上传](3.1.app-swr)\n    * [3.2.镜像部署](3.2.app-deploy-k8s)\n    * [3.3.访问方式](3.3.app-deploy-svc)\n* [4.监控](3.app-monitor)\n\n-----\n\n# 阿里云 培训\n.\n* [Introduction](README)\n* [5.阿里云架构](5.infrustructure)\n* [6.集群部署](6.app-deploy)\n    * [6.1.创建集群](6.1.app-k8s-create)\n    * [6.2.创建命名空间](6.2.app-ip)\n    * [6.3.导入集群](6.3.app-k8s)\n* [7.应用部署](7.app-deploy)\n    * [7.1.镜像上传](7.1.app-swr)\n    * [7.2.镜像部署](7.2.app-deploy-k8s)\n    * [7.3.访问方式](7.3.app-deploy-svc)\n* [8.监控](8.app-monitor)\n\n-----\n\n# 容器云 培训\n.\n* [Introduction](README)\n* [9.容器云架构](9.infrustructure)\n* [10.迁移到华为/阿里云](10.app-deploy)\n    * [10.1.工具导出镜像](10.1.export-images)\n    * [10.2.镜像导入](10.2.import-images)\n    * [10.3.应用创建](10.3.app-create)\n","date":"2021-07-18T15:49:59.236Z","updated":"2021-07-18T15:49:59.236Z","path":"cloudink8s/README.html","title":"","comments":1,"layout":"page","_id":"ckrac7xak001bz8s69l8a9cm8","content":"<h1>华为云 培训</h1>\n<p>.</p>\n<ul>\n<li><a href=\"README\">Introduction</a></li>\n<li><a href=\"1.infrustructure\">1.华为云架构</a></li>\n<li><a href=\"2.app-deploy\">2.集群部署</a>\n<ul>\n<li><a href=\"2.1.app-vpc\">2.1.虚拟私有云</a></li>\n<li><a href=\"2.2.app-ip\">2.2.弹性IP</a></li>\n<li><a href=\"2.3.app-k8s\">2.3.集群创建</a></li>\n</ul>\n</li>\n<li><a href=\"3.app-deploy\">3.应用部署</a>\n<ul>\n<li><a href=\"3.1.app-swr\">3.1.镜像上传</a></li>\n<li><a href=\"3.2.app-deploy-k8s\">3.2.镜像部署</a></li>\n<li><a href=\"3.3.app-deploy-svc\">3.3.访问方式</a></li>\n</ul>\n</li>\n<li><a href=\"3.app-monitor\">4.监控</a></li>\n</ul>\n<hr>\n<h1>阿里云 培训</h1>\n<p>.</p>\n<ul>\n<li><a href=\"README\">Introduction</a></li>\n<li><a href=\"5.infrustructure\">5.阿里云架构</a></li>\n<li><a href=\"6.app-deploy\">6.集群部署</a>\n<ul>\n<li><a href=\"6.1.app-k8s-create\">6.1.创建集群</a></li>\n<li><a href=\"6.2.app-ip\">6.2.创建命名空间</a></li>\n<li><a href=\"6.3.app-k8s\">6.3.导入集群</a></li>\n</ul>\n</li>\n<li><a href=\"7.app-deploy\">7.应用部署</a>\n<ul>\n<li><a href=\"7.1.app-swr\">7.1.镜像上传</a></li>\n<li><a href=\"7.2.app-deploy-k8s\">7.2.镜像部署</a></li>\n<li><a href=\"7.3.app-deploy-svc\">7.3.访问方式</a></li>\n</ul>\n</li>\n<li><a href=\"8.app-monitor\">8.监控</a></li>\n</ul>\n<hr>\n<h1>容器云 培训</h1>\n<p>.</p>\n<ul>\n<li><a href=\"README\">Introduction</a></li>\n<li><a href=\"9.infrustructure\">9.容器云架构</a></li>\n<li><a href=\"10.app-deploy\">10.迁移到华为/阿里云</a>\n<ul>\n<li><a href=\"10.1.export-images\">10.1.工具导出镜像</a></li>\n<li><a href=\"10.2.import-images\">10.2.镜像导入</a></li>\n<li><a href=\"10.3.app-create\">10.3.应用创建</a></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>华为云 培训</h1>\n<p>.</p>\n<ul>\n<li><a href=\"README\">Introduction</a></li>\n<li><a href=\"1.infrustructure\">1.华为云架构</a></li>\n<li><a href=\"2.app-deploy\">2.集群部署</a>\n<ul>\n<li><a href=\"2.1.app-vpc\">2.1.虚拟私有云</a></li>\n<li><a href=\"2.2.app-ip\">2.2.弹性IP</a></li>\n<li><a href=\"2.3.app-k8s\">2.3.集群创建</a></li>\n</ul>\n</li>\n<li><a href=\"3.app-deploy\">3.应用部署</a>\n<ul>\n<li><a href=\"3.1.app-swr\">3.1.镜像上传</a></li>\n<li><a href=\"3.2.app-deploy-k8s\">3.2.镜像部署</a></li>\n<li><a href=\"3.3.app-deploy-svc\">3.3.访问方式</a></li>\n</ul>\n</li>\n<li><a href=\"3.app-monitor\">4.监控</a></li>\n</ul>\n<hr>\n<h1>阿里云 培训</h1>\n<p>.</p>\n<ul>\n<li><a href=\"README\">Introduction</a></li>\n<li><a href=\"5.infrustructure\">5.阿里云架构</a></li>\n<li><a href=\"6.app-deploy\">6.集群部署</a>\n<ul>\n<li><a href=\"6.1.app-k8s-create\">6.1.创建集群</a></li>\n<li><a href=\"6.2.app-ip\">6.2.创建命名空间</a></li>\n<li><a href=\"6.3.app-k8s\">6.3.导入集群</a></li>\n</ul>\n</li>\n<li><a href=\"7.app-deploy\">7.应用部署</a>\n<ul>\n<li><a href=\"7.1.app-swr\">7.1.镜像上传</a></li>\n<li><a href=\"7.2.app-deploy-k8s\">7.2.镜像部署</a></li>\n<li><a href=\"7.3.app-deploy-svc\">7.3.访问方式</a></li>\n</ul>\n</li>\n<li><a href=\"8.app-monitor\">8.监控</a></li>\n</ul>\n<hr>\n<h1>容器云 培训</h1>\n<p>.</p>\n<ul>\n<li><a href=\"README\">Introduction</a></li>\n<li><a href=\"9.infrustructure\">9.容器云架构</a></li>\n<li><a href=\"10.app-deploy\">10.迁移到华为/阿里云</a>\n<ul>\n<li><a href=\"10.1.export-images\">10.1.工具导出镜像</a></li>\n<li><a href=\"10.2.import-images\">10.2.镜像导入</a></li>\n<li><a href=\"10.3.app-create\">10.3.应用创建</a></li>\n</ul>\n</li>\n</ul>\n"},{"_content":"\n\n# 容器云平台架构\n\n![ccs-infrustructure](image/ccs-infrustructure.png)\n\n1. 容器云管理平台：独立于k8s部署，用于管理项目在k8s中的集成部署\n2. 容器云平台支持`多租户`、`多K8S集群`的管理\n3. 容器云平台不负责k8s集群的创建，只负责k8s集群的使用；任意已安装好的k8s集群可以接入到k8s集群；可以通过“云管平台”或\"自己手动创建k8s集群\"并接入到容器云平台\n4. 容器云平台提供docker镜像服务，统一管理各项目组的docker镜像\n","source":"cok-book/1.ccs-infrustructure.md","raw":"\n\n# 容器云平台架构\n\n![ccs-infrustructure](image/ccs-infrustructure.png)\n\n1. 容器云管理平台：独立于k8s部署，用于管理项目在k8s中的集成部署\n2. 容器云平台支持`多租户`、`多K8S集群`的管理\n3. 容器云平台不负责k8s集群的创建，只负责k8s集群的使用；任意已安装好的k8s集群可以接入到k8s集群；可以通过“云管平台”或\"自己手动创建k8s集群\"并接入到容器云平台\n4. 容器云平台提供docker镜像服务，统一管理各项目组的docker镜像\n","date":"2021-07-19T06:44:32.337Z","updated":"2021-01-14T01:19:27.967Z","path":"cok-book/1.ccs-infrustructure.html","title":"","comments":1,"layout":"page","_id":"ckrac7xak001cz8s6cy9dfk4p","content":"<h1>容器云平台架构</h1>\n<p><img src=\"image/ccs-infrustructure.png\" alt=\"ccs-infrustructure\"></p>\n<ol>\n<li>容器云管理平台：独立于k8s部署，用于管理项目在k8s中的集成部署</li>\n<li>容器云平台支持<code>多租户</code>、<code>多K8S集群</code>的管理</li>\n<li>容器云平台不负责k8s集群的创建，只负责k8s集群的使用；任意已安装好的k8s集群可以接入到k8s集群；可以通过“云管平台”或&quot;自己手动创建k8s集群&quot;并接入到容器云平台</li>\n<li>容器云平台提供docker镜像服务，统一管理各项目组的docker镜像</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1>容器云平台架构</h1>\n<p><img src=\"image/ccs-infrustructure.png\" alt=\"ccs-infrustructure\"></p>\n<ol>\n<li>容器云管理平台：独立于k8s部署，用于管理项目在k8s中的集成部署</li>\n<li>容器云平台支持<code>多租户</code>、<code>多K8S集群</code>的管理</li>\n<li>容器云平台不负责k8s集群的创建，只负责k8s集群的使用；任意已安装好的k8s集群可以接入到k8s集群；可以通过“云管平台”或&quot;自己手动创建k8s集群&quot;并接入到容器云平台</li>\n<li>容器云平台提供docker镜像服务，统一管理各项目组的docker镜像</li>\n</ol>\n"},{"_content":"# 容器云平台架构能做什么\n\n## 1. 基于容器的持续集成\n\n![20200512_180022_95](image/20200512_180022_95.png)\n\n## 2. 简化K8S部署\n- 在一个界面中可以完成代码到k8s配置部署的所有工作\n![20200512_180238_75](image/20200512_180238_75.png)\n\n### 2.1 部署基本配置\n\n![20200528_113757_63](image/20200528_113757_63.png)\n\n#### 2.1.1 配置部署副本集数量\n表示部署的副本集数量:\n- 容器云平台通过Kubernetes中的Deployment资源来部署容器\n这里的[部署副本数]与Deployment资源中的Replicas属性对应（表示部署的Pod数量）\n- 通过容器云平台部署的Deployment资源中，一个Pod只有一个容器（与每个任务中配置或构建的镜像对应）。\n#### 2.1.2 配置内存和CPU资源限制\n##### 2.1.2.1 内存限制\n表示容器运行的最大内存限制:\n- 容器内存限制的单位为兆（M），如果配置为1024，表示容器的最大内存为1024M\n- 如果配置为空，表示不对容器的做内存限制\n- 容器的最大内存与容器中运行的程序有关，比如jkd7的tomcat容器中配置的JVM参数为[-Xmx1024M -XX:MaxPermSize=512M -Xss256k]，则可以预估该容器的最大内存为1736M（1024M堆区内存 + 512M方法区内存 + 200M预估的栈区内存）\n##### 2.1.2.2 CPU限制\n表示容器运行的最大CPU限制:\n容器内存限制的单位为（m），1核=1000M（如果配置为100，表示容器的最大CPU为0.1核）\n如果配置为空，表示不对容器的做CPU限制\n容器的最大CPU与容器中运行的程序有关，比如预估某个tomcat容器的峰值CPU为200%，则可以设置CPU限制为2000\n#### 2.1.3 配置弹性扩展\n配置弹性扩展是否启用，如果配置为启用，则CPU达到阀值后，将自动扩展部署副本集\n#### 2.1.4 配置健康检查\n配置是否启用容器的监控检测，如果开启健康检测，且检测到容器的TCP/HTTP服务不可用，将自动重启容器:\n- 禁用：表示不做监控检测\n- TCP：表示通过TCP端口探测的方式检测容器是否正常（如果TCP端口连接正常，表示容器正常，否则表示容器异常）\n- HTTP：表示通过HTTP请求的方式，探测的方式检测容器是否正常（如果HTTP Get返回200，表示容器正常，否则表示容器异常）\n\n\n### 2.2 存储挂载\n\n![20200528_113907_78](image/20200528_113907_78.png)\n\n挂载NFS/CEPH等存储\n### 2.3 文件挂载\n- 文件挂载用于挂载容器中的程序运行所需要的某些配置文件（如容器中的SpringBoot启动需要的bootstrap.yml和application.yml）\n- 文件挂载功能建配置文件存储在Kubernetes的ConfigMap中，以Volume的形式挂载为容器内部的文件。\n\n### 2.4 环境变量\n\n![20200528_113947_25](image/20200528_113947_25.png)\n\n配置容器运行所需要的环境变量。\n比如：通过LANG环境变量设置alpine/centos容器的语言；通过JAVA_OPTS设置tomcat容器的Java启动参数。\n\n### 2.5 主机别名\n\n![20200528_114045_70](image/20200528_114045_70.png)\n\n配置容器中的/etc/hosts主机别名。请确保您的Pod所在的Kubernetes集群到目标主机的网络可达。\n\n### 2.6 服务入口\n\n![20200528_114125_42](image/20200528_114125_42.png)\n\n配置容器提供的服务：\n- **`目标端口`**：表示容器内部的端口（比如：tomcat容器的8080端口）\n- **`集群端口`**：表示Kubernetes中的ClusterIP端口，该端口在Kubernetes<font color=red>集群内部可以访问</font>，通过\"任务名:集群端口\"的方式访问（比如：user任务部署中定义了一个18080集群端口，对应的目标端口为8080，则其他Pod可以通过user:18080访问user任务的8080端口）\n- **`节点端口`**：表示Kubernetes中的NodePort端口。通过设置节点端口，可以将目标端口映射到Kubernetes集群中的每台物理节点。可以在Kubernetes<font color=red size=3>集群外部</font>通过集群中任意物理节点的IP+节点端口访问。\n- **`访问域名`**：表示Kubernetes中的Ingress服务。通过设置访问域名，可以将目标端口配置到Kubernetes集群中每个节点的软负载均衡（将配置的域名解析到任意Kubernetes节点后，就可以<font color=red size=3>通过域名的方式访问</font>对应的目标端口服务）\n\n### 2.7 任务的安装/重启/卸载/删除\n- **`安装`**：构建（编译java/go/js等代码，并打成docker镜像）并部署容器\n- **`重启`**：仅部署容器\n- **`卸载`**：卸载已部署的容器\n- **`删除`**：删除配置的任务，并卸载已部署的容器\n\n![20200528_122116_76](image/20200528_122116_76.png)\n\n## 3. 自定义任务模板\n\n![20200512_180521_54](image/20200512_180521_54.png)\n- 集成部署模板\n\n![20200528_114217_64](image/20200528_114217_64.png)\n\n## 4. 应用商店\n\n![20200512_180656_16](image/20200512_180656_16.png)\n\n## 5. 多租户多k8s集群管理\n\n![20200512_180812_45](image/20200512_180812_45.png)\n\n\n## 6. 版本管理\n\n![20200527_142056_12](image/20200527_142056_12.png)\n","source":"cok-book/2.what-ccs-todo.md","raw":"# 容器云平台架构能做什么\n\n## 1. 基于容器的持续集成\n\n![20200512_180022_95](image/20200512_180022_95.png)\n\n## 2. 简化K8S部署\n- 在一个界面中可以完成代码到k8s配置部署的所有工作\n![20200512_180238_75](image/20200512_180238_75.png)\n\n### 2.1 部署基本配置\n\n![20200528_113757_63](image/20200528_113757_63.png)\n\n#### 2.1.1 配置部署副本集数量\n表示部署的副本集数量:\n- 容器云平台通过Kubernetes中的Deployment资源来部署容器\n这里的[部署副本数]与Deployment资源中的Replicas属性对应（表示部署的Pod数量）\n- 通过容器云平台部署的Deployment资源中，一个Pod只有一个容器（与每个任务中配置或构建的镜像对应）。\n#### 2.1.2 配置内存和CPU资源限制\n##### 2.1.2.1 内存限制\n表示容器运行的最大内存限制:\n- 容器内存限制的单位为兆（M），如果配置为1024，表示容器的最大内存为1024M\n- 如果配置为空，表示不对容器的做内存限制\n- 容器的最大内存与容器中运行的程序有关，比如jkd7的tomcat容器中配置的JVM参数为[-Xmx1024M -XX:MaxPermSize=512M -Xss256k]，则可以预估该容器的最大内存为1736M（1024M堆区内存 + 512M方法区内存 + 200M预估的栈区内存）\n##### 2.1.2.2 CPU限制\n表示容器运行的最大CPU限制:\n容器内存限制的单位为（m），1核=1000M（如果配置为100，表示容器的最大CPU为0.1核）\n如果配置为空，表示不对容器的做CPU限制\n容器的最大CPU与容器中运行的程序有关，比如预估某个tomcat容器的峰值CPU为200%，则可以设置CPU限制为2000\n#### 2.1.3 配置弹性扩展\n配置弹性扩展是否启用，如果配置为启用，则CPU达到阀值后，将自动扩展部署副本集\n#### 2.1.4 配置健康检查\n配置是否启用容器的监控检测，如果开启健康检测，且检测到容器的TCP/HTTP服务不可用，将自动重启容器:\n- 禁用：表示不做监控检测\n- TCP：表示通过TCP端口探测的方式检测容器是否正常（如果TCP端口连接正常，表示容器正常，否则表示容器异常）\n- HTTP：表示通过HTTP请求的方式，探测的方式检测容器是否正常（如果HTTP Get返回200，表示容器正常，否则表示容器异常）\n\n\n### 2.2 存储挂载\n\n![20200528_113907_78](image/20200528_113907_78.png)\n\n挂载NFS/CEPH等存储\n### 2.3 文件挂载\n- 文件挂载用于挂载容器中的程序运行所需要的某些配置文件（如容器中的SpringBoot启动需要的bootstrap.yml和application.yml）\n- 文件挂载功能建配置文件存储在Kubernetes的ConfigMap中，以Volume的形式挂载为容器内部的文件。\n\n### 2.4 环境变量\n\n![20200528_113947_25](image/20200528_113947_25.png)\n\n配置容器运行所需要的环境变量。\n比如：通过LANG环境变量设置alpine/centos容器的语言；通过JAVA_OPTS设置tomcat容器的Java启动参数。\n\n### 2.5 主机别名\n\n![20200528_114045_70](image/20200528_114045_70.png)\n\n配置容器中的/etc/hosts主机别名。请确保您的Pod所在的Kubernetes集群到目标主机的网络可达。\n\n### 2.6 服务入口\n\n![20200528_114125_42](image/20200528_114125_42.png)\n\n配置容器提供的服务：\n- **`目标端口`**：表示容器内部的端口（比如：tomcat容器的8080端口）\n- **`集群端口`**：表示Kubernetes中的ClusterIP端口，该端口在Kubernetes<font color=red>集群内部可以访问</font>，通过\"任务名:集群端口\"的方式访问（比如：user任务部署中定义了一个18080集群端口，对应的目标端口为8080，则其他Pod可以通过user:18080访问user任务的8080端口）\n- **`节点端口`**：表示Kubernetes中的NodePort端口。通过设置节点端口，可以将目标端口映射到Kubernetes集群中的每台物理节点。可以在Kubernetes<font color=red size=3>集群外部</font>通过集群中任意物理节点的IP+节点端口访问。\n- **`访问域名`**：表示Kubernetes中的Ingress服务。通过设置访问域名，可以将目标端口配置到Kubernetes集群中每个节点的软负载均衡（将配置的域名解析到任意Kubernetes节点后，就可以<font color=red size=3>通过域名的方式访问</font>对应的目标端口服务）\n\n### 2.7 任务的安装/重启/卸载/删除\n- **`安装`**：构建（编译java/go/js等代码，并打成docker镜像）并部署容器\n- **`重启`**：仅部署容器\n- **`卸载`**：卸载已部署的容器\n- **`删除`**：删除配置的任务，并卸载已部署的容器\n\n![20200528_122116_76](image/20200528_122116_76.png)\n\n## 3. 自定义任务模板\n\n![20200512_180521_54](image/20200512_180521_54.png)\n- 集成部署模板\n\n![20200528_114217_64](image/20200528_114217_64.png)\n\n## 4. 应用商店\n\n![20200512_180656_16](image/20200512_180656_16.png)\n\n## 5. 多租户多k8s集群管理\n\n![20200512_180812_45](image/20200512_180812_45.png)\n\n\n## 6. 版本管理\n\n![20200527_142056_12](image/20200527_142056_12.png)\n","date":"2021-07-19T06:44:32.351Z","updated":"2021-01-14T01:19:27.711Z","path":"cok-book/2.what-ccs-todo.html","title":"","comments":1,"layout":"page","_id":"ckrac7xam001dz8s6eb0b1gw8","content":"<h1>容器云平台架构能做什么</h1>\n<h2 id=\"1-基于容器的持续集成\">1. 基于容器的持续集成</h2>\n<p><img src=\"image/20200512_180022_95.png\" alt=\"20200512_180022_95\"></p>\n<h2 id=\"2-简化K8S部署\">2. 简化K8S部署</h2>\n<ul>\n<li>在一个界面中可以完成代码到k8s配置部署的所有工作<br>\n<img src=\"image/20200512_180238_75.png\" alt=\"20200512_180238_75\"></li>\n</ul>\n<h3 id=\"2-1-部署基本配置\">2.1 部署基本配置</h3>\n<p><img src=\"image/20200528_113757_63.png\" alt=\"20200528_113757_63\"></p>\n<h4 id=\"2-1-1-配置部署副本集数量\">2.1.1 配置部署副本集数量</h4>\n<p>表示部署的副本集数量:</p>\n<ul>\n<li>容器云平台通过Kubernetes中的Deployment资源来部署容器<br>\n这里的[部署副本数]与Deployment资源中的Replicas属性对应（表示部署的Pod数量）</li>\n<li>通过容器云平台部署的Deployment资源中，一个Pod只有一个容器（与每个任务中配置或构建的镜像对应）。</li>\n</ul>\n<h4 id=\"2-1-2-配置内存和CPU资源限制\">2.1.2 配置内存和CPU资源限制</h4>\n<h5 id=\"2-1-2-1-内存限制\">2.1.2.1 内存限制</h5>\n<p>表示容器运行的最大内存限制:</p>\n<ul>\n<li>容器内存限制的单位为兆（M），如果配置为1024，表示容器的最大内存为1024M</li>\n<li>如果配置为空，表示不对容器的做内存限制</li>\n<li>容器的最大内存与容器中运行的程序有关，比如jkd7的tomcat容器中配置的JVM参数为[-Xmx1024M -XX:MaxPermSize=512M -Xss256k]，则可以预估该容器的最大内存为1736M（1024M堆区内存 + 512M方法区内存 + 200M预估的栈区内存）</li>\n</ul>\n<h5 id=\"2-1-2-2-CPU限制\">2.1.2.2 CPU限制</h5>\n<p>表示容器运行的最大CPU限制:<br>\n容器内存限制的单位为（m），1核=1000M（如果配置为100，表示容器的最大CPU为0.1核）<br>\n如果配置为空，表示不对容器的做CPU限制<br>\n容器的最大CPU与容器中运行的程序有关，比如预估某个tomcat容器的峰值CPU为200%，则可以设置CPU限制为2000</p>\n<h4 id=\"2-1-3-配置弹性扩展\">2.1.3 配置弹性扩展</h4>\n<p>配置弹性扩展是否启用，如果配置为启用，则CPU达到阀值后，将自动扩展部署副本集</p>\n<h4 id=\"2-1-4-配置健康检查\">2.1.4 配置健康检查</h4>\n<p>配置是否启用容器的监控检测，如果开启健康检测，且检测到容器的TCP/HTTP服务不可用，将自动重启容器:</p>\n<ul>\n<li>禁用：表示不做监控检测</li>\n<li>TCP：表示通过TCP端口探测的方式检测容器是否正常（如果TCP端口连接正常，表示容器正常，否则表示容器异常）</li>\n<li>HTTP：表示通过HTTP请求的方式，探测的方式检测容器是否正常（如果HTTP Get返回200，表示容器正常，否则表示容器异常）</li>\n</ul>\n<h3 id=\"2-2-存储挂载\">2.2 存储挂载</h3>\n<p><img src=\"image/20200528_113907_78.png\" alt=\"20200528_113907_78\"></p>\n<p>挂载NFS/CEPH等存储</p>\n<h3 id=\"2-3-文件挂载\">2.3 文件挂载</h3>\n<ul>\n<li>文件挂载用于挂载容器中的程序运行所需要的某些配置文件（如容器中的SpringBoot启动需要的bootstrap.yml和application.yml）</li>\n<li>文件挂载功能建配置文件存储在Kubernetes的ConfigMap中，以Volume的形式挂载为容器内部的文件。</li>\n</ul>\n<h3 id=\"2-4-环境变量\">2.4 环境变量</h3>\n<p><img src=\"image/20200528_113947_25.png\" alt=\"20200528_113947_25\"></p>\n<p>配置容器运行所需要的环境变量。<br>\n比如：通过LANG环境变量设置alpine/centos容器的语言；通过JAVA_OPTS设置tomcat容器的Java启动参数。</p>\n<h3 id=\"2-5-主机别名\">2.5 主机别名</h3>\n<p><img src=\"image/20200528_114045_70.png\" alt=\"20200528_114045_70\"></p>\n<p>配置容器中的/etc/hosts主机别名。请确保您的Pod所在的Kubernetes集群到目标主机的网络可达。</p>\n<h3 id=\"2-6-服务入口\">2.6 服务入口</h3>\n<p><img src=\"image/20200528_114125_42.png\" alt=\"20200528_114125_42\"></p>\n<p>配置容器提供的服务：</p>\n<ul>\n<li><strong><code>目标端口</code></strong>：表示容器内部的端口（比如：tomcat容器的8080端口）</li>\n<li><strong><code>集群端口</code></strong>：表示Kubernetes中的ClusterIP端口，该端口在Kubernetes<font color=red>集群内部可以访问</font>，通过&quot;任务名:集群端口&quot;的方式访问（比如：user任务部署中定义了一个18080集群端口，对应的目标端口为8080，则其他Pod可以通过user:18080访问user任务的8080端口）</li>\n<li><strong><code>节点端口</code></strong>：表示Kubernetes中的NodePort端口。通过设置节点端口，可以将目标端口映射到Kubernetes集群中的每台物理节点。可以在Kubernetes<font color=red size=3>集群外部</font>通过集群中任意物理节点的IP+节点端口访问。</li>\n<li><strong><code>访问域名</code></strong>：表示Kubernetes中的Ingress服务。通过设置访问域名，可以将目标端口配置到Kubernetes集群中每个节点的软负载均衡（将配置的域名解析到任意Kubernetes节点后，就可以<font color=red size=3>通过域名的方式访问</font>对应的目标端口服务）</li>\n</ul>\n<h3 id=\"2-7-任务的安装-重启-卸载-删除\">2.7 任务的安装/重启/卸载/删除</h3>\n<ul>\n<li><strong><code>安装</code></strong>：构建（编译java/go/js等代码，并打成docker镜像）并部署容器</li>\n<li><strong><code>重启</code></strong>：仅部署容器</li>\n<li><strong><code>卸载</code></strong>：卸载已部署的容器</li>\n<li><strong><code>删除</code></strong>：删除配置的任务，并卸载已部署的容器</li>\n</ul>\n<p><img src=\"image/20200528_122116_76.png\" alt=\"20200528_122116_76\"></p>\n<h2 id=\"3-自定义任务模板\">3. 自定义任务模板</h2>\n<p><img src=\"image/20200512_180521_54.png\" alt=\"20200512_180521_54\"></p>\n<ul>\n<li>集成部署模板</li>\n</ul>\n<p><img src=\"image/20200528_114217_64.png\" alt=\"20200528_114217_64\"></p>\n<h2 id=\"4-应用商店\">4. 应用商店</h2>\n<p><img src=\"image/20200512_180656_16.png\" alt=\"20200512_180656_16\"></p>\n<h2 id=\"5-多租户多k8s集群管理\">5. 多租户多k8s集群管理</h2>\n<p><img src=\"image/20200512_180812_45.png\" alt=\"20200512_180812_45\"></p>\n<h2 id=\"6-版本管理\">6. 版本管理</h2>\n<p><img src=\"image/20200527_142056_12.png\" alt=\"20200527_142056_12\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>容器云平台架构能做什么</h1>\n<h2 id=\"1-基于容器的持续集成\">1. 基于容器的持续集成</h2>\n<p><img src=\"image/20200512_180022_95.png\" alt=\"20200512_180022_95\"></p>\n<h2 id=\"2-简化K8S部署\">2. 简化K8S部署</h2>\n<ul>\n<li>在一个界面中可以完成代码到k8s配置部署的所有工作<br>\n<img src=\"image/20200512_180238_75.png\" alt=\"20200512_180238_75\"></li>\n</ul>\n<h3 id=\"2-1-部署基本配置\">2.1 部署基本配置</h3>\n<p><img src=\"image/20200528_113757_63.png\" alt=\"20200528_113757_63\"></p>\n<h4 id=\"2-1-1-配置部署副本集数量\">2.1.1 配置部署副本集数量</h4>\n<p>表示部署的副本集数量:</p>\n<ul>\n<li>容器云平台通过Kubernetes中的Deployment资源来部署容器<br>\n这里的[部署副本数]与Deployment资源中的Replicas属性对应（表示部署的Pod数量）</li>\n<li>通过容器云平台部署的Deployment资源中，一个Pod只有一个容器（与每个任务中配置或构建的镜像对应）。</li>\n</ul>\n<h4 id=\"2-1-2-配置内存和CPU资源限制\">2.1.2 配置内存和CPU资源限制</h4>\n<h5 id=\"2-1-2-1-内存限制\">2.1.2.1 内存限制</h5>\n<p>表示容器运行的最大内存限制:</p>\n<ul>\n<li>容器内存限制的单位为兆（M），如果配置为1024，表示容器的最大内存为1024M</li>\n<li>如果配置为空，表示不对容器的做内存限制</li>\n<li>容器的最大内存与容器中运行的程序有关，比如jkd7的tomcat容器中配置的JVM参数为[-Xmx1024M -XX:MaxPermSize=512M -Xss256k]，则可以预估该容器的最大内存为1736M（1024M堆区内存 + 512M方法区内存 + 200M预估的栈区内存）</li>\n</ul>\n<h5 id=\"2-1-2-2-CPU限制\">2.1.2.2 CPU限制</h5>\n<p>表示容器运行的最大CPU限制:<br>\n容器内存限制的单位为（m），1核=1000M（如果配置为100，表示容器的最大CPU为0.1核）<br>\n如果配置为空，表示不对容器的做CPU限制<br>\n容器的最大CPU与容器中运行的程序有关，比如预估某个tomcat容器的峰值CPU为200%，则可以设置CPU限制为2000</p>\n<h4 id=\"2-1-3-配置弹性扩展\">2.1.3 配置弹性扩展</h4>\n<p>配置弹性扩展是否启用，如果配置为启用，则CPU达到阀值后，将自动扩展部署副本集</p>\n<h4 id=\"2-1-4-配置健康检查\">2.1.4 配置健康检查</h4>\n<p>配置是否启用容器的监控检测，如果开启健康检测，且检测到容器的TCP/HTTP服务不可用，将自动重启容器:</p>\n<ul>\n<li>禁用：表示不做监控检测</li>\n<li>TCP：表示通过TCP端口探测的方式检测容器是否正常（如果TCP端口连接正常，表示容器正常，否则表示容器异常）</li>\n<li>HTTP：表示通过HTTP请求的方式，探测的方式检测容器是否正常（如果HTTP Get返回200，表示容器正常，否则表示容器异常）</li>\n</ul>\n<h3 id=\"2-2-存储挂载\">2.2 存储挂载</h3>\n<p><img src=\"image/20200528_113907_78.png\" alt=\"20200528_113907_78\"></p>\n<p>挂载NFS/CEPH等存储</p>\n<h3 id=\"2-3-文件挂载\">2.3 文件挂载</h3>\n<ul>\n<li>文件挂载用于挂载容器中的程序运行所需要的某些配置文件（如容器中的SpringBoot启动需要的bootstrap.yml和application.yml）</li>\n<li>文件挂载功能建配置文件存储在Kubernetes的ConfigMap中，以Volume的形式挂载为容器内部的文件。</li>\n</ul>\n<h3 id=\"2-4-环境变量\">2.4 环境变量</h3>\n<p><img src=\"image/20200528_113947_25.png\" alt=\"20200528_113947_25\"></p>\n<p>配置容器运行所需要的环境变量。<br>\n比如：通过LANG环境变量设置alpine/centos容器的语言；通过JAVA_OPTS设置tomcat容器的Java启动参数。</p>\n<h3 id=\"2-5-主机别名\">2.5 主机别名</h3>\n<p><img src=\"image/20200528_114045_70.png\" alt=\"20200528_114045_70\"></p>\n<p>配置容器中的/etc/hosts主机别名。请确保您的Pod所在的Kubernetes集群到目标主机的网络可达。</p>\n<h3 id=\"2-6-服务入口\">2.6 服务入口</h3>\n<p><img src=\"image/20200528_114125_42.png\" alt=\"20200528_114125_42\"></p>\n<p>配置容器提供的服务：</p>\n<ul>\n<li><strong><code>目标端口</code></strong>：表示容器内部的端口（比如：tomcat容器的8080端口）</li>\n<li><strong><code>集群端口</code></strong>：表示Kubernetes中的ClusterIP端口，该端口在Kubernetes<font color=red>集群内部可以访问</font>，通过&quot;任务名:集群端口&quot;的方式访问（比如：user任务部署中定义了一个18080集群端口，对应的目标端口为8080，则其他Pod可以通过user:18080访问user任务的8080端口）</li>\n<li><strong><code>节点端口</code></strong>：表示Kubernetes中的NodePort端口。通过设置节点端口，可以将目标端口映射到Kubernetes集群中的每台物理节点。可以在Kubernetes<font color=red size=3>集群外部</font>通过集群中任意物理节点的IP+节点端口访问。</li>\n<li><strong><code>访问域名</code></strong>：表示Kubernetes中的Ingress服务。通过设置访问域名，可以将目标端口配置到Kubernetes集群中每个节点的软负载均衡（将配置的域名解析到任意Kubernetes节点后，就可以<font color=red size=3>通过域名的方式访问</font>对应的目标端口服务）</li>\n</ul>\n<h3 id=\"2-7-任务的安装-重启-卸载-删除\">2.7 任务的安装/重启/卸载/删除</h3>\n<ul>\n<li><strong><code>安装</code></strong>：构建（编译java/go/js等代码，并打成docker镜像）并部署容器</li>\n<li><strong><code>重启</code></strong>：仅部署容器</li>\n<li><strong><code>卸载</code></strong>：卸载已部署的容器</li>\n<li><strong><code>删除</code></strong>：删除配置的任务，并卸载已部署的容器</li>\n</ul>\n<p><img src=\"image/20200528_122116_76.png\" alt=\"20200528_122116_76\"></p>\n<h2 id=\"3-自定义任务模板\">3. 自定义任务模板</h2>\n<p><img src=\"image/20200512_180521_54.png\" alt=\"20200512_180521_54\"></p>\n<ul>\n<li>集成部署模板</li>\n</ul>\n<p><img src=\"image/20200528_114217_64.png\" alt=\"20200528_114217_64\"></p>\n<h2 id=\"4-应用商店\">4. 应用商店</h2>\n<p><img src=\"image/20200512_180656_16.png\" alt=\"20200512_180656_16\"></p>\n<h2 id=\"5-多租户多k8s集群管理\">5. 多租户多k8s集群管理</h2>\n<p><img src=\"image/20200512_180812_45.png\" alt=\"20200512_180812_45\"></p>\n<h2 id=\"6-版本管理\">6. 版本管理</h2>\n<p><img src=\"image/20200527_142056_12.png\" alt=\"20200527_142056_12\"></p>\n"},{"_content":"# 部署在docker中\n\n## 0. 环境准备：\n- 服务器操作系统：建议CentOS 7 以上（Windows环境理论上也可以，未测试）\n- 确保服务器能够从公网下载docker镜像，以及能够从公网maven仓库拉取依赖jar包\n- 安装了docker：建议docker v18.09.5\n- 安装了GIT\n- 安装了JDK：需要JDK 8或以上版本\n- 安装了MAVEN\n- 安装了NPM打包工具\n- 下载测试源代码：\n```shell\ngit clone https://gitee.com/olivee/cok.git\n```\n\n## 1. 如果全部以jar方式部署，参考如下流程说明\n\n### 1.1 打包镜像文件\n\n打包脚本参考源代码中的 `build-in-java.sh`\n\n```shell\n# 打包前端代码\ncd cok-source-vue\nnpm install\nif [ \"$?\" -ne 0 ]; then echo \"npm install package failed\"; exit 1; fi\nnpm run build\nif [ \"$?\" -ne 0 ]; then echo \"npm run build failed\"; exit 1; fi\n\n# 拷贝前端代码到cok-source-java-ui项目的static目录\ncd ..\nrm -rf cok-source-java/cok-source-java-ui/src/main/resources/static\ncp -R cok-source-vue/dist cok-source-java/cok-source-java-ui/src/main/resources/static\n\n# maven打包java程序\ncd cok-source-java\nmvn package\nif [ \"$?\" -ne 0 ]; then echo \"maven build failed\"; exit 1; fi\n\n# 打包dockerfile\ncd cok-source-java-eureka\ndocker build -t cok-source-java-eureka:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build eureka failed\"; exit 1; fi\n\ncd ../cok-source-java-zuul\ndocker build -t cok-source-java-zuul:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build zuul failed\"; exit 1; fi\n\ncd ../cok-source-java-service1\ndocker build -t cok-source-java-service1:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build service1 failed\"; exit 1; fi\n\ncd ../cok-source-java-ui\ndocker build -t cok-source-java-ui:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build ui failed\"; exit 1; fi\n```\n\n查看已打好的镜像\n```shell\n[root@xxx cok]# docker images|grep cok\ncok-source-java-service1                                                                   v0.0.1                         bae8db875a82        11 days ago         171MB\ncok-source-java-ui                                                                         v0.0.1                         a4568cb0faee        12 days ago         152MB\ncok-source-java-zuul                                                                       v0.0.1                         897d8794f353        12 days ago         151MB\ncok-source-java-eureka                                                                     v0.0.1                         67f3bf22d247        12 days ago         154MB\n```\n\n### 1.2 启动容器\n\n- 注意：<font color=red>每个服务启动后，需要等容器内部的服务启动成功完成后，再启动后续的服务</font>\n- 通过`docker logs -f 容器名`查看容器的日志，如果`docker logs -f cok-eureka`查看`cok-eureka`容器的日志\n\n查看容器日志截图：\n![20200521_114252_61](image/20200521_114252_61.png)\n\n#### 1.2.1 启动 cok-mysql 容器\n这里先启动一个临时的mysql，由于只是临时用，因此没加存储。容器销毁后数据会丢失。（测试或生产环境不要以以下方式启动mysql，需要改为挂存储启动）\n```shell\ndocker run --name cok-mysql  --restart=always  -p 25306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7.30\n```\n可以用服务器的IP、25306、root账号、密码123456，连接mysql，测试mysql是否正常启动\n\n#### 1.2.2 启动 cok-eureka 容器\n\n```shell\ndocker run --name cok-eureka -d --network=host cok-source-java-eureka:v0.0.1\n```\n\n注意： 该容器默认启动的是`18761`端口\n\n\n#### 1.2.3 启动 cok-zuul 容器\n\n```shell\ndocker run --name cok-zuul -d --network=host cok-source-java-zuul:v0.0.1\n```\n\n注意： 该服务默认启动的是`18762`端口\n\n#### 1.2.4 启动 cok-service1 容器\n\n```shell\ndocker run --name cok-service1 -d --network=host -e MYSQL_HOST=127.0.0.1 -e MYSQL_PORT=25306 -e MYSQL_DATABASE=mysql -e MYSQL_USER=root -e MYSQL_PASSWORD=123456 cok-source-java-service1:v0.0.1\n```\n- 这里启动service1服务器，服务配置连接到刚才启动的临时mysql（也可以连接到已有的其它mysql服务，修改连接参数即可）\n\n#### 1.2.5 启动 cok-java-ui 容器\n\n```shell\ndocker run --name cok-java-ui -d --network=host cok-source-java-ui:v0.0.1\n```\n\n### 1.3 测试服务\n\n- 测试访问eureka服务,通过`http://ip地址:18761/`访问，如：\n[http://192.168.3.6:18761/](http://192.168.3.6:18761/)\n![20200521_132148_85](image/20200521_132148_85.png)\n\n- 访问java-ui服务,通过`http://ip地址:18762/cok-ui/index.html`访问，如：[http://192.168.3.6:18762/cok-ui/index.html](http://192.168.3.6:18762/cok-ui/index.html)\n![20200521_132204_66](image/20200521_132204_66.png)\n\n## 2. 如果eureka、zuul、service1以jar方式部署，ui以nginx方式部署，参考如下流程说明\n### 2.1 打包镜像文件\n打包脚本参考源代码中的 `build-in-nginx.sh`\n```shell\n# 打包前端代码\ncd cok-source-vue\nnpm install\nif [ \"$?\" -ne 0 ]; then echo \"npm install package failed\"; exit 1; fi\nnpm run build\nif [ \"$?\" -ne 0 ]; then echo \"npm run build failed\"; exit 1; fi\n\n# 打包vue dockerfile\ndocker build -t cok-source-vue:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build vue failed\"; exit 1; fi\n\n# maven打包java程序\ncd ../cok-source-java\nmvn package\nif [ \"$?\" -ne 0 ]; then echo \"maven build failed\"; exit 1; fi\n\n# 打包dockerfile\ncd cok-source-java-eureka\ndocker build -t cok-source-java-eureka:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build eureka failed\"; exit 1; fi\n\ncd ../cok-source-java-zuul\ndocker build -t cok-source-java-zuul:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build zuul failed\"; exit 1; fi\n\ncd ../cok-source-java-service1\ndocker build -t cok-source-java-service1:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build service1 failed\"; exit 1; fi\n```\n\n### 2.2 启动容器\n\n#### 2.2.1 启动 cok-mysql、cok-eureka、cok-zuul、cok-service1容器\n启动方式和`1.2.1 启动 cok-mysql 容器`、`1.2.2 启动 cok-eureka 容器`、`1.2.3 启动 cok-zuul 容器`、`1.2.4 启动 cok-service1 容器`一致，可以参考前面的文档\n\n注意：cok-mysql、cok-eureka、cok-zuul、cok-service1服务在一个服务器上<font color=red>只能启动一次</font>，有用我们的容器是以host网络（`--network=host`）的方式启动的，因此如果同一个镜像启动两次，后启动的容器会由于端口冲突而启动失败\n\n####2.2.1 启动 cok-vue-ui 服务\n\n```shell\ndocker run --name cok-vue-ui -d -p 18765:80 cok-source-vue:v0.0.1\n```\n\n### 2.3 测试服务\n- 访问java-ui服务,通过`http://ip地址:18765/cok-ui/index.html`访问，如：[http://192.168.3.6:18765/cok-ui/index.html](http://192.168.3.6:18765/cok-ui/index.html)\n\n![20200521_133917_56](image/20200521_133917_56.png)\n\n## 3. 两种方式区别\n\n### 全部以jar方式部署：\n- ui打包在一个微服务中，通过zuul网关访问前端页面\n\n### eureka、zuul、service1以jar方式部署，ui以nginx方式部署：\n- ui打包到nginx中，通过nginx访问前端页面\n\n## 4. 附录\n\n### 附录4.1 如果需要停止容器\n先执行docker stop，再执行docker rm，比如要停止并删除`cok-service1`容器，则执行如下命令：\n```shell\ndocker stop cok-service1\ndocker rm cok-service1\n```\n\n### 附录4.2 如果需要给容器挂载文件或目录\n在`docker run`命令启动参数中加入`-v`参数，并制定挂载的文件或目录，如下:\n```shell\ndocker run -v /opt/mysql/data:/var/lib/mysql -v /opt/mysql/my.cnf:/etc/mysql/conf.d/my-project.cnf -p 25306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7.30\n```\n- 以上命令挂载的本地的/opt/mysql/data目录到mysql容器的数据文件目录/var/lib/mysql（以实现mysql容器的持久化存储）\n- 以上命令挂载的本地的/opt/mysql/my.cnf文件到mysql容器的配置文件/etc/mysql/conf.d/my-project.cnf（以实现mysql服务的参数配置）\n\n### 附录4.3 docker以hosts网络的方式启动\n在`docker run`命令启动参数中加入`--network=host`参数\n- 如果不以hosts网络的方式启动，容器的网络将个服务器的网络隔离，容器与容器之间的网络也不通\n- 这里我们用hosts网络只是为了测试方便（为了让eureka、zuul、service1能够直接通信），具体是否需要采用hosts网络要根据业务需求来定\n\n### 附录4.4 容器的端口映射\n在`docker run`命令启动参数中加入`-p`参数，比如\n```shell\ndocker run --name cok-mysql  --restart=always  -p 25306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7.30\n```\n- 以上命令将docker容器中的3306端口映射到25306，这样就可以直接通过服务器的ip加25306端口访问mysql容器\n","source":"cok-book/3.1.project-to-docker.md","raw":"# 部署在docker中\n\n## 0. 环境准备：\n- 服务器操作系统：建议CentOS 7 以上（Windows环境理论上也可以，未测试）\n- 确保服务器能够从公网下载docker镜像，以及能够从公网maven仓库拉取依赖jar包\n- 安装了docker：建议docker v18.09.5\n- 安装了GIT\n- 安装了JDK：需要JDK 8或以上版本\n- 安装了MAVEN\n- 安装了NPM打包工具\n- 下载测试源代码：\n```shell\ngit clone https://gitee.com/olivee/cok.git\n```\n\n## 1. 如果全部以jar方式部署，参考如下流程说明\n\n### 1.1 打包镜像文件\n\n打包脚本参考源代码中的 `build-in-java.sh`\n\n```shell\n# 打包前端代码\ncd cok-source-vue\nnpm install\nif [ \"$?\" -ne 0 ]; then echo \"npm install package failed\"; exit 1; fi\nnpm run build\nif [ \"$?\" -ne 0 ]; then echo \"npm run build failed\"; exit 1; fi\n\n# 拷贝前端代码到cok-source-java-ui项目的static目录\ncd ..\nrm -rf cok-source-java/cok-source-java-ui/src/main/resources/static\ncp -R cok-source-vue/dist cok-source-java/cok-source-java-ui/src/main/resources/static\n\n# maven打包java程序\ncd cok-source-java\nmvn package\nif [ \"$?\" -ne 0 ]; then echo \"maven build failed\"; exit 1; fi\n\n# 打包dockerfile\ncd cok-source-java-eureka\ndocker build -t cok-source-java-eureka:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build eureka failed\"; exit 1; fi\n\ncd ../cok-source-java-zuul\ndocker build -t cok-source-java-zuul:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build zuul failed\"; exit 1; fi\n\ncd ../cok-source-java-service1\ndocker build -t cok-source-java-service1:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build service1 failed\"; exit 1; fi\n\ncd ../cok-source-java-ui\ndocker build -t cok-source-java-ui:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build ui failed\"; exit 1; fi\n```\n\n查看已打好的镜像\n```shell\n[root@xxx cok]# docker images|grep cok\ncok-source-java-service1                                                                   v0.0.1                         bae8db875a82        11 days ago         171MB\ncok-source-java-ui                                                                         v0.0.1                         a4568cb0faee        12 days ago         152MB\ncok-source-java-zuul                                                                       v0.0.1                         897d8794f353        12 days ago         151MB\ncok-source-java-eureka                                                                     v0.0.1                         67f3bf22d247        12 days ago         154MB\n```\n\n### 1.2 启动容器\n\n- 注意：<font color=red>每个服务启动后，需要等容器内部的服务启动成功完成后，再启动后续的服务</font>\n- 通过`docker logs -f 容器名`查看容器的日志，如果`docker logs -f cok-eureka`查看`cok-eureka`容器的日志\n\n查看容器日志截图：\n![20200521_114252_61](image/20200521_114252_61.png)\n\n#### 1.2.1 启动 cok-mysql 容器\n这里先启动一个临时的mysql，由于只是临时用，因此没加存储。容器销毁后数据会丢失。（测试或生产环境不要以以下方式启动mysql，需要改为挂存储启动）\n```shell\ndocker run --name cok-mysql  --restart=always  -p 25306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7.30\n```\n可以用服务器的IP、25306、root账号、密码123456，连接mysql，测试mysql是否正常启动\n\n#### 1.2.2 启动 cok-eureka 容器\n\n```shell\ndocker run --name cok-eureka -d --network=host cok-source-java-eureka:v0.0.1\n```\n\n注意： 该容器默认启动的是`18761`端口\n\n\n#### 1.2.3 启动 cok-zuul 容器\n\n```shell\ndocker run --name cok-zuul -d --network=host cok-source-java-zuul:v0.0.1\n```\n\n注意： 该服务默认启动的是`18762`端口\n\n#### 1.2.4 启动 cok-service1 容器\n\n```shell\ndocker run --name cok-service1 -d --network=host -e MYSQL_HOST=127.0.0.1 -e MYSQL_PORT=25306 -e MYSQL_DATABASE=mysql -e MYSQL_USER=root -e MYSQL_PASSWORD=123456 cok-source-java-service1:v0.0.1\n```\n- 这里启动service1服务器，服务配置连接到刚才启动的临时mysql（也可以连接到已有的其它mysql服务，修改连接参数即可）\n\n#### 1.2.5 启动 cok-java-ui 容器\n\n```shell\ndocker run --name cok-java-ui -d --network=host cok-source-java-ui:v0.0.1\n```\n\n### 1.3 测试服务\n\n- 测试访问eureka服务,通过`http://ip地址:18761/`访问，如：\n[http://192.168.3.6:18761/](http://192.168.3.6:18761/)\n![20200521_132148_85](image/20200521_132148_85.png)\n\n- 访问java-ui服务,通过`http://ip地址:18762/cok-ui/index.html`访问，如：[http://192.168.3.6:18762/cok-ui/index.html](http://192.168.3.6:18762/cok-ui/index.html)\n![20200521_132204_66](image/20200521_132204_66.png)\n\n## 2. 如果eureka、zuul、service1以jar方式部署，ui以nginx方式部署，参考如下流程说明\n### 2.1 打包镜像文件\n打包脚本参考源代码中的 `build-in-nginx.sh`\n```shell\n# 打包前端代码\ncd cok-source-vue\nnpm install\nif [ \"$?\" -ne 0 ]; then echo \"npm install package failed\"; exit 1; fi\nnpm run build\nif [ \"$?\" -ne 0 ]; then echo \"npm run build failed\"; exit 1; fi\n\n# 打包vue dockerfile\ndocker build -t cok-source-vue:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build vue failed\"; exit 1; fi\n\n# maven打包java程序\ncd ../cok-source-java\nmvn package\nif [ \"$?\" -ne 0 ]; then echo \"maven build failed\"; exit 1; fi\n\n# 打包dockerfile\ncd cok-source-java-eureka\ndocker build -t cok-source-java-eureka:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build eureka failed\"; exit 1; fi\n\ncd ../cok-source-java-zuul\ndocker build -t cok-source-java-zuul:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build zuul failed\"; exit 1; fi\n\ncd ../cok-source-java-service1\ndocker build -t cok-source-java-service1:v0.0.1 .\nif [ \"$?\" -ne 0 ]; then echo \"docker build service1 failed\"; exit 1; fi\n```\n\n### 2.2 启动容器\n\n#### 2.2.1 启动 cok-mysql、cok-eureka、cok-zuul、cok-service1容器\n启动方式和`1.2.1 启动 cok-mysql 容器`、`1.2.2 启动 cok-eureka 容器`、`1.2.3 启动 cok-zuul 容器`、`1.2.4 启动 cok-service1 容器`一致，可以参考前面的文档\n\n注意：cok-mysql、cok-eureka、cok-zuul、cok-service1服务在一个服务器上<font color=red>只能启动一次</font>，有用我们的容器是以host网络（`--network=host`）的方式启动的，因此如果同一个镜像启动两次，后启动的容器会由于端口冲突而启动失败\n\n####2.2.1 启动 cok-vue-ui 服务\n\n```shell\ndocker run --name cok-vue-ui -d -p 18765:80 cok-source-vue:v0.0.1\n```\n\n### 2.3 测试服务\n- 访问java-ui服务,通过`http://ip地址:18765/cok-ui/index.html`访问，如：[http://192.168.3.6:18765/cok-ui/index.html](http://192.168.3.6:18765/cok-ui/index.html)\n\n![20200521_133917_56](image/20200521_133917_56.png)\n\n## 3. 两种方式区别\n\n### 全部以jar方式部署：\n- ui打包在一个微服务中，通过zuul网关访问前端页面\n\n### eureka、zuul、service1以jar方式部署，ui以nginx方式部署：\n- ui打包到nginx中，通过nginx访问前端页面\n\n## 4. 附录\n\n### 附录4.1 如果需要停止容器\n先执行docker stop，再执行docker rm，比如要停止并删除`cok-service1`容器，则执行如下命令：\n```shell\ndocker stop cok-service1\ndocker rm cok-service1\n```\n\n### 附录4.2 如果需要给容器挂载文件或目录\n在`docker run`命令启动参数中加入`-v`参数，并制定挂载的文件或目录，如下:\n```shell\ndocker run -v /opt/mysql/data:/var/lib/mysql -v /opt/mysql/my.cnf:/etc/mysql/conf.d/my-project.cnf -p 25306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7.30\n```\n- 以上命令挂载的本地的/opt/mysql/data目录到mysql容器的数据文件目录/var/lib/mysql（以实现mysql容器的持久化存储）\n- 以上命令挂载的本地的/opt/mysql/my.cnf文件到mysql容器的配置文件/etc/mysql/conf.d/my-project.cnf（以实现mysql服务的参数配置）\n\n### 附录4.3 docker以hosts网络的方式启动\n在`docker run`命令启动参数中加入`--network=host`参数\n- 如果不以hosts网络的方式启动，容器的网络将个服务器的网络隔离，容器与容器之间的网络也不通\n- 这里我们用hosts网络只是为了测试方便（为了让eureka、zuul、service1能够直接通信），具体是否需要采用hosts网络要根据业务需求来定\n\n### 附录4.4 容器的端口映射\n在`docker run`命令启动参数中加入`-p`参数，比如\n```shell\ndocker run --name cok-mysql  --restart=always  -p 25306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7.30\n```\n- 以上命令将docker容器中的3306端口映射到25306，这样就可以直接通过服务器的ip加25306端口访问mysql容器\n","date":"2021-07-19T06:44:32.299Z","updated":"2021-01-14T01:19:27.713Z","path":"cok-book/3.1.project-to-docker.html","title":"","comments":1,"layout":"page","_id":"ckrac7xam001ez8s6auh40zj8","content":"<h1>部署在docker中</h1>\n<h2 id=\"0-环境准备：\">0. 环境准备：</h2>\n<ul>\n<li>服务器操作系统：建议CentOS 7 以上（Windows环境理论上也可以，未测试）</li>\n<li>确保服务器能够从公网下载docker镜像，以及能够从公网maven仓库拉取依赖jar包</li>\n<li>安装了docker：建议docker v18.09.5</li>\n<li>安装了GIT</li>\n<li>安装了JDK：需要JDK 8或以上版本</li>\n<li>安装了MAVEN</li>\n<li>安装了NPM打包工具</li>\n<li>下载测试源代码：</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://gitee.com/olivee/cok.git</span><br></pre></td></tr></table></figure>\n<h2 id=\"1-如果全部以jar方式部署，参考如下流程说明\">1. 如果全部以jar方式部署，参考如下流程说明</h2>\n<h3 id=\"1-1-打包镜像文件\">1.1 打包镜像文件</h3>\n<p>打包脚本参考源代码中的 <code>build-in-java.sh</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 打包前端代码</span></span><br><span class=\"line\">cd cok-source-vue</span><br><span class=\"line\">npm install</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;npm install package failed&quot;; exit 1; fi</span><br><span class=\"line\">npm run build</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;npm run build failed&quot;; exit 1; fi</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 拷贝前端代码到cok-source-java-ui项目的static目录</span></span><br><span class=\"line\">cd ..</span><br><span class=\"line\">rm -rf cok-source-java/cok-source-java-ui/src/main/resources/static</span><br><span class=\"line\">cp -R cok-source-vue/dist cok-source-java/cok-source-java-ui/src/main/resources/static</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> maven打包java程序</span></span><br><span class=\"line\">cd cok-source-java</span><br><span class=\"line\">mvn package</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;maven build failed&quot;; exit 1; fi</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 打包dockerfile</span></span><br><span class=\"line\">cd cok-source-java-eureka</span><br><span class=\"line\">docker build -t cok-source-java-eureka:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build eureka failed&quot;; exit 1; fi</span><br><span class=\"line\"></span><br><span class=\"line\">cd ../cok-source-java-zuul</span><br><span class=\"line\">docker build -t cok-source-java-zuul:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build zuul failed&quot;; exit 1; fi</span><br><span class=\"line\"></span><br><span class=\"line\">cd ../cok-source-java-service1</span><br><span class=\"line\">docker build -t cok-source-java-service1:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build service1 failed&quot;; exit 1; fi</span><br><span class=\"line\"></span><br><span class=\"line\">cd ../cok-source-java-ui</span><br><span class=\"line\">docker build -t cok-source-java-ui:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build ui failed&quot;; exit 1; fi</span><br></pre></td></tr></table></figure>\n<p>查看已打好的镜像</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@xxx cok]# docker images|grep cok</span><br><span class=\"line\">cok-source-java-service1                                                                   v0.0.1                         bae8db875a82        11 days ago         171MB</span><br><span class=\"line\">cok-source-java-ui                                                                         v0.0.1                         a4568cb0faee        12 days ago         152MB</span><br><span class=\"line\">cok-source-java-zuul                                                                       v0.0.1                         897d8794f353        12 days ago         151MB</span><br><span class=\"line\">cok-source-java-eureka                                                                     v0.0.1                         67f3bf22d247        12 days ago         154MB</span><br></pre></td></tr></table></figure>\n<h3 id=\"1-2-启动容器\">1.2 启动容器</h3>\n<ul>\n<li>注意：<font color=red>每个服务启动后，需要等容器内部的服务启动成功完成后，再启动后续的服务</font></li>\n<li>通过<code>docker logs -f 容器名</code>查看容器的日志，如果<code>docker logs -f cok-eureka</code>查看<code>cok-eureka</code>容器的日志</li>\n</ul>\n<p>查看容器日志截图：<br>\n<img src=\"image/20200521_114252_61.png\" alt=\"20200521_114252_61\"></p>\n<h4 id=\"1-2-1-启动-cok-mysql-容器\">1.2.1 启动 cok-mysql 容器</h4>\n<p>这里先启动一个临时的mysql，由于只是临时用，因此没加存储。容器销毁后数据会丢失。（测试或生产环境不要以以下方式启动mysql，需要改为挂存储启动）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name cok-mysql  --restart=always  -p 25306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7.30</span><br></pre></td></tr></table></figure>\n<p>可以用服务器的IP、25306、root账号、密码123456，连接mysql，测试mysql是否正常启动</p>\n<h4 id=\"1-2-2-启动-cok-eureka-容器\">1.2.2 启动 cok-eureka 容器</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name cok-eureka -d --network=host cok-source-java-eureka:v0.0.1</span><br></pre></td></tr></table></figure>\n<p>注意： 该容器默认启动的是<code>18761</code>端口</p>\n<h4 id=\"1-2-3-启动-cok-zuul-容器\">1.2.3 启动 cok-zuul 容器</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name cok-zuul -d --network=host cok-source-java-zuul:v0.0.1</span><br></pre></td></tr></table></figure>\n<p>注意： 该服务默认启动的是<code>18762</code>端口</p>\n<h4 id=\"1-2-4-启动-cok-service1-容器\">1.2.4 启动 cok-service1 容器</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name cok-service1 -d --network=host -e MYSQL_HOST=127.0.0.1 -e MYSQL_PORT=25306 -e MYSQL_DATABASE=mysql -e MYSQL_USER=root -e MYSQL_PASSWORD=123456 cok-source-java-service1:v0.0.1</span><br></pre></td></tr></table></figure>\n<ul>\n<li>这里启动service1服务器，服务配置连接到刚才启动的临时mysql（也可以连接到已有的其它mysql服务，修改连接参数即可）</li>\n</ul>\n<h4 id=\"1-2-5-启动-cok-java-ui-容器\">1.2.5 启动 cok-java-ui 容器</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name cok-java-ui -d --network=host cok-source-java-ui:v0.0.1</span><br></pre></td></tr></table></figure>\n<h3 id=\"1-3-测试服务\">1.3 测试服务</h3>\n<ul>\n<li>\n<p>测试访问eureka服务,通过<code>http://ip地址:18761/</code>访问，如：<br>\n<a href=\"http://192.168.3.6:18761/\">http://192.168.3.6:18761/</a><br>\n<img src=\"image/20200521_132148_85.png\" alt=\"20200521_132148_85\"></p>\n</li>\n<li>\n<p>访问java-ui服务,通过<code>http://ip地址:18762/cok-ui/index.html</code>访问，如：<a href=\"http://192.168.3.6:18762/cok-ui/index.html\">http://192.168.3.6:18762/cok-ui/index.html</a><br>\n<img src=\"image/20200521_132204_66.png\" alt=\"20200521_132204_66\"></p>\n</li>\n</ul>\n<h2 id=\"2-如果eureka、zuul、service1以jar方式部署，ui以nginx方式部署，参考如下流程说明\">2. 如果eureka、zuul、service1以jar方式部署，ui以nginx方式部署，参考如下流程说明</h2>\n<h3 id=\"2-1-打包镜像文件\">2.1 打包镜像文件</h3>\n<p>打包脚本参考源代码中的 <code>build-in-nginx.sh</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 打包前端代码</span></span><br><span class=\"line\">cd cok-source-vue</span><br><span class=\"line\">npm install</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;npm install package failed&quot;; exit 1; fi</span><br><span class=\"line\">npm run build</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;npm run build failed&quot;; exit 1; fi</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 打包vue dockerfile</span></span><br><span class=\"line\">docker build -t cok-source-vue:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build vue failed&quot;; exit 1; fi</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> maven打包java程序</span></span><br><span class=\"line\">cd ../cok-source-java</span><br><span class=\"line\">mvn package</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;maven build failed&quot;; exit 1; fi</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 打包dockerfile</span></span><br><span class=\"line\">cd cok-source-java-eureka</span><br><span class=\"line\">docker build -t cok-source-java-eureka:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build eureka failed&quot;; exit 1; fi</span><br><span class=\"line\"></span><br><span class=\"line\">cd ../cok-source-java-zuul</span><br><span class=\"line\">docker build -t cok-source-java-zuul:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build zuul failed&quot;; exit 1; fi</span><br><span class=\"line\"></span><br><span class=\"line\">cd ../cok-source-java-service1</span><br><span class=\"line\">docker build -t cok-source-java-service1:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build service1 failed&quot;; exit 1; fi</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-2-启动容器\">2.2 启动容器</h3>\n<h4 id=\"2-2-1-启动-cok-mysql、cok-eureka、cok-zuul、cok-service1容器\">2.2.1 启动 cok-mysql、cok-eureka、cok-zuul、cok-service1容器</h4>\n<p>启动方式和<code>1.2.1 启动 cok-mysql 容器</code>、<code>1.2.2 启动 cok-eureka 容器</code>、<code>1.2.3 启动 cok-zuul 容器</code>、<code>1.2.4 启动 cok-service1 容器</code>一致，可以参考前面的文档</p>\n<p>注意：cok-mysql、cok-eureka、cok-zuul、cok-service1服务在一个服务器上<font color=red>只能启动一次</font>，有用我们的容器是以host网络（<code>--network=host</code>）的方式启动的，因此如果同一个镜像启动两次，后启动的容器会由于端口冲突而启动失败</p>\n<p>####2.2.1 启动 cok-vue-ui 服务</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name cok-vue-ui -d -p 18765:80 cok-source-vue:v0.0.1</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-3-测试服务\">2.3 测试服务</h3>\n<ul>\n<li>访问java-ui服务,通过<code>http://ip地址:18765/cok-ui/index.html</code>访问，如：<a href=\"http://192.168.3.6:18765/cok-ui/index.html\">http://192.168.3.6:18765/cok-ui/index.html</a></li>\n</ul>\n<p><img src=\"image/20200521_133917_56.png\" alt=\"20200521_133917_56\"></p>\n<h2 id=\"3-两种方式区别\">3. 两种方式区别</h2>\n<h3 id=\"全部以jar方式部署：\">全部以jar方式部署：</h3>\n<ul>\n<li>ui打包在一个微服务中，通过zuul网关访问前端页面</li>\n</ul>\n<h3 id=\"eureka、zuul、service1以jar方式部署，ui以nginx方式部署：\">eureka、zuul、service1以jar方式部署，ui以nginx方式部署：</h3>\n<ul>\n<li>ui打包到nginx中，通过nginx访问前端页面</li>\n</ul>\n<h2 id=\"4-附录\">4. 附录</h2>\n<h3 id=\"附录4-1-如果需要停止容器\">附录4.1 如果需要停止容器</h3>\n<p>先执行docker stop，再执行docker rm，比如要停止并删除<code>cok-service1</code>容器，则执行如下命令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker stop cok-service1</span><br><span class=\"line\">docker rm cok-service1</span><br></pre></td></tr></table></figure>\n<h3 id=\"附录4-2-如果需要给容器挂载文件或目录\">附录4.2 如果需要给容器挂载文件或目录</h3>\n<p>在<code>docker run</code>命令启动参数中加入<code>-v</code>参数，并制定挂载的文件或目录，如下:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -v /opt/mysql/data:/var/lib/mysql -v /opt/mysql/my.cnf:/etc/mysql/conf.d/my-project.cnf -p 25306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7.30</span><br></pre></td></tr></table></figure>\n<ul>\n<li>以上命令挂载的本地的/opt/mysql/data目录到mysql容器的数据文件目录/var/lib/mysql（以实现mysql容器的持久化存储）</li>\n<li>以上命令挂载的本地的/opt/mysql/my.cnf文件到mysql容器的配置文件/etc/mysql/conf.d/my-project.cnf（以实现mysql服务的参数配置）</li>\n</ul>\n<h3 id=\"附录4-3-docker以hosts网络的方式启动\">附录4.3 docker以hosts网络的方式启动</h3>\n<p>在<code>docker run</code>命令启动参数中加入<code>--network=host</code>参数</p>\n<ul>\n<li>如果不以hosts网络的方式启动，容器的网络将个服务器的网络隔离，容器与容器之间的网络也不通</li>\n<li>这里我们用hosts网络只是为了测试方便（为了让eureka、zuul、service1能够直接通信），具体是否需要采用hosts网络要根据业务需求来定</li>\n</ul>\n<h3 id=\"附录4-4-容器的端口映射\">附录4.4 容器的端口映射</h3>\n<p>在<code>docker run</code>命令启动参数中加入<code>-p</code>参数，比如</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name cok-mysql  --restart=always  -p 25306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7.30</span><br></pre></td></tr></table></figure>\n<ul>\n<li>以上命令将docker容器中的3306端口映射到25306，这样就可以直接通过服务器的ip加25306端口访问mysql容器</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>部署在docker中</h1>\n<h2 id=\"0-环境准备：\">0. 环境准备：</h2>\n<ul>\n<li>服务器操作系统：建议CentOS 7 以上（Windows环境理论上也可以，未测试）</li>\n<li>确保服务器能够从公网下载docker镜像，以及能够从公网maven仓库拉取依赖jar包</li>\n<li>安装了docker：建议docker v18.09.5</li>\n<li>安装了GIT</li>\n<li>安装了JDK：需要JDK 8或以上版本</li>\n<li>安装了MAVEN</li>\n<li>安装了NPM打包工具</li>\n<li>下载测试源代码：</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://gitee.com/olivee/cok.git</span><br></pre></td></tr></table></figure>\n<h2 id=\"1-如果全部以jar方式部署，参考如下流程说明\">1. 如果全部以jar方式部署，参考如下流程说明</h2>\n<h3 id=\"1-1-打包镜像文件\">1.1 打包镜像文件</h3>\n<p>打包脚本参考源代码中的 <code>build-in-java.sh</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 打包前端代码</span></span><br><span class=\"line\">cd cok-source-vue</span><br><span class=\"line\">npm install</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;npm install package failed&quot;; exit 1; fi</span><br><span class=\"line\">npm run build</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;npm run build failed&quot;; exit 1; fi</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 拷贝前端代码到cok-source-java-ui项目的static目录</span></span><br><span class=\"line\">cd ..</span><br><span class=\"line\">rm -rf cok-source-java/cok-source-java-ui/src/main/resources/static</span><br><span class=\"line\">cp -R cok-source-vue/dist cok-source-java/cok-source-java-ui/src/main/resources/static</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> maven打包java程序</span></span><br><span class=\"line\">cd cok-source-java</span><br><span class=\"line\">mvn package</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;maven build failed&quot;; exit 1; fi</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 打包dockerfile</span></span><br><span class=\"line\">cd cok-source-java-eureka</span><br><span class=\"line\">docker build -t cok-source-java-eureka:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build eureka failed&quot;; exit 1; fi</span><br><span class=\"line\"></span><br><span class=\"line\">cd ../cok-source-java-zuul</span><br><span class=\"line\">docker build -t cok-source-java-zuul:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build zuul failed&quot;; exit 1; fi</span><br><span class=\"line\"></span><br><span class=\"line\">cd ../cok-source-java-service1</span><br><span class=\"line\">docker build -t cok-source-java-service1:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build service1 failed&quot;; exit 1; fi</span><br><span class=\"line\"></span><br><span class=\"line\">cd ../cok-source-java-ui</span><br><span class=\"line\">docker build -t cok-source-java-ui:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build ui failed&quot;; exit 1; fi</span><br></pre></td></tr></table></figure>\n<p>查看已打好的镜像</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@xxx cok]# docker images|grep cok</span><br><span class=\"line\">cok-source-java-service1                                                                   v0.0.1                         bae8db875a82        11 days ago         171MB</span><br><span class=\"line\">cok-source-java-ui                                                                         v0.0.1                         a4568cb0faee        12 days ago         152MB</span><br><span class=\"line\">cok-source-java-zuul                                                                       v0.0.1                         897d8794f353        12 days ago         151MB</span><br><span class=\"line\">cok-source-java-eureka                                                                     v0.0.1                         67f3bf22d247        12 days ago         154MB</span><br></pre></td></tr></table></figure>\n<h3 id=\"1-2-启动容器\">1.2 启动容器</h3>\n<ul>\n<li>注意：<font color=red>每个服务启动后，需要等容器内部的服务启动成功完成后，再启动后续的服务</font></li>\n<li>通过<code>docker logs -f 容器名</code>查看容器的日志，如果<code>docker logs -f cok-eureka</code>查看<code>cok-eureka</code>容器的日志</li>\n</ul>\n<p>查看容器日志截图：<br>\n<img src=\"image/20200521_114252_61.png\" alt=\"20200521_114252_61\"></p>\n<h4 id=\"1-2-1-启动-cok-mysql-容器\">1.2.1 启动 cok-mysql 容器</h4>\n<p>这里先启动一个临时的mysql，由于只是临时用，因此没加存储。容器销毁后数据会丢失。（测试或生产环境不要以以下方式启动mysql，需要改为挂存储启动）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name cok-mysql  --restart=always  -p 25306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7.30</span><br></pre></td></tr></table></figure>\n<p>可以用服务器的IP、25306、root账号、密码123456，连接mysql，测试mysql是否正常启动</p>\n<h4 id=\"1-2-2-启动-cok-eureka-容器\">1.2.2 启动 cok-eureka 容器</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name cok-eureka -d --network=host cok-source-java-eureka:v0.0.1</span><br></pre></td></tr></table></figure>\n<p>注意： 该容器默认启动的是<code>18761</code>端口</p>\n<h4 id=\"1-2-3-启动-cok-zuul-容器\">1.2.3 启动 cok-zuul 容器</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name cok-zuul -d --network=host cok-source-java-zuul:v0.0.1</span><br></pre></td></tr></table></figure>\n<p>注意： 该服务默认启动的是<code>18762</code>端口</p>\n<h4 id=\"1-2-4-启动-cok-service1-容器\">1.2.4 启动 cok-service1 容器</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name cok-service1 -d --network=host -e MYSQL_HOST=127.0.0.1 -e MYSQL_PORT=25306 -e MYSQL_DATABASE=mysql -e MYSQL_USER=root -e MYSQL_PASSWORD=123456 cok-source-java-service1:v0.0.1</span><br></pre></td></tr></table></figure>\n<ul>\n<li>这里启动service1服务器，服务配置连接到刚才启动的临时mysql（也可以连接到已有的其它mysql服务，修改连接参数即可）</li>\n</ul>\n<h4 id=\"1-2-5-启动-cok-java-ui-容器\">1.2.5 启动 cok-java-ui 容器</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name cok-java-ui -d --network=host cok-source-java-ui:v0.0.1</span><br></pre></td></tr></table></figure>\n<h3 id=\"1-3-测试服务\">1.3 测试服务</h3>\n<ul>\n<li>\n<p>测试访问eureka服务,通过<code>http://ip地址:18761/</code>访问，如：<br>\n<a href=\"http://192.168.3.6:18761/\">http://192.168.3.6:18761/</a><br>\n<img src=\"image/20200521_132148_85.png\" alt=\"20200521_132148_85\"></p>\n</li>\n<li>\n<p>访问java-ui服务,通过<code>http://ip地址:18762/cok-ui/index.html</code>访问，如：<a href=\"http://192.168.3.6:18762/cok-ui/index.html\">http://192.168.3.6:18762/cok-ui/index.html</a><br>\n<img src=\"image/20200521_132204_66.png\" alt=\"20200521_132204_66\"></p>\n</li>\n</ul>\n<h2 id=\"2-如果eureka、zuul、service1以jar方式部署，ui以nginx方式部署，参考如下流程说明\">2. 如果eureka、zuul、service1以jar方式部署，ui以nginx方式部署，参考如下流程说明</h2>\n<h3 id=\"2-1-打包镜像文件\">2.1 打包镜像文件</h3>\n<p>打包脚本参考源代码中的 <code>build-in-nginx.sh</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 打包前端代码</span></span><br><span class=\"line\">cd cok-source-vue</span><br><span class=\"line\">npm install</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;npm install package failed&quot;; exit 1; fi</span><br><span class=\"line\">npm run build</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;npm run build failed&quot;; exit 1; fi</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 打包vue dockerfile</span></span><br><span class=\"line\">docker build -t cok-source-vue:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build vue failed&quot;; exit 1; fi</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> maven打包java程序</span></span><br><span class=\"line\">cd ../cok-source-java</span><br><span class=\"line\">mvn package</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;maven build failed&quot;; exit 1; fi</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 打包dockerfile</span></span><br><span class=\"line\">cd cok-source-java-eureka</span><br><span class=\"line\">docker build -t cok-source-java-eureka:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build eureka failed&quot;; exit 1; fi</span><br><span class=\"line\"></span><br><span class=\"line\">cd ../cok-source-java-zuul</span><br><span class=\"line\">docker build -t cok-source-java-zuul:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build zuul failed&quot;; exit 1; fi</span><br><span class=\"line\"></span><br><span class=\"line\">cd ../cok-source-java-service1</span><br><span class=\"line\">docker build -t cok-source-java-service1:v0.0.1 .</span><br><span class=\"line\">if [ &quot;$?&quot; -ne 0 ]; then echo &quot;docker build service1 failed&quot;; exit 1; fi</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-2-启动容器\">2.2 启动容器</h3>\n<h4 id=\"2-2-1-启动-cok-mysql、cok-eureka、cok-zuul、cok-service1容器\">2.2.1 启动 cok-mysql、cok-eureka、cok-zuul、cok-service1容器</h4>\n<p>启动方式和<code>1.2.1 启动 cok-mysql 容器</code>、<code>1.2.2 启动 cok-eureka 容器</code>、<code>1.2.3 启动 cok-zuul 容器</code>、<code>1.2.4 启动 cok-service1 容器</code>一致，可以参考前面的文档</p>\n<p>注意：cok-mysql、cok-eureka、cok-zuul、cok-service1服务在一个服务器上<font color=red>只能启动一次</font>，有用我们的容器是以host网络（<code>--network=host</code>）的方式启动的，因此如果同一个镜像启动两次，后启动的容器会由于端口冲突而启动失败</p>\n<p>####2.2.1 启动 cok-vue-ui 服务</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name cok-vue-ui -d -p 18765:80 cok-source-vue:v0.0.1</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-3-测试服务\">2.3 测试服务</h3>\n<ul>\n<li>访问java-ui服务,通过<code>http://ip地址:18765/cok-ui/index.html</code>访问，如：<a href=\"http://192.168.3.6:18765/cok-ui/index.html\">http://192.168.3.6:18765/cok-ui/index.html</a></li>\n</ul>\n<p><img src=\"image/20200521_133917_56.png\" alt=\"20200521_133917_56\"></p>\n<h2 id=\"3-两种方式区别\">3. 两种方式区别</h2>\n<h3 id=\"全部以jar方式部署：\">全部以jar方式部署：</h3>\n<ul>\n<li>ui打包在一个微服务中，通过zuul网关访问前端页面</li>\n</ul>\n<h3 id=\"eureka、zuul、service1以jar方式部署，ui以nginx方式部署：\">eureka、zuul、service1以jar方式部署，ui以nginx方式部署：</h3>\n<ul>\n<li>ui打包到nginx中，通过nginx访问前端页面</li>\n</ul>\n<h2 id=\"4-附录\">4. 附录</h2>\n<h3 id=\"附录4-1-如果需要停止容器\">附录4.1 如果需要停止容器</h3>\n<p>先执行docker stop，再执行docker rm，比如要停止并删除<code>cok-service1</code>容器，则执行如下命令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker stop cok-service1</span><br><span class=\"line\">docker rm cok-service1</span><br></pre></td></tr></table></figure>\n<h3 id=\"附录4-2-如果需要给容器挂载文件或目录\">附录4.2 如果需要给容器挂载文件或目录</h3>\n<p>在<code>docker run</code>命令启动参数中加入<code>-v</code>参数，并制定挂载的文件或目录，如下:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -v /opt/mysql/data:/var/lib/mysql -v /opt/mysql/my.cnf:/etc/mysql/conf.d/my-project.cnf -p 25306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7.30</span><br></pre></td></tr></table></figure>\n<ul>\n<li>以上命令挂载的本地的/opt/mysql/data目录到mysql容器的数据文件目录/var/lib/mysql（以实现mysql容器的持久化存储）</li>\n<li>以上命令挂载的本地的/opt/mysql/my.cnf文件到mysql容器的配置文件/etc/mysql/conf.d/my-project.cnf（以实现mysql服务的参数配置）</li>\n</ul>\n<h3 id=\"附录4-3-docker以hosts网络的方式启动\">附录4.3 docker以hosts网络的方式启动</h3>\n<p>在<code>docker run</code>命令启动参数中加入<code>--network=host</code>参数</p>\n<ul>\n<li>如果不以hosts网络的方式启动，容器的网络将个服务器的网络隔离，容器与容器之间的网络也不通</li>\n<li>这里我们用hosts网络只是为了测试方便（为了让eureka、zuul、service1能够直接通信），具体是否需要采用hosts网络要根据业务需求来定</li>\n</ul>\n<h3 id=\"附录4-4-容器的端口映射\">附录4.4 容器的端口映射</h3>\n<p>在<code>docker run</code>命令启动参数中加入<code>-p</code>参数，比如</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name cok-mysql  --restart=always  -p 25306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7.30</span><br></pre></td></tr></table></figure>\n<ul>\n<li>以上命令将docker容器中的3306端口映射到25306，这样就可以直接通过服务器的ip加25306端口访问mysql容器</li>\n</ul>\n"},{"_content":"# 部署在k8s中\n\n## 1. 部署脚本\n参考 `deploy/deploy-on-k8s.sh` 中的脚本\n\n```shell\n# 将镜像打tag\ndocker tag cok-source-java-service1:v0.0.1 hub.aosccs.com.cn:8888/cokk8s/cok-source-java-service1:v0.0.1\ndocker tag cok-source-vue:v0.0.1           hub.aosccs.com.cn:8888/cokk8s/cok-source-vue:v0.0.1\ndocker tag cok-source-java-zuul:v0.0.1     hub.aosccs.com.cn:8888/cokk8s/cok-source-java-zuul:v0.0.1\ndocker tag cok-source-java-eureka:v0.0.1   hub.aosccs.com.cn:8888/cokk8s/cok-source-java-eureka:v0.0.1\n\n# 推送到镜像仓库\ndocker login hub.aosccs.com.cn:8888\ndocker push hub.aosccs.com.cn:8888/cokk8s/cok-source-java-service1:v0.0.1\ndocker push hub.aosccs.com.cn:8888/cokk8s/cok-source-vue:v0.0.1\ndocker push hub.aosccs.com.cn:8888/cokk8s/cok-source-java-zuul:v0.0.1\ndocker push hub.aosccs.com.cn:8888/cokk8s/cok-source-java-eureka:v0.0.1\n\n\n# 安装服务\nkubectl create -f k8s-config/1.namespaces.yaml\nkubectl create -f k8s-config/2.configmaps.yaml\nkubectl create -f k8s-config/3.1.mysql-pvc.yaml\nkubectl create -f k8s-config/3.2.mysql-deployment.yaml\nkubectl create -f k8s-config/3.3.mysql-service.yaml\nkubectl create -f k8s-config/4.1.eureka-deployment.yaml\nkubectl create -f k8s-config/4.2.eureka-service.yaml\nkubectl create -f k8s-config/5.1.zuul-deployment.yaml\nkubectl create -f k8s-config/5.2.zuul-service.yaml\nkubectl create -f k8s-config/6.service1-deployment.yaml\nkubectl create -f k8s-config/7.1.vue-ui-deployment.yaml\nkubectl create -f k8s-config/7.2.vue-ui-service.yaml\n```\n\n## 2. 部署配置文件讲解\n### 2.1 `1.namespaces.yaml`配置文件说明\n- 创建 `cokk8s` 命名空间（一般一个项目用一个命名空间）\n```yml\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: cokk8s\n```\n\n### 2.2 `2.configmaps.yaml`配置文件说明\n- 配置中创建了一个名称为`cokk8s`的ConfigMap配置，配置中有一个Key ：`service-application.yml`\n- 这个配置在后续的`6.service1-deployment.yaml`中会用到\n- 配置中连接的数据为地址`mysql:3306`,表示连接本namespace（`cokk8s`）中的`mysql`服务的`3306`端口\n```yml\napiVersion: v1\ndata:\n  service-application.yml: |-\n    server:\n      port: 18763\n    spring:\n      datasource:\n        max-idle: 8\n        min-idle: 8\n        max-active: 20\n        driverClassName: com.mysql.cj.jdbc.Driver\n        initial-size: 10\n        type: com.alibaba.druid.pool.DruidDataSource\n        url: jdbc:mysql://mysql:3306/mysql?characterEncoding=utf8&useSSL=false&allowMultiQueries=true\n        username: root\n        password: 123456\n      jpa:\n        show-sql: true\n        database: mysql\n        hibernate:\n          ddl-auto: create\n        database-platform: org.hibernate.dialect.MySQL5Dialect\nkind: ConfigMap\nmetadata:\n  name: cokk8s\n  namespace: cokk8s\n```\n### 2.3 `3.1.mysql-pvc.yaml`配置文件说明\n- 创建一个mysql的PersistentVolumeClaim（PVC），用于后续部署MySQL的时候（`3.2.mysql-deployment.yaml`），存储MySQL的数据文件\n- 注意：我们这里用到了k8s中我们已经建好的storageClassName:`managed-nfs-storage`（如果你所在k8s集群中没有，需要手动创建）\n```yml\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  annotations:\n    volume.beta.kubernetes.io/storage-provisioner: fuseim.pri/ifs\n  name: mysql\n  namespace: cokk8s\nspec:\n  accessModes:\n  - ReadWriteMany\n  resources:\n    requests:\n      storage: 2Gi\n  storageClassName: managed-nfs-storage\n```\n### 2.4 `3.2.mysql-deployment.yaml`配置文件说明\n- 部署mysql，设置密码为`123456`,存储为上一步创建的pvc：`mysql`，存储挂载到`/var/lib/mysql`目录\n```yml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    app: mysql\n  name: mysql\n  namespace: cokk8s\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: mysql\n  template:\n    metadata:\n      labels:\n        app: mysql\n    spec:\n      containers:\n      - env:\n        - name: MYSQL_ROOT_PASSWORD\n          value: \"123456\"\n        - name: MYSQL_PASSWORD\n          value: \"123456\"\n        name: mysql\n        image: mysql:5.7.30\n        imagePullPolicy: IfNotPresent\n        livenessProbe:\n          exec:\n            command:\n            - sh\n            - -c\n            - mysqladmin ping -u root -p${MYSQL_ROOT_PASSWORD}\n          failureThreshold: 3\n          initialDelaySeconds: 30\n          periodSeconds: 10\n          successThreshold: 1\n          timeoutSeconds: 5\n        ports:\n        - containerPort: 3306\n          name: mysql\n          protocol: TCP\n        readinessProbe:\n          exec:\n            command:\n            - sh\n            - -c\n            - mysqladmin ping -u root -p${MYSQL_ROOT_PASSWORD}\n          failureThreshold: 3\n          initialDelaySeconds: 5\n          periodSeconds: 10\n          successThreshold: 1\n          timeoutSeconds: 1\n        resources:\n          requests:\n            cpu: 100m\n            memory: 256Mi\n        volumeMounts:\n        - mountPath: /var/lib/mysql\n          name: data\n      initContainers:\n      - command:\n        - rm\n        - -fr\n        - /var/lib/mysql/lost+found\n        name: remove-lost-found\n        image: busybox:1.29.3\n        imagePullPolicy: IfNotPresent\n        resources:\n          requests:\n            cpu: 10m\n            memory: 10Mi\n        volumeMounts:\n        - mountPath: /var/lib/mysql\n          name: data\n      restartPolicy: Always\n      volumes:\n      - name: data\n        persistentVolumeClaim:\n          claimName: mysql\n```\n### 2.5 `3.3.mysql-service.yaml`配置文件说明\n- 暴露mysql的服务，服务名称为`mysql`,集群端口为`3306`,节点端口为`18306`\n```yml\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    app: mysql\n  name: mysql\n  namespace: cokk8s\nspec:\n  selector:\n    app: mysql\n  type: NodePort\n  ports:\n  - name: mysql\n    nodePort: 18306 #节点端口，可以k8s节点的ip加这个端口号可以访问\n    port: 3306 #集群端口，在k8s集群内部可以直接访问，如mysql:3306\n    protocol: TCP\n    targetPort: mysql\n```\n### 2.6 `4.1.eureka-deployment.yaml`配置文件说明\n- 部署cok-source-java-eureka镜像的Deployment，拉取镜像策略为`Always`,容器暴露端口为`18761`\n```yml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    appname: eureka\n  name: eureka\n  namespace: cokk8s\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      appname: eureka\n  template:\n    metadata:\n      labels:\n        appname: eureka\n    spec:\n      containers:\n      - image: hub.aosccs.com.cn:8888/cokk8s/cok-source-java-eureka:v0.0.1\n        imagePullPolicy: Always\n        name: eureka\n        ports:\n        - containerPort: 18761\n          protocol: TCP\n      restartPolicy: Always\n```\n### 2.7 `4.2.eureka-service.yaml`配置文件说明\n- 定义cok-source-java-eureka暴露的服务`eureka`,目的是为了后面的zuul和service1可以通过`eureka:18761`连接eureka服务\n```yml\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    appname: eureka\n  name: eureka\n  namespace: cokk8s\nspec:\n  selector:\n    appname: eureka\n  type: NodePort\n  ports:\n  - name: serice-0\n    nodePort: 18761\n    port: 18761\n    protocol: TCP\n    targetPort: 18761\n```\n### 2.8 `5.1.zuul-deployment.yaml`配置文件说明\n- 定义部署zuul的Deployment，连接eureka的地址为`http://eureka:18761/eureka`,容器端口为`18762`\n```yml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    appname: zuul\n  name: zuul\n  namespace: cokk8s\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      appname: zuul\n  template:\n    metadata:\n      labels:\n        appname: zuul\n    spec:\n      containers:\n      - env:\n        - name: EUREKA_URI\n          value: http://eureka:18761/eureka\n        image: hub.aosccs.com.cn:8888/cokk8s/cok-source-java-zuul:v0.0.1\n        imagePullPolicy: Always\n        name: zuul\n        ports:\n        - containerPort: 18762\n          protocol: TCP\n      restartPolicy: Always\n```\n### 2.9 `5.2.zuul-service.yaml`配置文件说明\n- 暴露zuul的节点端口`18762`，后续测试的时候前端页面通过这个端口调用后台接口\n```yml\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    appname: zuul\n  name: zuul\n  namespace: cokk8s\nspec:\n  selector:\n    appname: zuul\n  type: NodePort\n  ports:\n  - name: serice-zuul\n    nodePort: 18762\n    port: 18762\n    protocol: TCP\n    targetPort: 18762\n```\n### 2.10 `6.service1-deployment.yaml`配置文件说明\n- 定义部署service1的Deployment，连接eureka的地址为`http://eureka:18761/eureka`,容器端口为`18763`\n- 由于service1不直接对外提供服务（外部通过zuul访问service1），因此不需要配置service1的节点端口等\n```yml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    appname: service1\n  name: service1\n  namespace: cokk8s\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      appname: service1\n  template:\n    metadata:\n      labels:\n        appname: service1\n    spec:\n      containers:\n      - env:\n        - name: EUREKA_URI\n          value: http://eureka:18761/eureka\n        image: hub.aosccs.com.cn:8888/cokk8s/cok-source-java-service1:v0.0.1\n        imagePullPolicy: Always\n        livenessProbe:\n          failureThreshold: 3\n          initialDelaySeconds: 120\n          periodSeconds: 10\n          successThreshold: 1\n          tcpSocket:\n            port: 18763\n          timeoutSeconds: 30\n        name: service1\n        volumeMounts:\n        - mountPath: /opt/application.yml\n          name: application-yml-config\n          subPath: application.yml\n      restartPolicy: Always\n      volumes:\n      - name: application-yml-config\n        configMap:\n          defaultMode: 420\n          items:\n          - key: service-application.yml\n            path: application.yml\n          name: cokk8s\n```\n### 2.11 `7.1.vue-ui-deployment.yaml`配置文件说明\n- 定义部署vue-ui的Deployment，由于镜像基于nginx构建，用的nginx的默认配置，因此容器端口为nginx的默认端口`80`\n```yml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    appname: vue-ui\n  name: vue-ui\n  namespace: cokk8s\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      appname: vue-ui\n  template:\n    metadata:\n      labels:\n        appname: vue-ui\n    spec:\n      containers:\n      - image: edgehub.acedge.cn:8888/cokk8s/cok-source-vue:v0.0.1\n        imagePullPolicy: Always\n        name: vue-ui\n        ports:\n        - containerPort: 80\n          protocol: TCP\n      restartPolicy: Always\n```\n### 2.12 `7.2.vue-ui-service.yaml`配置文件说明\n- 对外暴露vue-ui的服务，节点端口为`18765`\n```yml\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    appname: vue-ui\n  name: vue-ui\n  namespace: cokk8s\nspec:\n  ports:\n  - name: serice-0\n    nodePort: 18765\n    port: 80\n    protocol: TCP\n    targetPort: 80\n  selector:\n    appname: vue-ui\n  type: NodePort\n```\n\n## 3. 测试访问\n访问地址：[http://192.168.3.124:18765/cok-ui/index.html](http://192.168.3.124:18765/cok-ui/index.html)\n![20200522_194518_31](image/20200522_194518_31.png)\n\n## 4. 服务调用逻辑\n\n![20200529_100114_48](image/20200529_100114_48.png)\n","source":"cok-book/3.2.project-to-k8s.md","raw":"# 部署在k8s中\n\n## 1. 部署脚本\n参考 `deploy/deploy-on-k8s.sh` 中的脚本\n\n```shell\n# 将镜像打tag\ndocker tag cok-source-java-service1:v0.0.1 hub.aosccs.com.cn:8888/cokk8s/cok-source-java-service1:v0.0.1\ndocker tag cok-source-vue:v0.0.1           hub.aosccs.com.cn:8888/cokk8s/cok-source-vue:v0.0.1\ndocker tag cok-source-java-zuul:v0.0.1     hub.aosccs.com.cn:8888/cokk8s/cok-source-java-zuul:v0.0.1\ndocker tag cok-source-java-eureka:v0.0.1   hub.aosccs.com.cn:8888/cokk8s/cok-source-java-eureka:v0.0.1\n\n# 推送到镜像仓库\ndocker login hub.aosccs.com.cn:8888\ndocker push hub.aosccs.com.cn:8888/cokk8s/cok-source-java-service1:v0.0.1\ndocker push hub.aosccs.com.cn:8888/cokk8s/cok-source-vue:v0.0.1\ndocker push hub.aosccs.com.cn:8888/cokk8s/cok-source-java-zuul:v0.0.1\ndocker push hub.aosccs.com.cn:8888/cokk8s/cok-source-java-eureka:v0.0.1\n\n\n# 安装服务\nkubectl create -f k8s-config/1.namespaces.yaml\nkubectl create -f k8s-config/2.configmaps.yaml\nkubectl create -f k8s-config/3.1.mysql-pvc.yaml\nkubectl create -f k8s-config/3.2.mysql-deployment.yaml\nkubectl create -f k8s-config/3.3.mysql-service.yaml\nkubectl create -f k8s-config/4.1.eureka-deployment.yaml\nkubectl create -f k8s-config/4.2.eureka-service.yaml\nkubectl create -f k8s-config/5.1.zuul-deployment.yaml\nkubectl create -f k8s-config/5.2.zuul-service.yaml\nkubectl create -f k8s-config/6.service1-deployment.yaml\nkubectl create -f k8s-config/7.1.vue-ui-deployment.yaml\nkubectl create -f k8s-config/7.2.vue-ui-service.yaml\n```\n\n## 2. 部署配置文件讲解\n### 2.1 `1.namespaces.yaml`配置文件说明\n- 创建 `cokk8s` 命名空间（一般一个项目用一个命名空间）\n```yml\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: cokk8s\n```\n\n### 2.2 `2.configmaps.yaml`配置文件说明\n- 配置中创建了一个名称为`cokk8s`的ConfigMap配置，配置中有一个Key ：`service-application.yml`\n- 这个配置在后续的`6.service1-deployment.yaml`中会用到\n- 配置中连接的数据为地址`mysql:3306`,表示连接本namespace（`cokk8s`）中的`mysql`服务的`3306`端口\n```yml\napiVersion: v1\ndata:\n  service-application.yml: |-\n    server:\n      port: 18763\n    spring:\n      datasource:\n        max-idle: 8\n        min-idle: 8\n        max-active: 20\n        driverClassName: com.mysql.cj.jdbc.Driver\n        initial-size: 10\n        type: com.alibaba.druid.pool.DruidDataSource\n        url: jdbc:mysql://mysql:3306/mysql?characterEncoding=utf8&useSSL=false&allowMultiQueries=true\n        username: root\n        password: 123456\n      jpa:\n        show-sql: true\n        database: mysql\n        hibernate:\n          ddl-auto: create\n        database-platform: org.hibernate.dialect.MySQL5Dialect\nkind: ConfigMap\nmetadata:\n  name: cokk8s\n  namespace: cokk8s\n```\n### 2.3 `3.1.mysql-pvc.yaml`配置文件说明\n- 创建一个mysql的PersistentVolumeClaim（PVC），用于后续部署MySQL的时候（`3.2.mysql-deployment.yaml`），存储MySQL的数据文件\n- 注意：我们这里用到了k8s中我们已经建好的storageClassName:`managed-nfs-storage`（如果你所在k8s集群中没有，需要手动创建）\n```yml\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  annotations:\n    volume.beta.kubernetes.io/storage-provisioner: fuseim.pri/ifs\n  name: mysql\n  namespace: cokk8s\nspec:\n  accessModes:\n  - ReadWriteMany\n  resources:\n    requests:\n      storage: 2Gi\n  storageClassName: managed-nfs-storage\n```\n### 2.4 `3.2.mysql-deployment.yaml`配置文件说明\n- 部署mysql，设置密码为`123456`,存储为上一步创建的pvc：`mysql`，存储挂载到`/var/lib/mysql`目录\n```yml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    app: mysql\n  name: mysql\n  namespace: cokk8s\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: mysql\n  template:\n    metadata:\n      labels:\n        app: mysql\n    spec:\n      containers:\n      - env:\n        - name: MYSQL_ROOT_PASSWORD\n          value: \"123456\"\n        - name: MYSQL_PASSWORD\n          value: \"123456\"\n        name: mysql\n        image: mysql:5.7.30\n        imagePullPolicy: IfNotPresent\n        livenessProbe:\n          exec:\n            command:\n            - sh\n            - -c\n            - mysqladmin ping -u root -p${MYSQL_ROOT_PASSWORD}\n          failureThreshold: 3\n          initialDelaySeconds: 30\n          periodSeconds: 10\n          successThreshold: 1\n          timeoutSeconds: 5\n        ports:\n        - containerPort: 3306\n          name: mysql\n          protocol: TCP\n        readinessProbe:\n          exec:\n            command:\n            - sh\n            - -c\n            - mysqladmin ping -u root -p${MYSQL_ROOT_PASSWORD}\n          failureThreshold: 3\n          initialDelaySeconds: 5\n          periodSeconds: 10\n          successThreshold: 1\n          timeoutSeconds: 1\n        resources:\n          requests:\n            cpu: 100m\n            memory: 256Mi\n        volumeMounts:\n        - mountPath: /var/lib/mysql\n          name: data\n      initContainers:\n      - command:\n        - rm\n        - -fr\n        - /var/lib/mysql/lost+found\n        name: remove-lost-found\n        image: busybox:1.29.3\n        imagePullPolicy: IfNotPresent\n        resources:\n          requests:\n            cpu: 10m\n            memory: 10Mi\n        volumeMounts:\n        - mountPath: /var/lib/mysql\n          name: data\n      restartPolicy: Always\n      volumes:\n      - name: data\n        persistentVolumeClaim:\n          claimName: mysql\n```\n### 2.5 `3.3.mysql-service.yaml`配置文件说明\n- 暴露mysql的服务，服务名称为`mysql`,集群端口为`3306`,节点端口为`18306`\n```yml\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    app: mysql\n  name: mysql\n  namespace: cokk8s\nspec:\n  selector:\n    app: mysql\n  type: NodePort\n  ports:\n  - name: mysql\n    nodePort: 18306 #节点端口，可以k8s节点的ip加这个端口号可以访问\n    port: 3306 #集群端口，在k8s集群内部可以直接访问，如mysql:3306\n    protocol: TCP\n    targetPort: mysql\n```\n### 2.6 `4.1.eureka-deployment.yaml`配置文件说明\n- 部署cok-source-java-eureka镜像的Deployment，拉取镜像策略为`Always`,容器暴露端口为`18761`\n```yml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    appname: eureka\n  name: eureka\n  namespace: cokk8s\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      appname: eureka\n  template:\n    metadata:\n      labels:\n        appname: eureka\n    spec:\n      containers:\n      - image: hub.aosccs.com.cn:8888/cokk8s/cok-source-java-eureka:v0.0.1\n        imagePullPolicy: Always\n        name: eureka\n        ports:\n        - containerPort: 18761\n          protocol: TCP\n      restartPolicy: Always\n```\n### 2.7 `4.2.eureka-service.yaml`配置文件说明\n- 定义cok-source-java-eureka暴露的服务`eureka`,目的是为了后面的zuul和service1可以通过`eureka:18761`连接eureka服务\n```yml\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    appname: eureka\n  name: eureka\n  namespace: cokk8s\nspec:\n  selector:\n    appname: eureka\n  type: NodePort\n  ports:\n  - name: serice-0\n    nodePort: 18761\n    port: 18761\n    protocol: TCP\n    targetPort: 18761\n```\n### 2.8 `5.1.zuul-deployment.yaml`配置文件说明\n- 定义部署zuul的Deployment，连接eureka的地址为`http://eureka:18761/eureka`,容器端口为`18762`\n```yml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    appname: zuul\n  name: zuul\n  namespace: cokk8s\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      appname: zuul\n  template:\n    metadata:\n      labels:\n        appname: zuul\n    spec:\n      containers:\n      - env:\n        - name: EUREKA_URI\n          value: http://eureka:18761/eureka\n        image: hub.aosccs.com.cn:8888/cokk8s/cok-source-java-zuul:v0.0.1\n        imagePullPolicy: Always\n        name: zuul\n        ports:\n        - containerPort: 18762\n          protocol: TCP\n      restartPolicy: Always\n```\n### 2.9 `5.2.zuul-service.yaml`配置文件说明\n- 暴露zuul的节点端口`18762`，后续测试的时候前端页面通过这个端口调用后台接口\n```yml\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    appname: zuul\n  name: zuul\n  namespace: cokk8s\nspec:\n  selector:\n    appname: zuul\n  type: NodePort\n  ports:\n  - name: serice-zuul\n    nodePort: 18762\n    port: 18762\n    protocol: TCP\n    targetPort: 18762\n```\n### 2.10 `6.service1-deployment.yaml`配置文件说明\n- 定义部署service1的Deployment，连接eureka的地址为`http://eureka:18761/eureka`,容器端口为`18763`\n- 由于service1不直接对外提供服务（外部通过zuul访问service1），因此不需要配置service1的节点端口等\n```yml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    appname: service1\n  name: service1\n  namespace: cokk8s\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      appname: service1\n  template:\n    metadata:\n      labels:\n        appname: service1\n    spec:\n      containers:\n      - env:\n        - name: EUREKA_URI\n          value: http://eureka:18761/eureka\n        image: hub.aosccs.com.cn:8888/cokk8s/cok-source-java-service1:v0.0.1\n        imagePullPolicy: Always\n        livenessProbe:\n          failureThreshold: 3\n          initialDelaySeconds: 120\n          periodSeconds: 10\n          successThreshold: 1\n          tcpSocket:\n            port: 18763\n          timeoutSeconds: 30\n        name: service1\n        volumeMounts:\n        - mountPath: /opt/application.yml\n          name: application-yml-config\n          subPath: application.yml\n      restartPolicy: Always\n      volumes:\n      - name: application-yml-config\n        configMap:\n          defaultMode: 420\n          items:\n          - key: service-application.yml\n            path: application.yml\n          name: cokk8s\n```\n### 2.11 `7.1.vue-ui-deployment.yaml`配置文件说明\n- 定义部署vue-ui的Deployment，由于镜像基于nginx构建，用的nginx的默认配置，因此容器端口为nginx的默认端口`80`\n```yml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    appname: vue-ui\n  name: vue-ui\n  namespace: cokk8s\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      appname: vue-ui\n  template:\n    metadata:\n      labels:\n        appname: vue-ui\n    spec:\n      containers:\n      - image: edgehub.acedge.cn:8888/cokk8s/cok-source-vue:v0.0.1\n        imagePullPolicy: Always\n        name: vue-ui\n        ports:\n        - containerPort: 80\n          protocol: TCP\n      restartPolicy: Always\n```\n### 2.12 `7.2.vue-ui-service.yaml`配置文件说明\n- 对外暴露vue-ui的服务，节点端口为`18765`\n```yml\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    appname: vue-ui\n  name: vue-ui\n  namespace: cokk8s\nspec:\n  ports:\n  - name: serice-0\n    nodePort: 18765\n    port: 80\n    protocol: TCP\n    targetPort: 80\n  selector:\n    appname: vue-ui\n  type: NodePort\n```\n\n## 3. 测试访问\n访问地址：[http://192.168.3.124:18765/cok-ui/index.html](http://192.168.3.124:18765/cok-ui/index.html)\n![20200522_194518_31](image/20200522_194518_31.png)\n\n## 4. 服务调用逻辑\n\n![20200529_100114_48](image/20200529_100114_48.png)\n","date":"2021-07-19T06:44:32.255Z","updated":"2021-01-14T01:19:27.715Z","path":"cok-book/3.2.project-to-k8s.html","title":"","comments":1,"layout":"page","_id":"ckrac7xan001fz8s694n6euaa","content":"<h1>部署在k8s中</h1>\n<h2 id=\"1-部署脚本\">1. 部署脚本</h2>\n<p>参考 <code>deploy/deploy-on-k8s.sh</code> 中的脚本</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 将镜像打tag</span></span><br><span class=\"line\">docker tag cok-source-java-service1:v0.0.1 hub.aosccs.com.cn:8888/cokk8s/cok-source-java-service1:v0.0.1</span><br><span class=\"line\">docker tag cok-source-vue:v0.0.1           hub.aosccs.com.cn:8888/cokk8s/cok-source-vue:v0.0.1</span><br><span class=\"line\">docker tag cok-source-java-zuul:v0.0.1     hub.aosccs.com.cn:8888/cokk8s/cok-source-java-zuul:v0.0.1</span><br><span class=\"line\">docker tag cok-source-java-eureka:v0.0.1   hub.aosccs.com.cn:8888/cokk8s/cok-source-java-eureka:v0.0.1</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 推送到镜像仓库</span></span><br><span class=\"line\">docker login hub.aosccs.com.cn:8888</span><br><span class=\"line\">docker push hub.aosccs.com.cn:8888/cokk8s/cok-source-java-service1:v0.0.1</span><br><span class=\"line\">docker push hub.aosccs.com.cn:8888/cokk8s/cok-source-vue:v0.0.1</span><br><span class=\"line\">docker push hub.aosccs.com.cn:8888/cokk8s/cok-source-java-zuul:v0.0.1</span><br><span class=\"line\">docker push hub.aosccs.com.cn:8888/cokk8s/cok-source-java-eureka:v0.0.1</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 安装服务</span></span><br><span class=\"line\">kubectl create -f k8s-config/1.namespaces.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/2.configmaps.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/3.1.mysql-pvc.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/3.2.mysql-deployment.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/3.3.mysql-service.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/4.1.eureka-deployment.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/4.2.eureka-service.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/5.1.zuul-deployment.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/5.2.zuul-service.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/6.service1-deployment.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/7.1.vue-ui-deployment.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/7.2.vue-ui-service.yaml</span><br></pre></td></tr></table></figure>\n<h2 id=\"2-部署配置文件讲解\">2. 部署配置文件讲解</h2>\n<h3 id=\"2-1-1-namespaces-yaml配置文件说明\">2.1 <code>1.namespaces.yaml</code>配置文件说明</h3>\n<ul>\n<li>创建 <code>cokk8s</code> 命名空间（一般一个项目用一个命名空间）</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Namespace</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">cokk8s</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-2-2-configmaps-yaml配置文件说明\">2.2 <code>2.configmaps.yaml</code>配置文件说明</h3>\n<ul>\n<li>配置中创建了一个名称为<code>cokk8s</code>的ConfigMap配置，配置中有一个Key ：<code>service-application.yml</code></li>\n<li>这个配置在后续的<code>6.service1-deployment.yaml</code>中会用到</li>\n<li>配置中连接的数据为地址<code>mysql:3306</code>,表示连接本namespace（<code>cokk8s</code>）中的<code>mysql</code>服务的<code>3306</code>端口</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">data:</span></span><br><span class=\"line\">  <span class=\"attr\">service-application.yml:</span> <span class=\"string\">|-</span></span><br><span class=\"line\"><span class=\"string\">    server:</span></span><br><span class=\"line\"><span class=\"string\">      port: 18763</span></span><br><span class=\"line\"><span class=\"string\">    spring:</span></span><br><span class=\"line\"><span class=\"string\">      datasource:</span></span><br><span class=\"line\"><span class=\"string\">        max-idle: 8</span></span><br><span class=\"line\"><span class=\"string\">        min-idle: 8</span></span><br><span class=\"line\"><span class=\"string\">        max-active: 20</span></span><br><span class=\"line\"><span class=\"string\">        driverClassName: com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"string\">        initial-size: 10</span></span><br><span class=\"line\"><span class=\"string\">        type: com.alibaba.druid.pool.DruidDataSource</span></span><br><span class=\"line\"><span class=\"string\">        url: jdbc:mysql://mysql:3306/mysql?characterEncoding=utf8&amp;useSSL=false&amp;allowMultiQueries=true</span></span><br><span class=\"line\"><span class=\"string\">        username: root</span></span><br><span class=\"line\"><span class=\"string\">        password: 123456</span></span><br><span class=\"line\"><span class=\"string\">      jpa:</span></span><br><span class=\"line\"><span class=\"string\">        show-sql: true</span></span><br><span class=\"line\"><span class=\"string\">        database: mysql</span></span><br><span class=\"line\"><span class=\"string\">        hibernate:</span></span><br><span class=\"line\"><span class=\"string\">          ddl-auto: create</span></span><br><span class=\"line\"><span class=\"string\">        database-platform: org.hibernate.dialect.MySQL5Dialect</span></span><br><span class=\"line\"><span class=\"string\"></span><span class=\"attr\">kind:</span> <span class=\"string\">ConfigMap</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-3-3-1-mysql-pvc-yaml配置文件说明\">2.3 <code>3.1.mysql-pvc.yaml</code>配置文件说明</h3>\n<ul>\n<li>创建一个mysql的PersistentVolumeClaim（PVC），用于后续部署MySQL的时候（<code>3.2.mysql-deployment.yaml</code>），存储MySQL的数据文件</li>\n<li>注意：我们这里用到了k8s中我们已经建好的storageClassName:<code>managed-nfs-storage</code>（如果你所在k8s集群中没有，需要手动创建）</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">PersistentVolumeClaim</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">annotations:</span></span><br><span class=\"line\">    <span class=\"attr\">volume.beta.kubernetes.io/storage-provisioner:</span> <span class=\"string\">fuseim.pri/ifs</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">accessModes:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">ReadWriteMany</span></span><br><span class=\"line\">  <span class=\"attr\">resources:</span></span><br><span class=\"line\">    <span class=\"attr\">requests:</span></span><br><span class=\"line\">      <span class=\"attr\">storage:</span> <span class=\"string\">2Gi</span></span><br><span class=\"line\">  <span class=\"attr\">storageClassName:</span> <span class=\"string\">managed-nfs-storage</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-4-3-2-mysql-deployment-yaml配置文件说明\">2.4 <code>3.2.mysql-deployment.yaml</code>配置文件说明</h3>\n<ul>\n<li>部署mysql，设置密码为<code>123456</code>,存储为上一步创建的pvc：<code>mysql</code>，存储挂载到<code>/var/lib/mysql</code>目录</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Deployment</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">app:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">replicas:</span> <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">matchLabels:</span></span><br><span class=\"line\">      <span class=\"attr\">app:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">template:</span></span><br><span class=\"line\">    <span class=\"attr\">metadata:</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"attr\">app:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">    <span class=\"attr\">spec:</span></span><br><span class=\"line\">      <span class=\"attr\">containers:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">env:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">MYSQL_ROOT_PASSWORD</span></span><br><span class=\"line\">          <span class=\"attr\">value:</span> <span class=\"string\">&quot;123456&quot;</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">MYSQL_PASSWORD</span></span><br><span class=\"line\">          <span class=\"attr\">value:</span> <span class=\"string\">&quot;123456&quot;</span></span><br><span class=\"line\">        <span class=\"attr\">name:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">mysql:5.7.30</span></span><br><span class=\"line\">        <span class=\"attr\">imagePullPolicy:</span> <span class=\"string\">IfNotPresent</span></span><br><span class=\"line\">        <span class=\"attr\">livenessProbe:</span></span><br><span class=\"line\">          <span class=\"attr\">exec:</span></span><br><span class=\"line\">            <span class=\"attr\">command:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">sh</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">-c</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">mysqladmin</span> <span class=\"string\">ping</span> <span class=\"string\">-u</span> <span class=\"string\">root</span> <span class=\"string\">-p$&#123;MYSQL_ROOT_PASSWORD&#125;</span></span><br><span class=\"line\">          <span class=\"attr\">failureThreshold:</span> <span class=\"number\">3</span></span><br><span class=\"line\">          <span class=\"attr\">initialDelaySeconds:</span> <span class=\"number\">30</span></span><br><span class=\"line\">          <span class=\"attr\">periodSeconds:</span> <span class=\"number\">10</span></span><br><span class=\"line\">          <span class=\"attr\">successThreshold:</span> <span class=\"number\">1</span></span><br><span class=\"line\">          <span class=\"attr\">timeoutSeconds:</span> <span class=\"number\">5</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">containerPort:</span> <span class=\"number\">3306</span></span><br><span class=\"line\">          <span class=\"attr\">name:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">          <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">        <span class=\"attr\">readinessProbe:</span></span><br><span class=\"line\">          <span class=\"attr\">exec:</span></span><br><span class=\"line\">            <span class=\"attr\">command:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">sh</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">-c</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">mysqladmin</span> <span class=\"string\">ping</span> <span class=\"string\">-u</span> <span class=\"string\">root</span> <span class=\"string\">-p$&#123;MYSQL_ROOT_PASSWORD&#125;</span></span><br><span class=\"line\">          <span class=\"attr\">failureThreshold:</span> <span class=\"number\">3</span></span><br><span class=\"line\">          <span class=\"attr\">initialDelaySeconds:</span> <span class=\"number\">5</span></span><br><span class=\"line\">          <span class=\"attr\">periodSeconds:</span> <span class=\"number\">10</span></span><br><span class=\"line\">          <span class=\"attr\">successThreshold:</span> <span class=\"number\">1</span></span><br><span class=\"line\">          <span class=\"attr\">timeoutSeconds:</span> <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"attr\">resources:</span></span><br><span class=\"line\">          <span class=\"attr\">requests:</span></span><br><span class=\"line\">            <span class=\"attr\">cpu:</span> <span class=\"string\">100m</span></span><br><span class=\"line\">            <span class=\"attr\">memory:</span> <span class=\"string\">256Mi</span></span><br><span class=\"line\">        <span class=\"attr\">volumeMounts:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">mountPath:</span> <span class=\"string\">/var/lib/mysql</span></span><br><span class=\"line\">          <span class=\"attr\">name:</span> <span class=\"string\">data</span></span><br><span class=\"line\">      <span class=\"attr\">initContainers:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">command:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">rm</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">-fr</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">/var/lib/mysql/lost+found</span></span><br><span class=\"line\">        <span class=\"attr\">name:</span> <span class=\"string\">remove-lost-found</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">busybox:1.29.3</span></span><br><span class=\"line\">        <span class=\"attr\">imagePullPolicy:</span> <span class=\"string\">IfNotPresent</span></span><br><span class=\"line\">        <span class=\"attr\">resources:</span></span><br><span class=\"line\">          <span class=\"attr\">requests:</span></span><br><span class=\"line\">            <span class=\"attr\">cpu:</span> <span class=\"string\">10m</span></span><br><span class=\"line\">            <span class=\"attr\">memory:</span> <span class=\"string\">10Mi</span></span><br><span class=\"line\">        <span class=\"attr\">volumeMounts:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">mountPath:</span> <span class=\"string\">/var/lib/mysql</span></span><br><span class=\"line\">          <span class=\"attr\">name:</span> <span class=\"string\">data</span></span><br><span class=\"line\">      <span class=\"attr\">restartPolicy:</span> <span class=\"string\">Always</span></span><br><span class=\"line\">      <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">data</span></span><br><span class=\"line\">        <span class=\"attr\">persistentVolumeClaim:</span></span><br><span class=\"line\">          <span class=\"attr\">claimName:</span> <span class=\"string\">mysql</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-5-3-3-mysql-service-yaml配置文件说明\">2.5 <code>3.3.mysql-service.yaml</code>配置文件说明</h3>\n<ul>\n<li>暴露mysql的服务，服务名称为<code>mysql</code>,集群端口为<code>3306</code>,节点端口为<code>18306</code></li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Service</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">app:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">app:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">NodePort</span></span><br><span class=\"line\">  <span class=\"attr\">ports:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">    <span class=\"attr\">nodePort:</span> <span class=\"number\">18306</span> <span class=\"comment\">#节点端口，可以k8s节点的ip加这个端口号可以访问</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">3306</span> <span class=\"comment\">#集群端口，在k8s集群内部可以直接访问，如mysql:3306</span></span><br><span class=\"line\">    <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">    <span class=\"attr\">targetPort:</span> <span class=\"string\">mysql</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-6-4-1-eureka-deployment-yaml配置文件说明\">2.6 <code>4.1.eureka-deployment.yaml</code>配置文件说明</h3>\n<ul>\n<li>部署cok-source-java-eureka镜像的Deployment，拉取镜像策略为<code>Always</code>,容器暴露端口为<code>18761</code></li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Deployment</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">replicas:</span> <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">matchLabels:</span></span><br><span class=\"line\">      <span class=\"attr\">appname:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">  <span class=\"attr\">template:</span></span><br><span class=\"line\">    <span class=\"attr\">metadata:</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"attr\">appname:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">    <span class=\"attr\">spec:</span></span><br><span class=\"line\">      <span class=\"attr\">containers:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">image:</span> <span class=\"string\">hub.aosccs.com.cn:8888/cokk8s/cok-source-java-eureka:v0.0.1</span></span><br><span class=\"line\">        <span class=\"attr\">imagePullPolicy:</span> <span class=\"string\">Always</span></span><br><span class=\"line\">        <span class=\"attr\">name:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">containerPort:</span> <span class=\"number\">18761</span></span><br><span class=\"line\">          <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">      <span class=\"attr\">restartPolicy:</span> <span class=\"string\">Always</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-7-4-2-eureka-service-yaml配置文件说明\">2.7 <code>4.2.eureka-service.yaml</code>配置文件说明</h3>\n<ul>\n<li>定义cok-source-java-eureka暴露的服务<code>eureka</code>,目的是为了后面的zuul和service1可以通过<code>eureka:18761</code>连接eureka服务</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Service</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">NodePort</span></span><br><span class=\"line\">  <span class=\"attr\">ports:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">serice-0</span></span><br><span class=\"line\">    <span class=\"attr\">nodePort:</span> <span class=\"number\">18761</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">18761</span></span><br><span class=\"line\">    <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">    <span class=\"attr\">targetPort:</span> <span class=\"number\">18761</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-8-5-1-zuul-deployment-yaml配置文件说明\">2.8 <code>5.1.zuul-deployment.yaml</code>配置文件说明</h3>\n<ul>\n<li>定义部署zuul的Deployment，连接eureka的地址为<code>http://eureka:18761/eureka</code>,容器端口为<code>18762</code></li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Deployment</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">replicas:</span> <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">matchLabels:</span></span><br><span class=\"line\">      <span class=\"attr\">appname:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">  <span class=\"attr\">template:</span></span><br><span class=\"line\">    <span class=\"attr\">metadata:</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"attr\">appname:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">    <span class=\"attr\">spec:</span></span><br><span class=\"line\">      <span class=\"attr\">containers:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">env:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">EUREKA_URI</span></span><br><span class=\"line\">          <span class=\"attr\">value:</span> <span class=\"string\">http://eureka:18761/eureka</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">hub.aosccs.com.cn:8888/cokk8s/cok-source-java-zuul:v0.0.1</span></span><br><span class=\"line\">        <span class=\"attr\">imagePullPolicy:</span> <span class=\"string\">Always</span></span><br><span class=\"line\">        <span class=\"attr\">name:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">containerPort:</span> <span class=\"number\">18762</span></span><br><span class=\"line\">          <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">      <span class=\"attr\">restartPolicy:</span> <span class=\"string\">Always</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-9-5-2-zuul-service-yaml配置文件说明\">2.9 <code>5.2.zuul-service.yaml</code>配置文件说明</h3>\n<ul>\n<li>暴露zuul的节点端口<code>18762</code>，后续测试的时候前端页面通过这个端口调用后台接口</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Service</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">NodePort</span></span><br><span class=\"line\">  <span class=\"attr\">ports:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">serice-zuul</span></span><br><span class=\"line\">    <span class=\"attr\">nodePort:</span> <span class=\"number\">18762</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">18762</span></span><br><span class=\"line\">    <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">    <span class=\"attr\">targetPort:</span> <span class=\"number\">18762</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-10-6-service1-deployment-yaml配置文件说明\">2.10 <code>6.service1-deployment.yaml</code>配置文件说明</h3>\n<ul>\n<li>定义部署service1的Deployment，连接eureka的地址为<code>http://eureka:18761/eureka</code>,容器端口为<code>18763</code></li>\n<li>由于service1不直接对外提供服务（外部通过zuul访问service1），因此不需要配置service1的节点端口等</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Deployment</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">service1</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">service1</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">replicas:</span> <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">matchLabels:</span></span><br><span class=\"line\">      <span class=\"attr\">appname:</span> <span class=\"string\">service1</span></span><br><span class=\"line\">  <span class=\"attr\">template:</span></span><br><span class=\"line\">    <span class=\"attr\">metadata:</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"attr\">appname:</span> <span class=\"string\">service1</span></span><br><span class=\"line\">    <span class=\"attr\">spec:</span></span><br><span class=\"line\">      <span class=\"attr\">containers:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">env:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">EUREKA_URI</span></span><br><span class=\"line\">          <span class=\"attr\">value:</span> <span class=\"string\">http://eureka:18761/eureka</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">hub.aosccs.com.cn:8888/cokk8s/cok-source-java-service1:v0.0.1</span></span><br><span class=\"line\">        <span class=\"attr\">imagePullPolicy:</span> <span class=\"string\">Always</span></span><br><span class=\"line\">        <span class=\"attr\">livenessProbe:</span></span><br><span class=\"line\">          <span class=\"attr\">failureThreshold:</span> <span class=\"number\">3</span></span><br><span class=\"line\">          <span class=\"attr\">initialDelaySeconds:</span> <span class=\"number\">120</span></span><br><span class=\"line\">          <span class=\"attr\">periodSeconds:</span> <span class=\"number\">10</span></span><br><span class=\"line\">          <span class=\"attr\">successThreshold:</span> <span class=\"number\">1</span></span><br><span class=\"line\">          <span class=\"attr\">tcpSocket:</span></span><br><span class=\"line\">            <span class=\"attr\">port:</span> <span class=\"number\">18763</span></span><br><span class=\"line\">          <span class=\"attr\">timeoutSeconds:</span> <span class=\"number\">30</span></span><br><span class=\"line\">        <span class=\"attr\">name:</span> <span class=\"string\">service1</span></span><br><span class=\"line\">        <span class=\"attr\">volumeMounts:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">mountPath:</span> <span class=\"string\">/opt/application.yml</span></span><br><span class=\"line\">          <span class=\"attr\">name:</span> <span class=\"string\">application-yml-config</span></span><br><span class=\"line\">          <span class=\"attr\">subPath:</span> <span class=\"string\">application.yml</span></span><br><span class=\"line\">      <span class=\"attr\">restartPolicy:</span> <span class=\"string\">Always</span></span><br><span class=\"line\">      <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">application-yml-config</span></span><br><span class=\"line\">        <span class=\"attr\">configMap:</span></span><br><span class=\"line\">          <span class=\"attr\">defaultMode:</span> <span class=\"number\">420</span></span><br><span class=\"line\">          <span class=\"attr\">items:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"attr\">key:</span> <span class=\"string\">service-application.yml</span></span><br><span class=\"line\">            <span class=\"attr\">path:</span> <span class=\"string\">application.yml</span></span><br><span class=\"line\">          <span class=\"attr\">name:</span> <span class=\"string\">cokk8s</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-11-7-1-vue-ui-deployment-yaml配置文件说明\">2.11 <code>7.1.vue-ui-deployment.yaml</code>配置文件说明</h3>\n<ul>\n<li>定义部署vue-ui的Deployment，由于镜像基于nginx构建，用的nginx的默认配置，因此容器端口为nginx的默认端口<code>80</code></li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Deployment</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">replicas:</span> <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">matchLabels:</span></span><br><span class=\"line\">      <span class=\"attr\">appname:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">  <span class=\"attr\">template:</span></span><br><span class=\"line\">    <span class=\"attr\">metadata:</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"attr\">appname:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">    <span class=\"attr\">spec:</span></span><br><span class=\"line\">      <span class=\"attr\">containers:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">image:</span> <span class=\"string\">edgehub.acedge.cn:8888/cokk8s/cok-source-vue:v0.0.1</span></span><br><span class=\"line\">        <span class=\"attr\">imagePullPolicy:</span> <span class=\"string\">Always</span></span><br><span class=\"line\">        <span class=\"attr\">name:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">containerPort:</span> <span class=\"number\">80</span></span><br><span class=\"line\">          <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">      <span class=\"attr\">restartPolicy:</span> <span class=\"string\">Always</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-12-7-2-vue-ui-service-yaml配置文件说明\">2.12 <code>7.2.vue-ui-service.yaml</code>配置文件说明</h3>\n<ul>\n<li>对外暴露vue-ui的服务，节点端口为<code>18765</code></li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Service</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">ports:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">serice-0</span></span><br><span class=\"line\">    <span class=\"attr\">nodePort:</span> <span class=\"number\">18765</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">80</span></span><br><span class=\"line\">    <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">    <span class=\"attr\">targetPort:</span> <span class=\"number\">80</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">NodePort</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"3-测试访问\">3. 测试访问</h2>\n<p>访问地址：<a href=\"http://192.168.3.124:18765/cok-ui/index.html\">http://192.168.3.124:18765/cok-ui/index.html</a><br>\n<img src=\"image/20200522_194518_31.png\" alt=\"20200522_194518_31\"></p>\n<h2 id=\"4-服务调用逻辑\">4. 服务调用逻辑</h2>\n<p><img src=\"image/20200529_100114_48.png\" alt=\"20200529_100114_48\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>部署在k8s中</h1>\n<h2 id=\"1-部署脚本\">1. 部署脚本</h2>\n<p>参考 <code>deploy/deploy-on-k8s.sh</code> 中的脚本</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 将镜像打tag</span></span><br><span class=\"line\">docker tag cok-source-java-service1:v0.0.1 hub.aosccs.com.cn:8888/cokk8s/cok-source-java-service1:v0.0.1</span><br><span class=\"line\">docker tag cok-source-vue:v0.0.1           hub.aosccs.com.cn:8888/cokk8s/cok-source-vue:v0.0.1</span><br><span class=\"line\">docker tag cok-source-java-zuul:v0.0.1     hub.aosccs.com.cn:8888/cokk8s/cok-source-java-zuul:v0.0.1</span><br><span class=\"line\">docker tag cok-source-java-eureka:v0.0.1   hub.aosccs.com.cn:8888/cokk8s/cok-source-java-eureka:v0.0.1</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 推送到镜像仓库</span></span><br><span class=\"line\">docker login hub.aosccs.com.cn:8888</span><br><span class=\"line\">docker push hub.aosccs.com.cn:8888/cokk8s/cok-source-java-service1:v0.0.1</span><br><span class=\"line\">docker push hub.aosccs.com.cn:8888/cokk8s/cok-source-vue:v0.0.1</span><br><span class=\"line\">docker push hub.aosccs.com.cn:8888/cokk8s/cok-source-java-zuul:v0.0.1</span><br><span class=\"line\">docker push hub.aosccs.com.cn:8888/cokk8s/cok-source-java-eureka:v0.0.1</span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 安装服务</span></span><br><span class=\"line\">kubectl create -f k8s-config/1.namespaces.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/2.configmaps.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/3.1.mysql-pvc.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/3.2.mysql-deployment.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/3.3.mysql-service.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/4.1.eureka-deployment.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/4.2.eureka-service.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/5.1.zuul-deployment.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/5.2.zuul-service.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/6.service1-deployment.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/7.1.vue-ui-deployment.yaml</span><br><span class=\"line\">kubectl create -f k8s-config/7.2.vue-ui-service.yaml</span><br></pre></td></tr></table></figure>\n<h2 id=\"2-部署配置文件讲解\">2. 部署配置文件讲解</h2>\n<h3 id=\"2-1-1-namespaces-yaml配置文件说明\">2.1 <code>1.namespaces.yaml</code>配置文件说明</h3>\n<ul>\n<li>创建 <code>cokk8s</code> 命名空间（一般一个项目用一个命名空间）</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Namespace</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">cokk8s</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-2-2-configmaps-yaml配置文件说明\">2.2 <code>2.configmaps.yaml</code>配置文件说明</h3>\n<ul>\n<li>配置中创建了一个名称为<code>cokk8s</code>的ConfigMap配置，配置中有一个Key ：<code>service-application.yml</code></li>\n<li>这个配置在后续的<code>6.service1-deployment.yaml</code>中会用到</li>\n<li>配置中连接的数据为地址<code>mysql:3306</code>,表示连接本namespace（<code>cokk8s</code>）中的<code>mysql</code>服务的<code>3306</code>端口</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">data:</span></span><br><span class=\"line\">  <span class=\"attr\">service-application.yml:</span> <span class=\"string\">|-</span></span><br><span class=\"line\"><span class=\"string\">    server:</span></span><br><span class=\"line\"><span class=\"string\">      port: 18763</span></span><br><span class=\"line\"><span class=\"string\">    spring:</span></span><br><span class=\"line\"><span class=\"string\">      datasource:</span></span><br><span class=\"line\"><span class=\"string\">        max-idle: 8</span></span><br><span class=\"line\"><span class=\"string\">        min-idle: 8</span></span><br><span class=\"line\"><span class=\"string\">        max-active: 20</span></span><br><span class=\"line\"><span class=\"string\">        driverClassName: com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"string\">        initial-size: 10</span></span><br><span class=\"line\"><span class=\"string\">        type: com.alibaba.druid.pool.DruidDataSource</span></span><br><span class=\"line\"><span class=\"string\">        url: jdbc:mysql://mysql:3306/mysql?characterEncoding=utf8&amp;useSSL=false&amp;allowMultiQueries=true</span></span><br><span class=\"line\"><span class=\"string\">        username: root</span></span><br><span class=\"line\"><span class=\"string\">        password: 123456</span></span><br><span class=\"line\"><span class=\"string\">      jpa:</span></span><br><span class=\"line\"><span class=\"string\">        show-sql: true</span></span><br><span class=\"line\"><span class=\"string\">        database: mysql</span></span><br><span class=\"line\"><span class=\"string\">        hibernate:</span></span><br><span class=\"line\"><span class=\"string\">          ddl-auto: create</span></span><br><span class=\"line\"><span class=\"string\">        database-platform: org.hibernate.dialect.MySQL5Dialect</span></span><br><span class=\"line\"><span class=\"string\"></span><span class=\"attr\">kind:</span> <span class=\"string\">ConfigMap</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-3-3-1-mysql-pvc-yaml配置文件说明\">2.3 <code>3.1.mysql-pvc.yaml</code>配置文件说明</h3>\n<ul>\n<li>创建一个mysql的PersistentVolumeClaim（PVC），用于后续部署MySQL的时候（<code>3.2.mysql-deployment.yaml</code>），存储MySQL的数据文件</li>\n<li>注意：我们这里用到了k8s中我们已经建好的storageClassName:<code>managed-nfs-storage</code>（如果你所在k8s集群中没有，需要手动创建）</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">PersistentVolumeClaim</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">annotations:</span></span><br><span class=\"line\">    <span class=\"attr\">volume.beta.kubernetes.io/storage-provisioner:</span> <span class=\"string\">fuseim.pri/ifs</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">accessModes:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">ReadWriteMany</span></span><br><span class=\"line\">  <span class=\"attr\">resources:</span></span><br><span class=\"line\">    <span class=\"attr\">requests:</span></span><br><span class=\"line\">      <span class=\"attr\">storage:</span> <span class=\"string\">2Gi</span></span><br><span class=\"line\">  <span class=\"attr\">storageClassName:</span> <span class=\"string\">managed-nfs-storage</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-4-3-2-mysql-deployment-yaml配置文件说明\">2.4 <code>3.2.mysql-deployment.yaml</code>配置文件说明</h3>\n<ul>\n<li>部署mysql，设置密码为<code>123456</code>,存储为上一步创建的pvc：<code>mysql</code>，存储挂载到<code>/var/lib/mysql</code>目录</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Deployment</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">app:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">replicas:</span> <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">matchLabels:</span></span><br><span class=\"line\">      <span class=\"attr\">app:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">template:</span></span><br><span class=\"line\">    <span class=\"attr\">metadata:</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"attr\">app:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">    <span class=\"attr\">spec:</span></span><br><span class=\"line\">      <span class=\"attr\">containers:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">env:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">MYSQL_ROOT_PASSWORD</span></span><br><span class=\"line\">          <span class=\"attr\">value:</span> <span class=\"string\">&quot;123456&quot;</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">MYSQL_PASSWORD</span></span><br><span class=\"line\">          <span class=\"attr\">value:</span> <span class=\"string\">&quot;123456&quot;</span></span><br><span class=\"line\">        <span class=\"attr\">name:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">mysql:5.7.30</span></span><br><span class=\"line\">        <span class=\"attr\">imagePullPolicy:</span> <span class=\"string\">IfNotPresent</span></span><br><span class=\"line\">        <span class=\"attr\">livenessProbe:</span></span><br><span class=\"line\">          <span class=\"attr\">exec:</span></span><br><span class=\"line\">            <span class=\"attr\">command:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">sh</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">-c</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">mysqladmin</span> <span class=\"string\">ping</span> <span class=\"string\">-u</span> <span class=\"string\">root</span> <span class=\"string\">-p$&#123;MYSQL_ROOT_PASSWORD&#125;</span></span><br><span class=\"line\">          <span class=\"attr\">failureThreshold:</span> <span class=\"number\">3</span></span><br><span class=\"line\">          <span class=\"attr\">initialDelaySeconds:</span> <span class=\"number\">30</span></span><br><span class=\"line\">          <span class=\"attr\">periodSeconds:</span> <span class=\"number\">10</span></span><br><span class=\"line\">          <span class=\"attr\">successThreshold:</span> <span class=\"number\">1</span></span><br><span class=\"line\">          <span class=\"attr\">timeoutSeconds:</span> <span class=\"number\">5</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">containerPort:</span> <span class=\"number\">3306</span></span><br><span class=\"line\">          <span class=\"attr\">name:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">          <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">        <span class=\"attr\">readinessProbe:</span></span><br><span class=\"line\">          <span class=\"attr\">exec:</span></span><br><span class=\"line\">            <span class=\"attr\">command:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">sh</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">-c</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">mysqladmin</span> <span class=\"string\">ping</span> <span class=\"string\">-u</span> <span class=\"string\">root</span> <span class=\"string\">-p$&#123;MYSQL_ROOT_PASSWORD&#125;</span></span><br><span class=\"line\">          <span class=\"attr\">failureThreshold:</span> <span class=\"number\">3</span></span><br><span class=\"line\">          <span class=\"attr\">initialDelaySeconds:</span> <span class=\"number\">5</span></span><br><span class=\"line\">          <span class=\"attr\">periodSeconds:</span> <span class=\"number\">10</span></span><br><span class=\"line\">          <span class=\"attr\">successThreshold:</span> <span class=\"number\">1</span></span><br><span class=\"line\">          <span class=\"attr\">timeoutSeconds:</span> <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"attr\">resources:</span></span><br><span class=\"line\">          <span class=\"attr\">requests:</span></span><br><span class=\"line\">            <span class=\"attr\">cpu:</span> <span class=\"string\">100m</span></span><br><span class=\"line\">            <span class=\"attr\">memory:</span> <span class=\"string\">256Mi</span></span><br><span class=\"line\">        <span class=\"attr\">volumeMounts:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">mountPath:</span> <span class=\"string\">/var/lib/mysql</span></span><br><span class=\"line\">          <span class=\"attr\">name:</span> <span class=\"string\">data</span></span><br><span class=\"line\">      <span class=\"attr\">initContainers:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">command:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">rm</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">-fr</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">/var/lib/mysql/lost+found</span></span><br><span class=\"line\">        <span class=\"attr\">name:</span> <span class=\"string\">remove-lost-found</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">busybox:1.29.3</span></span><br><span class=\"line\">        <span class=\"attr\">imagePullPolicy:</span> <span class=\"string\">IfNotPresent</span></span><br><span class=\"line\">        <span class=\"attr\">resources:</span></span><br><span class=\"line\">          <span class=\"attr\">requests:</span></span><br><span class=\"line\">            <span class=\"attr\">cpu:</span> <span class=\"string\">10m</span></span><br><span class=\"line\">            <span class=\"attr\">memory:</span> <span class=\"string\">10Mi</span></span><br><span class=\"line\">        <span class=\"attr\">volumeMounts:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">mountPath:</span> <span class=\"string\">/var/lib/mysql</span></span><br><span class=\"line\">          <span class=\"attr\">name:</span> <span class=\"string\">data</span></span><br><span class=\"line\">      <span class=\"attr\">restartPolicy:</span> <span class=\"string\">Always</span></span><br><span class=\"line\">      <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">data</span></span><br><span class=\"line\">        <span class=\"attr\">persistentVolumeClaim:</span></span><br><span class=\"line\">          <span class=\"attr\">claimName:</span> <span class=\"string\">mysql</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-5-3-3-mysql-service-yaml配置文件说明\">2.5 <code>3.3.mysql-service.yaml</code>配置文件说明</h3>\n<ul>\n<li>暴露mysql的服务，服务名称为<code>mysql</code>,集群端口为<code>3306</code>,节点端口为<code>18306</code></li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Service</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">app:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">app:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">NodePort</span></span><br><span class=\"line\">  <span class=\"attr\">ports:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">    <span class=\"attr\">nodePort:</span> <span class=\"number\">18306</span> <span class=\"comment\">#节点端口，可以k8s节点的ip加这个端口号可以访问</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">3306</span> <span class=\"comment\">#集群端口，在k8s集群内部可以直接访问，如mysql:3306</span></span><br><span class=\"line\">    <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">    <span class=\"attr\">targetPort:</span> <span class=\"string\">mysql</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-6-4-1-eureka-deployment-yaml配置文件说明\">2.6 <code>4.1.eureka-deployment.yaml</code>配置文件说明</h3>\n<ul>\n<li>部署cok-source-java-eureka镜像的Deployment，拉取镜像策略为<code>Always</code>,容器暴露端口为<code>18761</code></li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Deployment</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">replicas:</span> <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">matchLabels:</span></span><br><span class=\"line\">      <span class=\"attr\">appname:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">  <span class=\"attr\">template:</span></span><br><span class=\"line\">    <span class=\"attr\">metadata:</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"attr\">appname:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">    <span class=\"attr\">spec:</span></span><br><span class=\"line\">      <span class=\"attr\">containers:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">image:</span> <span class=\"string\">hub.aosccs.com.cn:8888/cokk8s/cok-source-java-eureka:v0.0.1</span></span><br><span class=\"line\">        <span class=\"attr\">imagePullPolicy:</span> <span class=\"string\">Always</span></span><br><span class=\"line\">        <span class=\"attr\">name:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">containerPort:</span> <span class=\"number\">18761</span></span><br><span class=\"line\">          <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">      <span class=\"attr\">restartPolicy:</span> <span class=\"string\">Always</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-7-4-2-eureka-service-yaml配置文件说明\">2.7 <code>4.2.eureka-service.yaml</code>配置文件说明</h3>\n<ul>\n<li>定义cok-source-java-eureka暴露的服务<code>eureka</code>,目的是为了后面的zuul和service1可以通过<code>eureka:18761</code>连接eureka服务</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Service</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">eureka</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">NodePort</span></span><br><span class=\"line\">  <span class=\"attr\">ports:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">serice-0</span></span><br><span class=\"line\">    <span class=\"attr\">nodePort:</span> <span class=\"number\">18761</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">18761</span></span><br><span class=\"line\">    <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">    <span class=\"attr\">targetPort:</span> <span class=\"number\">18761</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-8-5-1-zuul-deployment-yaml配置文件说明\">2.8 <code>5.1.zuul-deployment.yaml</code>配置文件说明</h3>\n<ul>\n<li>定义部署zuul的Deployment，连接eureka的地址为<code>http://eureka:18761/eureka</code>,容器端口为<code>18762</code></li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Deployment</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">replicas:</span> <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">matchLabels:</span></span><br><span class=\"line\">      <span class=\"attr\">appname:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">  <span class=\"attr\">template:</span></span><br><span class=\"line\">    <span class=\"attr\">metadata:</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"attr\">appname:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">    <span class=\"attr\">spec:</span></span><br><span class=\"line\">      <span class=\"attr\">containers:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">env:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">EUREKA_URI</span></span><br><span class=\"line\">          <span class=\"attr\">value:</span> <span class=\"string\">http://eureka:18761/eureka</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">hub.aosccs.com.cn:8888/cokk8s/cok-source-java-zuul:v0.0.1</span></span><br><span class=\"line\">        <span class=\"attr\">imagePullPolicy:</span> <span class=\"string\">Always</span></span><br><span class=\"line\">        <span class=\"attr\">name:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">containerPort:</span> <span class=\"number\">18762</span></span><br><span class=\"line\">          <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">      <span class=\"attr\">restartPolicy:</span> <span class=\"string\">Always</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-9-5-2-zuul-service-yaml配置文件说明\">2.9 <code>5.2.zuul-service.yaml</code>配置文件说明</h3>\n<ul>\n<li>暴露zuul的节点端口<code>18762</code>，后续测试的时候前端页面通过这个端口调用后台接口</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Service</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">zuul</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">NodePort</span></span><br><span class=\"line\">  <span class=\"attr\">ports:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">serice-zuul</span></span><br><span class=\"line\">    <span class=\"attr\">nodePort:</span> <span class=\"number\">18762</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">18762</span></span><br><span class=\"line\">    <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">    <span class=\"attr\">targetPort:</span> <span class=\"number\">18762</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-10-6-service1-deployment-yaml配置文件说明\">2.10 <code>6.service1-deployment.yaml</code>配置文件说明</h3>\n<ul>\n<li>定义部署service1的Deployment，连接eureka的地址为<code>http://eureka:18761/eureka</code>,容器端口为<code>18763</code></li>\n<li>由于service1不直接对外提供服务（外部通过zuul访问service1），因此不需要配置service1的节点端口等</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Deployment</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">service1</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">service1</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">replicas:</span> <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">matchLabels:</span></span><br><span class=\"line\">      <span class=\"attr\">appname:</span> <span class=\"string\">service1</span></span><br><span class=\"line\">  <span class=\"attr\">template:</span></span><br><span class=\"line\">    <span class=\"attr\">metadata:</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"attr\">appname:</span> <span class=\"string\">service1</span></span><br><span class=\"line\">    <span class=\"attr\">spec:</span></span><br><span class=\"line\">      <span class=\"attr\">containers:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">env:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">EUREKA_URI</span></span><br><span class=\"line\">          <span class=\"attr\">value:</span> <span class=\"string\">http://eureka:18761/eureka</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">hub.aosccs.com.cn:8888/cokk8s/cok-source-java-service1:v0.0.1</span></span><br><span class=\"line\">        <span class=\"attr\">imagePullPolicy:</span> <span class=\"string\">Always</span></span><br><span class=\"line\">        <span class=\"attr\">livenessProbe:</span></span><br><span class=\"line\">          <span class=\"attr\">failureThreshold:</span> <span class=\"number\">3</span></span><br><span class=\"line\">          <span class=\"attr\">initialDelaySeconds:</span> <span class=\"number\">120</span></span><br><span class=\"line\">          <span class=\"attr\">periodSeconds:</span> <span class=\"number\">10</span></span><br><span class=\"line\">          <span class=\"attr\">successThreshold:</span> <span class=\"number\">1</span></span><br><span class=\"line\">          <span class=\"attr\">tcpSocket:</span></span><br><span class=\"line\">            <span class=\"attr\">port:</span> <span class=\"number\">18763</span></span><br><span class=\"line\">          <span class=\"attr\">timeoutSeconds:</span> <span class=\"number\">30</span></span><br><span class=\"line\">        <span class=\"attr\">name:</span> <span class=\"string\">service1</span></span><br><span class=\"line\">        <span class=\"attr\">volumeMounts:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">mountPath:</span> <span class=\"string\">/opt/application.yml</span></span><br><span class=\"line\">          <span class=\"attr\">name:</span> <span class=\"string\">application-yml-config</span></span><br><span class=\"line\">          <span class=\"attr\">subPath:</span> <span class=\"string\">application.yml</span></span><br><span class=\"line\">      <span class=\"attr\">restartPolicy:</span> <span class=\"string\">Always</span></span><br><span class=\"line\">      <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">application-yml-config</span></span><br><span class=\"line\">        <span class=\"attr\">configMap:</span></span><br><span class=\"line\">          <span class=\"attr\">defaultMode:</span> <span class=\"number\">420</span></span><br><span class=\"line\">          <span class=\"attr\">items:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"attr\">key:</span> <span class=\"string\">service-application.yml</span></span><br><span class=\"line\">            <span class=\"attr\">path:</span> <span class=\"string\">application.yml</span></span><br><span class=\"line\">          <span class=\"attr\">name:</span> <span class=\"string\">cokk8s</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-11-7-1-vue-ui-deployment-yaml配置文件说明\">2.11 <code>7.1.vue-ui-deployment.yaml</code>配置文件说明</h3>\n<ul>\n<li>定义部署vue-ui的Deployment，由于镜像基于nginx构建，用的nginx的默认配置，因此容器端口为nginx的默认端口<code>80</code></li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Deployment</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">replicas:</span> <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">matchLabels:</span></span><br><span class=\"line\">      <span class=\"attr\">appname:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">  <span class=\"attr\">template:</span></span><br><span class=\"line\">    <span class=\"attr\">metadata:</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"attr\">appname:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">    <span class=\"attr\">spec:</span></span><br><span class=\"line\">      <span class=\"attr\">containers:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">image:</span> <span class=\"string\">edgehub.acedge.cn:8888/cokk8s/cok-source-vue:v0.0.1</span></span><br><span class=\"line\">        <span class=\"attr\">imagePullPolicy:</span> <span class=\"string\">Always</span></span><br><span class=\"line\">        <span class=\"attr\">name:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">containerPort:</span> <span class=\"number\">80</span></span><br><span class=\"line\">          <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">      <span class=\"attr\">restartPolicy:</span> <span class=\"string\">Always</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-12-7-2-vue-ui-service-yaml配置文件说明\">2.12 <code>7.2.vue-ui-service.yaml</code>配置文件说明</h3>\n<ul>\n<li>对外暴露vue-ui的服务，节点端口为<code>18765</code></li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Service</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">labels:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">  <span class=\"attr\">namespace:</span> <span class=\"string\">cokk8s</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">ports:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">serice-0</span></span><br><span class=\"line\">    <span class=\"attr\">nodePort:</span> <span class=\"number\">18765</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">80</span></span><br><span class=\"line\">    <span class=\"attr\">protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\">    <span class=\"attr\">targetPort:</span> <span class=\"number\">80</span></span><br><span class=\"line\">  <span class=\"attr\">selector:</span></span><br><span class=\"line\">    <span class=\"attr\">appname:</span> <span class=\"string\">vue-ui</span></span><br><span class=\"line\">  <span class=\"attr\">type:</span> <span class=\"string\">NodePort</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"3-测试访问\">3. 测试访问</h2>\n<p>访问地址：<a href=\"http://192.168.3.124:18765/cok-ui/index.html\">http://192.168.3.124:18765/cok-ui/index.html</a><br>\n<img src=\"image/20200522_194518_31.png\" alt=\"20200522_194518_31\"></p>\n<h2 id=\"4-服务调用逻辑\">4. 服务调用逻辑</h2>\n<p><img src=\"image/20200529_100114_48.png\" alt=\"20200529_100114_48\"></p>\n"},{"_content":"# 通过容器云平台部署在k8s中\n\n<font color=red>注意：如果要重新测试，需要先删除老的项目、namespace等资源再重新建项目、分存储、再测试</font>\n\n## 1. 先在容器云平台中创建项目（由管理员创建）\n- 创建项目` 容器化上云培训`,`cok`\n![20200522_200957_63](image/20200522_200957_63.png)\n- 为项目分配k8s集群\n```\n端口范围： 18000 - 18999\n```\n![20200522_201158_49](image/20200522_201158_49.png)\n- 为项目分配用户权限\n![20200522_201315_93](image/20200522_201315_93.png)\n- 为项目分配两个存储：mysql、mysql-comp\n![20200522_200754_75](image/20200522_200754_75.png)\n\n## 2. 部署\n### 2.1 部署mysql\n![20200522_215035_42](image/20200522_215035_42.png)\n- 配置mysql参数，节点端口：`18306`\n![20200522_215152_89](image/20200522_215152_89.png)\n\n### 2.2 部署eureka\n- 先设置svn下载的账号密码\n![20200522_202529_68](image/20200522_202529_68.png)\n\n- 创建`Maven打包并构建镜像部署K8S`模板\n![20200522_202609_17](image/20200522_202609_17.png)\n\n- 设置erueka模板参数\n```\nsvn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-java\ndockerfile： cok-source-java-eureka/Dockerfile\n监控检查端口： 18761\n目标端口： 18761\n集群端口： 18761\n节点端口： 18761\n```\n![20200522_213753_38](image/20200522_213753_38.png)\n![20200522_213709_70](image/20200522_213709_70.png)\n\n### 2.3 部署zuul\n- 设置zuul模板参数\n```\nsvn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-java\ndockerfile： cok-source-java-zuul/Dockerfile\n监控检查端口： 18762\n环境变量： EUREKA_URI  http://eureka:18761/eureka\n目标端口： 18762\n集群端口： 18762\n节点端口： 18762\n```\n![20200522_214007_77](image/20200522_214007_77.png)\n![20200522_214124_66](image/20200522_214124_66.png)\n\n### 2.4 部署service1\n- 增加application.yml参数配置\n\n`service-application.yml`:\n```yaml\n    server:\n      port: 18763\n    spring:\n      datasource:\n        max-idle: 8\n        min-idle: 8\n        max-active: 20\n        driverClassName: com.mysql.cj.jdbc.Driver\n        initial-size: 10\n        type: com.alibaba.druid.pool.DruidDataSource\n        url: jdbc:mysql://mysql:3306/mysql?characterEncoding=utf8&useSSL=false&allowMultiQueries=true\n        username: root\n        password: 123456\n      jpa:\n        show-sql: true\n        database: mysql\n        hibernate:\n          ddl-auto: create\n        database-platform: org.hibernate.dialect.MySQL5Dialect\n```\n![20200522_214326_50](image/20200522_214326_50.png)\n- 配置service1\n```\nsvn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-java\ndockerfile： cok-source-java-service1/Dockerfile\n监控检查端口： 18763\n环境变量： EUREKA_URI  http://eureka:18761/eureka\n文件挂载： /opt/application.yml  service-application.yml\n```\n![20200522_214730_14](image/20200522_214730_14.png)\n![20200522_214806_18](image/20200522_214806_18.png)\n\n### 2.5 部署vue-ui\n- 创建`NPM打包并构建镜像部署`打包模板\n![20200522_215305_60](image/20200522_215305_60.png)\n- 设置模板参数\n```\nsvn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-vue\ndockerfile： Dockerfile\n目标端口： 80\n集群端口： 80\n节点端口： 18765\n```\n![20200522_215459_51](image/20200522_215459_51.png)\n![20200522_215520_16](image/20200522_215520_16.png)\n\n## 3.测试访问\n\n[http://192.168.3.124:18765/cok-ui/index.html](http://192.168.3.124:18765/cok-ui/index.html)\n","source":"cok-book/3.3.project-to-ccs.md","raw":"# 通过容器云平台部署在k8s中\n\n<font color=red>注意：如果要重新测试，需要先删除老的项目、namespace等资源再重新建项目、分存储、再测试</font>\n\n## 1. 先在容器云平台中创建项目（由管理员创建）\n- 创建项目` 容器化上云培训`,`cok`\n![20200522_200957_63](image/20200522_200957_63.png)\n- 为项目分配k8s集群\n```\n端口范围： 18000 - 18999\n```\n![20200522_201158_49](image/20200522_201158_49.png)\n- 为项目分配用户权限\n![20200522_201315_93](image/20200522_201315_93.png)\n- 为项目分配两个存储：mysql、mysql-comp\n![20200522_200754_75](image/20200522_200754_75.png)\n\n## 2. 部署\n### 2.1 部署mysql\n![20200522_215035_42](image/20200522_215035_42.png)\n- 配置mysql参数，节点端口：`18306`\n![20200522_215152_89](image/20200522_215152_89.png)\n\n### 2.2 部署eureka\n- 先设置svn下载的账号密码\n![20200522_202529_68](image/20200522_202529_68.png)\n\n- 创建`Maven打包并构建镜像部署K8S`模板\n![20200522_202609_17](image/20200522_202609_17.png)\n\n- 设置erueka模板参数\n```\nsvn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-java\ndockerfile： cok-source-java-eureka/Dockerfile\n监控检查端口： 18761\n目标端口： 18761\n集群端口： 18761\n节点端口： 18761\n```\n![20200522_213753_38](image/20200522_213753_38.png)\n![20200522_213709_70](image/20200522_213709_70.png)\n\n### 2.3 部署zuul\n- 设置zuul模板参数\n```\nsvn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-java\ndockerfile： cok-source-java-zuul/Dockerfile\n监控检查端口： 18762\n环境变量： EUREKA_URI  http://eureka:18761/eureka\n目标端口： 18762\n集群端口： 18762\n节点端口： 18762\n```\n![20200522_214007_77](image/20200522_214007_77.png)\n![20200522_214124_66](image/20200522_214124_66.png)\n\n### 2.4 部署service1\n- 增加application.yml参数配置\n\n`service-application.yml`:\n```yaml\n    server:\n      port: 18763\n    spring:\n      datasource:\n        max-idle: 8\n        min-idle: 8\n        max-active: 20\n        driverClassName: com.mysql.cj.jdbc.Driver\n        initial-size: 10\n        type: com.alibaba.druid.pool.DruidDataSource\n        url: jdbc:mysql://mysql:3306/mysql?characterEncoding=utf8&useSSL=false&allowMultiQueries=true\n        username: root\n        password: 123456\n      jpa:\n        show-sql: true\n        database: mysql\n        hibernate:\n          ddl-auto: create\n        database-platform: org.hibernate.dialect.MySQL5Dialect\n```\n![20200522_214326_50](image/20200522_214326_50.png)\n- 配置service1\n```\nsvn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-java\ndockerfile： cok-source-java-service1/Dockerfile\n监控检查端口： 18763\n环境变量： EUREKA_URI  http://eureka:18761/eureka\n文件挂载： /opt/application.yml  service-application.yml\n```\n![20200522_214730_14](image/20200522_214730_14.png)\n![20200522_214806_18](image/20200522_214806_18.png)\n\n### 2.5 部署vue-ui\n- 创建`NPM打包并构建镜像部署`打包模板\n![20200522_215305_60](image/20200522_215305_60.png)\n- 设置模板参数\n```\nsvn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-vue\ndockerfile： Dockerfile\n目标端口： 80\n集群端口： 80\n节点端口： 18765\n```\n![20200522_215459_51](image/20200522_215459_51.png)\n![20200522_215520_16](image/20200522_215520_16.png)\n\n## 3.测试访问\n\n[http://192.168.3.124:18765/cok-ui/index.html](http://192.168.3.124:18765/cok-ui/index.html)\n","date":"2021-07-19T06:44:32.356Z","updated":"2021-01-14T01:19:27.970Z","path":"cok-book/3.3.project-to-ccs.html","title":"","comments":1,"layout":"page","_id":"ckrac7xan001gz8s606ks1lkz","content":"<h1>通过容器云平台部署在k8s中</h1>\n<p><font color=red>注意：如果要重新测试，需要先删除老的项目、namespace等资源再重新建项目、分存储、再测试</font></p>\n<h2 id=\"1-先在容器云平台中创建项目（由管理员创建）\">1. 先在容器云平台中创建项目（由管理员创建）</h2>\n<ul>\n<li>创建项目<code> 容器化上云培训</code>,<code>cok</code><br>\n<img src=\"image/20200522_200957_63.png\" alt=\"20200522_200957_63\"></li>\n<li>为项目分配k8s集群</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">端口范围： 18000 - 18999</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200522_201158_49.png\" alt=\"20200522_201158_49\"></p>\n<ul>\n<li>为项目分配用户权限<br>\n<img src=\"image/20200522_201315_93.png\" alt=\"20200522_201315_93\"></li>\n<li>为项目分配两个存储：mysql、mysql-comp<br>\n<img src=\"image/20200522_200754_75.png\" alt=\"20200522_200754_75\"></li>\n</ul>\n<h2 id=\"2-部署\">2. 部署</h2>\n<h3 id=\"2-1-部署mysql\">2.1 部署mysql</h3>\n<p><img src=\"image/20200522_215035_42.png\" alt=\"20200522_215035_42\"></p>\n<ul>\n<li>配置mysql参数，节点端口：<code>18306</code><br>\n<img src=\"image/20200522_215152_89.png\" alt=\"20200522_215152_89\"></li>\n</ul>\n<h3 id=\"2-2-部署eureka\">2.2 部署eureka</h3>\n<ul>\n<li>\n<p>先设置svn下载的账号密码<br>\n<img src=\"image/20200522_202529_68.png\" alt=\"20200522_202529_68\"></p>\n</li>\n<li>\n<p>创建<code>Maven打包并构建镜像部署K8S</code>模板<br>\n<img src=\"image/20200522_202609_17.png\" alt=\"20200522_202609_17\"></p>\n</li>\n<li>\n<p>设置erueka模板参数</p>\n</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">svn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-java</span><br><span class=\"line\">dockerfile： cok-source-java-eureka/Dockerfile</span><br><span class=\"line\">监控检查端口： 18761</span><br><span class=\"line\">目标端口： 18761</span><br><span class=\"line\">集群端口： 18761</span><br><span class=\"line\">节点端口： 18761</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200522_213753_38.png\" alt=\"20200522_213753_38\"><br>\n<img src=\"image/20200522_213709_70.png\" alt=\"20200522_213709_70\"></p>\n<h3 id=\"2-3-部署zuul\">2.3 部署zuul</h3>\n<ul>\n<li>设置zuul模板参数</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">svn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-java</span><br><span class=\"line\">dockerfile： cok-source-java-zuul/Dockerfile</span><br><span class=\"line\">监控检查端口： 18762</span><br><span class=\"line\">环境变量： EUREKA_URI  http://eureka:18761/eureka</span><br><span class=\"line\">目标端口： 18762</span><br><span class=\"line\">集群端口： 18762</span><br><span class=\"line\">节点端口： 18762</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200522_214007_77.png\" alt=\"20200522_214007_77\"><br>\n<img src=\"image/20200522_214124_66.png\" alt=\"20200522_214124_66\"></p>\n<h3 id=\"2-4-部署service1\">2.4 部署service1</h3>\n<ul>\n<li>增加application.yml参数配置</li>\n</ul>\n<p><code>service-application.yml</code>:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">server:</span></span><br><span class=\"line\">  <span class=\"attr\">port:</span> <span class=\"number\">18763</span></span><br><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"attr\">max-idle:</span> <span class=\"number\">8</span></span><br><span class=\"line\">    <span class=\"attr\">min-idle:</span> <span class=\"number\">8</span></span><br><span class=\"line\">    <span class=\"attr\">max-active:</span> <span class=\"number\">20</span></span><br><span class=\"line\">    <span class=\"attr\">driverClassName:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">    <span class=\"attr\">initial-size:</span> <span class=\"number\">10</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://mysql:3306/mysql?characterEncoding=utf8&amp;useSSL=false&amp;allowMultiQueries=true</span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"number\">123456</span></span><br><span class=\"line\">  <span class=\"attr\">jpa:</span></span><br><span class=\"line\">    <span class=\"attr\">show-sql:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">database:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">    <span class=\"attr\">hibernate:</span></span><br><span class=\"line\">      <span class=\"attr\">ddl-auto:</span> <span class=\"string\">create</span></span><br><span class=\"line\">    <span class=\"attr\">database-platform:</span> <span class=\"string\">org.hibernate.dialect.MySQL5Dialect</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200522_214326_50.png\" alt=\"20200522_214326_50\"></p>\n<ul>\n<li>配置service1</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">svn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-java</span><br><span class=\"line\">dockerfile： cok-source-java-service1/Dockerfile</span><br><span class=\"line\">监控检查端口： 18763</span><br><span class=\"line\">环境变量： EUREKA_URI  http://eureka:18761/eureka</span><br><span class=\"line\">文件挂载： /opt/application.yml  service-application.yml</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200522_214730_14.png\" alt=\"20200522_214730_14\"><br>\n<img src=\"image/20200522_214806_18.png\" alt=\"20200522_214806_18\"></p>\n<h3 id=\"2-5-部署vue-ui\">2.5 部署vue-ui</h3>\n<ul>\n<li>创建<code>NPM打包并构建镜像部署</code>打包模板<br>\n<img src=\"image/20200522_215305_60.png\" alt=\"20200522_215305_60\"></li>\n<li>设置模板参数</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">svn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-vue</span><br><span class=\"line\">dockerfile： Dockerfile</span><br><span class=\"line\">目标端口： 80</span><br><span class=\"line\">集群端口： 80</span><br><span class=\"line\">节点端口： 18765</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200522_215459_51.png\" alt=\"20200522_215459_51\"><br>\n<img src=\"image/20200522_215520_16.png\" alt=\"20200522_215520_16\"></p>\n<h2 id=\"3-测试访问\">3.测试访问</h2>\n<p><a href=\"http://192.168.3.124:18765/cok-ui/index.html\">http://192.168.3.124:18765/cok-ui/index.html</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>通过容器云平台部署在k8s中</h1>\n<p><font color=red>注意：如果要重新测试，需要先删除老的项目、namespace等资源再重新建项目、分存储、再测试</font></p>\n<h2 id=\"1-先在容器云平台中创建项目（由管理员创建）\">1. 先在容器云平台中创建项目（由管理员创建）</h2>\n<ul>\n<li>创建项目<code> 容器化上云培训</code>,<code>cok</code><br>\n<img src=\"image/20200522_200957_63.png\" alt=\"20200522_200957_63\"></li>\n<li>为项目分配k8s集群</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">端口范围： 18000 - 18999</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200522_201158_49.png\" alt=\"20200522_201158_49\"></p>\n<ul>\n<li>为项目分配用户权限<br>\n<img src=\"image/20200522_201315_93.png\" alt=\"20200522_201315_93\"></li>\n<li>为项目分配两个存储：mysql、mysql-comp<br>\n<img src=\"image/20200522_200754_75.png\" alt=\"20200522_200754_75\"></li>\n</ul>\n<h2 id=\"2-部署\">2. 部署</h2>\n<h3 id=\"2-1-部署mysql\">2.1 部署mysql</h3>\n<p><img src=\"image/20200522_215035_42.png\" alt=\"20200522_215035_42\"></p>\n<ul>\n<li>配置mysql参数，节点端口：<code>18306</code><br>\n<img src=\"image/20200522_215152_89.png\" alt=\"20200522_215152_89\"></li>\n</ul>\n<h3 id=\"2-2-部署eureka\">2.2 部署eureka</h3>\n<ul>\n<li>\n<p>先设置svn下载的账号密码<br>\n<img src=\"image/20200522_202529_68.png\" alt=\"20200522_202529_68\"></p>\n</li>\n<li>\n<p>创建<code>Maven打包并构建镜像部署K8S</code>模板<br>\n<img src=\"image/20200522_202609_17.png\" alt=\"20200522_202609_17\"></p>\n</li>\n<li>\n<p>设置erueka模板参数</p>\n</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">svn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-java</span><br><span class=\"line\">dockerfile： cok-source-java-eureka/Dockerfile</span><br><span class=\"line\">监控检查端口： 18761</span><br><span class=\"line\">目标端口： 18761</span><br><span class=\"line\">集群端口： 18761</span><br><span class=\"line\">节点端口： 18761</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200522_213753_38.png\" alt=\"20200522_213753_38\"><br>\n<img src=\"image/20200522_213709_70.png\" alt=\"20200522_213709_70\"></p>\n<h3 id=\"2-3-部署zuul\">2.3 部署zuul</h3>\n<ul>\n<li>设置zuul模板参数</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">svn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-java</span><br><span class=\"line\">dockerfile： cok-source-java-zuul/Dockerfile</span><br><span class=\"line\">监控检查端口： 18762</span><br><span class=\"line\">环境变量： EUREKA_URI  http://eureka:18761/eureka</span><br><span class=\"line\">目标端口： 18762</span><br><span class=\"line\">集群端口： 18762</span><br><span class=\"line\">节点端口： 18762</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200522_214007_77.png\" alt=\"20200522_214007_77\"><br>\n<img src=\"image/20200522_214124_66.png\" alt=\"20200522_214124_66\"></p>\n<h3 id=\"2-4-部署service1\">2.4 部署service1</h3>\n<ul>\n<li>增加application.yml参数配置</li>\n</ul>\n<p><code>service-application.yml</code>:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">server:</span></span><br><span class=\"line\">  <span class=\"attr\">port:</span> <span class=\"number\">18763</span></span><br><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"attr\">max-idle:</span> <span class=\"number\">8</span></span><br><span class=\"line\">    <span class=\"attr\">min-idle:</span> <span class=\"number\">8</span></span><br><span class=\"line\">    <span class=\"attr\">max-active:</span> <span class=\"number\">20</span></span><br><span class=\"line\">    <span class=\"attr\">driverClassName:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">    <span class=\"attr\">initial-size:</span> <span class=\"number\">10</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://mysql:3306/mysql?characterEncoding=utf8&amp;useSSL=false&amp;allowMultiQueries=true</span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"number\">123456</span></span><br><span class=\"line\">  <span class=\"attr\">jpa:</span></span><br><span class=\"line\">    <span class=\"attr\">show-sql:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">database:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">    <span class=\"attr\">hibernate:</span></span><br><span class=\"line\">      <span class=\"attr\">ddl-auto:</span> <span class=\"string\">create</span></span><br><span class=\"line\">    <span class=\"attr\">database-platform:</span> <span class=\"string\">org.hibernate.dialect.MySQL5Dialect</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200522_214326_50.png\" alt=\"20200522_214326_50\"></p>\n<ul>\n<li>配置service1</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">svn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-java</span><br><span class=\"line\">dockerfile： cok-source-java-service1/Dockerfile</span><br><span class=\"line\">监控检查端口： 18763</span><br><span class=\"line\">环境变量： EUREKA_URI  http://eureka:18761/eureka</span><br><span class=\"line\">文件挂载： /opt/application.yml  service-application.yml</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200522_214730_14.png\" alt=\"20200522_214730_14\"><br>\n<img src=\"image/20200522_214806_18.png\" alt=\"20200522_214806_18\"></p>\n<h3 id=\"2-5-部署vue-ui\">2.5 部署vue-ui</h3>\n<ul>\n<li>创建<code>NPM打包并构建镜像部署</code>打包模板<br>\n<img src=\"image/20200522_215305_60.png\" alt=\"20200522_215305_60\"></li>\n<li>设置模板参数</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">svn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-source-vue</span><br><span class=\"line\">dockerfile： Dockerfile</span><br><span class=\"line\">目标端口： 80</span><br><span class=\"line\">集群端口： 80</span><br><span class=\"line\">节点端口： 18765</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200522_215459_51.png\" alt=\"20200522_215459_51\"><br>\n<img src=\"image/20200522_215520_16.png\" alt=\"20200522_215520_16\"></p>\n<h2 id=\"3-测试访问\">3.测试访问</h2>\n<p><a href=\"http://192.168.3.124:18765/cok-ui/index.html\">http://192.168.3.124:18765/cok-ui/index.html</a></p>\n"},{"_content":"# 项目实战\n\n## 1. 项目介绍\n\n项目Git地址：[https://gitee.com/olivee/cok.git](https://gitee.com/olivee/cok.git)\n\n| 文件         | 说明 |\n| :-------------------| :---- |\n| cok |  |\n| ├── build-in-java .sh | 打包成docker镜像的命令（全部以jar方式部署） |\n| ├── build-in-nginx .sh | 打包成docker镜像的命令（ui以nginx方式部署）  |\n| ├── cok-source-java |  springcloud服务端代码示例  |\n| │   ├── cok-source-java-eureka | eureka项目代码  |\n| │   ├── cok-source-java-service1 | 微服务1项目代码  |\n| │   ├── cok-source-java-ui |  ui项目 |\n| │   ├── cok-source-java-zuul | zuul项目代码  |\n| │   └── pom.xml |   |\n| ├── cok-source-vue | VUE项目代码  |\n\n\n## 2. 两种部署方式介绍\n### 2.1 全部以jar方式部署流程说明\n\n![20200528_123410_85](image/20200528_123410_85.png)\n\n### 2.2 eureka、zuul、service1以jar方式部署，ui以nginx方式部署说明\n\n![20200528_123518_16](image/20200528_123518_16.png)\n\n## 3. 几种部署环境介绍\n\n### 3.1 部署在docker中\n\n![20200521_161821_87](image/20200521_161821_87.png)\n\n部署步骤：\n1. 项目管理员将代码打包成docker镜像\n2. 直接在服务器中通过docker镜像启动eureka、zuul、service、javaui、mysql等容器服务\n\n### 3.2 部署在k8s中\n\n![20200521_161841_31](image/20200521_161841_31.png)\n\n部署步骤：\n1. 项目管理员将代码打包成docker镜像\n2. 将打包好的镜像上传到docker私有镜像仓库\n3. 在k8s中通过Deployment、ConfigMap等资源部署eureka、zuul、service、javaui、mysql等服务\n\n\n### 3.3 部署在容器云平台中\n\n![20200521_165323_29](image/20200521_165323_29.png)\n部署步骤：\n1. 项目管理员将代码上传SVN\n2. 在容器云平台中通过集成部署任务部署eureka、zuul、service、javaui、mysql等服务（容器云平台从svn拉取代码构建镜像并部署）\n\n\n### 3.4 手动部署在Linux服务器与部署在k8s中的差异\n\n#### 3.4.1 部署方式差异\n##### 直接部署在Linux服务器\n- 每个组件需要手动的配置部署到具体的某一个服务器\n![20200526_223208_56](image/20200526_223208_56.png)\n\n\n##### 部署在k8s中\n![20200526_225215_47](image/20200526_225215_47.png)\n\n## 子章节\n[3.1.部署在docker中](3.1.project-to-docker.md)\n\n[3.2.部署在k8s中](3.2.project-to-k8s.md)\n\n[3.3.通过容器云平台部署在k8s中](3.3.project-to-ccs.md)\n","source":"cok-book/3.project-practice.md","raw":"# 项目实战\n\n## 1. 项目介绍\n\n项目Git地址：[https://gitee.com/olivee/cok.git](https://gitee.com/olivee/cok.git)\n\n| 文件         | 说明 |\n| :-------------------| :---- |\n| cok |  |\n| ├── build-in-java .sh | 打包成docker镜像的命令（全部以jar方式部署） |\n| ├── build-in-nginx .sh | 打包成docker镜像的命令（ui以nginx方式部署）  |\n| ├── cok-source-java |  springcloud服务端代码示例  |\n| │   ├── cok-source-java-eureka | eureka项目代码  |\n| │   ├── cok-source-java-service1 | 微服务1项目代码  |\n| │   ├── cok-source-java-ui |  ui项目 |\n| │   ├── cok-source-java-zuul | zuul项目代码  |\n| │   └── pom.xml |   |\n| ├── cok-source-vue | VUE项目代码  |\n\n\n## 2. 两种部署方式介绍\n### 2.1 全部以jar方式部署流程说明\n\n![20200528_123410_85](image/20200528_123410_85.png)\n\n### 2.2 eureka、zuul、service1以jar方式部署，ui以nginx方式部署说明\n\n![20200528_123518_16](image/20200528_123518_16.png)\n\n## 3. 几种部署环境介绍\n\n### 3.1 部署在docker中\n\n![20200521_161821_87](image/20200521_161821_87.png)\n\n部署步骤：\n1. 项目管理员将代码打包成docker镜像\n2. 直接在服务器中通过docker镜像启动eureka、zuul、service、javaui、mysql等容器服务\n\n### 3.2 部署在k8s中\n\n![20200521_161841_31](image/20200521_161841_31.png)\n\n部署步骤：\n1. 项目管理员将代码打包成docker镜像\n2. 将打包好的镜像上传到docker私有镜像仓库\n3. 在k8s中通过Deployment、ConfigMap等资源部署eureka、zuul、service、javaui、mysql等服务\n\n\n### 3.3 部署在容器云平台中\n\n![20200521_165323_29](image/20200521_165323_29.png)\n部署步骤：\n1. 项目管理员将代码上传SVN\n2. 在容器云平台中通过集成部署任务部署eureka、zuul、service、javaui、mysql等服务（容器云平台从svn拉取代码构建镜像并部署）\n\n\n### 3.4 手动部署在Linux服务器与部署在k8s中的差异\n\n#### 3.4.1 部署方式差异\n##### 直接部署在Linux服务器\n- 每个组件需要手动的配置部署到具体的某一个服务器\n![20200526_223208_56](image/20200526_223208_56.png)\n\n\n##### 部署在k8s中\n![20200526_225215_47](image/20200526_225215_47.png)\n\n## 子章节\n[3.1.部署在docker中](3.1.project-to-docker.md)\n\n[3.2.部署在k8s中](3.2.project-to-k8s.md)\n\n[3.3.通过容器云平台部署在k8s中](3.3.project-to-ccs.md)\n","date":"2021-07-19T06:44:32.249Z","updated":"2021-01-14T01:19:27.717Z","path":"cok-book/3.project-practice.html","title":"","comments":1,"layout":"page","_id":"ckrac7xan001hz8s6dn19becw","content":"<h1>项目实战</h1>\n<h2 id=\"1-项目介绍\">1. 项目介绍</h2>\n<p>项目Git地址：<a href=\"https://gitee.com/olivee/cok.git\">https://gitee.com/olivee/cok.git</a></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">文件</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">cok</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">├── build-in-java .sh</td>\n<td style=\"text-align:left\">打包成docker镜像的命令（全部以jar方式部署）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">├── build-in-nginx .sh</td>\n<td style=\"text-align:left\">打包成docker镜像的命令（ui以nginx方式部署）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">├── cok-source-java</td>\n<td style=\"text-align:left\">springcloud服务端代码示例</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">│   ├── cok-source-java-eureka</td>\n<td style=\"text-align:left\">eureka项目代码</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">│   ├── cok-source-java-service1</td>\n<td style=\"text-align:left\">微服务1项目代码</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">│   ├── cok-source-java-ui</td>\n<td style=\"text-align:left\">ui项目</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">│   ├── cok-source-java-zuul</td>\n<td style=\"text-align:left\">zuul项目代码</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">│   └── pom.xml</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">├── cok-source-vue</td>\n<td style=\"text-align:left\">VUE项目代码</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"2-两种部署方式介绍\">2. 两种部署方式介绍</h2>\n<h3 id=\"2-1-全部以jar方式部署流程说明\">2.1 全部以jar方式部署流程说明</h3>\n<p><img src=\"image/20200528_123410_85.png\" alt=\"20200528_123410_85\"></p>\n<h3 id=\"2-2-eureka、zuul、service1以jar方式部署，ui以nginx方式部署说明\">2.2 eureka、zuul、service1以jar方式部署，ui以nginx方式部署说明</h3>\n<p><img src=\"image/20200528_123518_16.png\" alt=\"20200528_123518_16\"></p>\n<h2 id=\"3-几种部署环境介绍\">3. 几种部署环境介绍</h2>\n<h3 id=\"3-1-部署在docker中\">3.1 部署在docker中</h3>\n<p><img src=\"image/20200521_161821_87.png\" alt=\"20200521_161821_87\"></p>\n<p>部署步骤：</p>\n<ol>\n<li>项目管理员将代码打包成docker镜像</li>\n<li>直接在服务器中通过docker镜像启动eureka、zuul、service、javaui、mysql等容器服务</li>\n</ol>\n<h3 id=\"3-2-部署在k8s中\">3.2 部署在k8s中</h3>\n<p><img src=\"image/20200521_161841_31.png\" alt=\"20200521_161841_31\"></p>\n<p>部署步骤：</p>\n<ol>\n<li>项目管理员将代码打包成docker镜像</li>\n<li>将打包好的镜像上传到docker私有镜像仓库</li>\n<li>在k8s中通过Deployment、ConfigMap等资源部署eureka、zuul、service、javaui、mysql等服务</li>\n</ol>\n<h3 id=\"3-3-部署在容器云平台中\">3.3 部署在容器云平台中</h3>\n<p><img src=\"image/20200521_165323_29.png\" alt=\"20200521_165323_29\"><br>\n部署步骤：</p>\n<ol>\n<li>项目管理员将代码上传SVN</li>\n<li>在容器云平台中通过集成部署任务部署eureka、zuul、service、javaui、mysql等服务（容器云平台从svn拉取代码构建镜像并部署）</li>\n</ol>\n<h3 id=\"3-4-手动部署在Linux服务器与部署在k8s中的差异\">3.4 手动部署在Linux服务器与部署在k8s中的差异</h3>\n<h4 id=\"3-4-1-部署方式差异\">3.4.1 部署方式差异</h4>\n<h5 id=\"直接部署在Linux服务器\">直接部署在Linux服务器</h5>\n<ul>\n<li>每个组件需要手动的配置部署到具体的某一个服务器<br>\n<img src=\"image/20200526_223208_56.png\" alt=\"20200526_223208_56\"></li>\n</ul>\n<h5 id=\"部署在k8s中\">部署在k8s中</h5>\n<p><img src=\"image/20200526_225215_47.png\" alt=\"20200526_225215_47\"></p>\n<h2 id=\"子章节\">子章节</h2>\n<p><a href=\"3.1.project-to-docker.md\">3.1.部署在docker中</a></p>\n<p><a href=\"3.2.project-to-k8s.md\">3.2.部署在k8s中</a></p>\n<p><a href=\"3.3.project-to-ccs.md\">3.3.通过容器云平台部署在k8s中</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>项目实战</h1>\n<h2 id=\"1-项目介绍\">1. 项目介绍</h2>\n<p>项目Git地址：<a href=\"https://gitee.com/olivee/cok.git\">https://gitee.com/olivee/cok.git</a></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">文件</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">cok</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">├── build-in-java .sh</td>\n<td style=\"text-align:left\">打包成docker镜像的命令（全部以jar方式部署）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">├── build-in-nginx .sh</td>\n<td style=\"text-align:left\">打包成docker镜像的命令（ui以nginx方式部署）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">├── cok-source-java</td>\n<td style=\"text-align:left\">springcloud服务端代码示例</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">│   ├── cok-source-java-eureka</td>\n<td style=\"text-align:left\">eureka项目代码</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">│   ├── cok-source-java-service1</td>\n<td style=\"text-align:left\">微服务1项目代码</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">│   ├── cok-source-java-ui</td>\n<td style=\"text-align:left\">ui项目</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">│   ├── cok-source-java-zuul</td>\n<td style=\"text-align:left\">zuul项目代码</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">│   └── pom.xml</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">├── cok-source-vue</td>\n<td style=\"text-align:left\">VUE项目代码</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"2-两种部署方式介绍\">2. 两种部署方式介绍</h2>\n<h3 id=\"2-1-全部以jar方式部署流程说明\">2.1 全部以jar方式部署流程说明</h3>\n<p><img src=\"image/20200528_123410_85.png\" alt=\"20200528_123410_85\"></p>\n<h3 id=\"2-2-eureka、zuul、service1以jar方式部署，ui以nginx方式部署说明\">2.2 eureka、zuul、service1以jar方式部署，ui以nginx方式部署说明</h3>\n<p><img src=\"image/20200528_123518_16.png\" alt=\"20200528_123518_16\"></p>\n<h2 id=\"3-几种部署环境介绍\">3. 几种部署环境介绍</h2>\n<h3 id=\"3-1-部署在docker中\">3.1 部署在docker中</h3>\n<p><img src=\"image/20200521_161821_87.png\" alt=\"20200521_161821_87\"></p>\n<p>部署步骤：</p>\n<ol>\n<li>项目管理员将代码打包成docker镜像</li>\n<li>直接在服务器中通过docker镜像启动eureka、zuul、service、javaui、mysql等容器服务</li>\n</ol>\n<h3 id=\"3-2-部署在k8s中\">3.2 部署在k8s中</h3>\n<p><img src=\"image/20200521_161841_31.png\" alt=\"20200521_161841_31\"></p>\n<p>部署步骤：</p>\n<ol>\n<li>项目管理员将代码打包成docker镜像</li>\n<li>将打包好的镜像上传到docker私有镜像仓库</li>\n<li>在k8s中通过Deployment、ConfigMap等资源部署eureka、zuul、service、javaui、mysql等服务</li>\n</ol>\n<h3 id=\"3-3-部署在容器云平台中\">3.3 部署在容器云平台中</h3>\n<p><img src=\"image/20200521_165323_29.png\" alt=\"20200521_165323_29\"><br>\n部署步骤：</p>\n<ol>\n<li>项目管理员将代码上传SVN</li>\n<li>在容器云平台中通过集成部署任务部署eureka、zuul、service、javaui、mysql等服务（容器云平台从svn拉取代码构建镜像并部署）</li>\n</ol>\n<h3 id=\"3-4-手动部署在Linux服务器与部署在k8s中的差异\">3.4 手动部署在Linux服务器与部署在k8s中的差异</h3>\n<h4 id=\"3-4-1-部署方式差异\">3.4.1 部署方式差异</h4>\n<h5 id=\"直接部署在Linux服务器\">直接部署在Linux服务器</h5>\n<ul>\n<li>每个组件需要手动的配置部署到具体的某一个服务器<br>\n<img src=\"image/20200526_223208_56.png\" alt=\"20200526_223208_56\"></li>\n</ul>\n<h5 id=\"部署在k8s中\">部署在k8s中</h5>\n<p><img src=\"image/20200526_225215_47.png\" alt=\"20200526_225215_47\"></p>\n<h2 id=\"子章节\">子章节</h2>\n<p><a href=\"3.1.project-to-docker.md\">3.1.部署在docker中</a></p>\n<p><a href=\"3.2.project-to-k8s.md\">3.2.部署在k8s中</a></p>\n<p><a href=\"3.3.project-to-ccs.md\">3.3.通过容器云平台部署在k8s中</a></p>\n"},{"_content":"# SVN下载MAVEN项目代码并打包部署\n\n## 1. 创建Maven打包并构建镜像部署K8S任务\n![20200526_113209_24](image/20200526_113209_24.png)\n### 配置任务参数\n```\nsvn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-war\ndockerfile： Dockerfile\n监控检查端口： 8080\n文件挂载： /usr/local/tomcat/webapps/ROOT/WEB-INF/classes/prop/jdbc.properties maven-war-jdbc.properties\nJAVA_OPTS: -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -agentlib:jdwp=transport=dt_socket,address=9080,server=y,suspend=n\n服务1： 8080 8080 18080 test.maven.war.com\n服务2： 9080 9080 18090\n```\n![20200526_115027_41](image/20200526_115027_41.png)\n![20200527_180137_85](image/20200527_180137_85.png)\n\n\n- 其中`maven-war-jdbc.properties`的内容：\n```properties\n#mysql\nhibernate.dialect=org.hibernate.dialect.MySQLDialect\nhibernate.connection.url=jdbc:mysql://mysql:3306/mysql?characterEncoding=utf8&useSSL=false&allowMultiQueries=true\nhibernate.connection.driver_class=com.mysql.jdbc.Driver\nhibernate.connection.username=root\nhibernate.connection.password=123456\n```\n\n\n## 2. 访问测试：\n### 节点端口访问：\n[http://192.168.3.124:18080/test/index](http://192.168.3.124:18080/test/index)\n\n## 域名访问：\n先本机配个hosts\n```\n192.168.3.124 test.maven.war.com\n```\n再浏览器输入url测试：\n[http://test.maven.war.com/test/index](http://test.maven.war.com/test/index)\n\n\n## 3. 配置jvm参数：\n如：设置 `JAVA_OPTS` 为 `-Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m`\n\n### 远程调试\n如果要远程调试，则把 `JAVA_OPTS` 修改为\n`-Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -agentlib:jdwp=transport=dt_socket,address=9080,server=y,suspend=n`\n再将9080远程调试端口映射到节点端口\n\n\n\n#### eclise启动远程调试\n![20200526_134645_66](image/20200526_134645_66.png)\n","source":"cok-book/4.1.ccs-main-deploy-scene-example-snv-maven.md","raw":"# SVN下载MAVEN项目代码并打包部署\n\n## 1. 创建Maven打包并构建镜像部署K8S任务\n![20200526_113209_24](image/20200526_113209_24.png)\n### 配置任务参数\n```\nsvn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-war\ndockerfile： Dockerfile\n监控检查端口： 8080\n文件挂载： /usr/local/tomcat/webapps/ROOT/WEB-INF/classes/prop/jdbc.properties maven-war-jdbc.properties\nJAVA_OPTS: -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -agentlib:jdwp=transport=dt_socket,address=9080,server=y,suspend=n\n服务1： 8080 8080 18080 test.maven.war.com\n服务2： 9080 9080 18090\n```\n![20200526_115027_41](image/20200526_115027_41.png)\n![20200527_180137_85](image/20200527_180137_85.png)\n\n\n- 其中`maven-war-jdbc.properties`的内容：\n```properties\n#mysql\nhibernate.dialect=org.hibernate.dialect.MySQLDialect\nhibernate.connection.url=jdbc:mysql://mysql:3306/mysql?characterEncoding=utf8&useSSL=false&allowMultiQueries=true\nhibernate.connection.driver_class=com.mysql.jdbc.Driver\nhibernate.connection.username=root\nhibernate.connection.password=123456\n```\n\n\n## 2. 访问测试：\n### 节点端口访问：\n[http://192.168.3.124:18080/test/index](http://192.168.3.124:18080/test/index)\n\n## 域名访问：\n先本机配个hosts\n```\n192.168.3.124 test.maven.war.com\n```\n再浏览器输入url测试：\n[http://test.maven.war.com/test/index](http://test.maven.war.com/test/index)\n\n\n## 3. 配置jvm参数：\n如：设置 `JAVA_OPTS` 为 `-Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m`\n\n### 远程调试\n如果要远程调试，则把 `JAVA_OPTS` 修改为\n`-Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -agentlib:jdwp=transport=dt_socket,address=9080,server=y,suspend=n`\n再将9080远程调试端口映射到节点端口\n\n\n\n#### eclise启动远程调试\n![20200526_134645_66](image/20200526_134645_66.png)\n","date":"2021-07-19T06:44:32.318Z","updated":"2021-01-14T01:19:27.977Z","path":"cok-book/4.1.ccs-main-deploy-scene-example-snv-maven.html","title":"","comments":1,"layout":"page","_id":"ckrac7xap001iz8s6h1xrbfmp","content":"<h1>SVN下载MAVEN项目代码并打包部署</h1>\n<h2 id=\"1-创建Maven打包并构建镜像部署K8S任务\">1. 创建Maven打包并构建镜像部署K8S任务</h2>\n<p><img src=\"image/20200526_113209_24.png\" alt=\"20200526_113209_24\"></p>\n<h3 id=\"配置任务参数\">配置任务参数</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">svn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-war</span><br><span class=\"line\">dockerfile： Dockerfile</span><br><span class=\"line\">监控检查端口： 8080</span><br><span class=\"line\">文件挂载： /usr/local/tomcat/webapps/ROOT/WEB-INF/classes/prop/jdbc.properties maven-war-jdbc.properties</span><br><span class=\"line\">JAVA_OPTS: -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -agentlib:jdwp=transport=dt_socket,address=9080,server=y,suspend=n</span><br><span class=\"line\">服务1： 8080 8080 18080 test.maven.war.com</span><br><span class=\"line\">服务2： 9080 9080 18090</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200526_115027_41.png\" alt=\"20200526_115027_41\"><br>\n<img src=\"image/20200527_180137_85.png\" alt=\"20200527_180137_85\"></p>\n<ul>\n<li>其中<code>maven-war-jdbc.properties</code>的内容：</li>\n</ul>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#mysql</span></span><br><span class=\"line\"><span class=\"meta\">hibernate.dialect</span>=<span class=\"string\">org.hibernate.dialect.MySQLDialect</span></span><br><span class=\"line\"><span class=\"meta\">hibernate.connection.url</span>=<span class=\"string\">jdbc:mysql://mysql:3306/mysql?characterEncoding=utf8&amp;useSSL=false&amp;allowMultiQueries=true</span></span><br><span class=\"line\"><span class=\"meta\">hibernate.connection.driver_class</span>=<span class=\"string\">com.mysql.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"meta\">hibernate.connection.username</span>=<span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"meta\">hibernate.connection.password</span>=<span class=\"string\">123456</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"2-访问测试：\">2. 访问测试：</h2>\n<h3 id=\"节点端口访问：\">节点端口访问：</h3>\n<p><a href=\"http://192.168.3.124:18080/test/index\">http://192.168.3.124:18080/test/index</a></p>\n<h2 id=\"域名访问：\">域名访问：</h2>\n<p>先本机配个hosts</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.3.124 test.maven.war.com</span><br></pre></td></tr></table></figure>\n<p>再浏览器输入url测试：<br>\n<a href=\"http://test.maven.war.com/test/index\">http://test.maven.war.com/test/index</a></p>\n<h2 id=\"3-配置jvm参数：\">3. 配置jvm参数：</h2>\n<p>如：设置 <code>JAVA_OPTS</code> 为 <code>-Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m</code></p>\n<h3 id=\"远程调试\">远程调试</h3>\n<p>如果要远程调试，则把 <code>JAVA_OPTS</code> 修改为<br>\n<code>-Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -agentlib:jdwp=transport=dt_socket,address=9080,server=y,suspend=n</code><br>\n再将9080远程调试端口映射到节点端口</p>\n<h4 id=\"eclise启动远程调试\">eclise启动远程调试</h4>\n<p><img src=\"image/20200526_134645_66.png\" alt=\"20200526_134645_66\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>SVN下载MAVEN项目代码并打包部署</h1>\n<h2 id=\"1-创建Maven打包并构建镜像部署K8S任务\">1. 创建Maven打包并构建镜像部署K8S任务</h2>\n<p><img src=\"image/20200526_113209_24.png\" alt=\"20200526_113209_24\"></p>\n<h3 id=\"配置任务参数\">配置任务参数</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">svn： https://192.168.0.29:8443/svn/200103/trunk/05.Code/cok/cok-war</span><br><span class=\"line\">dockerfile： Dockerfile</span><br><span class=\"line\">监控检查端口： 8080</span><br><span class=\"line\">文件挂载： /usr/local/tomcat/webapps/ROOT/WEB-INF/classes/prop/jdbc.properties maven-war-jdbc.properties</span><br><span class=\"line\">JAVA_OPTS: -Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -agentlib:jdwp=transport=dt_socket,address=9080,server=y,suspend=n</span><br><span class=\"line\">服务1： 8080 8080 18080 test.maven.war.com</span><br><span class=\"line\">服务2： 9080 9080 18090</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200526_115027_41.png\" alt=\"20200526_115027_41\"><br>\n<img src=\"image/20200527_180137_85.png\" alt=\"20200527_180137_85\"></p>\n<ul>\n<li>其中<code>maven-war-jdbc.properties</code>的内容：</li>\n</ul>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#mysql</span></span><br><span class=\"line\"><span class=\"meta\">hibernate.dialect</span>=<span class=\"string\">org.hibernate.dialect.MySQLDialect</span></span><br><span class=\"line\"><span class=\"meta\">hibernate.connection.url</span>=<span class=\"string\">jdbc:mysql://mysql:3306/mysql?characterEncoding=utf8&amp;useSSL=false&amp;allowMultiQueries=true</span></span><br><span class=\"line\"><span class=\"meta\">hibernate.connection.driver_class</span>=<span class=\"string\">com.mysql.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"meta\">hibernate.connection.username</span>=<span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"meta\">hibernate.connection.password</span>=<span class=\"string\">123456</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"2-访问测试：\">2. 访问测试：</h2>\n<h3 id=\"节点端口访问：\">节点端口访问：</h3>\n<p><a href=\"http://192.168.3.124:18080/test/index\">http://192.168.3.124:18080/test/index</a></p>\n<h2 id=\"域名访问：\">域名访问：</h2>\n<p>先本机配个hosts</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.3.124 test.maven.war.com</span><br></pre></td></tr></table></figure>\n<p>再浏览器输入url测试：<br>\n<a href=\"http://test.maven.war.com/test/index\">http://test.maven.war.com/test/index</a></p>\n<h2 id=\"3-配置jvm参数：\">3. 配置jvm参数：</h2>\n<p>如：设置 <code>JAVA_OPTS</code> 为 <code>-Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m</code></p>\n<h3 id=\"远程调试\">远程调试</h3>\n<p>如果要远程调试，则把 <code>JAVA_OPTS</code> 修改为<br>\n<code>-Xmx512M -Xms512M -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=128m -agentlib:jdwp=transport=dt_socket,address=9080,server=y,suspend=n</code><br>\n再将9080远程调试端口映射到节点端口</p>\n<h4 id=\"eclise启动远程调试\">eclise启动远程调试</h4>\n<p><img src=\"image/20200526_134645_66.png\" alt=\"20200526_134645_66\"></p>\n"},{"_content":"# 上传Jar包并打包部署\n## 上传jar包\n![20200527_132639_59](image/20200527_132639_59.png)\n\n## 创建Jar包构建镜像并部署任务\n![20200527_180319_84](image/20200527_180319_84.png)\n\n- 配置任务参数：\n ```\njar: cok-source-java-eureka-0.0.1-SNAPSHOT.jar\n容器端口： 8761\n服务配置1： 8761 8751 18751\n ```\n![20200527_133110_62](image/20200527_133110_62.png)\n\n\n## 测试：\n[http://192.168.3.124:18751/](http://192.168.3.124:18751/)\n![20200527_133139_35](image/20200527_133139_35.png)\n","source":"cok-book/4.2.ccs-main-deploy-scene-example-upload-jar.md","raw":"# 上传Jar包并打包部署\n## 上传jar包\n![20200527_132639_59](image/20200527_132639_59.png)\n\n## 创建Jar包构建镜像并部署任务\n![20200527_180319_84](image/20200527_180319_84.png)\n\n- 配置任务参数：\n ```\njar: cok-source-java-eureka-0.0.1-SNAPSHOT.jar\n容器端口： 8761\n服务配置1： 8761 8751 18751\n ```\n![20200527_133110_62](image/20200527_133110_62.png)\n\n\n## 测试：\n[http://192.168.3.124:18751/](http://192.168.3.124:18751/)\n![20200527_133139_35](image/20200527_133139_35.png)\n","date":"2021-07-19T06:44:31.369Z","updated":"2021-01-14T01:19:27.980Z","path":"cok-book/4.2.ccs-main-deploy-scene-example-upload-jar.html","title":"","comments":1,"layout":"page","_id":"ckrac7xap001jz8s6fj6l4xs0","content":"<h1>上传Jar包并打包部署</h1>\n<h2 id=\"上传jar包\">上传jar包</h2>\n<p><img src=\"image/20200527_132639_59.png\" alt=\"20200527_132639_59\"></p>\n<h2 id=\"创建Jar包构建镜像并部署任务\">创建Jar包构建镜像并部署任务</h2>\n<p><img src=\"image/20200527_180319_84.png\" alt=\"20200527_180319_84\"></p>\n<ul>\n<li>配置任务参数：</li>\n</ul>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jar: cok-source-java-eureka-0.0.1-SNAPSHOT.jar</span><br><span class=\"line\">容器端口： 8761</span><br><span class=\"line\">服务配置1： 8761 8751 18751</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200527_133110_62.png\" alt=\"20200527_133110_62\"></p>\n<h2 id=\"测试：\">测试：</h2>\n<p><a href=\"http://192.168.3.124:18751/\">http://192.168.3.124:18751/</a><br>\n<img src=\"image/20200527_133139_35.png\" alt=\"20200527_133139_35\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>上传Jar包并打包部署</h1>\n<h2 id=\"上传jar包\">上传jar包</h2>\n<p><img src=\"image/20200527_132639_59.png\" alt=\"20200527_132639_59\"></p>\n<h2 id=\"创建Jar包构建镜像并部署任务\">创建Jar包构建镜像并部署任务</h2>\n<p><img src=\"image/20200527_180319_84.png\" alt=\"20200527_180319_84\"></p>\n<ul>\n<li>配置任务参数：</li>\n</ul>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jar: cok-source-java-eureka-0.0.1-SNAPSHOT.jar</span><br><span class=\"line\">容器端口： 8761</span><br><span class=\"line\">服务配置1： 8761 8751 18751</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200527_133110_62.png\" alt=\"20200527_133110_62\"></p>\n<h2 id=\"测试：\">测试：</h2>\n<p><a href=\"http://192.168.3.124:18751/\">http://192.168.3.124:18751/</a><br>\n<img src=\"image/20200527_133139_35.png\" alt=\"20200527_133139_35\"></p>\n"},{"_content":"# 4.3.直接部署Docker镜像\n\n## 1. 制作docker镜像\n### 1.1 创建`loop.sh`:\n```sh\nwhile(true)\ndo\n    date\n    sleep 1\ndone\n```\n\n### 1.2 创建`Dockerfile`:\n```dockerfile\nfrom alpine:3.9.6\nCOPY loop.sh /root/\nCMD ./root/loop.sh\n```\n\n### 1.3 创建打包镜像：\n```sh\nchmod +x *.sh\ndocker build -t hub.aosccs.com.cn:8888/cok/cok-docker .\n```\n\n### 1.4 推送镜像\n```\ndocker push hub.aosccs.com.cn:8888/cok/cok-docker\n```\n\n## 2.创建部署任务\n\n### 2.1 选择模板\n\n![20200527_181024_76](image/20200527_181024_76.png)\n\n### 2.2 定义模板参数\n```\n镜像： hub.aosccs.com.cn:8888/cok/cok-docker\n```\n![20200526_144419_47](image/20200526_144419_47.png)\n\n## 查看部署结果\n- 查看pod\n![20200526_144527_96](image/20200526_144527_96.png)\n- 查看pod的运行日志\n![20200526_144508_58](image/20200526_144508_58.png)\n","source":"cok-book/4.3.ccs-main-deploy-scene-example-docker-image.md","raw":"# 4.3.直接部署Docker镜像\n\n## 1. 制作docker镜像\n### 1.1 创建`loop.sh`:\n```sh\nwhile(true)\ndo\n    date\n    sleep 1\ndone\n```\n\n### 1.2 创建`Dockerfile`:\n```dockerfile\nfrom alpine:3.9.6\nCOPY loop.sh /root/\nCMD ./root/loop.sh\n```\n\n### 1.3 创建打包镜像：\n```sh\nchmod +x *.sh\ndocker build -t hub.aosccs.com.cn:8888/cok/cok-docker .\n```\n\n### 1.4 推送镜像\n```\ndocker push hub.aosccs.com.cn:8888/cok/cok-docker\n```\n\n## 2.创建部署任务\n\n### 2.1 选择模板\n\n![20200527_181024_76](image/20200527_181024_76.png)\n\n### 2.2 定义模板参数\n```\n镜像： hub.aosccs.com.cn:8888/cok/cok-docker\n```\n![20200526_144419_47](image/20200526_144419_47.png)\n\n## 查看部署结果\n- 查看pod\n![20200526_144527_96](image/20200526_144527_96.png)\n- 查看pod的运行日志\n![20200526_144508_58](image/20200526_144508_58.png)\n","date":"2021-07-19T06:44:32.338Z","updated":"2021-01-14T01:19:27.982Z","path":"cok-book/4.3.ccs-main-deploy-scene-example-docker-image.html","title":"","comments":1,"layout":"page","_id":"ckrac7xaq001kz8s60fkggdft","content":"<h1>4.3.直接部署Docker镜像</h1>\n<h2 id=\"1-制作docker镜像\">1. 制作docker镜像</h2>\n<h3 id=\"1-1-创建loop-sh\">1.1 创建<code>loop.sh</code>:</h3>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">while</span>(<span class=\"literal\">true</span>)</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">    date</span><br><span class=\"line\">    sleep 1</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"1-2-创建Dockerfile\">1.2 创建<code>Dockerfile</code>:</h3>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> alpine:<span class=\"number\">3.9</span>.<span class=\"number\">6</span></span><br><span class=\"line\"><span class=\"keyword\">COPY</span><span class=\"bash\"> loop.sh /root/</span></span><br><span class=\"line\"><span class=\"keyword\">CMD</span><span class=\"bash\"> ./root/loop.sh</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"1-3-创建打包镜像：\">1.3 创建打包镜像：</h3>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod +x *.sh</span><br><span class=\"line\">docker build -t hub.aosccs.com.cn:8888/cok/cok-docker .</span><br></pre></td></tr></table></figure>\n<h3 id=\"1-4-推送镜像\">1.4 推送镜像</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker push hub.aosccs.com.cn:8888/cok/cok-docker</span><br></pre></td></tr></table></figure>\n<h2 id=\"2-创建部署任务\">2.创建部署任务</h2>\n<h3 id=\"2-1-选择模板\">2.1 选择模板</h3>\n<p><img src=\"image/20200527_181024_76.png\" alt=\"20200527_181024_76\"></p>\n<h3 id=\"2-2-定义模板参数\">2.2 定义模板参数</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">镜像： hub.aosccs.com.cn:8888/cok/cok-docker</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200526_144419_47.png\" alt=\"20200526_144419_47\"></p>\n<h2 id=\"查看部署结果\">查看部署结果</h2>\n<ul>\n<li>查看pod<br>\n<img src=\"image/20200526_144527_96.png\" alt=\"20200526_144527_96\"></li>\n<li>查看pod的运行日志<br>\n<img src=\"image/20200526_144508_58.png\" alt=\"20200526_144508_58\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>4.3.直接部署Docker镜像</h1>\n<h2 id=\"1-制作docker镜像\">1. 制作docker镜像</h2>\n<h3 id=\"1-1-创建loop-sh\">1.1 创建<code>loop.sh</code>:</h3>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">while</span>(<span class=\"literal\">true</span>)</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">    date</span><br><span class=\"line\">    sleep 1</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"1-2-创建Dockerfile\">1.2 创建<code>Dockerfile</code>:</h3>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> alpine:<span class=\"number\">3.9</span>.<span class=\"number\">6</span></span><br><span class=\"line\"><span class=\"keyword\">COPY</span><span class=\"bash\"> loop.sh /root/</span></span><br><span class=\"line\"><span class=\"keyword\">CMD</span><span class=\"bash\"> ./root/loop.sh</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"1-3-创建打包镜像：\">1.3 创建打包镜像：</h3>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod +x *.sh</span><br><span class=\"line\">docker build -t hub.aosccs.com.cn:8888/cok/cok-docker .</span><br></pre></td></tr></table></figure>\n<h3 id=\"1-4-推送镜像\">1.4 推送镜像</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker push hub.aosccs.com.cn:8888/cok/cok-docker</span><br></pre></td></tr></table></figure>\n<h2 id=\"2-创建部署任务\">2.创建部署任务</h2>\n<h3 id=\"2-1-选择模板\">2.1 选择模板</h3>\n<p><img src=\"image/20200527_181024_76.png\" alt=\"20200527_181024_76\"></p>\n<h3 id=\"2-2-定义模板参数\">2.2 定义模板参数</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">镜像： hub.aosccs.com.cn:8888/cok/cok-docker</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200526_144419_47.png\" alt=\"20200526_144419_47\"></p>\n<h2 id=\"查看部署结果\">查看部署结果</h2>\n<ul>\n<li>查看pod<br>\n<img src=\"image/20200526_144527_96.png\" alt=\"20200526_144527_96\"></li>\n<li>查看pod的运行日志<br>\n<img src=\"image/20200526_144508_58.png\" alt=\"20200526_144508_58\"></li>\n</ul>\n"},{"_content":"# NPM打包并部署\n\n参考项目实战中的`部署vue-ui`：\n![20200522_215305_60](image/20200522_215305_60.png)\n\n![20200522_215459_51](image/20200522_215459_51.png)\n\n![20200522_215520_16](image/20200522_215520_16.png)\n","source":"cok-book/4.4.ccs-main-deploy-scene-example-npm.md","raw":"# NPM打包并部署\n\n参考项目实战中的`部署vue-ui`：\n![20200522_215305_60](image/20200522_215305_60.png)\n\n![20200522_215459_51](image/20200522_215459_51.png)\n\n![20200522_215520_16](image/20200522_215520_16.png)\n","date":"2021-07-19T06:44:32.330Z","updated":"2021-01-14T01:19:27.985Z","path":"cok-book/4.4.ccs-main-deploy-scene-example-npm.html","title":"","comments":1,"layout":"page","_id":"ckrac7xaz001lz8s6h8ma9wwh","content":"<h1>NPM打包并部署</h1>\n<p>参考项目实战中的<code>部署vue-ui</code>：<br>\n<img src=\"image/20200522_215305_60.png\" alt=\"20200522_215305_60\"></p>\n<p><img src=\"image/20200522_215459_51.png\" alt=\"20200522_215459_51\"></p>\n<p><img src=\"image/20200522_215520_16.png\" alt=\"20200522_215520_16\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>NPM打包并部署</h1>\n<p>参考项目实战中的<code>部署vue-ui</code>：<br>\n<img src=\"image/20200522_215305_60.png\" alt=\"20200522_215305_60\"></p>\n<p><img src=\"image/20200522_215459_51.png\" alt=\"20200522_215459_51\"></p>\n<p><img src=\"image/20200522_215520_16.png\" alt=\"20200522_215520_16\"></p>\n"},{"_content":"# 应用商店部署\n\n\n\n## 1. 安装mysql公共组件\n## 1.1 新增mysql参数配置\n`mysql.cnf`:\n```properties\n[mysqld]\nsymbolic-links=0\nsql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES\nlower_case_table_names=1\ncharacter-set-server=utf8\n[client]\ndefault-character-set=utf8\n[mysql]\ndefault-character-set=utf8\n```\n![20200527_134123_97](image/20200527_134123_97.png)\n\n## 2. 创建部署任务\n\n### 2.1 选择MySQL公共组件\n![20200526_145716_92](image/20200526_145716_92.png)\n### 2.2 设置部署参数\n```\n任务名称： mysql2\nmy.cnf配置： mysql.cnf\nroot帐号密码：\n存储： mysql2\n节点端口： 18307\n```\n![20200527_134404_99](image/20200527_134404_99.png)\n\n### 2.3 执行安装任务\n![20200527_134431_39](image/20200527_134431_39.png)\n\n### 2.4 查看部署结果\n![20200527_134453_28](image/20200527_134453_28.png)\n\n## 3. 连接测试\n```\n主机名/IP： 192.168.3.124\n用户： root\n密码：\n端口： 18307\n```\n![20200527_134628_14](image/20200527_134628_14.png)\n","source":"cok-book/4.5.ccs-main-deploy-scene-example-soft-market.md","raw":"# 应用商店部署\n\n\n\n## 1. 安装mysql公共组件\n## 1.1 新增mysql参数配置\n`mysql.cnf`:\n```properties\n[mysqld]\nsymbolic-links=0\nsql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES\nlower_case_table_names=1\ncharacter-set-server=utf8\n[client]\ndefault-character-set=utf8\n[mysql]\ndefault-character-set=utf8\n```\n![20200527_134123_97](image/20200527_134123_97.png)\n\n## 2. 创建部署任务\n\n### 2.1 选择MySQL公共组件\n![20200526_145716_92](image/20200526_145716_92.png)\n### 2.2 设置部署参数\n```\n任务名称： mysql2\nmy.cnf配置： mysql.cnf\nroot帐号密码：\n存储： mysql2\n节点端口： 18307\n```\n![20200527_134404_99](image/20200527_134404_99.png)\n\n### 2.3 执行安装任务\n![20200527_134431_39](image/20200527_134431_39.png)\n\n### 2.4 查看部署结果\n![20200527_134453_28](image/20200527_134453_28.png)\n\n## 3. 连接测试\n```\n主机名/IP： 192.168.3.124\n用户： root\n密码：\n端口： 18307\n```\n![20200527_134628_14](image/20200527_134628_14.png)\n","date":"2021-07-19T06:44:32.334Z","updated":"2021-01-14T01:19:27.965Z","path":"cok-book/4.5.ccs-main-deploy-scene-example-soft-market.html","title":"","comments":1,"layout":"page","_id":"ckrac7xb0001mz8s66mrf1opx","content":"<h1>应用商店部署</h1>\n<h2 id=\"1-安装mysql公共组件\">1. 安装mysql公共组件</h2>\n<h2 id=\"1-1-新增mysql参数配置\">1.1 新增mysql参数配置</h2>\n<p><code>mysql.cnf</code>:</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">[mysqld]</span></span><br><span class=\"line\"><span class=\"meta\">symbolic-links</span>=<span class=\"string\">0</span></span><br><span class=\"line\"><span class=\"attr\">sql_mode</span>=<span class=\"string\">NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span></span><br><span class=\"line\"><span class=\"attr\">lower_case_table_names</span>=<span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"meta\">character-set-server</span>=<span class=\"string\">utf8</span></span><br><span class=\"line\"><span class=\"attr\">[client]</span></span><br><span class=\"line\"><span class=\"meta\">default-character-set</span>=<span class=\"string\">utf8</span></span><br><span class=\"line\"><span class=\"attr\">[mysql]</span></span><br><span class=\"line\"><span class=\"meta\">default-character-set</span>=<span class=\"string\">utf8</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200527_134123_97.png\" alt=\"20200527_134123_97\"></p>\n<h2 id=\"2-创建部署任务\">2. 创建部署任务</h2>\n<h3 id=\"2-1-选择MySQL公共组件\">2.1 选择MySQL公共组件</h3>\n<p><img src=\"image/20200526_145716_92.png\" alt=\"20200526_145716_92\"></p>\n<h3 id=\"2-2-设置部署参数\">2.2 设置部署参数</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">任务名称： mysql2</span><br><span class=\"line\">my.cnf配置： mysql.cnf</span><br><span class=\"line\">root帐号密码：</span><br><span class=\"line\">存储： mysql2</span><br><span class=\"line\">节点端口： 18307</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200527_134404_99.png\" alt=\"20200527_134404_99\"></p>\n<h3 id=\"2-3-执行安装任务\">2.3 执行安装任务</h3>\n<p><img src=\"image/20200527_134431_39.png\" alt=\"20200527_134431_39\"></p>\n<h3 id=\"2-4-查看部署结果\">2.4 查看部署结果</h3>\n<p><img src=\"image/20200527_134453_28.png\" alt=\"20200527_134453_28\"></p>\n<h2 id=\"3-连接测试\">3. 连接测试</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">主机名/IP： 192.168.3.124</span><br><span class=\"line\">用户： root</span><br><span class=\"line\">密码：</span><br><span class=\"line\">端口： 18307</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200527_134628_14.png\" alt=\"20200527_134628_14\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>应用商店部署</h1>\n<h2 id=\"1-安装mysql公共组件\">1. 安装mysql公共组件</h2>\n<h2 id=\"1-1-新增mysql参数配置\">1.1 新增mysql参数配置</h2>\n<p><code>mysql.cnf</code>:</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">[mysqld]</span></span><br><span class=\"line\"><span class=\"meta\">symbolic-links</span>=<span class=\"string\">0</span></span><br><span class=\"line\"><span class=\"attr\">sql_mode</span>=<span class=\"string\">NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span></span><br><span class=\"line\"><span class=\"attr\">lower_case_table_names</span>=<span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"meta\">character-set-server</span>=<span class=\"string\">utf8</span></span><br><span class=\"line\"><span class=\"attr\">[client]</span></span><br><span class=\"line\"><span class=\"meta\">default-character-set</span>=<span class=\"string\">utf8</span></span><br><span class=\"line\"><span class=\"attr\">[mysql]</span></span><br><span class=\"line\"><span class=\"meta\">default-character-set</span>=<span class=\"string\">utf8</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200527_134123_97.png\" alt=\"20200527_134123_97\"></p>\n<h2 id=\"2-创建部署任务\">2. 创建部署任务</h2>\n<h3 id=\"2-1-选择MySQL公共组件\">2.1 选择MySQL公共组件</h3>\n<p><img src=\"image/20200526_145716_92.png\" alt=\"20200526_145716_92\"></p>\n<h3 id=\"2-2-设置部署参数\">2.2 设置部署参数</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">任务名称： mysql2</span><br><span class=\"line\">my.cnf配置： mysql.cnf</span><br><span class=\"line\">root帐号密码：</span><br><span class=\"line\">存储： mysql2</span><br><span class=\"line\">节点端口： 18307</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200527_134404_99.png\" alt=\"20200527_134404_99\"></p>\n<h3 id=\"2-3-执行安装任务\">2.3 执行安装任务</h3>\n<p><img src=\"image/20200527_134431_39.png\" alt=\"20200527_134431_39\"></p>\n<h3 id=\"2-4-查看部署结果\">2.4 查看部署结果</h3>\n<p><img src=\"image/20200527_134453_28.png\" alt=\"20200527_134453_28\"></p>\n<h2 id=\"3-连接测试\">3. 连接测试</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">主机名/IP： 192.168.3.124</span><br><span class=\"line\">用户： root</span><br><span class=\"line\">密码：</span><br><span class=\"line\">端口： 18307</span><br></pre></td></tr></table></figure>\n<p><img src=\"image/20200527_134628_14.png\" alt=\"20200527_134628_14\"></p>\n"},{"_content":"# 容器云平台主要部署场景示例\n\n[4.1.SNV下载MAVEN项目代码并打包部署](4.1.ccs-main-deploy-scene-example-snv-maven)\n\n[4.2.上传Jar包并打包部署](4.2.ccs-main-deploy-scene-example-upload-jar)\n\n[4.3.直接部署Docker镜像](4.3.ccs-main-deploy-scene-example-docker-image)\n\n[4.4.NPM打包并部署](4.4.ccs-main-deploy-scene-example-npm)\n\n[4.5.应用商店部署](4.5.ccs-main-deploy-scene-example-soft-market)\n","source":"cok-book/4.ccs-main-deploy-scene-example.md","raw":"# 容器云平台主要部署场景示例\n\n[4.1.SNV下载MAVEN项目代码并打包部署](4.1.ccs-main-deploy-scene-example-snv-maven)\n\n[4.2.上传Jar包并打包部署](4.2.ccs-main-deploy-scene-example-upload-jar)\n\n[4.3.直接部署Docker镜像](4.3.ccs-main-deploy-scene-example-docker-image)\n\n[4.4.NPM打包并部署](4.4.ccs-main-deploy-scene-example-npm)\n\n[4.5.应用商店部署](4.5.ccs-main-deploy-scene-example-soft-market)\n","date":"2021-07-19T06:46:51.615Z","updated":"2021-07-19T06:46:51.615Z","path":"cok-book/4.ccs-main-deploy-scene-example.html","title":"","comments":1,"layout":"page","_id":"ckrac7xb0001nz8s6co9gdwgs","content":"<h1>容器云平台主要部署场景示例</h1>\n<p><a href=\"4.1.ccs-main-deploy-scene-example-snv-maven\">4.1.SNV下载MAVEN项目代码并打包部署</a></p>\n<p><a href=\"4.2.ccs-main-deploy-scene-example-upload-jar\">4.2.上传Jar包并打包部署</a></p>\n<p><a href=\"4.3.ccs-main-deploy-scene-example-docker-image\">4.3.直接部署Docker镜像</a></p>\n<p><a href=\"4.4.ccs-main-deploy-scene-example-npm\">4.4.NPM打包并部署</a></p>\n<p><a href=\"4.5.ccs-main-deploy-scene-example-soft-market\">4.5.应用商店部署</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>容器云平台主要部署场景示例</h1>\n<p><a href=\"4.1.ccs-main-deploy-scene-example-snv-maven\">4.1.SNV下载MAVEN项目代码并打包部署</a></p>\n<p><a href=\"4.2.ccs-main-deploy-scene-example-upload-jar\">4.2.上传Jar包并打包部署</a></p>\n<p><a href=\"4.3.ccs-main-deploy-scene-example-docker-image\">4.3.直接部署Docker镜像</a></p>\n<p><a href=\"4.4.ccs-main-deploy-scene-example-npm\">4.4.NPM打包并部署</a></p>\n<p><a href=\"4.5.ccs-main-deploy-scene-example-soft-market\">4.5.应用商店部署</a></p>\n"},{"_content":"# 5.1.监控\n","source":"cok-book/5.1.ccs-other-functions-monitor.md","raw":"# 5.1.监控\n","date":"2021-07-19T06:44:32.240Z","updated":"2021-01-14T01:19:27.988Z","path":"cok-book/5.1.ccs-other-functions-monitor.html","title":"","comments":1,"layout":"page","_id":"ckrac7xb2001oz8s6c2im1vjh","content":"<h1>5.1.监控</h1>\n","site":{"data":{}},"excerpt":"","more":"<h1>5.1.监控</h1>\n"},{"_content":"# 5.2.日志\n\n![20200527_182815_35](image/20200527_182815_35.png) \n","source":"cok-book/5.2.ccs-other-functions-logs.md","raw":"# 5.2.日志\n\n![20200527_182815_35](image/20200527_182815_35.png) \n","date":"2021-07-19T06:44:31.386Z","updated":"2021-01-14T01:19:27.991Z","path":"cok-book/5.2.ccs-other-functions-logs.html","title":"","comments":1,"layout":"page","_id":"ckrac7xb3001pz8s659sgaozl","content":"<h1>5.2.日志</h1>\n<p><img src=\"image/20200527_182815_35.png\" alt=\"20200527_182815_35\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>5.2.日志</h1>\n<p><img src=\"image/20200527_182815_35.png\" alt=\"20200527_182815_35\"></p>\n"},{"_content":"# 5.3.版本管理\n\n![20200527_142056_12](image/20200527_142056_12.png)\n","source":"cok-book/5.3.ccs-other-functions-version-ctl.md","raw":"# 5.3.版本管理\n\n![20200527_142056_12](image/20200527_142056_12.png)\n","date":"2021-07-19T06:44:32.233Z","updated":"2021-01-14T01:19:27.993Z","path":"cok-book/5.3.ccs-other-functions-version-ctl.html","title":"","comments":1,"layout":"page","_id":"ckrac7xb4001qz8s6fldy7uvw","content":"<h1>5.3.版本管理</h1>\n<p><img src=\"image/20200527_142056_12.png\" alt=\"20200527_142056_12\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>5.3.版本管理</h1>\n<p><img src=\"image/20200527_142056_12.png\" alt=\"20200527_142056_12\"></p>\n"},{"_content":"# 5.容器云平台其它功能介绍\n\n[5.1.统一监控](5.1.ccs-other-functions-monitor)\n\n[5.2.统一日志](5.2.ccs-other-functions-logs)\n\n[5.3.版本管理](5.3.ccs-other-functions-version-ctl)\n","source":"cok-book/5.ccs-other-functions.md","raw":"# 5.容器云平台其它功能介绍\n\n[5.1.统一监控](5.1.ccs-other-functions-monitor)\n\n[5.2.统一日志](5.2.ccs-other-functions-logs)\n\n[5.3.版本管理](5.3.ccs-other-functions-version-ctl)\n","date":"2021-07-19T06:46:59.285Z","updated":"2021-07-19T06:46:59.285Z","path":"cok-book/5.ccs-other-functions.html","title":"","comments":1,"layout":"page","_id":"ckrac7xb4001rz8s6568hgrh2","content":"<h1>5.容器云平台其它功能介绍</h1>\n<p><a href=\"5.1.ccs-other-functions-monitor\">5.1.统一监控</a></p>\n<p><a href=\"5.2.ccs-other-functions-logs\">5.2.统一日志</a></p>\n<p><a href=\"5.3.ccs-other-functions-version-ctl\">5.3.版本管理</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>5.容器云平台其它功能介绍</h1>\n<p><a href=\"5.1.ccs-other-functions-monitor\">5.1.统一监控</a></p>\n<p><a href=\"5.2.ccs-other-functions-logs\">5.2.统一日志</a></p>\n<p><a href=\"5.3.ccs-other-functions-version-ctl\">5.3.版本管理</a></p>\n"},{"_content":"# 项目实施容器化上云要点说明\n\n## 1. K8S中的共享存储\n- 如项目中需要用到共享存储（如：文件上传），则需要申请共享存储\n- 在k8s中一般不用服务器的本地存储（因为Pod可能随机的飘在多个服务器，且本地存储在多个pod不可以共享）\n\n![20200526_232432_99](image/20200526_232432_99.png)\n\n\n## 2. 资源需求\n如果客服要求提供容器上云的资源需求（CPU/内存/存储）估算，可以先估算每个服务要启动几个Pod，再把所有Pod的内存/CPU估算加起来(CPU估算一般按照性能测试时候的CPU来估算)，比如下表：\n\n![20200529_100221_46](image/20200529_100221_46.png) \n\n则大致估计这个项目需要的CPU内存资源为18C23G，客户会按照这个需求给我们分配K8S资源（具体的独立的还是共享的K8S资源，要看现场情况）\n\n## 3. 内存/CPU限制\n- 如果一个项目单独用一套k8s，不建议设置服务的CPU、内存限制\n- 对于Java容器，`建议设置Pod的内存限制`，`不设置CPU限制`（一是由于设置CPU限制后可能导致启动很慢，二是大多数情况下程序都是经过了性能和疲劳测试，部署多个服务的时候每个服务的CPU的波动可能比较大，不好去做CPU的限制）\n- <font color=\"red\">坑</font>：对于SpringBoot项目，如果设置了CPU限制，且设置的较小(如100m)，则可能导致服务很久起不来。（如果配置了监控检查，还可能导致启动超时容器Crash）\n- 如果是Java程序，Docker镜像文件中一定要把JVM的启动参数通过环境变量的方式放出来，以支持测试/生产环境配置不同的JVM内存参数\n- <font color=\"red\">坑</font>：JDK 8一定要配置MaxMetaspaceSize，避免内存持续增长（某些JDK版本可能存在内存溢出问题，也需要特别注意）\n\n\n## 4. 哪些项目适合上K8S，哪些不适合\n### 不适合上K8S的场景\n- 如果项目本身比较简单，比如只有一个war包+数据库，则建议直接部署在服务器（因为部署在K8S需要一定的学习成本和后期的运维成本）（除非客户强制要求所有业务上容器，且有现成的K8S集群可用）\n- 如果某个模块的业务与IP地址绑定，则该模板不能用容器，因为容器的IP地址是变化的\n\n### 适合上K8S的场景\n- 项目部署的包比较多（8个以上），且发版比较频繁\n- 需要用到K8S的健康检查、弹性扩展、统一日志、统一监控等技术\n\n## 5. K8S中的会话保持\n- 一般k8s中部署的服务都是无状态的\n- 如果一个服务部署了多个Pod，且服务需要会话保持，可以用Ingress中的会话保持技术实现\n\n## 6. 镜像文件的制作\n- 尽量制作较小的镜像（基于alpine或busybox基础来制作镜像）\n- 尽量精简Docker镜像（1.同一个文件/文件夹尽量不要在多条指令中操作；2.尽量用更少的指令;3.多条RUN指令建议合并成一行）\n- 尽量不要基于centos等基础基础镜像来制作（除非有某些特殊需求）\n","source":"cok-book/6.deploy-main-points.md","raw":"# 项目实施容器化上云要点说明\n\n## 1. K8S中的共享存储\n- 如项目中需要用到共享存储（如：文件上传），则需要申请共享存储\n- 在k8s中一般不用服务器的本地存储（因为Pod可能随机的飘在多个服务器，且本地存储在多个pod不可以共享）\n\n![20200526_232432_99](image/20200526_232432_99.png)\n\n\n## 2. 资源需求\n如果客服要求提供容器上云的资源需求（CPU/内存/存储）估算，可以先估算每个服务要启动几个Pod，再把所有Pod的内存/CPU估算加起来(CPU估算一般按照性能测试时候的CPU来估算)，比如下表：\n\n![20200529_100221_46](image/20200529_100221_46.png) \n\n则大致估计这个项目需要的CPU内存资源为18C23G，客户会按照这个需求给我们分配K8S资源（具体的独立的还是共享的K8S资源，要看现场情况）\n\n## 3. 内存/CPU限制\n- 如果一个项目单独用一套k8s，不建议设置服务的CPU、内存限制\n- 对于Java容器，`建议设置Pod的内存限制`，`不设置CPU限制`（一是由于设置CPU限制后可能导致启动很慢，二是大多数情况下程序都是经过了性能和疲劳测试，部署多个服务的时候每个服务的CPU的波动可能比较大，不好去做CPU的限制）\n- <font color=\"red\">坑</font>：对于SpringBoot项目，如果设置了CPU限制，且设置的较小(如100m)，则可能导致服务很久起不来。（如果配置了监控检查，还可能导致启动超时容器Crash）\n- 如果是Java程序，Docker镜像文件中一定要把JVM的启动参数通过环境变量的方式放出来，以支持测试/生产环境配置不同的JVM内存参数\n- <font color=\"red\">坑</font>：JDK 8一定要配置MaxMetaspaceSize，避免内存持续增长（某些JDK版本可能存在内存溢出问题，也需要特别注意）\n\n\n## 4. 哪些项目适合上K8S，哪些不适合\n### 不适合上K8S的场景\n- 如果项目本身比较简单，比如只有一个war包+数据库，则建议直接部署在服务器（因为部署在K8S需要一定的学习成本和后期的运维成本）（除非客户强制要求所有业务上容器，且有现成的K8S集群可用）\n- 如果某个模块的业务与IP地址绑定，则该模板不能用容器，因为容器的IP地址是变化的\n\n### 适合上K8S的场景\n- 项目部署的包比较多（8个以上），且发版比较频繁\n- 需要用到K8S的健康检查、弹性扩展、统一日志、统一监控等技术\n\n## 5. K8S中的会话保持\n- 一般k8s中部署的服务都是无状态的\n- 如果一个服务部署了多个Pod，且服务需要会话保持，可以用Ingress中的会话保持技术实现\n\n## 6. 镜像文件的制作\n- 尽量制作较小的镜像（基于alpine或busybox基础来制作镜像）\n- 尽量精简Docker镜像（1.同一个文件/文件夹尽量不要在多条指令中操作；2.尽量用更少的指令;3.多条RUN指令建议合并成一行）\n- 尽量不要基于centos等基础基础镜像来制作（除非有某些特殊需求）\n","date":"2021-07-19T06:44:31.385Z","updated":"2021-01-14T01:19:27.723Z","path":"cok-book/6.deploy-main-points.html","title":"","comments":1,"layout":"page","_id":"ckrac7xdv001sz8s6g6eoc8zz","content":"<h1>项目实施容器化上云要点说明</h1>\n<h2 id=\"1-K8S中的共享存储\">1. K8S中的共享存储</h2>\n<ul>\n<li>如项目中需要用到共享存储（如：文件上传），则需要申请共享存储</li>\n<li>在k8s中一般不用服务器的本地存储（因为Pod可能随机的飘在多个服务器，且本地存储在多个pod不可以共享）</li>\n</ul>\n<p><img src=\"image/20200526_232432_99.png\" alt=\"20200526_232432_99\"></p>\n<h2 id=\"2-资源需求\">2. 资源需求</h2>\n<p>如果客服要求提供容器上云的资源需求（CPU/内存/存储）估算，可以先估算每个服务要启动几个Pod，再把所有Pod的内存/CPU估算加起来(CPU估算一般按照性能测试时候的CPU来估算)，比如下表：</p>\n<p><img src=\"image/20200529_100221_46.png\" alt=\"20200529_100221_46\"></p>\n<p>则大致估计这个项目需要的CPU内存资源为18C23G，客户会按照这个需求给我们分配K8S资源（具体的独立的还是共享的K8S资源，要看现场情况）</p>\n<h2 id=\"3-内存-CPU限制\">3. 内存/CPU限制</h2>\n<ul>\n<li>如果一个项目单独用一套k8s，不建议设置服务的CPU、内存限制</li>\n<li>对于Java容器，<code>建议设置Pod的内存限制</code>，<code>不设置CPU限制</code>（一是由于设置CPU限制后可能导致启动很慢，二是大多数情况下程序都是经过了性能和疲劳测试，部署多个服务的时候每个服务的CPU的波动可能比较大，不好去做CPU的限制）</li>\n<li><font color=\"red\">坑</font>：对于SpringBoot项目，如果设置了CPU限制，且设置的较小(如100m)，则可能导致服务很久起不来。（如果配置了监控检查，还可能导致启动超时容器Crash）</li>\n<li>如果是Java程序，Docker镜像文件中一定要把JVM的启动参数通过环境变量的方式放出来，以支持测试/生产环境配置不同的JVM内存参数</li>\n<li><font color=\"red\">坑</font>：JDK 8一定要配置MaxMetaspaceSize，避免内存持续增长（某些JDK版本可能存在内存溢出问题，也需要特别注意）</li>\n</ul>\n<h2 id=\"4-哪些项目适合上K8S，哪些不适合\">4. 哪些项目适合上K8S，哪些不适合</h2>\n<h3 id=\"不适合上K8S的场景\">不适合上K8S的场景</h3>\n<ul>\n<li>如果项目本身比较简单，比如只有一个war包+数据库，则建议直接部署在服务器（因为部署在K8S需要一定的学习成本和后期的运维成本）（除非客户强制要求所有业务上容器，且有现成的K8S集群可用）</li>\n<li>如果某个模块的业务与IP地址绑定，则该模板不能用容器，因为容器的IP地址是变化的</li>\n</ul>\n<h3 id=\"适合上K8S的场景\">适合上K8S的场景</h3>\n<ul>\n<li>项目部署的包比较多（8个以上），且发版比较频繁</li>\n<li>需要用到K8S的健康检查、弹性扩展、统一日志、统一监控等技术</li>\n</ul>\n<h2 id=\"5-K8S中的会话保持\">5. K8S中的会话保持</h2>\n<ul>\n<li>一般k8s中部署的服务都是无状态的</li>\n<li>如果一个服务部署了多个Pod，且服务需要会话保持，可以用Ingress中的会话保持技术实现</li>\n</ul>\n<h2 id=\"6-镜像文件的制作\">6. 镜像文件的制作</h2>\n<ul>\n<li>尽量制作较小的镜像（基于alpine或busybox基础来制作镜像）</li>\n<li>尽量精简Docker镜像（1.同一个文件/文件夹尽量不要在多条指令中操作；2.尽量用更少的指令;3.多条RUN指令建议合并成一行）</li>\n<li>尽量不要基于centos等基础基础镜像来制作（除非有某些特殊需求）</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>项目实施容器化上云要点说明</h1>\n<h2 id=\"1-K8S中的共享存储\">1. K8S中的共享存储</h2>\n<ul>\n<li>如项目中需要用到共享存储（如：文件上传），则需要申请共享存储</li>\n<li>在k8s中一般不用服务器的本地存储（因为Pod可能随机的飘在多个服务器，且本地存储在多个pod不可以共享）</li>\n</ul>\n<p><img src=\"image/20200526_232432_99.png\" alt=\"20200526_232432_99\"></p>\n<h2 id=\"2-资源需求\">2. 资源需求</h2>\n<p>如果客服要求提供容器上云的资源需求（CPU/内存/存储）估算，可以先估算每个服务要启动几个Pod，再把所有Pod的内存/CPU估算加起来(CPU估算一般按照性能测试时候的CPU来估算)，比如下表：</p>\n<p><img src=\"image/20200529_100221_46.png\" alt=\"20200529_100221_46\"></p>\n<p>则大致估计这个项目需要的CPU内存资源为18C23G，客户会按照这个需求给我们分配K8S资源（具体的独立的还是共享的K8S资源，要看现场情况）</p>\n<h2 id=\"3-内存-CPU限制\">3. 内存/CPU限制</h2>\n<ul>\n<li>如果一个项目单独用一套k8s，不建议设置服务的CPU、内存限制</li>\n<li>对于Java容器，<code>建议设置Pod的内存限制</code>，<code>不设置CPU限制</code>（一是由于设置CPU限制后可能导致启动很慢，二是大多数情况下程序都是经过了性能和疲劳测试，部署多个服务的时候每个服务的CPU的波动可能比较大，不好去做CPU的限制）</li>\n<li><font color=\"red\">坑</font>：对于SpringBoot项目，如果设置了CPU限制，且设置的较小(如100m)，则可能导致服务很久起不来。（如果配置了监控检查，还可能导致启动超时容器Crash）</li>\n<li>如果是Java程序，Docker镜像文件中一定要把JVM的启动参数通过环境变量的方式放出来，以支持测试/生产环境配置不同的JVM内存参数</li>\n<li><font color=\"red\">坑</font>：JDK 8一定要配置MaxMetaspaceSize，避免内存持续增长（某些JDK版本可能存在内存溢出问题，也需要特别注意）</li>\n</ul>\n<h2 id=\"4-哪些项目适合上K8S，哪些不适合\">4. 哪些项目适合上K8S，哪些不适合</h2>\n<h3 id=\"不适合上K8S的场景\">不适合上K8S的场景</h3>\n<ul>\n<li>如果项目本身比较简单，比如只有一个war包+数据库，则建议直接部署在服务器（因为部署在K8S需要一定的学习成本和后期的运维成本）（除非客户强制要求所有业务上容器，且有现成的K8S集群可用）</li>\n<li>如果某个模块的业务与IP地址绑定，则该模板不能用容器，因为容器的IP地址是变化的</li>\n</ul>\n<h3 id=\"适合上K8S的场景\">适合上K8S的场景</h3>\n<ul>\n<li>项目部署的包比较多（8个以上），且发版比较频繁</li>\n<li>需要用到K8S的健康检查、弹性扩展、统一日志、统一监控等技术</li>\n</ul>\n<h2 id=\"5-K8S中的会话保持\">5. K8S中的会话保持</h2>\n<ul>\n<li>一般k8s中部署的服务都是无状态的</li>\n<li>如果一个服务部署了多个Pod，且服务需要会话保持，可以用Ingress中的会话保持技术实现</li>\n</ul>\n<h2 id=\"6-镜像文件的制作\">6. 镜像文件的制作</h2>\n<ul>\n<li>尽量制作较小的镜像（基于alpine或busybox基础来制作镜像）</li>\n<li>尽量精简Docker镜像（1.同一个文件/文件夹尽量不要在多条指令中操作；2.尽量用更少的指令;3.多条RUN指令建议合并成一行）</li>\n<li>尽量不要基于centos等基础基础镜像来制作（除非有某些特殊需求）</li>\n</ul>\n"},{"_content":"\n# 容器化上云培训\n\n* [Introduction](README)\n* [1.容器云平台架构](1.ccs-infrustructure)\n* [2.容器云平台架构能做什么](2.what-ccs-todo)\n* [3.项目实战](3.project-practice)\n    * [3.1.部署在docker中](3.1.project-to-docker)\n    * [3.2.部署在k8s中](3.2.project-to-k8s)\n    * [3.3.通过容器云平台部署在k8s中](3.3.project-to-ccs)\n* [4.容器云平台主要部署场景示例](4.ccs-main-deploy-scene-example)\n    * [4.1.SVN下载MAVEN项目代码并打包部署](4.1.ccs-main-deploy-scene-example-snv-maven)\n    * [4.2.上传Jar包并打包部署](4.2.ccs-main-deploy-scene-example-upload-jar)\n    * [4.3.直接部署Docker镜像](4.3.ccs-main-deploy-scene-example-docker-image)\n    * [4.4.NPM打包并部署](4.4.ccs-main-deploy-scene-example-npm)\n    * [4.5.应用商店部署](4.5.ccs-main-deploy-scene-example-soft-market)\n* [5.容器云平台其它功能介绍](5.ccs-other-functions)\n    * [5.1.统一监控](5.1.ccs-other-functions-monitor)\n    * [5.2.统一日志](5.2.ccs-other-functions-logs)\n    * [5.3.版本管理](5.3.ccs-other-functions-version-ctl)\n* [6.项目实施容器化上云要点说明](6.deploy-main-points)\n","source":"cok-book/README.md","raw":"\n# 容器化上云培训\n\n* [Introduction](README)\n* [1.容器云平台架构](1.ccs-infrustructure)\n* [2.容器云平台架构能做什么](2.what-ccs-todo)\n* [3.项目实战](3.project-practice)\n    * [3.1.部署在docker中](3.1.project-to-docker)\n    * [3.2.部署在k8s中](3.2.project-to-k8s)\n    * [3.3.通过容器云平台部署在k8s中](3.3.project-to-ccs)\n* [4.容器云平台主要部署场景示例](4.ccs-main-deploy-scene-example)\n    * [4.1.SVN下载MAVEN项目代码并打包部署](4.1.ccs-main-deploy-scene-example-snv-maven)\n    * [4.2.上传Jar包并打包部署](4.2.ccs-main-deploy-scene-example-upload-jar)\n    * [4.3.直接部署Docker镜像](4.3.ccs-main-deploy-scene-example-docker-image)\n    * [4.4.NPM打包并部署](4.4.ccs-main-deploy-scene-example-npm)\n    * [4.5.应用商店部署](4.5.ccs-main-deploy-scene-example-soft-market)\n* [5.容器云平台其它功能介绍](5.ccs-other-functions)\n    * [5.1.统一监控](5.1.ccs-other-functions-monitor)\n    * [5.2.统一日志](5.2.ccs-other-functions-logs)\n    * [5.3.版本管理](5.3.ccs-other-functions-version-ctl)\n* [6.项目实施容器化上云要点说明](6.deploy-main-points)\n","date":"2021-07-19T06:48:08.606Z","updated":"2021-07-19T06:48:08.606Z","path":"cok-book/README.html","title":"","comments":1,"layout":"page","_id":"ckrac7xdw001tz8s63upefyk0","content":"<h1>容器化上云培训</h1>\n<ul>\n<li><a href=\"README\">Introduction</a></li>\n<li><a href=\"1.ccs-infrustructure\">1.容器云平台架构</a></li>\n<li><a href=\"2.what-ccs-todo\">2.容器云平台架构能做什么</a></li>\n<li><a href=\"3.project-practice\">3.项目实战</a>\n<ul>\n<li><a href=\"3.1.project-to-docker\">3.1.部署在docker中</a></li>\n<li><a href=\"3.2.project-to-k8s\">3.2.部署在k8s中</a></li>\n<li><a href=\"3.3.project-to-ccs\">3.3.通过容器云平台部署在k8s中</a></li>\n</ul>\n</li>\n<li><a href=\"4.ccs-main-deploy-scene-example\">4.容器云平台主要部署场景示例</a>\n<ul>\n<li><a href=\"4.1.ccs-main-deploy-scene-example-snv-maven\">4.1.SVN下载MAVEN项目代码并打包部署</a></li>\n<li><a href=\"4.2.ccs-main-deploy-scene-example-upload-jar\">4.2.上传Jar包并打包部署</a></li>\n<li><a href=\"4.3.ccs-main-deploy-scene-example-docker-image\">4.3.直接部署Docker镜像</a></li>\n<li><a href=\"4.4.ccs-main-deploy-scene-example-npm\">4.4.NPM打包并部署</a></li>\n<li><a href=\"4.5.ccs-main-deploy-scene-example-soft-market\">4.5.应用商店部署</a></li>\n</ul>\n</li>\n<li><a href=\"5.ccs-other-functions\">5.容器云平台其它功能介绍</a>\n<ul>\n<li><a href=\"5.1.ccs-other-functions-monitor\">5.1.统一监控</a></li>\n<li><a href=\"5.2.ccs-other-functions-logs\">5.2.统一日志</a></li>\n<li><a href=\"5.3.ccs-other-functions-version-ctl\">5.3.版本管理</a></li>\n</ul>\n</li>\n<li><a href=\"6.deploy-main-points\">6.项目实施容器化上云要点说明</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>容器化上云培训</h1>\n<ul>\n<li><a href=\"README\">Introduction</a></li>\n<li><a href=\"1.ccs-infrustructure\">1.容器云平台架构</a></li>\n<li><a href=\"2.what-ccs-todo\">2.容器云平台架构能做什么</a></li>\n<li><a href=\"3.project-practice\">3.项目实战</a>\n<ul>\n<li><a href=\"3.1.project-to-docker\">3.1.部署在docker中</a></li>\n<li><a href=\"3.2.project-to-k8s\">3.2.部署在k8s中</a></li>\n<li><a href=\"3.3.project-to-ccs\">3.3.通过容器云平台部署在k8s中</a></li>\n</ul>\n</li>\n<li><a href=\"4.ccs-main-deploy-scene-example\">4.容器云平台主要部署场景示例</a>\n<ul>\n<li><a href=\"4.1.ccs-main-deploy-scene-example-snv-maven\">4.1.SVN下载MAVEN项目代码并打包部署</a></li>\n<li><a href=\"4.2.ccs-main-deploy-scene-example-upload-jar\">4.2.上传Jar包并打包部署</a></li>\n<li><a href=\"4.3.ccs-main-deploy-scene-example-docker-image\">4.3.直接部署Docker镜像</a></li>\n<li><a href=\"4.4.ccs-main-deploy-scene-example-npm\">4.4.NPM打包并部署</a></li>\n<li><a href=\"4.5.ccs-main-deploy-scene-example-soft-market\">4.5.应用商店部署</a></li>\n</ul>\n</li>\n<li><a href=\"5.ccs-other-functions\">5.容器云平台其它功能介绍</a>\n<ul>\n<li><a href=\"5.1.ccs-other-functions-monitor\">5.1.统一监控</a></li>\n<li><a href=\"5.2.ccs-other-functions-logs\">5.2.统一日志</a></li>\n<li><a href=\"5.3.ccs-other-functions-version-ctl\">5.3.版本管理</a></li>\n</ul>\n</li>\n<li><a href=\"6.deploy-main-points\">6.项目实施容器化上云要点说明</a></li>\n</ul>\n"},{"_content":"# 容器化上云培训\n\n* [Introduction](README.md)\n* [1.容器云平台架构](1.ccs-infrustructure.md)\n* [2.容器云平台架构能做什么](2.what-ccs-todo.md)\n* [3.项目实战](3.project-practice.md)\n    * [3.1.部署在docker中](3.1.project-to-docker.md)\n    * [3.2.部署在k8s中](3.2.project-to-k8s.md)\n    * [3.3.通过容器云平台部署在k8s中](3.3.project-to-ccs.md)\n* [4.容器云平台主要部署场景示例](4.ccs-main-deploy-scene-example.md)\n    * [4.1.SVN下载MAVEN项目代码并打包部署](4.1.ccs-main-deploy-scene-example-snv-maven.md)\n    * [4.2.上传Jar包并打包部署](4.2.ccs-main-deploy-scene-example-upload-jar.md)\n    * [4.3.直接部署Docker镜像](4.3.ccs-main-deploy-scene-example-docker-image.md)\n    * [4.4.NPM打包并部署](4.4.ccs-main-deploy-scene-example-npm.md)\n    * [4.5.应用商店部署](4.5.ccs-main-deploy-scene-example-soft-market.md)\n* [5.容器云平台其它功能介绍](5.ccs-other-functions.md)\n    * [5.1.统一监控](5.1.ccs-other-functions-monitor.md)\n    * [5.2.统一日志](5.2.ccs-other-functions-logs.md)\n    * [5.3.版本管理](5.3.ccs-other-functions-version-ctl.md)\n* [6.项目实施容器化上云要点说明](6.deploy-main-points.md)\n","source":"cok-book/SUMMARY.md","raw":"# 容器化上云培训\n\n* [Introduction](README.md)\n* [1.容器云平台架构](1.ccs-infrustructure.md)\n* [2.容器云平台架构能做什么](2.what-ccs-todo.md)\n* [3.项目实战](3.project-practice.md)\n    * [3.1.部署在docker中](3.1.project-to-docker.md)\n    * [3.2.部署在k8s中](3.2.project-to-k8s.md)\n    * [3.3.通过容器云平台部署在k8s中](3.3.project-to-ccs.md)\n* [4.容器云平台主要部署场景示例](4.ccs-main-deploy-scene-example.md)\n    * [4.1.SVN下载MAVEN项目代码并打包部署](4.1.ccs-main-deploy-scene-example-snv-maven.md)\n    * [4.2.上传Jar包并打包部署](4.2.ccs-main-deploy-scene-example-upload-jar.md)\n    * [4.3.直接部署Docker镜像](4.3.ccs-main-deploy-scene-example-docker-image.md)\n    * [4.4.NPM打包并部署](4.4.ccs-main-deploy-scene-example-npm.md)\n    * [4.5.应用商店部署](4.5.ccs-main-deploy-scene-example-soft-market.md)\n* [5.容器云平台其它功能介绍](5.ccs-other-functions.md)\n    * [5.1.统一监控](5.1.ccs-other-functions-monitor.md)\n    * [5.2.统一日志](5.2.ccs-other-functions-logs.md)\n    * [5.3.版本管理](5.3.ccs-other-functions-version-ctl.md)\n* [6.项目实施容器化上云要点说明](6.deploy-main-points.md)\n","date":"2021-07-19T06:44:31.373Z","updated":"2021-01-14T01:19:27.996Z","path":"cok-book/SUMMARY.html","title":"","comments":1,"layout":"page","_id":"ckrac7xdw001uz8s65mw97kvh","content":"<h1>容器化上云培训</h1>\n<ul>\n<li><a href=\"README.md\">Introduction</a></li>\n<li><a href=\"1.ccs-infrustructure.md\">1.容器云平台架构</a></li>\n<li><a href=\"2.what-ccs-todo.md\">2.容器云平台架构能做什么</a></li>\n<li><a href=\"3.project-practice.md\">3.项目实战</a>\n<ul>\n<li><a href=\"3.1.project-to-docker.md\">3.1.部署在docker中</a></li>\n<li><a href=\"3.2.project-to-k8s.md\">3.2.部署在k8s中</a></li>\n<li><a href=\"3.3.project-to-ccs.md\">3.3.通过容器云平台部署在k8s中</a></li>\n</ul>\n</li>\n<li><a href=\"4.ccs-main-deploy-scene-example.md\">4.容器云平台主要部署场景示例</a>\n<ul>\n<li><a href=\"4.1.ccs-main-deploy-scene-example-snv-maven.md\">4.1.SVN下载MAVEN项目代码并打包部署</a></li>\n<li><a href=\"4.2.ccs-main-deploy-scene-example-upload-jar.md\">4.2.上传Jar包并打包部署</a></li>\n<li><a href=\"4.3.ccs-main-deploy-scene-example-docker-image.md\">4.3.直接部署Docker镜像</a></li>\n<li><a href=\"4.4.ccs-main-deploy-scene-example-npm.md\">4.4.NPM打包并部署</a></li>\n<li><a href=\"4.5.ccs-main-deploy-scene-example-soft-market.md\">4.5.应用商店部署</a></li>\n</ul>\n</li>\n<li><a href=\"5.ccs-other-functions.md\">5.容器云平台其它功能介绍</a>\n<ul>\n<li><a href=\"5.1.ccs-other-functions-monitor.md\">5.1.统一监控</a></li>\n<li><a href=\"5.2.ccs-other-functions-logs.md\">5.2.统一日志</a></li>\n<li><a href=\"5.3.ccs-other-functions-version-ctl.md\">5.3.版本管理</a></li>\n</ul>\n</li>\n<li><a href=\"6.deploy-main-points.md\">6.项目实施容器化上云要点说明</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>容器化上云培训</h1>\n<ul>\n<li><a href=\"README.md\">Introduction</a></li>\n<li><a href=\"1.ccs-infrustructure.md\">1.容器云平台架构</a></li>\n<li><a href=\"2.what-ccs-todo.md\">2.容器云平台架构能做什么</a></li>\n<li><a href=\"3.project-practice.md\">3.项目实战</a>\n<ul>\n<li><a href=\"3.1.project-to-docker.md\">3.1.部署在docker中</a></li>\n<li><a href=\"3.2.project-to-k8s.md\">3.2.部署在k8s中</a></li>\n<li><a href=\"3.3.project-to-ccs.md\">3.3.通过容器云平台部署在k8s中</a></li>\n</ul>\n</li>\n<li><a href=\"4.ccs-main-deploy-scene-example.md\">4.容器云平台主要部署场景示例</a>\n<ul>\n<li><a href=\"4.1.ccs-main-deploy-scene-example-snv-maven.md\">4.1.SVN下载MAVEN项目代码并打包部署</a></li>\n<li><a href=\"4.2.ccs-main-deploy-scene-example-upload-jar.md\">4.2.上传Jar包并打包部署</a></li>\n<li><a href=\"4.3.ccs-main-deploy-scene-example-docker-image.md\">4.3.直接部署Docker镜像</a></li>\n<li><a href=\"4.4.ccs-main-deploy-scene-example-npm.md\">4.4.NPM打包并部署</a></li>\n<li><a href=\"4.5.ccs-main-deploy-scene-example-soft-market.md\">4.5.应用商店部署</a></li>\n</ul>\n</li>\n<li><a href=\"5.ccs-other-functions.md\">5.容器云平台其它功能介绍</a>\n<ul>\n<li><a href=\"5.1.ccs-other-functions-monitor.md\">5.1.统一监控</a></li>\n<li><a href=\"5.2.ccs-other-functions-logs.md\">5.2.统一日志</a></li>\n<li><a href=\"5.3.ccs-other-functions-version-ctl.md\">5.3.版本管理</a></li>\n</ul>\n</li>\n<li><a href=\"6.deploy-main-points.md\">6.项目实施容器化上云要点说明</a></li>\n</ul>\n"}],"Post":[{"title":"20210719blog","date":"2021-07-19T07:32:23.000Z","_content":"#      自   嘲","source":"_posts/20210719blog.md","raw":"---\ntitle: 20210719blog\ndate: 2021-07-19 15:32:23\ntags:\n---\n#      自   嘲","slug":"20210719blog","published":1,"updated":"2021-07-19T07:33:45.725Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckrac7wvf0001z8s6b95ofuyn","content":"<h1>自   嘲</h1>\n","site":{"data":{}},"excerpt":"","more":"<h1>自   嘲</h1>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[],"Tag":[]}}